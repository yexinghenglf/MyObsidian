<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[Study]]></title><description><![CDATA[Obsidian digital garden]]></description><link>http://github.com/dylang/node-rss</link><image><url>lib\media\favicon.png</url><title>Study</title><link></link></image><generator>Webpage HTML Export plugin for Obsidian</generator><lastBuildDate>Tue, 19 Mar 2024 12:41:47 GMT</lastBuildDate><atom:link href="lib\rss.xml" rel="self" type="application/rss+xml"/><pubDate>Tue, 19 Mar 2024 12:40:43 GMT</pubDate><ttl>60</ttl><dc:creator></dc:creator><item><title><![CDATA[å‡½æ•°çš„å®šä¹‰]]></title><description><![CDATA[<a class="tag" href="?query=tag:scala" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#scala</a> <a class="tag" href="?query=tag:é¢å‘å¯¹è±¡" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#é¢å‘å¯¹è±¡</a> 
 <br><a href=".?query=tag:scala" class="tag" target="_blank" rel="noopener">#scala</a> <a href=".?query=tag:é¢å‘å¯¹è±¡" class="tag" target="_blank" rel="noopener">#é¢å‘å¯¹è±¡</a> <br>
<br><a data-tooltip-position="top" aria-label="åŸºæœ¬å½¢å¼" data-href="#åŸºæœ¬å½¢å¼" href="\#åŸºæœ¬å½¢å¼" class="internal-link" target="_self" rel="noopener">åŸºæœ¬å½¢å¼</a>
<br><a data-tooltip-position="top" aria-label="å¸¦æœ‰å¤šå‚æ•°åˆ—è¡¨çš„â½…æ³•" data-href="#å¸¦æœ‰å¤šå‚æ•°åˆ—è¡¨çš„â½…æ³•" href="\#å¸¦æœ‰å¤šå‚æ•°åˆ—è¡¨çš„â½…æ³•" class="internal-link" target="_self" rel="noopener">å¸¦æœ‰å¤šå‚æ•°åˆ—è¡¨çš„â½…æ³•</a>
<br><br><a data-tooltip-position="top" aria-label="Scala_01-æ²¡æœ‰ç­”æ¡ˆ.pdf > page=59&amp;selection=6,2,6,4" data-href="Scala_01-æ²¡æœ‰ç­”æ¡ˆ.pdf#page=59&amp;selection=6,2,6,4" href="\å¤§æ•°æ®\PDF\Scala_01-æ²¡æœ‰ç­”æ¡ˆ.pdf#page=59&amp;selection=6,2,6,4" class="internal-link" target="_self" rel="noopener">Scala_01-æ²¡æœ‰ç­”æ¡ˆ, page 59</a><br><br>Scaladef æ–¹æ³•åç§°ï¼ˆå‚æ•°åˆ—è¡¨ï¼‰ï¼šè¿”å›å€¼ç±»å‹ = æ–¹æ³•ä½“
def add(x: Int, y: Int): Int = x + y 
println(add(1, 2)) // 3 
//ä¹Ÿå¯ä»¥å®šä¹‰æˆ //def add(x: Int, y: Int) = x + y 
//æˆ–è€… 
//def add(x: Int, y: Int){x + y}
//çœç•¥â€œ=â€æ—¶å§‹ç»ˆè¿”å›Unit
â¼€å®šè¦â½¤â¼¤æ‹¬å·æŠŠâ½…æ³•ä½“æ‹¬èµ·æ¥
å¤åˆ¶<br><br>Scaladef addThenMultiply(x: Int, y: Int)(multiplier: Int):
Int = (x + y) * multiplier 
println(addThenMultiply(1, 2)(3)) // 
å¤åˆ¶<br>Danger
ç©ºå‚â½…æ³•å¯ä»¥ä½œä¸ºæœ€ç»ˆè¡¨è¾¾å¼å‡ºç°ï¼Œå®é™…ä¸Šæ˜¯â½…æ³•è°ƒâ½¤ï¼Œåªä¸è¿‡Scalaè§„å®š ç©ºå‚â½…æ³•çš„è°ƒâ½¤å¯ä»¥çœç•¥ ( ) ã€‚ä½†æ˜¯â½†å‚â½…æ³•ä¸å…è®¸ä½¿â½¤ ( ) è°ƒâ½¤ï¼Œå»ºè®®å½“æˆ æ™®é€šå˜é‡ä½¿â½¤ã€‚
<br>å°ç»“

<br>â½…æ³•çš„è¿”å›å€¼ç±»å‹å¯ä»¥ä¸å†™ï¼Œç¼–è¯‘å™¨å¯ä»¥â¾ƒåŠ¨æ¨æ–­å‡ºæ¥ï¼Œä½†æ˜¯å¯¹äºé€’ å½’å‡½æ•°ï¼Œå¿…é¡»æŒ‡å®šè¿”å›ç±»å‹ 
<br>â½…æ³•çš„è¿”å›å€¼é»˜è®¤æ˜¯â½…æ³•ä½“ä¸­æœ€åâ¼€â¾è¡¨è¾¾å¼ çš„å€¼ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥â½¤ returnæ¥æ‰§â¾è¿”å›å€¼ï¼Œä½†ä¸æ¨èè¿™ä¹ˆåšã€‚ 
<br>è‹¥ä½¿â½¤returnæ¥æŒ‡å®šå‡½æ•°çš„è¿”å›å€¼ï¼Œscalaçš„ç±»å‹æ¨æ–­å°†ä¼šå¤±æ•ˆï¼Œè¦ æ˜¾å¼æŒ‡å®šè¿”å›å€¼ç±»å‹ã€‚ 
<br>â½…æ³•ä¹Ÿå¯ä»¥æ²¡æœ‰è¿”å›å€¼ï¼ˆè¿”å›å€¼æ˜¯Unitï¼‰çœç•¥=å³å¯

<br><br> val å˜é‡ = (å‡½æ•°å‚æ•°åˆ—è¡¨)=&gt;å‡½æ•°<br><br>Scalaval f1 = ((a: Int, b: Int) =&gt; a + b) 
val f2 = (a: Int, b: Int) =&gt; a + b val 
f3 = (_: Int) + (_: Int) val 
f4: (Int, Int) =&gt; Int = (_ + _)
å¤åˆ¶<br><br>Scalaval f1:((Int,Int)=&gt;Int)={(x,y)=&gt;x+y} //è¡¨ç¤ºå¼è¿”å›å€¼ä¸ºå‡½æ•° 
val f2:(Int,Int)=&gt;Int =(x,y)=&gt;x+y
å¤åˆ¶<br><br>Scalaval f1 = new Function2[Int, Int, Int] { 
def apply(x: Int, y: Int): Int = if (x &lt; y) y else x
}
å¤åˆ¶<br><br>Scala(x: Int) =&gt; x + 1 
var inc = (x:Int) =&gt; x+100 
//å˜é‡incç°åœ¨æ˜¯â¼€ç§å¯ä»¥åƒå‡½æ•°é‚£æ ·ä½¿â½¤çš„å‡½æ•° 
var x = inc(7)-1 
//è¿˜å¯ä»¥å¦‚ä¸‹å®šä¹‰å…·æœ‰å¤šä¸ªå‚æ•°çš„å‡½æ•°ï¼š 
var mul = (x: Int, y: Int) =&gt; x*y 
//å˜é‡mulç°åœ¨æ˜¯å¯ä»¥åƒå‡½æ•°é‚£æ ·ä½¿â½¤çš„å‡½æ•° 
println(mul(3, 4)) 
//ä¹Ÿå¯ä»¥å®šä¹‰ä¸å¸¦å‚æ•°çš„å‡½æ•° 
var userDir = () =&gt; { System.getProperty("user.dir") }
//å˜é‡userDirç°åœ¨æ˜¯å¯ä»¥åƒå‡½æ•°é‚£æ ·ä½¿â½¤çš„å‡½æ•° 
println( userDir )
å¤åˆ¶<br><br>Scalaobject FuncDemo3 {
//å®ç°é˜¶ä¹˜åŠŸèƒ½3ï¼=3*2*1 4ï¼=3ï¼*4 
//é€šè¿‡å®šä¹‰â¼€ä¸ªé€’å½’å®ç°
val factorial:Int=&gt;Int=(n)=&gt;{ 
if(n&lt;=1) 
1 
else 
n *factorial(n-1) 
} 
def main(args: Array[String]): Unit = {
println(factorial(10))
 } 

}
å¤åˆ¶<br><br>Scalaval getTheAnswer = () =&gt; 42 
println(getTheAnswer()) // 42
å¤åˆ¶<br><br>Danger
â½…æ³•ä¸èƒ½åšä¸ºæœ€ç»ˆè¡¨è¾¾å¼å‡ºç°ï¼Œâ½½å‡½æ•°å¯ä»¥
â½…æ³•åæ˜¯â½…æ³•è°ƒâ½¤ï¼Œâ½½å‡½æ•°ååªæ˜¯ä»£è¡¨å‡½æ•°å¯¹è±¡æœ¬èº«
â½…æ³•å¯ä»¥è½¬æ¢ä¸ºå‡½æ•°ï¼Œæ‰€ä»¥â¼€èˆ¬ä¹Ÿä¸å¿…ä¸¥æ ¼åŒºåˆ† 

<br>â¾ƒåŠ¨è½¬æ¢ï¼šåœ¨éœ€è¦å‡½æ•°çš„åœ°â½…ï¼Œå¦‚æœä¼ é€’â¼€ä¸ªâ½…æ³•ï¼ŒScalaèƒ½å¤Ÿâ¾ƒåŠ¨æŠŠâ½… æ³•è½¬æ¢ä¸ºå‡½æ•° 
<br>â¼¿åŠ¨è½¬æ¢

<br><a data-tooltip-position="top" aria-label="Scala_01-æ²¡æœ‰ç­”æ¡ˆ.pdf > page=66&amp;selection=139,0,161,4" data-href="Scala_01-æ²¡æœ‰ç­”æ¡ˆ.pdf#page=66&amp;selection=139,0,161,4" href="\å¤§æ•°æ®\PDF\Scala_01-æ²¡æœ‰ç­”æ¡ˆ.pdf#page=66&amp;selection=139,0,161,4" class="internal-link" target="_self" rel="noopener">Scala_01-æ²¡æœ‰ç­”æ¡ˆ, page 66</a>]]></description><link>å¤§æ•°æ®\scala\scalaå‡½æ•°.html</link><guid isPermaLink="false">å¤§æ•°æ®/scala/scalaå‡½æ•°.md</guid><pubDate>Mon, 16 Oct 2023 15:07:01 GMT</pubDate></item><item><title><![CDATA[scalaé›†åˆ]]></title><description><![CDATA[<a class="tag" href="?query=tag:scala" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#scala</a> 
 <br><a href=".?query=tag:scala" class="tag" target="_blank" rel="noopener">#scala</a>
<a data-tooltip-position="top" aria-label="Scala_02-æ²¡æœ‰ç­”æ¡ˆ.pdf > page=2&amp;selection=14,0,14,1" data-href="Scala_02-æ²¡æœ‰ç­”æ¡ˆ.pdf#page=2&amp;selection=14,0,14,1" href="\å¤§æ•°æ®\PDF\Scala_02-æ²¡æœ‰ç­”æ¡ˆ.pdf#page=2&amp;selection=14,0,14,1" class="internal-link" target="_self" rel="noopener">Scala_02-æ²¡æœ‰ç­”æ¡ˆ, page 2</a><br>scalaé›†åˆä¸¤ä¸ªä¸»è¦çš„åŒ…:<br>Scala# ä¸å¯å˜é›†åˆ 
scala.collection.immutable (Scalaé»˜è®¤é‡‡â½¤ä¸å¯å˜é›†åˆ)
# å¯å˜é›†åˆ 
scala.collection.mutable
å¤åˆ¶<br><img alt="image.png" src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310131745099.png" referrerpolicy="no-referrer"><br>ç²—çº¿æ˜¯ç³»ç»Ÿæ¨èç”¨çš„åºåˆ—<br><img alt="image.png" src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310131746490.png" referrerpolicy="no-referrer"><br><br>
Array
å®šâ»“æ•°ç»„ï¼Œæ•°ç»„ä¸å¯æ‰©å®¹scala.Array
ArrayBuffer
ğŸ•å˜â»“æ•°ç»„ï¼Œæ•°ç»„å¯æ‰©å®¹ scala.collection.mutable.ArrayBuffe
<br><a data-tooltip-position="top" aria-label="Scala_02-æ²¡æœ‰ç­”æ¡ˆ.pdf > page=6&amp;selection=6,0,24,35" data-href="Scala_02-æ²¡æœ‰ç­”æ¡ˆ.pdf#page=6&amp;selection=6,0,24,35" href="\å¤§æ•°æ®\PDF\Scala_02-æ²¡æœ‰ç­”æ¡ˆ.pdf#page=6&amp;selection=6,0,24,35" class="internal-link" target="_self" rel="noopener">Scala_02-æ²¡æœ‰ç­”æ¡ˆ, page 6</a><br><br>Danger
ä½¿â½¤newå…³é”®å­—åˆ›å»ºâ¼€ä¸ªå®šâ»“æ•°ç»„
var arr=new Array[Int]ï¼ˆ3ï¼‰
ç›´æ¥ä½¿â½¤Arrayåˆ›å»ºå¹¶åˆå§‹åŒ–â¼€ä¸ªæ•°ç»„ï¼Œæ³¨æ„ä¸å†ä½¿â½¤newå…³é”®å­—ã€‚
var arr=Array(1,2,3)
<br>æ‰©å±•
ä¸ºä»€ä¹ˆå®šâ»“æ•°ç»„æ˜¯å¯å˜é›†åˆï¼Ÿ
Arrayæœ¬èº«ä¸å±äºscalaé›†åˆæˆå‘˜ï¼Œä»å‰â¾¯ç±»ç»§æ‰¿å›¾ä¸­ä¹Ÿå¯å‘ç°è¿™â¼€ç‚¹ï¼Œ åœ¨å¯å˜é›†åˆå›¾ä¸­IndexedSeqæœ‰â¼€æ¡è™šçº¿æŒ‡å‘äº†Arrayï¼Œè¯´æ˜å¹¶ä¸æ˜¯ç›´æ¥ç»§ æ‰¿å…³ç³»ã€‚
â¼€èˆ¬å°†Arrayå½’ä¸ºé›†åˆæ˜¯å› ä¸ºScalaé»˜è®¤å°†Arrayéšå¼è½¬æ¢ä¸º WrappedArrayï¼Œâ½½WrappedArrayå®ç°äº†IndexedSeqç‰¹è´¨ã€‚
ä»è¿™â¼€ç‚¹ä¸Šæ¥è¯´ï¼ŒStringä¸WrappedStringä¹Ÿæœ‰å¼‚æ›²åŒâ¼¯ä¹‹å¦™ï¼Œå¯ä»¥å‘ ç°åœ¨ä¸å¯å˜é›†åˆä¸­ï¼ŒStringä¸IndexedSeqä¹Ÿæ˜¯è™šçº¿è¿æ¥ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨ Scalaä¸­ï¼ŒStringå¯ä»¥å½“é›†åˆå¤„ç†
<br><br>Scalaprintln("*****************åˆ›å»ºå˜é•¿æ•°ç»„*******************")
  val arr5 = ArrayBuffer[Int]()
  //æ·»åŠ å…ƒç´ 
  arr5.append(2)
  arr5.append(4,4,5,6,7,8,9)
  arr5.insert(1,12)
  arr5 += 1 //æœ«å°¾è¿½åŠ å…ƒç´ 
  arr5 += (4,5,6,7,6)
  arr5 ++= Array(4,5,6) //æ·»åŠ å¦ä¸€ä¸ªæ•°ç»„æ•´ä½“çš„å…ƒç´ è¦ä½¿ç”¨++=
  println(arr5)
  //åˆ é™¤
  arr5.remove(1)
  println("*****************æ•°ç»„ç»ƒä¹ *******************")
  /*
  ç°åœ¨æœ‰ä¸€ä¸ªæ•°ç»„,å…ƒç´ :1-9
  1.å¯¹æ¯ä¸ªå…ƒç´ *2åè¾“å‡º
  2.å°†æ‰€æœ‰å…ƒç´ å…ˆæ±‚å¥‡æ•°,åœ¨*2è¾“å‡º
   */
  //1.å¯¹æ¯ä¸ªå…ƒç´ *2åè¾“å‡º
  for (elem &lt;- 1.to(9)) {
    println(elem*2)
  }
  val v1 = for (elem &lt;- 1 to 9) yield elem*2
  println(s"v1:${v1.toBuffer}")
  //2.å°†æ‰€æœ‰å…ƒç´ å…ˆæ±‚å¥‡æ•°,åœ¨*2è¾“å‡º
  val v2 = for (elem &lt;- 1 to 9; if elem % 2 != 0) yield elem*2
  println(s"v2:${v2.toBuffer}")
  println("*****************äºŒç»´æ•°ç»„*******************")
  //ç¬¬ä¸€ç§æ–¹å¼:ä¸è§„åˆ™äºŒç»´æ•°ç»„
  val arr6 = new Array[Array[Int]](10)
  arr6(0) = Array(1,2)
  arr6(1) = Array(3,4,5,6)
  //ç¬¬äºŒç§æ–¹æ³•
  val arr7 = Array.ofDim[Int](3,3)
  //éå†äºŒç»´æ•°ç»„
  arr7.foreach(x=&gt;x.foreach(println(_)))
  println("*****************æ•°ç»„--é«˜é˜¶å‡½æ•°filter   map*******************")
  //filter:è¿‡æ»¤
  //map:å°†åŸæ•°ç»„é€šè¿‡è®¾ç½®å¾—åˆ°æ–°çš„æ•°ç»„,ä½†æ˜¯å…ƒç´ ä¸ªæ•°ä¸åŸæ•°ç»„ä¸€è‡´
  //  1.å¯¹æ¯ä¸ªå…ƒç´ *2åè¾“å‡º
  val arr8 = Array(1,2,3,4,5,6,7)
  val v3 = arr8.map(_*2)
  println(s"v3:${v3.toBuffer}")
  //  2.å°†æ‰€æœ‰å…ƒç´ å…ˆæ±‚å¥‡æ•°,åœ¨*2è¾“å‡º
  val  v4:Array[Int] = arr8.filter(_ % 2 != 0).map(_*2)
  println(s"v4:${v4.toBuffer}")
  println("*****************æ•°ç»„å¸¸ç”¨æ–¹æ³•*******************")
  val arr = Array(9,1,3,4,2,7,5,6,8)
  println(arr.sum) // æ•°ç»„æ±‚å’Œ:45
  println(arr.max) // æ•°ç»„æ±‚æœ€å¤§å€¼:9
  println(arr.min) // æ•°ç»„æ±‚æœ€å°å€¼:1
  println(arr.sorted.toBuffer)// æ•°ç»„æ’åº:é»˜è®¤å‡åºï¼Œè¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„
  println(arr.sortWith(_&lt;_).toBuffer)// å¯ä»¥è‡ªå®šä¹‰æ’åºè§„åˆ™ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„
å¤åˆ¶<br><br>Scala Tupleè¡¨ç¤ºå›ºå®šå…ƒç´ çš„ç»„åˆï¼Œå…ƒç»„å¯ä»¥è£…ç€å¤šä¸ªä¸åŒç±»å‹çš„å€¼ï¼Œæ˜¯ä¸ åŒç±»å‹çš„å€¼çš„èšé›†ã€‚Tupleæ˜¯Scalaä¸­â¾®å¸¸é‡è¦çš„â¼€ç§æ•°æ®ç»“æ„ï¼Œåâ¾¯ä¼šâ¼¤ é‡ä½¿â½¤ã€‚å…¶ç‰¹ç‚¹åŒ…æ‹¬ï¼š<br>é‡ç‚¹
1.æœ€å¤šâ½€æŒ22ä¸ªå…ƒç´ ç»„åˆï¼Œåˆ†åˆ«å¯¹åº”ç±»å‹Tuple1~Tuple2
2.ç›¸åº”ä¹Ÿç§°ä¸ºâ¼€ å…ƒç»„ï¼ˆâ¼€èˆ¬ä¸â½¤ï¼‰ã€â¼†å…ƒç»„ã€ä¸‰å…ƒç»„... 2.å…ƒç»„å¯ä»¥å®¹çº³ä¸åŒç±»å‹çš„å…ƒç´ 
3.å…ƒç»„ä¸å¯å˜
â¼†å…ƒç»„å¯ä»¥è¡¨ç¤ºMapä¸­çš„â¼€ä¸ªå…ƒç´ ï¼ŒMapæ˜¯K/Vå¯¹å¶çš„é›†åˆï¼Œå¯¹å¶ æ˜¯å…ƒç»„çš„æœ€ç®€å•å½¢å¼ã€‚
<br>è®¿é—®ç»„å…ƒï¼šä½¿â½¤ 1 ï¼Œ _2 ï¼Œ _3 ç­‰å½¢å¼è®¿é—®ç»„å…ƒï¼Œæ³¨æ„ä¸‹æ ‡ä»1å¼€å§‹<br>Scalaobject Tuple04 extends  App {
  println("*************************åˆ›å»ºå…ƒç»„***************************")
  val t1 = (1,"bing",20,100) //å››å…ƒç»„
  val t2,(a1,a2,a3,a4) = (1,"bing",20,100)
  val t3 = new Tuple4[Int,String,Int,Double](1,"bing",20,100)

  //å…ƒç´ è®¿é—®
  //ä¸‹æ ‡
  println(t1.productElement(0))
  //å…ƒç»„çš„ç‰¹å®šæ–¹æ³•,é€šè¿‡_å€¼,ä»1å¼€å§‹
  t1._4
  println("*************************éå†å…ƒç»„***************************")
  for (elem &lt;- t1.productIterator) {println(elem)}
  t1.productIterator.foreach(x=&gt;println(x))
  t1.productIterator.foreach(println(_))
  println("*************************å…ƒç»„æ‹‰é“¾***************************")
  val arr1 = Array("hadoop","spark","flink")
  val arr2 = Array(1,2,3)
  val t4:Array[(String,Int)] = arr1.zip(arr2)
  t4.foreach(print(_))//(hadoop,1)(spark,2)(flink,3)
  println()
  //å½“æ‹‰é“¾çš„ä¸¤è¾¹å…ƒç´ ä¸ªæ•°ä¸ä¸€æ ·æ—¶,ä»¥å°‘çš„ä¸ºæ ‡å‡†,å¤šçš„åˆ é™¤
  val arr3 = Array(1,2,3,4,5)
  val t5:Array[(String,Int)] = arr1.zip(arr3)
  t5.foreach(print(_))
  println()
  val arr33 = Array(1,2)
  //è¿™é‡Œçš„0æ˜¯å½“ç”Ÿæˆçš„å…ƒç»„ä¸­0ä¸‹æ ‡å…ƒç´ ç¼ºå¤±è¡¥å……çš„å†…å®¹
  //è¿™é‡Œçš„1æ˜¯å½“ç”Ÿæˆçš„å…ƒç»„ä¸­1ä¸‹æ ‡å…ƒç´ ç¼ºå¤±è¡¥å……çš„å†…å®¹
  val t6:Array[(Any,Int)] = arr1.zipAll(arr33,0,1)
  // 
  t6.foreach(print(_))
  println()
  
  //ç›´æ¥è·Ÿæ•°ç»„çš„ä¸‹æ ‡ç»„æˆå…ƒç»„
  val t7:Array[(Any,Int)] = arr1.zipWithIndex
  //é»˜è®¤ä½¿ç”¨ä¸‹æ ‡
  val t8:Array[(String,Int)] = arr1.zip(Stream from 2)
  //æ˜¯ä» 2 ä¸‹æ ‡å¼€å§‹
  t7.foreach(print(_))//(hadoop,0)(spark,1)(flink,2)
  println()
  t8.foreach(print(_))//(hadoop,2)(spark,3)(flink,4)
  println()
  println("*************************å…ƒç»„-unzip***************************")
  val t9:(Array[Any],Array[Int]) = t7.unzip
  t9._1.foreach(println(_))
  println("*************************åˆ›å»ºå…ƒç»„***************************")

}
å¤åˆ¶<br><br>åœ¨Scalaä¸­ï¼ŒæŠŠå“ˆå¸Œè¡¨è¿™ç§æ•°æ®ç»“æ„å«åšæ˜ å°„ã€‚Scalaä¸­çš„Mapå­˜å‚¨çš„å†…å®¹æ˜¯ é”®å€¼å¯¹(key-value)ï¼ŒMapåŒºåˆ†å¯å˜Map (scala.collection.mutable.Map) å’Œ ä¸å¯å˜Map(scala.collection.immutable.Map) ã€‚ä¸å¯å˜çš„Mapï¼ˆä»… TreeMapï¼‰â½€æŒæœ‰åºï¼Œâ½½å¯å˜çš„Mapæ˜¯â½†åºçš„ã€‚<br>é‡ç‚¹
Mapä¸­çš„å…ƒç´ ä¸ºâ¼†å…ƒç»„ï¼Œå¯â½¤ä¸¤ç§â½…å¼è¡¨ç¤º
<br>Scala("a",1)
"a" -&gt; 1
å¤åˆ¶<br>Scalapackage scala03

import scala.collection.immutable.TreeMap

object Map01  extends  App{
  println("***************************æ„å»ºMap*****************")
  //ç›´æ¥ä½¿ç”¨Map,é»˜è®¤æ˜¯scala.collection.immutable.Map
  val m1 = Map("hadoop"-&gt;1,"spark"-&gt;20,"flink"-&gt;3)
  val m2 = Map(("hadoop",1),("spark",2),("flink",3))
  //æ„å»ºå¯å˜çš„
  val m3 = scala.collection.mutable.Map(("hadoop",1),("spark",2),("flink",3))

  //å–å€¼
  println(m1("hadoop"))

  println("***************************éå†Map*****************")
  //é€šè¿‡keySet
  for (elem &lt;- m1.keySet) {println(s"key:$elem   value:${m1(elem)}")}
  //é€šè¿‡keys
  m1.keys.foreach(elem=&gt;println(s"key:$elem   value:${m1(elem)}"))
  //é€šè¿‡values
  m1.values.foreach(value=&gt;println(s"value:$value"))
  //ç›´æ¥éå†Map
  for (elem &lt;- m1) {println(s"key:${elem._1}   value:${elem._2}")}
  for ((k,v) &lt;- m1) {println(s"key:$k   value:$v")}

  println("***************************å…¶ä»–çš„Map*****************")
  println(s"m1:$m1")
  println(s"m2:$m2")
  println(s"m3:$m3")
  //åªæœ‰ä¸å¯å˜Mapçš„TreeMapæ‰ä¼šæ’åº
  val m4 = TreeMap(("hadoop",1),("spark",2),("flink",3))
  println(s"m4:$m4")
  val m5 = scala.collection.mutable.TreeMap(("hadoop",1),("spark",2),("wlink",3))
  println(s"m5:$m5")
  println("***************************æ„å»ºMap*****************")
  println(m1.getClass)//class scala.collection.immutable.Map$Map3---HashMap
  println(m4.getClass)//class scala.collection.immutable.TreeMap
  println(m3.getClass)//class scala.collection.mutable.HashMap
  println("***************************æ„å»ºMap*****************")
  println("***************************æ„å»ºMap*****************")
}

å¤åˆ¶<br><br>HashMapæ˜¯æœ€å¸¸â½¤çš„æ•°æ®ç»“æ„ä¹‹â¼€ï¼ŒæŸ¥æ‰¾å’Œå¢åˆ å…ƒç´ å…·æœ‰O(1) çš„æ—¶é—´å¤æ‚åº¦ã€‚åŒæ—¶HashMapä¹Ÿæ˜¯é»˜è®¤çš„Mapç±»å‹ã€‚<br>Scala//å¯å˜
Map scala&gt; var map4 = mutable.Map( ("A", 1), ("B", "åŒ—äº¬"), ("C", 3) ) 
map4: scala.collection.mutable.Map[String,Any] = Map(A -&gt; 1, C -&gt; 3, B -&gt; åŒ—äº¬) 
scala&gt; map4.getClass 
res208: Class[_ &lt;: 
scala.collection.mutable.Map[String,Any]] = class scala.collection.mutable.HashMap 
//ä¸å¯å˜
Map scala&gt; var map5 = Map( ("A", 1), ("B", "åŒ—äº¬"), ("C", 3) ,("D",4),("E",5)) 
map5: scala.collection.immutable.Map[String,Any] = Map(E -&gt; 5, A -&gt; 1, B -&gt; åŒ—äº¬, C -&gt; 3, D -&gt; 4) 

scala&gt; map5.getClass 
res211: Class[_ &lt;: 
scala.collection.immutable.Map[String,Any]] = class scala.collection.immutable.HashMap$HashTrieMap
å¤åˆ¶<br>å¯å˜HashMapæ“ä½œç¤ºä¾‹:<br>Scalaimport scala.collection.mutable
object MutMapDemo extends App{
val map1 = new mutable.HashMap[String, Int]()
map1("spark") = 1
map1 += (("hadoop", 2))
map1.put("storm", 3) 
println(map1)
//ä»mapä¸­ç§»é™¤å…ƒç´  
map1 -= "spark" 
map1.remove("hadoop") 
println(map1)
å¤åˆ¶<br><br>è¿”å›æŒ‰ç‰¹å®šé¡ºåºæ’åˆ—çš„å…ƒç´ é›†åˆ<br>Scalaimport scala.collection.immutable.TreeMap 
var tm = TreeMap(3 -&gt; 'x', 1 -&gt; 'x', 4 -&gt; 'x') 
tm += (2 -&gt; 'x') 
tm //Map(1 -&gt; x, 2 -&gt; x, 3 -&gt; x, 4 -&gt; x)
å¤åˆ¶<br><br>Scala åˆ—è¡¨ç±»ä¼¼äºæ•°ç»„ï¼Œå®ƒä»¬æ‰€æœ‰å…ƒç´ çš„ç±»å‹éƒ½ç›¸åŒï¼Œä½†æ˜¯å®ƒä»¬ä¹Ÿæœ‰æ‰€ä¸åŒï¼šåˆ—è¡¨æ˜¯ä¸å¯å˜çš„ï¼Œå€¼â¼€æ—¦è¢«å®šä¹‰äº†å°±ä¸èƒ½æ”¹å˜ï¼Œå…¶æ¬¡åˆ—è¡¨æ˜¯é“¾è¡¨ç»“æ„ï¼Œâ½½æ•°ç»„ä¸æ˜¯<br>é‡ç‚¹
1.åˆ—è¡¨ä¸­çš„å…ƒç´ ç±»å‹å¿…é¡»ç›¸åŒã€‚
2.åˆ—è¡¨æ˜¯æœ‰åºçš„ã€‚
3.åˆ—è¡¨æ˜¯ä¸å¯å˜çš„ï¼Œå†…å®¹åŠâ»“åº¦éƒ½ä¸å¯å˜ã€‚
<br>Scala
object List05 extends App {
  println("********************åˆ›å»ºList***************************")
  //ç©ºåˆ—è¡¨
  val list1 = Nil
  val list2 = List()

  val fruit = List("apple","orange","banana")
  println(fruit)
  val fruit1 = List("apple1","orange1","banana1")
  val fruit2:List[List[String]] = List(fruit,fruit1)
  println(fruit2)
  /*
  1.listæ˜¯ä»¥Nilç»“å°¾
  2.é»˜è®¤ä»å³åˆ°å·¦ç»“åˆ
   */
  val fruit3 = "apple"::("orange"::("banana"::Nil))
  println(fruit3)
  val fruit4:List[String] = "apple"::"orange"::fruit
  println(fruit4)//List(apple, orange, apple, orange, banana)
  val fruit5:List[java.io.Serializable] = "apple"::"orange"::fruit::Nil//List(apple, orange, List(apple, orange, banana))
  println(fruit5)

  println("********************éå†List***************************")
  fruit.foreach(println(_))
  //è½¬æˆå­—ç¬¦ä¸²
  println(fruit.mkString(","))
  println("********************List--é«˜é˜¶å‡½æ•°***************************")
  //reduce  è®¡ç®—
  val l1 = List(1,2,3,4,5)
  //æ±‚å’Œ
  val v1 = l1.reduce(_+_)
  println(v1)
  //æ±‚å·®
  //ä»å·¦å¾€å³è¿ç®—
  val v2 = l1.reduce(_-_)//-13
  println(v2)
  //ä»å·¦å¾€å³è¿ç®—
  val v3 = l1.reduceLeft(_-_)//-13
  println(v3)
  //ä»å³å¾€å·¦è¿ç®—
  val v4 = l1.reduceRight(_-_)//3  (1-(2-(3-(4-5)))
  println(v4)
  //æ‰©å±•
  def test(a:Int)(b:Int)(c:Int) ={}  //å¤šå‚æ•°åˆ—è¡¨å‡½æ•°--æŸ¯é‡ŒåŒ–
  //fold
  //ç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºä¸å½“å‰é›†åˆä¸­å…ƒç´ åŒç±»å‹çš„ä¸€ä¸ªå€¼
  //ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºå®é™…çš„è¿ç®—è§„åˆ™
  val  v5 = l1.fold(10)((x,y)=&gt;x+y)//25
  println(v5)
  //map
  fruit.map(_.length).mkString(",").foreach(print(_))//5,6,6
  //List(e, l, p, p, a),List(e, g, n, a, r, o),List(a, n, a, n, a, b)
  fruit.map(_.toList.reverse).mkString(",").foreach(print(_))
  println()
  fruit.map(x=&gt;{
    val s = x.split("")
    (s(0),s(1),s(2))
  }).mkString(",").foreach(print(_))//(a,p,p),(o,r,a),(b,a,n)
  println()
  //è¿”å›çš„æ˜¯ä»å·¦åˆ°å³æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„å€¼
  List(6,2,4,6,8,3,5,7).find(_ % 2 == 0).foreach(println(_))
  //takewhile  ä»å·¦åˆ°å³å–å€¼,ä¸€ç›´å–åˆ°ä¸ç¬¦åˆæ¡ä»¶ç»ˆæ­¢
  //dropwhile  ä»å·¦åˆ°å³å°†ç¬¦åˆæ¡ä»¶çš„ä¸¢å¼ƒ,ä¸€ç›´å–åˆ°ä¸ç¬¦åˆæ¡ä»¶ç»ˆæ­¢
  println("********************åˆ›å»ºList***************************")
  println("********************åˆ›å»ºList***************************")
}

å¤åˆ¶<br><br>Scalapackage scala02
//æ±‚å•è¯æ•°é‡
object Wordcount06 extends App {
  val lists = List("App extends scala.AnyRef with scala.DelayedInit App extends scala.AnyRef with scala.DelayedInit","main should not be overridden App extends scala.AnyRef with scala.DelayedInit","the delayedInit mechanism will disappear")
  //1.å®Œæˆå•è¯çš„æ‹†è§£

  //val lists = List("App","extends","scala.AnyRef","with","scala.DelayedInit","main","should","not","be","overridden")
  //ç¬¬ä¸€ç§:ä½¿ç”¨flatten + map
  val words:List[Array[String]] = lists.map(_.split(" "))
  //words.foreach(x=&gt;println(x.toBuffer))
  //flattem   å‹å¹³
  val words01:List[String] = words.flatten
  words01.mkString(",").foreach(x=&gt;print(x))
  //ç¬¬äºŒç§:flatMap==flatten + map
  lists.flatMap(_.split(" "))
  //2.è®©æ•°æ®å½¢æˆkvçš„å½¢å¼  app 1
  println()
  //(App,1),(extends,1),(scala.AnyRef,1),(with,1)
  val tuple:List[(String,Int)]  = words01.map((_,1))
  tuple.mkString(",").foreach(print(_))
  //3.æ ¹æ®keyåˆ†ç»„
  println()
  //scala.AnyRef -&gt; List((scala.AnyRef,1), (scala.AnyRef,1), (scala.AnyRef,1))
  val groups:Map[String,List[(String,Int)]] = tuple.groupBy(_._1)
  groups.mkString(",").foreach(print(_))

  //4.å¯¹å€¼å†…çš„å…ƒç´ æ•°é‡è¿›è¡Œæ±‚å’Œ---mapValues(ç›´æ¥å¯¹å€¼æ“ä½œ)
  println()
  //scala.AnyRef -&gt; 3
  val temp:Map[String,Int] = groups.mapValues(_.size)
  temp.mkString(",").foreach(print(_))

  //5.æ’åº
  //scalaä¸­sortByé»˜è®¤åªèƒ½æ˜¯å‡åº,sparkä¸­æ‰èƒ½çµæ´»ä½¿ç”¨
  println()
  val sort1:List[(String,Int)] = temp.toList.sortBy(_._2).reverse
  sort1.mkString(",").foreach(print(_))

  //6.topN
  println()
  val three = sort1 take 3
  val three1 = sort1.takeRight(3)//å–æœ€å³è¾¹çš„ä¸‰ä¸ª
  three.mkString(",").foreach(print(_))

  println()
  //ç®€åŒ–ç‰ˆ
  val three2 = lists.map(_.split(" ")).flatten.map((_,1)).groupBy(_._1).mapValues(_.size).toList.sortBy(_._2).reverse.take(3)
  three2.mkString(",").foreach(print(_))
}

å¤åˆ¶<br><br>Scalapackage scala02
/**
 * åˆ›å»º10ä¸ªæ•´æ•°çš„éšæœºåˆ—è¡¨ï¼Œåˆ†åˆ«æ±‚å¥‡æ•°ä½ä¸å¶æ•°ä½ä¹‹å’Œã€‚
 *
 * å¦‚ï¼šList(10, 9, 8, 7, 6, 5, 4, 3, 2, 1)ï¼šå¥‡æ•°ä½ä¹‹å„ä¸º10+8+6+4+2ï¼Œå¶æ•°ä½ä¹‹å’Œä¸º9+7+5+3+1
 *
 * åˆ†æ
 *
 * # ç”Ÿæˆéšæœºæ•°é›†åˆ
 * # è€ƒè™‘ä½¿ç”¨zipWithIndexå®ç°ï¼Œæ³¨æ„indexä»¥0å¼€å§‹ï¼Œå˜æ¢ä½¿æ»¡è¶³é¢˜æ„
 * # æ‹‰é“¾åæŒ‰indexå¥‡å¶åˆ†ç»„ï¼Œç„¶åç»„å†…æ±‚å’Œ
 *
 * å…³é”®ä»£ç 
 */
object Example07 {
  def main(args: Array[String]): Unit = {
    //1.å…ˆå¾—åˆ°10ä¸ªéšæœºæ•°
    val mynum = for (elem &lt;- 1.to(10)) yield (Math.random()*100).toInt
    //2.æ“ä½œ
    //(12,0),(34,1),(45,2)
    //1 -&gt; Vector((71,1), (4,3), (89,5), (5,7), (74,9)),0 -&gt; Vector((9,0), (9,2), (62,4), (33,6), (12,8))
    //1 -&gt; 296,0 -&gt; 298
    val temp = mynum.zipWithIndex.groupBy(x=&gt;x._2 % 2).map(kvs=&gt;{(kvs._1,kvs._2.unzip._1.sum)}).foreach(x=&gt;{
      if (x._1 == 1)
        println(s"å¶æ•°åˆ—çš„å’Œæ˜¯${x._2}")
      else
        println(s"å¥‡æ•°åˆ—çš„å’Œæ˜¯${x._2}")
    })
    //temp.mkString(",").foreach(print(_))
  }

}
å¤åˆ¶<br><br>Setä¸­çš„å…ƒç´ ä¸å¯é‡å¤ï¼Œâ½†åºï¼ˆTreeSeté™¤å¤–ï¼‰ã€‚<br>Scalapackage scala03
/*
Set:æ— åº,ä¸å¯é‡å¤çš„
 */
object Set02 extends App {
  println("************************æ„å»ºSet**********************")
  val s1 = Set(1,2,4,5,6,8,9,2,46,3)
  val s2 = Set(4,2,7,0,54,3,5,6,8,5)
  println(s"s1:$s1")
  println("***********************æ“ä½œSet**********************")
  //äº¤é›†--ä¸¤ä¸ªéƒ½æœ‰
  println(s1.&amp;(s2))//Set(5, 6, 2, 3, 8, 4)
  println(s1.intersect(s2))
  //å·®é›†--s1æœ‰,s2æ²¡æœ‰
  println(s1 &amp;~ s2)//Set(46, 1, 9)
  println(s1.diff(s2))
  //å¹¶é›†--s1å’Œs2æ‰€æœ‰çš„å…ƒç´ ,ä½†æ˜¯ä¼šå»é‡
  println(s1 union(s2))//Set(0, 5, 46, 1, 6, 9, 2, 54, 7, 3, 8, 4)
  println("************************å¸¸ç”¨Set**********************")
  println(s1.max)
  println(s1.min)
  println(s1.head)
  println(s1.tail)
  println(s1.isEmpty)
  println(s1.count(_&gt;0))
  println("************************æ‰©å±•Set**********************")
  //å¹¶è¡Œé›†åˆ
  val result1 = (1 to 100000).map{case _ =&gt; Thread.currentThread().getName}.distinct
  val result2 = (1 to 100000).par.map{case _ =&gt; Thread.currentThread().getName}.distinct
  println(result1)//Vector(main)
  println(result2)//ParVector(scala-execution-context-global-11, scala-execution-context-global-12)
  println("************************æ„å»ºSet**********************")
  println("************************æ„å»ºSet**********************")
  println("************************æ„å»ºSet**********************")

}
å¤åˆ¶<br><img alt="image.png" src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310141003189.png" referrerpolicy="no-referrer"><br><br>é‡ç‚¹
Scalaé›†åˆæœ‰ä¸‰ä¸ªåŸºæœ¬æ“ä½œï¼š
headè¿”å›é›†åˆç¬¬â¼€ä¸ªå…ƒç´ 
tailè¿”å›â¼€ä¸ªé›†åˆï¼ŒåŒ…å«é™¤äº†ç¬¬â¼€å…ƒç´ ä¹‹å¤–çš„å…¶ä»–å…ƒç´ 
isEmptyåœ¨é›†åˆä¸ºç©ºæ—¶è¿”å›true
]]></description><link>å¤§æ•°æ®\scala\scalaé›†åˆ.html</link><guid isPermaLink="false">å¤§æ•°æ®/scala/scalaé›†åˆ.md</guid><pubDate>Sat, 14 Oct 2023 02:04:00 GMT</pubDate><enclosure url="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310131745099.png" length="0" type="image/png"/><content:encoded>&lt;figure&gt;&lt;img src=&quot;https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310131745099.png&quot;&gt;&lt;/figure&gt;</content:encoded></item><item><title><![CDATA[Hadoop 3.3.6é…ç½®æ–‡ä»¶]]></title><description><![CDATA[<a class="tag" href="?query=tag:hdfs" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#hdfs</a> 
 <br><br><a href=".?query=tag:hdfs" class="tag" target="_blank" rel="noopener">#hdfs</a>
 æç¤ºï¼šè¿™ç¯‡æ•™ç¨‹å¯¹äº linux å®‰è£… Hadoop è¦å†™å®Œæˆå‰ç½®é…ç½®ï¼š æœåŠ¡å™¨åˆ›å»ºã€å›ºå®š IPã€é˜²ç«å¢™å…³é—­ã€Hadoop ç”¨æˆ·åˆ›å»ºã€SSH å…å¯†ã€JDK éƒ¨ç½²ç­‰æ“ä½œ
ä¾‹å¦‚ï¼šJDK éƒ¨ç½²ç­‰æ“ä½œ   <br><br><br><br>åœ¨ç½‘ä¸Šæ‰¾äº†å¥½ä¹…å¥½ä¹…çš„3.3.6æˆ–è€…å…¶ä»–çš„é…ç½®æ–‡ä»¶æ•™ç¨‹ï¼Œéƒ½ä¸æ˜¯å¾ˆæ»¡æ„ï¼Œäºæ˜¯å°±è‡ªå·±æ€»ç»“å†™äº†è¿™ä¸€ç¯‡æœ‰å…³3.3.6çš„é…ç½®æ–‡ä»¶
å…ˆçœ‹æˆ‘çš„æ–‡ä»¶åœ°å€ä¸è¯´æ˜
jdk æ–‡ä»¶è·¯å¾„ä¸ hadoop éƒ½æ˜¯åœ¨ /export/server/
<img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/3a34ff41cbf1407a9b8ac991d9e8fa9a.png" referrerpolicy="no-referrer"><br><br>æç¤ºï¼šä»¥ä¸‹æ˜¯æœ¬ç¯‡æ–‡ç« æ­£æ–‡å†…å®¹ï¼Œä¸‹é¢æ¡ˆä¾‹å¯ä¾›å‚è€ƒ<br><br>ç°åœ¨å°±æ­£å¼å¼€å§‹ï¼š é€šè¿‡ rz å‘½ä»¤ä¸Šä¼ 
<img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/a8e9a6842ad54c5c9434d9651568d082.png" referrerpolicy="no-referrer"><br>
<img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/df10cdbf1ecc42a295e2b5b623874345.png" referrerpolicy="no-referrer">
è§£å‹ç¼©å®‰è£…åŒ…åˆ°
 /export/server/ ä¸­ tar -zxvf hadoop-3.3.6.tar.gz -C /export/server
<img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/b3e851ac5dbc48808299b769c81391d4.png" referrerpolicy="no-referrer">
åˆ›å»ºè½¯é“¾æ¥æ–¹ä¾¿åç»­é…ç½®æ“ä½œ<br>Linuxcd /export/server
ln -s /export/server/hadoop-3.3.6 hadoop
å¤åˆ¶<br><br>æ¥ä¸‹æ¥å°±æ˜¯çœŸæ­£çš„å¼€å§‹é…ç½®ï¼šå…ˆcd<br>Linuxcd hadoop/etc/hadoop/
å¤åˆ¶<br><br> è¿™é‡Œæ ¹æ®è‡ªå·±çš„ä¸»æœºæ¥ æˆ‘æ˜¯ One Two Three<br>Linuxä¸»æœº1
ä¸»æœº2
ä¸»æœº3
å¤åˆ¶<br> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/ad2b48bbdcbb4b73abc3a776e2f758eb.png" referrerpolicy="no-referrer"><br><br>æ–‡ä»¶ç¯å¢ƒå˜é‡æ›´å…·è‡ªå·±çš„æ¥<br>Linuxexport JAVA_HOME=/export/server/jdk
export HADOOP_HOME=/export/server/hadoop
export HADOOP_CONF_DIR=$HADOOP_HOME/etc/hadoop
export HADOOP_LOG_DIR=$HADOOP_HOME/logs
å¤åˆ¶<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/8ebdf2086175455fa47f2e9eeaf830b7.png" referrerpolicy="no-referrer"> <br><br>æ³¨æ„ä¸‹é¢è¦æ”¹è‡ªå·±çš„ä¸»æœºå<br>Linux&lt;configuration&gt;
&lt;property&gt;
&lt;name&gt;fs.defaultFS&lt;/name&gt;
&lt;value&gt;hdfs://è‡ªå·±çš„ä¸»æœº1:8020&lt;/value&gt;
&lt;/property&gt;
&lt;property&gt;
&lt;name&gt;io.file.buffer.size&lt;/name&gt;
&lt;value&gt;131072&lt;/value&gt;             
&lt;/property&gt;
&lt;/configuration&gt;
å¤åˆ¶<br><br>æ³¨æ„ä¸‹é¢è¦æ”¹è‡ªå·±çš„ä¸»æœºå<br>Linux&lt;configuration&gt;
&lt;property&gt;
&lt;name&gt;dfs.namenode.http-address&lt;/name&gt;
&lt;value&gt;0.0.0.0:9870&lt;/value&gt;                                       
&lt;description&gt; The address and the base port where the dfs namenode web ui will listen on.  
&lt;/description&gt; 
&lt;/property&gt;
&lt;property&gt;
&lt;name&gt;dfs.datanode.data.dir.perm&lt;/name&gt;
&lt;value&gt;700&lt;/value&gt; 
&lt;/property&gt;
&lt;property&gt;
&lt;name&gt;dfs.namenode.name.dir&lt;/name&gt;
&lt;value&gt;/data/nn&lt;/value&gt;
&lt;/property&gt;
&lt;property&gt;
&lt;name&gt;dfs.namenode.hosts&lt;/name&gt;
&lt;value&gt;ä¸»æœº1ï¼Œä¸»æœº2ï¼Œä¸»æœº3&lt;/value&gt;
&lt;/property&gt;
&lt;property&gt;
&lt;name&gt;dfs.blocksize&lt;/name&gt;
&lt;value&gt;268435456&lt;/value&gt; 
&lt;/property&gt;
&lt;property&gt;
&lt;name&gt;dfs.namenode.handler.count&lt;/name&gt;
&lt;value&gt;100&lt;/value&gt; 
&lt;/property&gt;
&lt;property&gt;
&lt;name&gt;dfs.datanode.data.dir&lt;/name&gt;
&lt;value&gt;/data/dn&lt;/value&gt;
&lt;/property&gt;
&lt;/configuration&gt;
å¤åˆ¶<br>å› ä¸ºåœ¨è¿™é‡Œé…ç½®äº†ï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/77bc7b7f550c429e9cc75bc812091591.png" referrerpolicy="no-referrer"><br>
<img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/f242d54fdd65455c8b2fdeb44b9ae782.png" referrerpolicy="no-referrer">ç°åœ¨è¦åˆ›å»ºè¿™ä¸¤ä¸ªç›®å½•ï¼Œä¸Šä¸€æ­¥é€€å‡ºå°±å¯ä»¥ç›´æ¥åˆ›å»ºï¼Œä¸»æœº 123 ä¸‰ä¸ªéƒ½è¦åˆ†åˆ«åˆ›å»ºã€‚ä¸»æœº23 å…ˆåˆ›å»ºåé¢åˆ†å‘ç›´æ¥ç”¨ï¼š
<img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/9ea4336c20e741b2a5f2a30e640c896a.png" referrerpolicy="no-referrer"><br><br>Linux&lt;configuration&gt; 
&lt;property&gt;
&lt;name&gt;mapreduce.framework.name&lt;/name&gt; 
&lt;value&gt;yarn&lt;/value&gt; 
&lt;/property&gt;
&lt;property&gt; 
&lt;name&gt;mapreduce.application.classpath&lt;/name&gt;
&lt;value&gt;$HADOOP_MAPRED_HOME/share/hadoop/mapreduce/:$HADOOP_MAPRED_HOME/share/hadoop/mapreduce/lib/&lt;/value&gt;
&lt;/property&gt;
&lt;/configuration&gt;
å¤åˆ¶<br><br>Linux&lt;configuration&gt; 
&lt;property&gt; 
&lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt; &lt;value&gt;mapreduce_shuffle&lt;/value&gt;                                  
&lt;/property&gt; 
&lt;property&gt;     
&lt;name&gt;yarn.nodemanager.env-whitelist&lt;/name&gt; &lt;value&gt;JAVA_HOME,HADOOP_COMMON_HOME,HADOOP_HDFS_HOME,HADOOP_CONF_DIR,CLASSPATH_PREPEND_DISTCACHE,HADOOP_YARN_HOME,HADOOP_MAPRED_HOME&lt;/value&gt;  
&lt;/property&gt;
&lt;property&gt;
&lt;name&gt;yarn.scheduler.minimum-allocation-mb&lt;/name&gt;  
yarn.scheduler.minimum-allocation-mb
&lt;value&gt;2048&lt;/value&gt; 
&lt;/property&gt; 
&lt;/configuration&gt;
å¤åˆ¶<br><br><br>å…ˆcdåˆ°hadoopçš„æ–‡ä»¶ä¸‹<br>Linuxcd /export/server
 
scp -r hadoop-3.3.4 ä¸»æœº2:`pwd`/
 
scp -r hadoop-3.3.4 ä¸»æœº3:`pwd`/
å¤åˆ¶<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/9c4929882611474b93efa022c6b24b96.png" referrerpolicy="no-referrer">   <br><br>ä¸»æœº2ï¼Œ3å…ˆcdåœ¨åˆ›å»º<br>Linuxcd /export/server/

ln -s /export/server/hadoop-3.3.6 hadoop
å¤åˆ¶<br><br>åœ¨å‰ç½®çš„javaç¯å¢ƒå˜é‡ä¸‹é…ç½®Hadoopç¯å¢ƒå˜é‡<br>Linuxvim /etc/profile

export HADOOP_HOME=/export/server/hadoop
export PATH=$PATH:$HADOOP_HOME/bin:$HADOOP_HOME/sbin      
å¤åˆ¶<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/71401cafefa24a64aac96f5254c133b6.png" referrerpolicy="no-referrer"><br><br>ä¸»æœº 123 éƒ½æ‰§è¡Œï¼š ä»¥ root æƒé™ ç»™ hadoop ç”¨æˆ·é…ç½®ç›¸å…³æƒé™ï¼ˆæ²¡æœ‰ hadoop ç”¨æˆ·å…ˆåˆ›å»ºä¸€ä¸ªä¹Ÿè¦æ— å¯†äº’è” sshï¼‰<br>Linuxchown -R hadoop:hadoop /data
 
chown -R hadoop:hadoop /export
å¤åˆ¶<br><br><br>Linux su - hadoop
å¤åˆ¶<br><br>Linuxhdfs namenode -format
å¤åˆ¶<br><br>Linuxä¸€é”®å¯åŠ¨ï¼š
start-all.sh

åˆ†å¼€å¯åŠ¨ï¼š
start-hdfs.sh

start-yarn.sh
å¤åˆ¶<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/cb8ead962568471a93c0e140a82bfba5.png" referrerpolicy="no-referrer"><br>
å¯åŠ¨æˆåŠŸåæœ‰å…­ä¸ª
<img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/66d2e84d5b86478487b0d448b35c0a67.png" referrerpolicy="no-referrer"><br><br><br><br>Linux&lt; property&gt;
    &lt;name&gt;dfs.namenode.http-address&lt;/name&gt;
    &lt;value&gt;0.0.0.0:9870&lt;/value&gt;   
    &lt;description&gt;
The address and the base port where the dfs namenode web ui will listen on.
    &lt;/description&gt;
&lt; /property&gt;   
å¤åˆ¶<br><br>Linux&lt; property&gt;
	&lt;name&gt;yarn.resourcemanager.webapp.address&lt;/name&gt;
	&lt;value&gt;0.0.0.0:8088&lt;/value&gt;   
&lt; /property&gt;
å¤åˆ¶<br><br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/17695a5444064f0b8fba9c8b11aac6dc.png" referrerpolicy="no-referrer">
<img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/48bed0c15ac4428081554f8281cf71b6.png" referrerpolicy="no-referrer">]]></description><link>å¤§æ•°æ®\Hadoop3.3.6.html</link><guid isPermaLink="false">å¤§æ•°æ®/Hadoop3.3.6.md</guid><pubDate>Mon, 16 Oct 2023 14:17:41 GMT</pubDate><enclosure url="https://img-blog.csdnimg.cn/3a34ff41cbf1407a9b8ac991d9e8fa9a.png" length="0" type="image/png"/><content:encoded>&lt;figure&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/3a34ff41cbf1407a9b8ac991d9e8fa9a.png&quot;&gt;&lt;/figure&gt;</content:encoded></item><item><title><![CDATA[HDFS]]></title><description><![CDATA[<a class="tag" href="?query=tag:hdfs" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#hdfs</a> <a class="tag" href="?query=tag:yarn" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#yarn</a> <a class="tag" href="?query=tag:hive" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#hive</a> <a class="tag" href="?query=tag:æ•°æ®åº“" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#æ•°æ®åº“</a> <a class="tag" href="?query=tag:zookeeper" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#zookeeper</a> <a class="tag" href="?query=tag:mapreduce" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#mapreduce</a> 
 <br>
<br><a data-tooltip-position="top" aria-label="1. åˆè¯†" data-href="#1. åˆè¯†" href="\#1._åˆè¯†" class="internal-link" target="_self" rel="noopener">1. åˆè¯†</a>
<br><a data-tooltip-position="top" aria-label="1. å—" data-href="#1. å—" href="\#1._å—" class="internal-link" target="_self" rel="noopener">1. å—</a>
<br><a data-tooltip-position="top" aria-label="1. æ•°æ®çš„è¯»å†™æµç¨‹" data-href="#1. æ•°æ®çš„è¯»å†™æµç¨‹" href="\#1._æ•°æ®çš„è¯»å†™æµç¨‹" class="internal-link" target="_self" rel="noopener">1. æ•°æ®çš„è¯»å†™æµç¨‹</a>
<br><a data-tooltip-position="top" aria-label="1. æ ¸å¿ƒæ¶æ„" data-href="#1. æ ¸å¿ƒæ¶æ„" href="\#1._æ ¸å¿ƒæ¶æ„" class="internal-link" target="_self" rel="noopener">1. æ ¸å¿ƒæ¶æ„</a>

<br><a data-tooltip-position="top" aria-label="1. æ ¸å¿ƒæ¶æ„ > 1. YARNçš„æ¶æ„æœ‰å“ª2ä¸ªè§’è‰²ï¼Ÿ" data-href="#1. æ ¸å¿ƒæ¶æ„#1. YARNçš„æ¶æ„æœ‰å“ª2ä¸ªè§’è‰²ï¼Ÿ" href="\#1._æ ¸å¿ƒæ¶æ„#1._YARNçš„æ¶æ„æœ‰å“ª2ä¸ªè§’è‰²ï¼Ÿ" class="internal-link" target="_self" rel="noopener">1. YARNçš„æ¶æ„æœ‰å“ª2ä¸ªè§’è‰²ï¼Ÿ</a>
<br><a data-tooltip-position="top" aria-label="1. æ ¸å¿ƒæ¶æ„ > 2. ä¸¤ä¸ªè§’è‰²å„è‡ªçš„åŠŸèƒ½æ˜¯ä»€ä¹ˆï¼Ÿ" data-href="#1. æ ¸å¿ƒæ¶æ„#2. ä¸¤ä¸ªè§’è‰²å„è‡ªçš„åŠŸèƒ½æ˜¯ä»€ä¹ˆï¼Ÿ" href="\#1._æ ¸å¿ƒæ¶æ„#2._ä¸¤ä¸ªè§’è‰²å„è‡ªçš„åŠŸèƒ½æ˜¯ä»€ä¹ˆï¼Ÿ" class="internal-link" target="_self" rel="noopener">2. ä¸¤ä¸ªè§’è‰²å„è‡ªçš„åŠŸèƒ½æ˜¯ä»€ä¹ˆï¼Ÿ</a>
<br><a data-tooltip-position="top" aria-label="1. æ ¸å¿ƒæ¶æ„ > 3. ä»€ä¹ˆæ˜¯YARNçš„å®¹å™¨ï¼Ÿ" data-href="#1. æ ¸å¿ƒæ¶æ„#3. ä»€ä¹ˆæ˜¯YARNçš„å®¹å™¨ï¼Ÿ" href="\#1._æ ¸å¿ƒæ¶æ„#3._ä»€ä¹ˆæ˜¯YARNçš„å®¹å™¨ï¼Ÿ" class="internal-link" target="_self" rel="noopener">3. ä»€ä¹ˆæ˜¯YARNçš„å®¹å™¨ï¼Ÿ</a>


<br><a data-tooltip-position="top" aria-label="2. è¾…åŠ©æ¶æ„" data-href="#2. è¾…åŠ©æ¶æ„" href="\#2._è¾…åŠ©æ¶æ„" class="internal-link" target="_self" rel="noopener">2. è¾…åŠ©æ¶æ„</a>

<br><a data-tooltip-position="top" aria-label="2. è¾…åŠ©æ¶æ„ > 1. Webåº”ç”¨ä»£ç†ï¼ˆWeb Application Proxy)" data-href="#2. è¾…åŠ©æ¶æ„#1. Webåº”ç”¨ä»£ç†ï¼ˆWeb Application Proxy)" href="\#2._è¾…åŠ©æ¶æ„#1._Webåº”ç”¨ä»£ç†ï¼ˆWeb_Application_Proxy)" class="internal-link" target="_self" rel="noopener">1. Webåº”ç”¨ä»£ç†ï¼ˆWeb Application Proxy)</a>
<br><a data-tooltip-position="top" aria-label="2. è¾…åŠ©æ¶æ„ > 2. JobHistoryServerå†å²æœåŠ¡å™¨" data-href="#2. è¾…åŠ©æ¶æ„#2. JobHistoryServerå†å²æœåŠ¡å™¨" href="\#2._è¾…åŠ©æ¶æ„#2._JobHistoryServerå†å²æœåŠ¡å™¨" class="internal-link" target="_self" rel="noopener">2. JobHistoryServerå†å²æœåŠ¡å™¨</a>


<br><a data-tooltip-position="top" aria-label="æµ‹è¯•" data-href="#æµ‹è¯•" href="\#æµ‹è¯•" class="internal-link" target="_self" rel="noopener">æµ‹è¯•</a>

<br><a data-tooltip-position="top" aria-label="æµ‹è¯• > 1. åœ†å‘¨ç‡" data-href="#æµ‹è¯•#1. åœ†å‘¨ç‡" href="\#æµ‹è¯•#1._åœ†å‘¨ç‡" class="internal-link" target="_self" rel="noopener">1. åœ†å‘¨ç‡</a>
<br><a data-tooltip-position="top" aria-label="æµ‹è¯• > 2. ç»Ÿè®¡å•è¯" data-href="#æµ‹è¯•#2. ç»Ÿè®¡å•è¯" href="\#æµ‹è¯•#2._ç»Ÿè®¡å•è¯" class="internal-link" target="_self" rel="noopener">2. ç»Ÿè®¡å•è¯</a>
<br><a data-tooltip-position="top" aria-label="æµ‹è¯• > 3. è’™ç‰¹å¡ç½—ç®—æ³•æ±‚PIçš„åŸºç¡€åŸç†" data-href="#æµ‹è¯•#3. è’™ç‰¹å¡ç½—ç®—æ³•æ±‚PIçš„åŸºç¡€åŸç†" href="\#æµ‹è¯•#3._è’™ç‰¹å¡ç½—ç®—æ³•æ±‚PIçš„åŸºç¡€åŸç†" class="internal-link" target="_self" rel="noopener">3. è’™ç‰¹å¡ç½—ç®—æ³•æ±‚PIçš„åŸºç¡€åŸç†</a>


<br><a data-tooltip-position="top" aria-label="Hiveæµ‹è¯•" data-href="#Hiveæµ‹è¯•" href="\#Hiveæµ‹è¯•" class="internal-link" target="_self" rel="noopener">Hiveæµ‹è¯•</a>
<br><a data-tooltip-position="top" aria-label="1. ZooKeeperæ˜¯ä»€ä¹ˆ" data-href="#1. ZooKeeperæ˜¯ä»€ä¹ˆ" href="\#1._ZooKeeperæ˜¯ä»€ä¹ˆ" class="internal-link" target="_self" rel="noopener">1. ZooKeeperæ˜¯ä»€ä¹ˆ</a>
<br><a data-tooltip-position="top" aria-label="2.  Zookeeperçš„ç‰¹ç‚¹" data-href="#2.  Zookeeperçš„ç‰¹ç‚¹" href="\#2.__Zookeeperçš„ç‰¹ç‚¹" class="internal-link" target="_self" rel="noopener">2.  Zookeeperçš„ç‰¹ç‚¹</a>
<br><a data-tooltip-position="top" aria-label="3. Zookeeperçš„æ•°æ®æ¨¡å‹" data-href="#3. Zookeeperçš„æ•°æ®æ¨¡å‹" href="\#3._Zookeeperçš„æ•°æ®æ¨¡å‹" class="internal-link" target="_self" rel="noopener">3. Zookeeperçš„æ•°æ®æ¨¡å‹</a>
<br><a data-tooltip-position="top" aria-label="MapReduceçš„æ ¸å¿ƒæ€æƒ³" data-href="#MapReduceçš„æ ¸å¿ƒæ€æƒ³" href="\#MapReduceçš„æ ¸å¿ƒæ€æƒ³" class="internal-link" target="_self" rel="noopener">MapReduceçš„æ ¸å¿ƒæ€æƒ³</a>
<br><a data-tooltip-position="top" aria-label="MapReduceçš„é˜¶æ®µåˆ†ç±»" data-href="#MapReduceçš„é˜¶æ®µåˆ†ç±»" href="\#MapReduceçš„é˜¶æ®µåˆ†ç±»" class="internal-link" target="_self" rel="noopener">MapReduceçš„é˜¶æ®µåˆ†ç±»</a>

<br><a data-tooltip-position="top" aria-label="MapReduceçš„é˜¶æ®µåˆ†ç±» > ç¬¬ä¸€é˜¶æ®µ: Map:" data-href="#MapReduceçš„é˜¶æ®µåˆ†ç±»#ç¬¬ä¸€é˜¶æ®µ: Map:" href="\#MapReduceçš„é˜¶æ®µåˆ†ç±»#ç¬¬ä¸€é˜¶æ®µ:_Map:" class="internal-link" target="_self" rel="noopener">ç¬¬ä¸€é˜¶æ®µ: Map:</a>
<br><a data-tooltip-position="top" aria-label="MapReduceçš„é˜¶æ®µåˆ†ç±» > ç¬¬äºŒé˜¶æ®µ: Reduce" data-href="#MapReduceçš„é˜¶æ®µåˆ†ç±»#ç¬¬äºŒé˜¶æ®µ: Reduce" href="\#MapReduceçš„é˜¶æ®µåˆ†ç±»#ç¬¬äºŒé˜¶æ®µ:_Reduce" class="internal-link" target="_self" rel="noopener">ç¬¬äºŒé˜¶æ®µ: Reduce</a>


<br><a data-tooltip-position="top" aria-label="MapReduceçš„ç¼–ç¨‹è§„èŒƒ" data-href="#MapReduceçš„ç¼–ç¨‹è§„èŒƒ" href="\#MapReduceçš„ç¼–ç¨‹è§„èŒƒ" class="internal-link" target="_self" rel="noopener">MapReduceçš„ç¼–ç¨‹è§„èŒƒ</a>
- <a data-tooltip-position="top" aria-label="ç¬¬äºŒé˜¶æ®µ: Reduce > Mapper" data-href="#ç¬¬äºŒé˜¶æ®µ: Reduce#Mapper" href="\#ç¬¬äºŒé˜¶æ®µ:_Reduce#Mapper" class="internal-link" target="_self" rel="noopener">Mapper</a>
- <a data-tooltip-position="top" aria-label="ç¬¬äºŒé˜¶æ®µ: Reduce > Reducer" data-href="#ç¬¬äºŒé˜¶æ®µ: Reduce#Reducer" href="\#ç¬¬äºŒé˜¶æ®µ:_Reduce#Reducer" class="internal-link" target="_self" rel="noopener">Reducer</a>
- <a data-tooltip-position="top" aria-label="ç¬¬äºŒé˜¶æ®µ: Reduce > Driver" data-href="#ç¬¬äºŒé˜¶æ®µ: Reduce#Driver" href="\#ç¬¬äºŒé˜¶æ®µ:_Reduce#Driver" class="internal-link" target="_self" rel="noopener">Driver</a>
<br><br><a href=".?query=tag:hdfs" class="tag" target="_blank" rel="noopener">#hdfs</a> <br><br>HDFSåªæ˜¯åˆ†å¸ƒå¼æ–‡ä»¶ç®¡ç†ç³»ç»Ÿä¸­çš„ä¸€ç§
å¯ä»¥ç†è§£ä¸ºä¸€ä»½æ•°æ®åˆ‡å‰²ä¸ºå¤šä»½
æœ‰å¤šå°‘ä»½å°±è¦ä¸Šä¼ å‡ æ¬¡æ•°æ®<br>ç¼ºç‚¹

ä½†æ˜¯å¢åˆ æŸ¥æ”¹ä¸æ˜¯å¾ˆæ–¹ä¾¿
ä¸é€‚åˆä½å»¶è¿Ÿæ•°æ®è®¿é—®
æ— æ³•é«˜æ•ˆå­˜å‚¨å¤§é‡å°æ–‡ä»¶
ä¸æ”¯æŒå¤šç”¨æˆ·å†™å…¥åŠä»»æ„ä¿®æ”¹æ–‡ä»¶

<br><br>ä¼˜ç‚¹
æ”¯æŒå¤§è§„æ¨¡æ–‡ä»¶å­˜å‚¨
ç®€åŒ–ç³»ç»Ÿè®¾è®¡
é€‚åˆæ•°æ®å¤‡ä»½
<br><br>Tip<br>1.å®¢æˆ·ç«¯å‘NameNodeå‘èµ·è¯·æ±‚
2.NameNodeå®¡æ ¸æƒé™ã€å‰©ä½™ç©ºé—´åï¼Œæ»¡è¶³æ¡ä»¶å…è®¸å†™å…¥ï¼Œå¹¶å‘ŠçŸ¥å®¢æˆ·ç«¯å†™å…¥çš„DataNodeåœ°å€
3.å®¢æˆ·ç«¯å‘æŒ‡å®šçš„DataNodeå‘é€æ•°æ®åŒ…
4.è¢«å†™å…¥æ•°æ®çš„DataNodeåŒæ—¶å®Œæˆæ•°æ®å‰¯æœ¬çš„å¤åˆ¶å·¥ä½œï¼Œå°†å…¶æ¥æ”¶çš„æ•°æ®åˆ†å‘ç»™å…¶å®ƒDataNode
5.å¦‚ä¸Šå›¾ï¼ŒDataNode1å¤åˆ¶ç»™DataNode2,ç„¶ååŸºäºDataNode2å¤åˆ¶ç»™Datanode3å’ŒDataNode4
6.å†™å…¥å®Œæˆå®¢æˆ·ç«¯é€šçŸ¥NameNode,NameNodeåšå…ƒæ•°æ®è®°å½•å·¥ä½œ
å¤åˆ¶<br><img alt="image.png" src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310101917054.png" referrerpolicy="no-referrer"><br><br>è®¡ç®—å°±æ˜¯æ ¹æ®å†…å®¹åˆ†æè·å–æƒ³è¦çš„æ•°æ®
åˆ†å¸ƒå¼ å­˜å‚¨å°±æ˜¯é  æ•°é‡ å–èƒœ
ä¹Ÿå°±æ˜¯ï¼š
åˆ†æ•£ -&gt; æ±‡æ€»æ¨¡å¼
ä¾‹å¦‚ æˆ‘å›½çš„äººå£æ™®æŸ¥<br><br><a href=".?query=tag:yarn" class="tag" target="_blank" rel="noopener">#yarn</a>
<img alt="image.png" src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310111325477.png" referrerpolicy="no-referrer"><br><img alt="image.png" src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310081519119.png" referrerpolicy="no-referrer"><br><br><br>Node
ä¸»ï¼ˆMaster):ResourceManager
ä»ï¼ˆ5lave):NodeManager
<img alt="image.png" src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310081529279.png" referrerpolicy="no-referrer">
<br><br>Node
ResourceManager:ç®¡ç†ã€ç»Ÿç­¹å¹¶åˆ†é…æ•´ä¸ªé›†ç¾¤çš„èµ„æº
NodeManager:ç®¡ç†ã€åˆ†é…å•ä¸ªæœåŠ¡å™¨çš„èµ„æºï¼Œå³åˆ›å»ºç®¡ç†å®¹å™¨ï¼Œç”±å®¹å™¨æä¾›èµ„æºä¾›ç¨‹åºä½¿ç”¨
<br><br>Node
å®¹å™¨ï¼ˆContainer)æ˜¯YARNçš„NodeManageråœ¨æ‰€å±æœåŠ¡å™¨ä¸Šåˆ†é…èµ„æºçš„æ‰‹æ®µ
åˆ›å»ºä¸€ä¸ªèµ„æºå®¹å™¨ï¼Œå³ç”±NodeManagerå ç”¨è¿™éƒ¨åˆ†èµ„æº
ç„¶ååº”ç”¨ç¨‹åºè¿è¡Œåœ¨NodeManageråˆ›å»ºçš„è¿™ä¸ªå®¹å™¨å†…
åº”ç”¨ç¨‹åºæ— æ³•çªç ´å®¹å™¨çš„èµ„æºé™åˆ¶
<br><br><br>ä»£ç†æœåŠ¡å™¨é»˜è®¤é›†æˆåœ¨äº†ResourceManagerä¸­
ä¹Ÿå¯ä»¥å°†å…¶åˆ†ç¦»å‡ºæ¥å•ç‹¬å¯åŠ¨ï¼Œå¦‚æœè¦åˆ†ç¦»ä»£ç†æœåŠ¡å™¨<br>ä¾‹å¦‚
è­¦å‘Šç”¨æˆ·æ­£åœ¨è®¿é—®ä¸€ä¸ªä¸å—ä¿¡ä»»çš„ç«™ç‚¹
å‰¥ç¦»ç”¨æˆ·è®¿é—®çš„Cookieç­‰
<br><br>å†å²æœåŠ¡å™¨çš„åŠŸèƒ½å¾ˆç®€å•ï¼šè®°å½•å†å²è¿è¡Œçš„ç¨‹åºçš„ä¿¡æ¯ä»¥åŠäº§ç”Ÿçš„æ—¥å¿—å¹¶æä¾›WEBUIç«™ç‚¹ä¾›ç”¨æˆ·ä½¿ç”¨æµè§ˆå™¨æŸ¥çœ‹<br><img alt="image.png" src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310081538282.png" referrerpolicy="no-referrer"><br>æ€»ç»“
YARNçš„æ¶æ„æœ‰å“ªäº›è§’è‰²
æ ¸å¿ƒè§’è‰²ï¼šResourceManagerå’ŒNodeManager
è¾…åŠ©è§’è‰²ï¼šProxyServer,ä¿éšœWEBUè®¿é—®çš„å®‰å…¨æ€§
è¾…åŠ©è§’è‰²ï¼šJobHistoryserver,è®°å½•å†å²ç¨‹åºè¿è¡Œä¿¡æ¯å’Œæ—¥å¿—
<br><br><br>é¦–å…ˆç”± One æ¥å¯åŠ¨
start-all.sh  æˆ–è€… start-hdfs.sh  å’Œ  start-yarn.sh
ä»¥åŠå¯åŠ¨æˆ‘ä»¬éœ€è¦çš„æ—¥å¿—ç»“ç‚¹ç«¯å£<br>Linuxmapred --daemon(start|stop) historyserver
yarn --daemon start timelineserver
å¤åˆ¶<br>å½“ç»“ç‚¹éƒ½å¯åŠ¨å¥½ä¸€å…±8ä¸ª
æ¥ä¸‹æ¥å°±å¼€å§‹ è¿è¡Œ<br>Linuxcd /export/server/hadoop/share/hadoop/mapreduce/
hadoop jar hadoop-mapreduce-examples-3.3.6.jar pi 3 1000
å¤åˆ¶<br><img alt="image.png" src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310081738240.png" referrerpolicy="no-referrer"><br>Warning
å‚æ•°piè¡¨ç¤ºè¦è¿è¡Œçš„Javaç±»ï¼Œè¿™é‡Œè¡¨ç¤ºè¿è¡ŒjaråŒ…ä¸­çš„æ±‚piç¨‹åº<br>
å‚æ•°3ï¼Œè¡¨ç¤ºè®¾ç½®å‡ ä¸ªmapä»»åŠ¡<br>
å‚æ•°1000ï¼Œè¡¨ç¤ºæ¨¡æ‹Ÿæ±‚PIçš„æ ·æœ¬æ•°ï¼ˆè¶Šå¤§æ±‚çš„PIè¶Šå‡†ç¡®ï¼Œä½†æ˜¯é€Ÿåº¦è¶Šæ…¢ï¼‰
<br><br>å‡†å¤‡ä¸€ä»½æ•°æ®æ–‡ä»¶ï¼Œå¹¶ä¸Šä¼ åˆ° HDFS ä¸­ã€‚<br>æ–‡ä»¶å†…å®¹
hadoop it bigdata hello world
hello bigdata hdfs
it is hadoop hdfs
hdfs mapreduce yarn
hadoop yarn
<br>å°†ä¸Šé¢å†…å®¹ä¿å­˜åˆ°Linuxä¸­ä¸ºwords.txtæ–‡ä»¶ï¼Œå¹¶ä¸Šä¼ åˆ°HDFS<br>Linuxhadoop fs -mkdir -p /input
hadoop fs -mkdir /output
hadoop fs -ls /
hadoop fs -put words.txt /input/
hadoop fs -ls /input/
hadoop jar /export/server/hadoop/share/hadoop/mapreduce/hadoop-mapreduce-examples-3.3.6.jar wordcount hdfs://One:8020/input hdfs://Two:8020/output/wc
å¤åˆ¶<br>Warning
hdfs://Two:8020/output/wc
é‡Œé¢çš„ wcåœ¨å¼€å§‹çš„ HDFS æ²¡æœ‰è¿›è¡Œåˆ›å»º å¦åˆ™ä¼šæŠ¥é”™ 
<br>æ‰§è¡Œå®Œæˆåï¼Œå¯ä»¥æŸ¥çœ‹HDFSä¸Šçš„è¾“å‡ºç»“æœ<br>Linuxhadoop fs -ls /output/wc
hadoop fs -cat /output/wc/*
å¤åˆ¶<br><img src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310081744467.png" referrerpolicy="no-referrer"><br><br>Monte Carloç®—æ³•çš„åŸºæœ¬æ€æƒ³æ˜¯ï¼šä»¥æ¨¡æ‹Ÿçš„â€å®éªŒâ€å½¢å¼ã€ä»¥å¤§é‡éšæœºæ ·æœ¬çš„ç»Ÿè®¡å½¢å¼ï¼Œæ¥å¾—åˆ°é—®é¢˜çš„æ±‚è§£ã€‚
æ¯”å¦‚ï¼Œæ±‚åœ†å‘¨ç‡ï¼Œä»¥æ•°å­¦çš„æ–¹å¼æ˜¯éå¸¸å¤æ‚çš„ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥ä»¥ç®€å•çš„å½¢å¼å»æ±‚è§£<br><img alt="image.png" src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310081927215.png" referrerpolicy="no-referrer">
å¦‚å›¾ï¼Œæˆ‘ä»¬åœ¨æ­£æ–¹å½¢å†…ï¼Œéšæœºè½ç‚¹
ç»Ÿè®¡è½åœ¨1/4åœ†å†…çš„ç‚¹å’Œæ€»ç‚¹æ•°é‡çš„æ¯”ä¾‹å³å¯å¾—åˆ°1/4çš„PI
æœ€ç»ˆä¹˜ä»¥4å³å¯å¾—åˆ°PI
æ¯”å¦‚ï¼Œçº¢è‰²ç‚¹çš„æ•°é‡æ¯”å…¨éƒ¨ç‚¹çš„æ•°é‡ï¼Œç»“æœæ˜¯0.765
é‚£ä¹ˆä¹˜ä»¥å››å¯ä»¥å¾—åˆ°3.06.
3.06å°±æ˜¯æ±‚å¾—çš„PI
æ‰€ä»¥ï¼Œæ­¤æ–¹æ³•ï¼Œéœ€è¦å¤§é‡çš„æ ·æœ¬ï¼ˆè½ç‚¹ï¼‰,æ ·æœ¬è¶Šå¤šè¶Šç²¾å‡†<br>Pythonä»£ç å®ç°å¦‚ä¸‹<br>Python import random
 sample_num=int(input("è¯·è¾“å…¥æ ·æœ¬æ•°ï¼š"))
 inner_point=0
 pi=0
 for i in range(sample_num):
     a = random . uniform ( 0 , 1 )
     b=random.uniform(0,1)
     if a*a + b*b â‰¤ 1:
         inner_point=inner_point+1
 pi=(inner_point/sample_num)*4
 print(f'æ ·æœ¬æ•°ï¼š{sample_num},piè¿‘ä¼¼ç­‰äºï¼š{pi}')
å¤åˆ¶<br><br><a href=".?query=tag:hive" class="tag" target="_blank" rel="noopener">#hive</a> <a href=".?query=tag:æ•°æ®åº“" class="tag" target="_blank" rel="noopener">#æ•°æ®åº“</a> <br>Tip
Apache Hiveæ˜¯ä¸€æ¬¾åˆ†å¸ƒå¼SQLè®¡ç®—çš„å·¥å…·ï¼Œå…¶ä¸»è¦åŠŸèƒ½æ˜¯ï¼š
å°†SQLè¯­å¥ç¿»è¯‘æˆMapReduceç¨‹åºè¿è¡Œ
<br>Success
ä½¿ç”¨Hiveå¤„ç†æ•°æ®çš„å¥½å¤„
æ“ä½œæ¥å£é‡‡ç”¨ç±»SQLè¯­æ³•ï¼Œæä¾›å¿«é€Ÿå¼€å‘çš„èƒ½åŠ›ï¼ˆç®€å•ã€å®¹æ˜“ä¸Šæ‰‹ï¼‰
åº•å±‚æ‰§è¡ŒMapReduce,å¯ä»¥å®Œæˆåˆ†å¸ƒå¼æµ·é‡æ•°æ®çš„SQLå¤„ç†
<br><img alt="image.png" src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310081937944.png" referrerpolicy="no-referrer">
<img alt="image.png" src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310081938832.png" referrerpolicy="no-referrer"><br>å…ƒæ•°æ®å­˜å‚¨
é€šå¸¸æ˜¯å­˜å‚¨åœ¨å…³ç³»æ•°æ®åº“å¦‚mysql/derbyä¸­ã€‚Hiveä¸­çš„å…ƒæ•°æ®åŒ…æ‹¬è¡¨çš„åå­—ï¼Œè¡¨çš„åˆ—å’Œåˆ†åŒºåŠå…¶å±æ€§ï¼Œè¡¨çš„å±æ€§ï¼ˆæ˜¯å¦ä¸ºå¤–éƒ¨è¡¨ç­‰ï¼‰,è¡¨çš„æ•°æ®æ‰€åœ¨ç›®å½•ç­‰ã€‚
--Hiveæä¾›äº†MetastoreæœåŠ¡è¿›ç¨‹æä¾›å…ƒæ•°æ®ç®¡ç†åŠŸèƒ½<br>Driver é©±åŠ¨ç¨‹åºï¼ŒåŒ…æ‹¬è¯­æ³•è§£æå™¨ã€è®¡åˆ’ç¼–è¯‘å™¨ã€ä¼˜åŒ–å™¨ã€æ‰§è¡Œå™¨
å®ŒæˆHQLæŸ¥è¯¢è¯­å¥ä»è¯æ³•åˆ†æã€è¯­æ³•åˆ†æã€ç¼–è¯‘ã€ä¼˜åŒ–ä»¥åŠæŸ¥è¯¢è®¡åˆ’çš„ç”Ÿæˆã€‚ç”Ÿæˆçš„æŸ¥è¯¢è®¡åˆ’å­˜å‚¨åœ¨HDFSä¸­ï¼Œå¹¶åœ¨éšåæœ‰æ‰§è¡Œå¼•æ“è°ƒç”¨æ‰§è¡Œã€‚<br>ç”¨æˆ·æ¥å£
åŒ…æ‹¬CLIã€JDBC/ODBCã€WebGUIã€‚å…¶ä¸­ï¼ŒCLI(command line interface)ä¸ºshellå‘½ä»¤è¡Œï¼›Hiveä¸­çš„ThriftæœåŠ¡å™¨å…è®¸å¤–éƒ¨å®¢æˆ·ç«¯é€šè¿‡ç½‘ç»œä¸Hiveè¿›è¡Œäº¤äº’ï¼Œç±»ä¼¼äºJDBCæˆ–ODBCåè®®ã€‚WebGUIæ˜¯é€šè¿‡æµè§ˆå™¨è®¿é—®Hiveã€‚
--Hiveæä¾›äº† Hive Shellã€ThriftServerç­‰æœåŠ¡è¿›ç¨‹å‘ç”¨æˆ·æä¾›æ“ä½œæ¥å£<br>Danger
 nohup bin/hive --service metastore &gt;&gt; logs/metastore.log 2&gt;&amp;1 &amp;
<br><br>å¯åŠ¨ä»£ç <br>Danger
ä¸€å®šè¦åœ¨hiveé‡Œé¢å¯åŠ¨
<br>Linuxstart-all.sh
nohup bin/hive --service metastore &gt;&gt; logs/metastore.log 2&gt;&amp;1 &amp;
nohup bin/hive --service hiveserver2 &gt;&gt; logs/hiveserver2.log 2&gt;&amp;1 &amp;
mapred --daemon start historyserver
å¤åˆ¶<br><img alt="image.png" src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310082151727.png" referrerpolicy="no-referrer"><br>ç¡®ä¿å¦‚ä¸Šå›¾<br>å¼€å§‹<br>Linuxcd /export/server/hive
bin /hive
å¤åˆ¶<br>è¿›å…¥åˆ°Hive Shellç¯å¢ƒä¸­ï¼Œå¯ä»¥ç›´æ¥æ‰§è¡ŒSQLè¯­å¥ã€‚  <br>åˆ›å»ºè¡¨<br>LinuxCREATE TABLE test(id INT, name STRING, gender STRING);
show tables;
å¤åˆ¶<br>æ’å…¥æ•°æ®<br>Linuxinsert into test values(1,'mm','nan');
INSERT INTO test VALUES(2,'ç‹åŠ›çº¢','ç”·'),(3,'æå','å¥³');
å¤åˆ¶<br>æ‰§è¡Œéå¸¸éå¸¸æ…¢ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼<br>æŸ¥è¯¢æ•°æ®<br>LinxuSELECT gender, COUNT(*) AS cnt FROM test GROUP BY gender;
å¤åˆ¶<br><img alt="image.png" src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310082153097.png" referrerpolicy="no-referrer"><br>éªŒè¯Hiveçš„æ•°æ®å­˜å‚¨<br>
Hiveçš„æ•°æ®å­˜å‚¨åœ¨HDFSçš„ï¼š/user/hive/warehouseä¸­
<img alt="image.png" src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310082153824.png" referrerpolicy="no-referrer"><br><br><a href=".?query=tag:zookeeper" class="tag" target="_blank" rel="noopener">#zookeeper</a><br><br>Note

<br>zookeeperæ˜¯â¼€ä¸ªä¸ºåˆ†å¸ƒå¼åº”â½¤ç¨‹åºæä¾›çš„â¼€ä¸ªåˆ†å¸ƒå¼å¼€æºåè°ƒæœåŠ¡æ¡† æ¶ã€‚æ˜¯Googleçš„Chubbyçš„â¼€ä¸ªå¼€æºå®ç°ï¼Œæ˜¯Hadoopå’ŒHbaseçš„é‡è¦ç»„ä»¶ã€‚ ä¸»è¦â½¤äºè§£å†³åˆ†å¸ƒå¼é›†ç¾¤ä¸­åº”â½¤ç³»ç»Ÿçš„â¼€è‡´æ€§é—®é¢˜ã€‚
<br>æä¾›äº†åŸºäºç±»ä¼¼Unixç³»ç»Ÿçš„â½¬å½•èŠ‚ç‚¹æ ‘â½…å¼çš„æ•°æ®å­˜å‚¨ã€‚ 
<br>å¯â½¤äºç»´æŠ¤å’Œç›‘æ§å­˜å‚¨çš„æ•°æ®çš„çŠ¶æ€çš„å˜åŒ–ï¼Œé€šè¿‡ç›‘æ§è¿™äº›æ•°æ®çŠ¶æ€çš„å˜ åŒ–ï¼Œä»â½½è¾¾åˆ°åŸºäºæ•°æ®çš„é›†ç¾¤ç®¡ç† 
<br>æä¾›äº†â¼€ç»„åŸè¯­(æœºå™¨æŒ‡ä»¤)ï¼Œæä¾›äº†javaå’Œcè¯­â¾”çš„æ¥â¼

<br><br>Note

<br>ä¹Ÿæ˜¯â¼€ä¸ªåˆ†å¸ƒå¼é›†ç¾¤ï¼Œâ¼€ä¸ªé¢†å¯¼è€…(leader),å¤šä¸ªè·Ÿéšè€…(follower). 
<br>é›†ç¾¤ä¸­åªè¦æœ‰åŠæ•°ä»¥ä¸Šçš„èŠ‚ç‚¹å­˜æ´»ï¼ŒZookeeperé›†ç¾¤å°±èƒ½æ­£å¸¸æœåŠ¡ã€‚
<br>å…¨å±€æ•°æ®â¼€è‡´æ€§ï¼šæ¯ä¸ªserverä¿å­˜â¼€ä»½ç›¸åŒçš„æ•°æ®å‰¯æœ¬ï¼Œclientâ½†è®º è¿æ¥åˆ°å“ªä¸ªserver,æ•°æ®éƒ½æ˜¯â¼€è‡´çš„ã€‚ 
<br>æ›´æ–°è¯·æ±‚æŒ‰é¡ºåºè¿›â¾ï¼šæ¥â¾ƒåŒâ¼€ä¸ªclientçš„æ›´æ–°è¯·æ±‚æŒ‰å…¶å‘é€é¡ºåºä¾æ¬¡ æ‰§â¾
<br>æ•°æ®æ›´æ–°çš„åŸâ¼¦æ€§ï¼šâ¼€æ¬¡æ•°æ®çš„æ›´æ–°è¦ä¹ˆæˆåŠŸï¼Œè¦ä¹ˆå¤±è´¥ 
<br>æ•°æ®çš„å®æ—¶æ€§ï¼šåœ¨â¼€å®šæ—¶é—´èŒƒå›´å†…ï¼Œclientèƒ½è¯»åˆ°æœ€æ–°æ•°æ®ã€‚

<br><img alt="image.png" src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310102139647.png" referrerpolicy="no-referrer"><br><br><img src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310102139214.png" referrerpolicy="no-referrer"><br><br><a href=".?query=tag:mapreduce" class="tag" target="_blank" rel="noopener">#mapreduce</a>
MapReduceä¸»è¦è§£å†³çš„æ˜¯åˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨ç³»ç»Ÿä¸Šï¼Œæ•°æ®çš„åˆ†å¸ƒå¼è®¡ç®—çš„é—®é¢˜ã€‚åœ¨ä¸Šè¿°å¯¼è¯»éƒ¨åˆ†æˆ‘ä»¬ä»‹ç»è¿‡ä¸€ä¸ª WordCountçš„æ¡ˆä¾‹ï¼Œå°±æ˜¯ä¸€ä¸ªéå¸¸å…¸å‹çš„åˆ†å¸ƒå¼è®¡ç®—çš„æ¡ˆä¾‹ã€‚å¦‚æœæˆ‘ä»¬å°†æ‰€æœ‰çš„éœ€è¦å¤„ç†çš„æ•°æ®ç§»åŠ¨åˆ°ä¸€ä¸ªèŠ‚ç‚¹ ä¸Šè¿›è¡Œå¤„ç†ï¼Œé‚£ä¹ˆåªæ˜¯åœ¨æ•°æ®ä¼ è¾“çš„è¿‡ç¨‹ä¸­å°±å¾—æ¶ˆè€—å¤§é‡çš„æ—¶é—´ï¼Œè€Œä¸”è¿˜å¯èƒ½åœ¨ä¸€å°èŠ‚ç‚¹å­˜ä¸ä¸‹è¿™å¤§é‡çš„æ•°æ®ã€‚å°± ç®—æ˜¯èƒ½å¤Ÿå­˜å‚¨ä¸‹ï¼Œä¹Ÿèƒ½å¤Ÿæ¥å—æ•°æ®ç§»åŠ¨æ‰€å¸¦æ¥çš„æ—¶é—´æ¶ˆè€—ï¼Œé›†ç¾¤ä¸­å…¶ä»–èŠ‚ç‚¹çš„è®¡ç®—èµ„æºä¹Ÿéƒ½æ˜¯åœ¨é—²ç½®çš„ï¼Œä¸èƒ½é«˜æ•ˆ ç‡çš„åˆ©ç”¨é›†ç¾¤ã€‚<br><br>Danger

<br>MapReduceè®¾è®¡çš„ä¸€ä¸ªç†å¿µæ˜¯â€œè®¡ç®—å‘æ•°æ®é æ‹¢â€ï¼ˆç§»åŠ¨è®¡ç®—ï¼‰ï¼Œè€Œä¸æ˜¯â€œæ•°æ®å‘è®¡ç®—é æ‹¢â€ï¼ˆç§»åŠ¨æ•°æ®ï¼‰ 
<br>å°†ç”¨æˆ·ç¼–å†™çš„ä¸šåŠ¡é€»è¾‘ä»£ç å’Œè‡ªå¸¦é»˜è®¤ç»„ä»¶æ•´åˆæˆä¸€ä¸ªå®Œæ•´çš„åˆ†å¸ƒå¼è¿ç®—ç¨‹åºï¼Œç§»åŠ¨åˆ°æœ‰æ•°æ®å­˜å‚¨çš„é›†ç¾¤èŠ‚ ç‚¹ä¸Šï¼Œä¸€æ˜¯å¯ä»¥å‡å°‘èŠ‚ç‚¹é—´çš„æ•°æ®ç§»åŠ¨å¼€é”€ã€‚äºŒæ˜¯åœ¨å­˜å‚¨èŠ‚ç‚¹ä¸Šå¯ä»¥å¹¶è¡Œè®¡ç®—ï¼Œå¤§å¤§æé«˜è®¡ç®—æ•ˆç‡é—®é¢˜ã€‚
<br>MapReduceä¸€ä¸ªå®Œæ•´çš„è¿ç®—åˆ†ä¸ºMapå’ŒReduceä¸¤ä¸ªéƒ¨åˆ†ã€‚Mapä¼šå¤„ç†æœ¬èŠ‚ç‚¹çš„åŸå§‹æ•°æ®ï¼Œäº§ç”Ÿçš„æ•°æ®ä¼šä¸´ æ—¶å­˜å‚¨åˆ°æœ¬åœ°ç£ç›˜ã€‚Reduceä¼šè·¨èŠ‚ç‚¹fetchå±äºè‡ªå·±çš„æ•°æ®ï¼Œå¹¶è¿›è¡Œå¤„ç†ï¼Œäº§ç”Ÿçš„æ•°æ®ä¼šå­˜å‚¨åˆ°HDFSä¸Šã€‚

<br><img src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310111509411.png" referrerpolicy="no-referrer"><br><br><br>ç¬¬ä¸€é˜¶æ®µï¼Œä¹Ÿç§°ä¹‹ä¸ºMapé˜¶æ®µã€‚è¿™ä¸ªé˜¶æ®µä¼šæœ‰è‹¥å¹²ä¸ªMapTaskå®ä¾‹ï¼Œå®Œå…¨å¹¶è¡Œè¿è¡Œï¼Œäº’ä¸ç›¸å¹²ã€‚æ¯ä¸ªMapTaskä¼š è¯»å–åˆ†æä¸€ä¸ªInputSplit(è¾“å…¥åˆ†ç‰‡ï¼Œç®€ç§°åˆ†ç‰‡)å¯¹åº”çš„åŸå§‹æ•°æ®ã€‚è®¡ç®—çš„ç»“æœæ•°æ®ä¼šä¸´æ—¶ä¿å­˜åˆ°æ‰€åœ¨èŠ‚ç‚¹çš„æœ¬åœ°ç£ç›˜ é‡Œã€‚
è¯¥é˜¶æ®µçš„ç¼–ç¨‹æ¨¡å‹ä¸­ä¼šæœ‰ä¸€ä¸ªmapå‡½æ•°éœ€è¦å¼€å‘äººå‘˜é‡å†™ï¼Œmapå‡½æ•°çš„è¾“å…¥æ˜¯ä¸€ä¸ª&lt;key,value&gt;å¯¹,mapå‡½æ•°çš„è¾“å‡º ä¹Ÿæ˜¯ä¸€ä¸ª&lt;key,value&gt;å¯¹,keyå’Œvalueçš„ç±»å‹éœ€è¦å¼€å‘äººå‘˜æŒ‡å®šã€‚å‚è€ƒä¸‹å›¾ï¼š
å¤åˆ¶<br><img src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310111513108.png" referrerpolicy="no-referrer"><br><br>ç¬¬äºŒé˜¶æ®µï¼Œä¹Ÿç§°ä¸ºReduceé˜¶æ®µã€‚è¿™ä¸ªé˜¶æ®µä¼šæœ‰è‹¥å¹²ä¸ªReduceTaskå®ä¾‹å¹¶å‘è¿è¡Œï¼Œäº’ä¸ç›¸å¹²ã€‚ä½†æ˜¯ä»–ä»¬çš„æ•°æ®ä¾èµ– äºä¸Šä¸€ä¸ªé˜¶æ®µçš„æ‰€æœ‰maptaskå¹¶å‘å®ä¾‹çš„è¾“å‡ºã€‚ä¸€ä¸ªReudceTaskä¼šä»å¤šä¸ªMapTaskè¿è¡ŒèŠ‚ç‚¹ä¸Šfetchè‡ªå·±è¦å¤„ç†çš„ åˆ†åŒºæ•°æ®ã€‚ç»è¿‡å¤„ç†åï¼Œè¾“å‡ºåˆ°HDFSä¸Šã€‚ 
è¯¥é˜¶æ®µçš„ç¼–ç¨‹æ¨¡å‹ä¸­æœ‰ä¸€ä¸ªreduceå‡½æ•°éœ€è¦å¼€å‘äººå‘˜é‡å†™ï¼Œreduceå‡½æ•°çš„è¾“å…¥ä¹Ÿæ˜¯ä¸€ä¸ª&lt;keyï¼Œvalue&gt;å¯¹ï¼Œreduce å‡½æ•°çš„è¾“å‡ºä¹Ÿæ˜¯ä¸€ä¸ª&lt;keyï¼Œvalue&gt;å¯¹ã€‚è¿™é‡Œè¦å¼ºè°ƒçš„æ˜¯ï¼Œreduceçš„è¾“å…¥å…¶å®å°±æ˜¯mapçš„è¾“å‡ºï¼Œåªä¸è¿‡mapçš„è¾“å‡º ç»è¿‡shuffleæŠ€æœ¯åå˜æˆäº†&lt;key,List&lt;Value&gt;&gt;è€Œå·²ã€‚å‚è€ƒä¸‹å›¾ï¼š
å¤åˆ¶<br><img alt="image.png" src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310111514531.png" referrerpolicy="no-referrer"><br><br><br>Danger

<br>è‡ªå®šä¹‰ç±»ï¼Œç»§æ‰¿ org.apache.hadoop.mapreduce.Mapper ç±»å‹ 
<br>å®šä¹‰K1,V1,K2,V2çš„æ³›å‹ï¼ˆK1,V1æ˜¯Mapperçš„è¾“å…¥æ•°æ®ç±»å‹ï¼ŒK2,V2æ˜¯Mapperçš„è¾“å‡ºæ•°æ®ç±»å‹ï¼‰ 
<br>é‡å†™mapæ–¹æ³•ï¼ˆå¤„ç†é€»è¾‘ï¼‰

<br><br>Danger

<br>è‡ªå®šä¹‰ç±»ï¼Œç»§æ‰¿ org.apache.hadoop.mapreduce.Reducer ç±»å‹
<br>å®šä¹‰K2,V2,K3,V3çš„æ³›å‹ï¼ˆK2,V2æ˜¯Reducerçš„è¾“å…¥æ•°æ®ç±»å‹ï¼ŒK3,V3æ˜¯Reducerçš„è¾“å‡ºæ•°æ®ç±»å‹ï¼‰ 
<br>é‡å†™reduceæ–¹æ³•çš„å¤„ç†é€»è¾‘

<br><br>Danger
 MapReduceçš„ç¨‹åºï¼Œéœ€è¦è¿›è¡Œæ‰§è¡Œä¹‹å‰çš„å±æ€§é…ç½®ä¸ä»»åŠ¡çš„æäº¤ï¼Œè¿™äº›æ“ä½œéƒ½éœ€è¦åœ¨Driverç±»ä¸­æ¥å®Œæˆ
]]></description><link>å¤§æ•°æ®\HDFS.html</link><guid isPermaLink="false">å¤§æ•°æ®/HDFS.md</guid><pubDate>Mon, 16 Oct 2023 15:09:07 GMT</pubDate><enclosure url="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310101917054.png" length="0" type="image/png"/><content:encoded>&lt;figure&gt;&lt;img src=&quot;https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310101917054.png&quot;&gt;&lt;/figure&gt;</content:encoded></item><item><title><![CDATA[Hive SQL è¯­æ³•å¤§å…¨]]></title><description><![CDATA[<a class="tag" href="?query=tag:hive" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#hive</a> <a class="tag" href="?query=tag:æ•°æ®åº“" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#æ•°æ®åº“</a> 
 <br><br><a href=".?query=tag:hive" class="tag" target="_blank" rel="noopener">#hive</a>  <a href=".?query=tag:æ•°æ®åº“" class="tag" target="_blank" rel="noopener">#æ•°æ®åº“</a> <br><br>SqlCREATE DATABASE [IF NOT EXISTS] db_name [LOCATION] 'path';
SELECT expr, ... FROM tbl ORDER BY col_name [ASC | DESC]
(A | B | C)
å¤åˆ¶<br>å¦‚ä¸Šè¯­æ³•ï¼Œåœ¨è¯­æ³•æè¿°ä¸­å‡ºç°ï¼š<br>
<br>
[]ï¼Œè¡¨ç¤ºå¯é€‰ï¼Œå¦‚ä¸Š[LOCATION] è¡¨ç¤ºå¯å†™ã€å¯ä¸å†™

<br>
|ï¼Œè¡¨ç¤ºæˆ–ï¼Œå¦‚ä¸ŠASC | DESCï¼Œè¡¨ç¤ºäºŒé€‰ä¸€

<br>
...ï¼Œè¡¨ç¤ºåºåˆ—ï¼Œå³æœªå®Œç»“ï¼Œå¦‚ä¸ŠSELECT expr, ... è¡¨ç¤ºåœ¨SELECTåå¯ä»¥è·Ÿå¤šä¸ªexprï¼ˆæŸ¥è¯¢è¡¨è¾¾å¼ï¼‰ï¼Œä»¥é€—å·éš”å¼€

<br>
()ï¼Œè¡¨ç¤ºå¿…å¡«ï¼Œå¦‚ä¸Š(A | B | C)è¡¨ç¤ºæ­¤å¤„å¿…å¡«ï¼Œå¡«å…¥å†…å®¹åœ¨Aã€Bã€Cä¸­ä¸‰é€‰ä¸€

<br><br><br>SqlCREATE DATABASE [IF NOT EXISTS] db_name [LOCATION 'path'] [COMMENT database_comment];
å¤åˆ¶<br>
<br>
IF NOT EXISTSï¼Œå¦‚å­˜åœ¨åŒåæ•°æ®åº“ä¸æ‰§è¡Œä»»ä½•æ“ä½œï¼Œå¦åˆ™æ‰§è¡Œåˆ›å»ºæ•°æ®åº“æ“ä½œ

<br>
[LOCATION]ï¼Œè‡ªå®šä¹‰æ•°æ®åº“å­˜å‚¨ä½ç½®ï¼Œå¦‚ä¸å¡«å†™ï¼Œé»˜è®¤æ•°æ®åº“åœ¨HDFSçš„è·¯å¾„ä¸ºï¼š/user/hive/warehouse

<br>
[COMMENT database_comment]ï¼Œå¯é€‰ï¼Œæ•°æ®åº“æ³¨é‡Š

<br><br>SqlDROP DATABASE [IF EXISTS] db_name [CASCADE];
å¤åˆ¶<br>
<br>[IF EXISTS]ï¼Œå¯é€‰ï¼Œå¦‚æœå­˜åœ¨æ­¤æ•°æ®åº“æ‰§è¡Œåˆ é™¤ï¼Œä¸å­˜åœ¨ä¸æ‰§è¡Œä»»ä½•æ“ä½œ
<br>[CASCADE]ï¼Œå¯é€‰ï¼Œçº§è”åˆ é™¤ï¼Œå³æ•°æ®åº“å†…å­˜åœ¨è¡¨ï¼Œä½¿ç”¨CASCADEå¯ä»¥å¼ºåˆ¶åˆ é™¤æ•°æ®åº“
<br><br>SqlALTER DATABASE database_name SET LOCATION hdfs_path;
å¤åˆ¶<br>ä¸ä¼šåœ¨HDFSå¯¹æ•°æ®åº“æ‰€åœ¨ç›®å½•è¿›è¡Œæ”¹åï¼Œåªæ˜¯ä¿®æ”¹locationåï¼Œæ–°åˆ›å»ºçš„è¡¨åœ¨æ–°çš„è·¯å¾„ï¼Œæ—§çš„ä¸å˜<br><br>SqlUSE db_name;
å¤åˆ¶<br>
<br>é€‰æ‹©æ•°æ®åº“åï¼Œåç»­SQLæ“ä½œåŸºäºå½“å‰é€‰æ‹©çš„åº“æ‰§è¡Œ
<br>å¦‚ä¸ä½¿ç”¨useï¼Œé»˜è®¤åœ¨defaultåº“æ‰§è¡Œ
<br>è‹¥æƒ³åˆ‡æ¢å›ä½¿ç”¨defaultåº“<br>SqlUSE DEFAULT;
å¤åˆ¶<br>æŸ¥è¯¢å½“å‰USEçš„æ•°æ®åº“<br>SqlSELECT current_database();
å¤åˆ¶<br><br><br><br><br>SqlCREATE [EXTERNAL] TABLE tb_name
	(col_name col_type [COMMENT col_comment], ......)
	[COMMENT tb_comment]
	[PARTITIONED BY(col_name, col_type, ......)]
	[CLUSTERED BY(col_name, col_type, ......) INTO num BUCKETS]
	[ROW FORMAT DELIMITED FIELDS TERMINATED BY '']
	[LOCATION 'path']
å¤åˆ¶<br>
<br>
[EXTERNAL]ï¼Œå¤–éƒ¨è¡¨ï¼Œéœ€æ­é…

<br>
[ROW FORMAT DELIMITED FIELDS TERMINATED BY '']æŒ‡å®šåˆ—åˆ†éš”ç¬¦

<br>
[LOCATION 'path']è¡¨æ•°æ®è·¯å¾„

<br>
å¤–éƒ¨è¡¨ç¤ºæ„
SqlCREATE EXTERNAL TABLE test_ext(id int) COMMENT 'external table' ROW FORMAT DELIMITED FIELDS TERMINATED BY '\t' LOCATION 'hdfs://node1:8020/tmp/test_ext';
å¤åˆ¶



<br>
[COMMENT tb_comment]è¡¨æ³¨é‡Šï¼Œå¯é€‰

<br>
[PARTITIONED BY(col_name, col_type, ......)]åŸºäºåˆ—åˆ†åŒº
Sql-- åˆ†åŒºè¡¨ç¤ºæ„
CREATE TABLE test_ext(id int) COMMENT 'partitioned table' PARTITION BY(year string, month string, day string) ROW FORMAT DELIMITED FIELDS TERMINATED BY '\t';
å¤åˆ¶

<br>
[CLUSTERED BY(col_name, col_type, ......)]åŸºäºåˆ—åˆ†æ¡¶
SqlCREATE TABLE course (c_id string,c_name string,t_id string) CLUSTERED BY(c_id) INTO 3 BUCKETS ROW FORMAT DELIMITED FIELDS TERMINATED BY '\t';
å¤åˆ¶

<br><br>SqlCREATE TABLE tbl_name LIKE other_tbl;
å¤åˆ¶<br><br>SqlCREATE TABLE tbl_name AS SELECT ...;
å¤åˆ¶<br><br>SqlDROP TABLE tbl;
å¤åˆ¶<br><br>é‡å‘½å<br>SqlALTER TABLE old RENAME TO new;
å¤åˆ¶<br>ä¿®æ”¹å±æ€§<br>SqlALTER TABLE tbl SET TBLPROPERTIES(key=value);
-- å¸¸ç”¨å±æ€§
("EXTERNAL"="TRUE") -- å†…å¤–éƒ¨è¡¨ï¼ŒTRUEè¡¨ç¤ºå¤–éƒ¨è¡¨
('comment' = new_comment) -- ä¿®æ”¹è¡¨æ³¨é‡Š
-- å…¶ä½™å±æ€§å‚è§
https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL#LanguageManualDDL-listTableProperties
å¤åˆ¶<br><br>åˆ›å»ºåˆ†åŒºè¡¨<br>Sql-- åˆ†åŒºè¡¨ç¤ºæ„
CREATE TABLE test_ext(id int) COMMENT 'partitioned table' PARTITION BY(year string, month string, day string) ROW FORMAT DELIMITED FIELDS TERMINATED BY '\t';
å¤åˆ¶<br>æ·»åŠ åˆ†åŒº<br>SqlALTER TABLE tablename ADD PARTITION (partition_key='partition_value', ......);
å¤åˆ¶<br>ä¿®æ”¹åˆ†åŒºå€¼<br>SqlALTER TABLE tablename PARTITION (partition_key='old_partition_value') RENAME TO PARTITION (partition_key='new_partition_value');
å¤åˆ¶<br>æ³¨æ„<br>åªä¼šåœ¨å…ƒæ•°æ®ä¸­ä¿®æ”¹ï¼Œä¸ä¼šåŒæ­¥ä¿®æ”¹HDFSè·¯å¾„å—ï¼Œå¦‚ï¼š<br>
<br>åŸåˆ†åŒºè·¯å¾„ä¸ºï¼š/user/hive/warehouse/test.db/test_table/month=201910ï¼Œåˆ†åŒºåï¼šmonth='201910'
<br>å°†åˆ†åŒºåä¿®æ”¹ä¸ºï¼š201911åï¼Œåˆ†åŒºæ‰€åœ¨è·¯å¾„ä¸å˜ï¼Œä¾æ—§æ˜¯ï¼š/user/hive/warehouse/test.db/test_table/month=201910
<br>å¦‚æœå¸Œæœ›ä¿®æ”¹åˆ†åŒºååï¼ŒåŒæ­¥ä¿®æ”¹HDFSçš„è·¯å¾„ï¼Œå¹¶ä¿è¯æ­£å¸¸å¯ç”¨ï¼Œéœ€è¦ï¼š<br>
<br>åœ¨å…ƒæ•°æ®åº“ä¸­ï¼šæ‰¾åˆ°SDSè¡¨ -&gt; æ‰¾åˆ°LOCATIONåˆ— -&gt; æ‰¾åˆ°å¯¹åº”åˆ†åŒºçš„è·¯å¾„è®°å½•è¿›è¡Œä¿®æ”¹

<br>å¦‚å°†è®°å½•çš„ï¼š/user/hive/warehouse/test.db/test_table/month=201910 ä¿®æ”¹ä¸ºï¼š/user/hive/warehouse/test.db/test_table/month=201911


<br>åœ¨HDFSä¸­ï¼ŒåŒæ­¥ä¿®æ”¹æ–‡ä»¶å¤¹å

<br>å¦‚å°†æ–‡ä»¶å¤¹ï¼š/user/hive/warehouse/test.db/test_table/month=201910 ä¿®æ”¹ä¸ºï¼š/user/hive/warehouse/test.db/test_table/month=201911


<br>åˆ é™¤åˆ†åŒº<br>SqlALTER TABLE tablename DROP PARTITION (partition_key='partition_value');
å¤åˆ¶<br>
åˆ é™¤åˆ†åŒºåï¼Œåªæ˜¯åœ¨å…ƒæ•°æ®ä¸­åˆ é™¤ï¼Œå³åˆ é™¤å…ƒæ•°æ®åº“ä¸­ï¼š

<br>PARTITIONè¡¨
<br>SDSè¡¨

ç›¸å…³è®°å½•
åˆ†åŒºæ‰€åœ¨çš„HDFSæ–‡ä»¶å¤¹ä¾æ—§ä¿ç•™
<br>åŠ è½½æ•°æ®<br>LOAD DATA<br>SqlLOAD DATA [LOCAL] INPATH 'path' INTO TABLE tbl PARTITION(partition_key='partition_value');
å¤åˆ¶<br>INSERT SELECT<br>SqlINSERT (OVERWRITE | INTO) TABLE tbl PARTITION(partition_key='partition_value') SELECT ... FROM ...;
å¤åˆ¶<br><br>å»ºè¡¨<br>SqlCREATE TABLE course (c_id string,c_name string,t_id string) 
	[PARTITION(partition_key='partition_value')] 
	CLUSTERED BY(c_id) INTO 3 BUCKETS ROW FORMAT DELIMITED FIELDS TERMINATED BY '\t';
å¤åˆ¶<br>
<br>CLUSTERED BY(col) æŒ‡å®šåˆ†æ¡¶åˆ—
<br>INTO 3 BUCKETSï¼Œè®¾å®š3ä¸ªæ¡¶
<br>
åˆ†æ¡¶è¡¨éœ€è¦å¼€å¯ï¼š
set hive.enforce.bucketing=true;
è®¾ç½®è‡ªåŠ¨åŒ¹é…æ¡¶æ•°é‡çš„reduces taskæ•°é‡
<br>æ•°æ®åŠ è½½<br>SqlINSERT (OVERWRITE | INTO) TABLE tbl 
	[PARTITION(partition_key='partition_value')] 
	SELECT ... FROM ... CLUSTER BY(col);
å¤åˆ¶<br>åˆ†æ¡¶è¡¨æ— æ³•ä½¿ç”¨LOAD DATAè¿›è¡Œæ•°æ®åŠ è½½<br><br>LOAD DATA<br>å°†æ•°æ®æ–‡ä»¶åŠ è½½åˆ°è¡¨<br>SqlLOAD DATA [LOCAL] INPATH 'path' INTO TABLE tbl [PARTITION(partition_key='partition_value')];	-- æŒ‡å®šåˆ†åŒºå¯é€‰
å¤åˆ¶<br>INSERT SELECT<br>å°†å…¶å®ƒè¡¨æ•°æ®ï¼ŒåŠ è½½åˆ°ç›®æ ‡è¡¨<br>SqlINSERT (OVERWRITE | INTO) TABLE tbl 
	[PARTITION(partition_key='partition_value')] 		-- æŒ‡å®šåˆ†åŒºï¼Œå¯é€‰
	SELECT ... FROM ... [CLUSTER BY(col)];				-- æŒ‡å®šåˆ†æ¡¶åˆ—ï¼Œå¯é€‰
å¤åˆ¶<br><br>INSERT OVERWRITE SELECT<br>SqlINSERT OVERWRITE [LOCAL] DIRECTORY â€˜pathâ€™ 				-- LOCALå¯é€‰ï¼Œå¸¦LOCALå¯¼å‡ºLinuxæœ¬åœ°ï¼Œä¸å¸¦LOCALå¯¼å‡ºåˆ°HDFS
	[ROW FORMAT DELIMITED FIELDS TERMINATED BY '']		-- å¯é€‰ï¼Œè‡ªå®šä¹‰åˆ—åˆ†éš”ç¬¦
	SELECT ... FROM ...;
å¤åˆ¶<br>bin/hive<br>
<br>bin/hive -e 'sql' &gt; export_file å°†sqlç»“æœé‡å®šå‘åˆ°å¯¼å‡ºæ–‡ä»¶ä¸­
<br>bin/hive -f 'sql_script_file' &gt; export_file å°†sqlè„šæœ¬æ‰§è¡Œçš„ç»“æœé‡å®šå‘åˆ°å¯¼å‡ºæ–‡ä»¶ä¸­
<br><br><br><br><br>Sqlcreate database itheima;
use itheima;
CREATE TABLE itheima.orders (
    orderId bigint COMMENT 'è®¢å•id',
    orderNo string COMMENT 'è®¢å•ç¼–å·',
    shopId bigint COMMENT 'é—¨åº—id',
    userId bigint COMMENT 'ç”¨æˆ·id',
    orderStatus tinyint COMMENT 'è®¢å•çŠ¶æ€ -3:ç”¨æˆ·æ‹’æ”¶ -2:æœªä»˜æ¬¾çš„è®¢å• -1ï¼šç”¨æˆ·å–æ¶ˆ 0:å¾…å‘è´§ 1:é…é€ä¸­ 2:ç”¨æˆ·ç¡®è®¤æ”¶è´§',
    goodsMoney double COMMENT 'å•†å“é‡‘é¢',
    deliverMoney double COMMENT 'è¿è´¹',
    totalMoney double COMMENT 'è®¢å•é‡‘é¢ï¼ˆåŒ…æ‹¬è¿è´¹ï¼‰',
    realTotalMoney double COMMENT 'å®é™…è®¢å•é‡‘é¢ï¼ˆæŠ˜æ‰£åé‡‘é¢ï¼‰',
    payType tinyint COMMENT 'æ”¯ä»˜æ–¹å¼,0:æœªçŸ¥;1:æ”¯ä»˜å®ï¼Œ2ï¼šå¾®ä¿¡;3ã€ç°é‡‘ï¼›4ã€å…¶ä»–',
    isPay tinyint COMMENT 'æ˜¯å¦æ”¯ä»˜ 0:æœªæ”¯ä»˜ 1:å·²æ”¯ä»˜',
    userName string COMMENT 'æ”¶ä»¶äººå§“å',
    userAddress string COMMENT 'æ”¶ä»¶äººåœ°å€',
    userPhone string COMMENT 'æ”¶ä»¶äººç”µè¯',
    createTime timestamp COMMENT 'ä¸‹å•æ—¶é—´',
    payTime timestamp COMMENT 'æ”¯ä»˜æ—¶é—´',
    totalPayFee int COMMENT 'æ€»æ”¯ä»˜é‡‘é¢'
) ROW FORMAT DELIMITED FIELDS TERMINATED BY '\t';

load data local inpath '/home/hadoop/itheima_orders.txt' into table itheima.orders;

CREATE TABLE itheima.users (
    userId int,
    loginName string,
    loginSecret int,
    loginPwd string,
    userSex tinyint,
    userName string,
    trueName string,
    brithday date,
    userPhoto string,
    userQQ string,
    userPhone string,
    userScore int,
    userTotalScore int,
    userFrom tinyint,
    userMoney double,
    lockMoney double,
    createTime timestamp,
    payPwd string,
    rechargeMoney double
) ROW FORMAT DELIMITED FIELDS TERMINATED BY '\t';

load data local inpath '/home/hadoop/itheima_users.txt' into table itheima.users;

-- æŸ¥è¯¢å…¨è¡¨æ•°æ®
SELECT * FROM itheima.orders;

-- æŸ¥è¯¢å•åˆ—ä¿¡æ¯
SELECT orderid, userid, totalmoney FROM itheima.orders o ;

-- æŸ¥è¯¢è¡¨æœ‰å¤šå°‘æ¡æ•°æ®
SELECT COUNT(*) FROM itheima.orders;

-- è¿‡æ»¤å¹¿ä¸œçœçš„è®¢å•
SELECT * FROM itheima.orders WHERE useraddress LIKE '%å¹¿ä¸œ%';

-- æ‰¾å‡ºå¹¿ä¸œçœå•ç¬”è¥ä¸šé¢æœ€å¤§çš„è®¢å•
SELECT * FROM itheima.orders WHERE useraddress LIKE '%å¹¿ä¸œ%'
ORDER BY totalmoney DESC LIMIT 1;

-- ç»Ÿè®¡æœªæ”¯ä»˜ã€å·²æ”¯ä»˜å„è‡ªçš„äººæ•°
SELECT ispay, COUNT(*) FROM itheima.orders o GROUP BY ispay ;

-- åœ¨å·²ä»˜æ¬¾çš„è®¢å•ä¸­ï¼Œç»Ÿè®¡æ¯ä¸ªç”¨æˆ·æœ€é«˜çš„ä¸€ç¬”æ¶ˆè´¹é‡‘é¢
SELECT userid, MAX(totalmoney) FROM itheima.orders WHERE ispay = 1 GROUP BY userid;
-- ç»Ÿè®¡æ¯ä¸ªç”¨æˆ·çš„å¹³å‡è®¢å•æ¶ˆè´¹é¢
SELECT userid, AVG(totalmoney) FROM itheima.orders GROUP BY userid;
-- ç»Ÿè®¡æ¯ä¸ªç”¨æˆ·çš„å¹³å‡è®¢å•æ¶ˆè´¹é¢ï¼Œå¹¶è¿‡æ»¤å¤§äº10000çš„æ•°æ®
SELECT userid, AVG(totalmoney) AS avg_money FROM itheima.orders GROUP BY userid HAVING avg_money &gt; 10000;

-- è®¢å•è¡¨å’Œç”¨æˆ·è¡¨JOIN æ‰¾å‡ºç”¨æˆ·username
SELECT o.orderid, o.userid, u.username FROM itheima.orders o JOIN itheima.users u ON o.userid = u.userid;
SELECT o.orderid, o.userid, u.username FROM itheima.orders o LEFT JOIN itheima.users u ON o.userid = u.userid;

å¤åˆ¶<br><br><img alt="image-20230224234706719" src="https://image-set.oss-cn-zhangjiakou.aliyuncs.com/img-out/2023/02/24/20230224234706.png" referrerpolicy="no-referrer"><br><img alt="image-20230224234719463" src="https://image-set.oss-cn-zhangjiakou.aliyuncs.com/img-out/2023/02/24/20230224234719.png" referrerpolicy="no-referrer"><br><img alt="image-20230224234733895" src="https://image-set.oss-cn-zhangjiakou.aliyuncs.com/img-out/2023/02/24/20230224234733.png" referrerpolicy="no-referrer"><br>Sql-- æŸ¥æ‰¾å¹¿ä¸œçœæ•°æ®
SELECT * FROM itheima.orders WHERE useraddress RLIKE '.*å¹¿ä¸œ.*';
-- æŸ¥æ‰¾ç”¨æˆ·åœ°å€æ˜¯ï¼šxxçœ xxå¸‚ xxåŒº
SELECT * FROM itheima.orders WHERE useraddress RLIKE '..çœ ..å¸‚ ..åŒº';
-- æŸ¥æ‰¾ç”¨æˆ·å§“ä¸ºï¼šå¼ ã€ç‹ã€é‚“
SELECT * FROM itheima.orders WHERE username RLIKE '[å¼ ç‹é‚“]\\S+';
-- æŸ¥æ‰¾æ‰‹æœºå·ç¬¦åˆï¼š188****0*** è§„åˆ™
SELECT * FROM itheima.orders WHERE userphone RLIKE '188\\S{4}0[0-9]{3}';
å¤åˆ¶<br><br>SqlCREATE TABLE itheima.course(
c_id string, 
c_name string, 
t_id string)
ROW FORMAT DELIMITED FIELDS TERMINATED BY '\t';

LOAD DATA LOCAL INPATH '/home/hadoop/course.txt' INTO TABLE itheima.course;
-- åŸºç¡€UNION
SELECT * FROM itheima.course WHERE t_id = 'å‘¨æ°è½®'
	UNION
SELECT * FROM itheima.course WHERE t_id = 'ç‹åŠ›é¸¿';
-- å»é‡æ¼”ç¤º
SELECT * FROM itheima.course
	UNION
SELECT * FROM itheima.course;
-- ä¸å»é‡
SELECT * FROM itheima.course
	UNION ALL
SELECT * FROM itheima.course;
-- UNIONå†™åœ¨FROMä¸­ UNIONå†™åœ¨å­æŸ¥è¯¢ä¸­
SELECT t_id, COUNT(*) FROM 
(
	SELECT * FROM itheima.course WHERE t_id = 'å‘¨æ°è½®'
		UNION ALL
	SELECT * FROM itheima.course WHERE t_id = 'ç‹åŠ›é¸¿' 
) AS u GROUP BY t_id;

-- ç”¨äºINSERT SELECT
INSERT OVERWRITE TABLE itheima.course2
SELECT * FROM itheima.course 
	UNION
SELECT * FROM itheima.course;
å¤åˆ¶<br><br>Sql# éšæœºæ¡¶æŠ½å–ï¼Œ åˆ†é…æ¡¶æ˜¯æœ‰è§„åˆ™çš„
# å¯ä»¥æŒ‰ç…§åˆ—çš„hashå–æ¨¡åˆ†æ¡¶
# æŒ‰ç…§å®Œå…¨éšæœºåˆ†æ¡¶
-- å…¶å®ƒæ¡ä»¶ä¸å˜çš„è¯ï¼Œæ¯ä¸€æ¬¡è¿è¡Œç»“æœä¸€è‡´
select username, orderId, totalmoney FROM itheima.orders 
	tablesample(bucket 3 out of 10 on username);
	
-- å®Œå…¨éšæœºï¼Œæ¯ä¸€æ¬¡è¿è¡Œç»“æœä¸åŒ
select * from itheima.orders 
	tablesample(bucket 3 out of 10 on rand());
	


# æ•°æ®å—æŠ½å–ï¼ŒæŒ‰é¡ºåºæŠ½å–ï¼Œæ¯æ¬¡æ¡ä»¶ä¸å˜ï¼ŒæŠ½å–ç»“æœä¸å˜
-- æŠ½å–100æ¡
select * from itheima.orders
	tablesample(100 rows);
	
-- å–1%æ•°æ®
select * from itheima.orders
	tablesample(1 percent);
	
-- å– 1KBæ•°æ®
select * from itheima.orders
	tablesample(1K);

å¤åˆ¶<br><br>è™šæ‹Ÿåˆ—æ˜¯Hiveå†…ç½®çš„å¯ä»¥åœ¨æŸ¥è¯¢è¯­å¥ä¸­ä½¿ç”¨çš„ç‰¹æ®Šæ ‡è®°ï¼Œå¯ä»¥æŸ¥è¯¢æ•°æ®æœ¬èº«çš„è¯¦ç»†å‚æ•°ã€‚<br>Hiveç›®å‰å¯ç”¨3ä¸ªè™šæ‹Ÿåˆ—ï¼š<br>Shell- INPUT__FILE__NAMEï¼Œæ˜¾ç¤ºæ•°æ®è¡Œæ‰€åœ¨çš„å…·ä½“æ–‡ä»¶
- BLOCK__OFFSET__INSIDE__FILEï¼Œæ˜¾ç¤ºæ•°æ®è¡Œæ‰€åœ¨æ–‡ä»¶çš„åç§»é‡
- ROW__OFFSET__INSIDE__BLOCKï¼Œæ˜¾ç¤ºæ•°æ®æ‰€åœ¨HDFSå—çš„åç§»é‡
  æ­¤è™šæ‹Ÿåˆ—éœ€è¦è®¾ç½®ï¼šSET hive.exec.rowoffset=true æ‰å¯ä½¿ç”¨
å¤åˆ¶<br>SqlSET hive.exec.rowoffset=true;

SELECT orderid, username, INPUT__FILE__NAME, BLOCK__OFFSET__INSIDE__FILE, ROW__OFFSET__INSIDE__BLOCK FROM itheima.orders;

SELECT *, BLOCK__OFFSET__INSIDE__FILE FROM itheima.orders WHERE BLOCK__OFFSET__INSIDE__FILE &lt; 1000;

SELECT orderid, username, INPUT__FILE__NAME, BLOCK__OFFSET__INSIDE__FILE, ROW__OFFSET__INSIDE__BLOCK FROM itheima.orders_bucket;

SELECT INPUT__FILE__NAME, COUNT(*) FROM itheima.orders_bucket GROUP BY INPUT__FILE__NAME;
å¤åˆ¶<br><br>æ•°å€¼ã€é›†åˆã€è½¬æ¢ã€æ—¥æœŸå‡½æ•°<br>Sql-- æŸ¥çœ‹æ‰€æœ‰å¯ç”¨å‡½æ•°
show functions;
-- æŸ¥çœ‹å‡½æ•°ä½¿ç”¨æ–¹å¼
describe function extended count;
-- æ•°å€¼å‡½æ•°
-- round å–æ•´ï¼Œè®¾ç½®å°æ•°ç²¾åº¦
select round(3.1415926);		-- å–æ•´(å››èˆäº”å…¥)
select round(3.1415926, 4);		-- è®¾ç½®å°æ•°ç²¾åº¦4ä½(å››èˆäº”å…¥)
-- éšæœºæ•°
select rand();					-- å®Œå…¨éšæœº
select rand(3);					-- è®¾ç½®éšæœºæ•°ç§å­ï¼Œè®¾ç½®ç§å­åæ¯æ¬¡è¿è¡Œç»“æœä¸€è‡´çš„
-- ç»å¯¹å€¼
select abs(-3);
-- æ±‚PI
select pi();

-- é›†åˆå‡½æ•°
-- æ±‚å…ƒç´ ä¸ªæ•°
select size(work_locations) from test_array;
select size(members) from test_map;
-- å–å‡ºmapçš„å…¨éƒ¨key
select map_keys(members) from test_map;
-- å–å‡ºmapçš„å…¨éƒ¨value
select map_values(members) from test_map;
-- æŸ¥è¯¢arrayå†…æ˜¯å¦åŒ…å«æŒ‡å®šå…ƒç´ ï¼Œæ˜¯å°±è¿”å›True
select * from test_array where ARRAY_CONTAINS(work_locations, 'tianjin');
-- æ’åº
select *, sort_array(work_locations) from test_array;


-- ç±»å‹è½¬æ¢å‡½æ•°
-- è½¬äºŒè¿›åˆ¶
select binary('hadoop');
-- è‡ªç”±è½¬æ¢ï¼Œç±»å‹è½¬æ¢å¤±è´¥æŠ¥é”™æˆ–è¿”å›NULL
select cast('1' as bigint);

-- æ—¥æœŸå‡½æ•°
-- å½“å‰æ—¶é—´æˆ³
select current_timestamp();
-- å½“å‰æ—¥æœŸ
select current_date();
-- æ—¶é—´æˆ³è½¬æ—¥æœŸ
select to_date(current_timestamp());
-- å¹´æœˆæ—¥å­£åº¦ç­‰
select year('2020-01-11');
select month('2020-01-11');
select day('2020-01-11');
select quarter('2020-05-11');
select dayofmonth('2020-05-11');
select hour('2020-05-11 10:36:59');
select minute('2020-05-11 10:36:59');
select second('2020-05-11 10:36:59');
select weekofyear('2020-05-11 10:36:59');
-- æ—¥æœŸä¹‹é—´çš„å¤©æ•°
select datediff('2022-12-31', '2019-12-31');
-- æ—¥æœŸç›¸åŠ ã€ç›¸å‡
select date_add('2022-12-31', 5);
select date_sub('2022-12-31', 5);

å¤åˆ¶<br><br>å‡†å¤‡æ•°æ®<br>Sql-- åˆ›å»ºæ•°æ®åº“
create database db_msg;
-- é€‰æ‹©æ•°æ®åº“
use db_msg;

-- å¦‚æœè¡¨å·²å­˜åœ¨å°±åˆ é™¤
drop table if exists db_msg.tb_msg_source ;
-- å»ºè¡¨
create table db_msg.tb_msg_source(
    msg_time string comment "æ¶ˆæ¯å‘é€æ—¶é—´",
    sender_name string comment "å‘é€äººæ˜µç§°",
    sender_account string comment "å‘é€äººè´¦å·",
    sender_sex string comment "å‘é€äººæ€§åˆ«",
    sender_ip string comment "å‘é€äººipåœ°å€",
    sender_os string comment "å‘é€äººæ“ä½œç³»ç»Ÿ",
    sender_phonetype string comment "å‘é€äººæ‰‹æœºå‹å·",
    sender_network string comment "å‘é€äººç½‘ç»œç±»å‹",
    sender_gps string comment "å‘é€äººçš„GPSå®šä½",
    receiver_name string comment "æ¥æ”¶äººæ˜µç§°",
    receiver_ip string comment "æ¥æ”¶äººIP",
    receiver_account string comment "æ¥æ”¶äººè´¦å·",
    receiver_os string comment "æ¥æ”¶äººæ“ä½œç³»ç»Ÿ",
    receiver_phonetype string comment "æ¥æ”¶äººæ‰‹æœºå‹å·",
    receiver_network string comment "æ¥æ”¶äººç½‘ç»œç±»å‹",
    receiver_gps string comment "æ¥æ”¶äººçš„GPSå®šä½",
    receiver_sex string comment "æ¥æ”¶äººæ€§åˆ«",
    msg_type string comment "æ¶ˆæ¯ç±»å‹",
    distance string comment "åŒæ–¹è·ç¦»",
    message string comment "æ¶ˆæ¯å†…å®¹"
);

-- ä¸Šä¼ æ•°æ®åˆ°HDFS(Linuxå‘½ä»¤)
hadoop fs -mkdir -p /chatdemo/data
hadoop fs -put chat_data-30W.csv /chatdemo/data/

-- åŠ è½½æ•°æ®åˆ°è¡¨ä¸­ï¼ŒåŸºäºHDFSåŠ è½½
load data inpath '/chatdemo/data/chat_data-30W.csv' into table tb_msg_source;

-- éªŒè¯æ•°æ®åŠ è½½
select * from tb_msg_source tablesample(100 rows);
-- éªŒè¯ä¸€ä¸‹è¡¨çš„æ•°é‡
select count(*) from tb_msg_source;
å¤åˆ¶<br>ETLæ¸…æ´—è½¬æ¢<br>Sqlcreate table db_msg.tb_msg_etl(
    msg_time string comment "æ¶ˆæ¯å‘é€æ—¶é—´",
    sender_name string comment "å‘é€äººæ˜µç§°",
    sender_account string comment "å‘é€äººè´¦å·",
    sender_sex string comment "å‘é€äººæ€§åˆ«",
    sender_ip string comment "å‘é€äººipåœ°å€",
    sender_os string comment "å‘é€äººæ“ä½œç³»ç»Ÿ",
    sender_phonetype string comment "å‘é€äººæ‰‹æœºå‹å·",
    sender_network string comment "å‘é€äººç½‘ç»œç±»å‹",
    sender_gps string comment "å‘é€äººçš„GPSå®šä½",
    receiver_name string comment "æ¥æ”¶äººæ˜µç§°",
    receiver_ip string comment "æ¥æ”¶äººIP",
    receiver_account string comment "æ¥æ”¶äººè´¦å·",
    receiver_os string comment "æ¥æ”¶äººæ“ä½œç³»ç»Ÿ",
    receiver_phonetype string comment "æ¥æ”¶äººæ‰‹æœºå‹å·",
    receiver_network string comment "æ¥æ”¶äººç½‘ç»œç±»å‹",
    receiver_gps string comment "æ¥æ”¶äººçš„GPSå®šä½",
    receiver_sex string comment "æ¥æ”¶äººæ€§åˆ«",
    msg_type string comment "æ¶ˆæ¯ç±»å‹",
    distance string comment "åŒæ–¹è·ç¦»",
    message string comment "æ¶ˆæ¯å†…å®¹",
    msg_day string comment "æ¶ˆæ¯æ—¥",
    msg_hour string comment "æ¶ˆæ¯å°æ—¶",
    sender_lng double comment "ç»åº¦",
    sender_lat double comment "çº¬åº¦"
);

INSERT OVERWRITE TABLE db_msg.tb_msg_etl
SELECT 
	*, 
	DATE(msg_time) AS msg_day, 
	HOUR(msg_time) AS msg_hour, 
	SPLIT(sender_gps, ',')[0] AS sender_lng, 
	SPLIT(sender_gps, ',')[1] AS sender_lat
FROM db_msg.tb_msg_source
WHERE LENGTH(sender_gps) &gt; 0;
å¤åˆ¶<br>æŒ‡æ ‡è®¡ç®—<br>éœ€æ±‚1<br>Sql--ä¿å­˜ç»“æœè¡¨
CREATE TABLE IF NOT EXISTS tb_rs_total_msg_cnt 
COMMENT "æ¯æ—¥æ¶ˆæ¯æ€»é‡" AS 
SELECT 
    msg_day, 
    COUNT(*) AS total_msg_cnt 
FROM db_msg.tb_msg_etl 
GROUP BY msg_day;
å¤åˆ¶<br>éœ€æ±‚2<br>Sql--ä¿å­˜ç»“æœè¡¨
CREATE TABLE IF NOT EXISTS tb_rs_hour_msg_cnt 
COMMENT "æ¯å°æ—¶æ¶ˆæ¯é‡è¶‹åŠ¿" AS  
SELECT  
    msg_hour, 
    COUNT(*) AS total_msg_cnt, 
    COUNT(DISTINCT sender_account) AS sender_user_cnt, 
    COUNT(DISTINCT receiver_account) AS receiver_user_cnt
FROM db_msg.tb_msg_etl GROUP BY msg_hour;
å¤åˆ¶<br>éœ€æ±‚3<br>SqlCREATE TABLE IF NOT EXISTS tb_rs_loc_cnt
COMMENT 'ä»Šæ—¥å„åœ°åŒºå‘é€æ¶ˆæ¯æ€»é‡' AS 
SELECT 
    msg_day,  
    sender_lng, 
    sender_lat, 
    COUNT(*) AS total_msg_cnt 
FROM db_msg.tb_msg_etl
GROUP BY msg_day, sender_lng, sender_lat;
å¤åˆ¶<br>éœ€æ±‚4<br>Sql--ä¿å­˜ç»“æœè¡¨
CREATE TABLE IF NOT EXISTS tb_rs_user_cnt
COMMENT "ä»Šæ—¥å‘é€æ¶ˆæ¯äººæ•°ã€æ¥å—æ¶ˆæ¯äººæ•°" AS
SELECT 
msg_day, 
COUNT(DISTINCT sender_account) AS sender_user_cnt, 
COUNT(DISTINCT receiver_account) AS receiver_user_cnt
FROM db_msg.tb_msg_etl
GROUP BY msg_day;
å¤åˆ¶<br>éœ€æ±‚5<br>Sql--ä¿å­˜ç»“æœè¡¨
CREATE TABLE IF NOT EXISTS db_msg.tb_rs_s_user_top10
COMMENT "å‘é€æ¶ˆæ¯æ¡æ•°æœ€å¤šçš„Top10ç”¨æˆ·" AS
SELECT 
    sender_name AS username, 
    COUNT(*) AS sender_msg_cnt 
FROM db_msg.tb_msg_etl 
GROUP BY sender_name 
ORDER BY sender_msg_cnt DESC 
LIMIT 10;
å¤åˆ¶<br>éœ€æ±‚6<br>SqlCREATE TABLE IF NOT EXISTS db_msg.tb_rs_r_user_top10
COMMENT "æ¥æ”¶æ¶ˆæ¯æ¡æ•°æœ€å¤šçš„Top10ç”¨æˆ·" AS
SELECT 
receiver_name AS username, 
COUNT(*) AS receiver_msg_cnt 
FROM db_msg.tb_msg_etl 
GROUP BY receiver_name 
ORDER BY receiver_msg_cnt DESC 
LIMIT 10;
å¤åˆ¶<br>éœ€æ±‚7<br>SqlCREATE TABLE IF NOT EXISTS db_msg.tb_rs_sender_phone
COMMENT "å‘é€äººçš„æ‰‹æœºå‹å·åˆ†å¸ƒ" AS
SELECT 
    sender_phonetype, 
    COUNT(sender_account) AS cnt 
FROM db_msg.tb_msg_etl 
GROUP BY sender_phonetype;
å¤åˆ¶<br>éœ€æ±‚8<br>Sql--ä¿å­˜ç»“æœè¡¨
CREATE TABLE IF NOT EXISTS db_msg.tb_rs_sender_os
COMMENT "å‘é€äººçš„OSåˆ†å¸ƒ" AS
SELECT
    sender_os, 
    COUNT(sender_account) AS cnt 
FROM db_msg.tb_msg_etl 
GROUP BY sender_os
å¤åˆ¶<br><br>Sql-- åœ¨Hiveçš„MySQLå…ƒæ•°æ®åº“ä¸­æ‰§è¡Œ
use hive;

1).ä¿®æ”¹å­—æ®µæ³¨é‡Šå­—ç¬¦é›†

alter table COLUMNS_V2 modify column COMMENT varchar(256) character set utf8;
2).ä¿®æ”¹è¡¨æ³¨é‡Šå­—ç¬¦é›†

alter table TABLE_PARAMS modify column PARAM_VALUE varchar(4000) character set utf8;
3).ä¿®æ”¹åˆ†åŒºè¡¨å‚æ•°ï¼Œä»¥æ”¯æŒåˆ†åŒºé”®èƒ½å¤Ÿç”¨ä¸­æ–‡è¡¨ç¤º

alter table PARTITION_PARAMS modify column PARAM_VALUE varchar(4000) character set utf8;
alter table PARTITION_KEYS modify column PKEY_COMMENT varchar(4000) character set utf8;
4).ä¿®æ”¹ç´¢å¼•æ³¨è§£

mysql&gt;alter table INDEX_PARAMS modify column PARAM_VALUE varchar(4000) character set utf8;
å¤åˆ¶]]></description><link>å¤§æ•°æ®\Hive-SQLè¯­æ³•å¤§å…¨.html</link><guid isPermaLink="false">å¤§æ•°æ®/Hive-SQLè¯­æ³•å¤§å…¨.md</guid><pubDate>Mon, 16 Oct 2023 15:08:41 GMT</pubDate><enclosure url="https://image-set.oss-cn-zhangjiakou.aliyuncs.com/img-out/2023/02/24/20230224234706.png" length="0" type="image/png"/><content:encoded>&lt;figure&gt;&lt;img src=&quot;https://image-set.oss-cn-zhangjiakou.aliyuncs.com/img-out/2023/02/24/20230224234706.png&quot;&gt;&lt;/figure&gt;</content:encoded></item><item><title><![CDATA[æ—¥è®°æ¨¡æ¿]]></title><description><![CDATA[ 
 <br><br>
<br>ğŸ¥³
<br>ğŸ˜­
<br>ğŸ¥°
<br>ğŸ˜
<br>ğŸ¥±
<br>&lt;%
let url = '<a rel="noopener" class="external-link" href="https://www.tianqi.com/fuquan/'" target="_blank">https://www.tianqi.com/fuquan/'</a>
let res = await request({url: url,method: "GET"});
res = res.replace(/\n/g,'')
let dqwd = /(\d+)&lt;/b&gt;â„ƒ&lt;/i&gt;&lt;/p&gt;/.exec(res)
let tqwdfw = /(.?)&lt;/b&gt;(.?)&lt;/span&gt;/.exec(res)
let sdfxzwx = /(.?)&lt;/b&gt;(.?)&lt;/b&gt;(.?)&lt;/b&gt;&lt;/dd&gt;/.exec(res)
let kqzlrcrl = /<br>await fetch('<a rel="noopener" class="external-link" href="https://v1.hitokoto.cn/?c=d&amp;c=h&amp;c=i&amp;c=j'" target="_blank">https://v1.hitokoto.cn/?c=d&amp;c=h&amp;c=i&amp;c=j'</a>)
.then(response =&gt; response.json())
.then(data =&gt; {
ä¸€è¨€ = data.hitokoto
æ¥æº = data.from
ä½œè€… = data.from_who === null ? 'ä½šå' : data.from_who
})
-%&gt;<br>ä¸€è¨€
 &lt;% ä¸€è¨€ %&gt;  â€”â€” ã€Š&lt;% æ¥æº %&gt;ã€‹ Â· &lt;% ä½œè€… %&gt;
<br><br><br><br><br>&lt;&lt; <a data-href="<% tp.date.now(&quot;YYYY-MM-DD&quot;, -1) %>" href="\3C20tp.date.now(22YYYY-MM-DD22,20-1)203E" class="internal-link" target="_self" rel="noopener">&lt;% tp.date.now("YYYY-MM-DD", -1) %&gt;</a> | <a data-href="<% tp.date.now(&quot;YYYY-MM-DD&quot;, 1) %>" href="\3C20tp.date.now(22YYYY-MM-DD22,201)203E" class="internal-link" target="_self" rel="noopener">&lt;% tp.date.now("YYYY-MM-DD", 1) %&gt;</a> &gt;&gt;]]></description><link>æ¨¡æ¿\æ—¥è®°æ¨¡æ¿.html</link><guid isPermaLink="false">æ¨¡æ¿/æ—¥è®°æ¨¡æ¿.md</guid><pubDate>Thu, 11 Jan 2024 14:35:35 GMT</pubDate></item><item><title><![CDATA[ColorfulClock]]></title><description><![CDATA[ 
 <br>Noneconst [date, setDate] = useState(new Date)

useEffect(()=&gt;{
	const timerId = setInterval(()=&gt;{
		setDate(new Date)
	},1000)
	return ()=&gt;{clearInterval(timerId)}
})

//moment.locale('en-us');
moment.locale('zh-cn');
let formatDate = moment().format("dddd-MMMM-D-H-mm-ss-a").split("-")
let secProgress = formatDate[5] / 60
let minProgress = (formatDate[4]) / 60
let hourProgress = (formatDate[3]) / 24
let dayProgress = (formatDate[2]) / 31
//console.log(formatDate[2]/31)

return (
&lt;div id="clock" className="progress-clock"&gt;
	&lt;button className="progress-clock__time-date" data-group="d" type="button"&gt;
		&lt;small data-unit="w"&gt;{formatDate[0]}&lt;/small&gt;&lt;br/&gt;
		&lt;span data-unit="mo"&gt;{formatDate[1]}&lt;/span&gt;
		&lt;span data-unit="d"&gt;{formatDate[2]}&lt;/span&gt;
	&lt;/button&gt;
	&lt;button className="progress-clock__time-digit" data-unit="h" data-group="h" type="button"&gt;{formatDate[3]}&lt;/button&gt;&lt;span className="progress-clock__time-colon"&gt;:&lt;/span&gt;&lt;button className="progress-clock__time-digit" data-unit="m" data-group="m" type="button"&gt;{formatDate[4]}&lt;/button&gt;&lt;span className="progress-clock__time-colon"&gt;:&lt;/span&gt;&lt;button className="progress-clock__time-digit" data-unit="s" data-group="s" type="button"&gt;{formatDate[5]}&lt;/button&gt;
	&lt;span className="progress-clock__time-ampm" data-unit="ap"&gt;{formatDate[6]}&lt;/span&gt;
	&lt;svg className="progress-clock__rings" width="256" height="256" viewBox="0 0 256 256"&gt;
		&lt;defs&gt;
			&lt;linearGradient id="pc-red" x1="1" y1="0.5" x2="0" y2="0.5"&gt;
				&lt;stop offset="0%" stopColor="hsl(343,90%,55%)" /&gt;
				&lt;stop offset="100%" stopColor="hsl(323,90%,55%)" /&gt;
			&lt;/linearGradient&gt;
			&lt;linearGradient id="pc-yellow" x1="1" y1="0.5" x2="0" y2="0.5"&gt;
				&lt;stop offset="0%" stopColor="hsl(43,90%,55%)" /&gt;
				&lt;stop offset="100%" stopColor="hsl(23,90%,55%)" /&gt;
			&lt;/linearGradient&gt;
			&lt;linearGradient id="pc-blue" x1="1" y1="0.5" x2="0" y2="0.5"&gt;
				&lt;stop offset="0%" stopColor="hsl(223,90%,55%)" /&gt;
				&lt;stop offset="100%" stopColor="hsl(203,90%,55%)" /&gt;
			&lt;/linearGradient&gt;
			&lt;linearGradient id="pc-purple" x1="1" y1="0.5" x2="0" y2="0.5"&gt;
				&lt;stop offset="0%" stopColor="hsl(283,90%,55%)" /&gt;
				&lt;stop offset="100%" stopColor="hsl(263,90%,55%)" /&gt;
			&lt;/linearGradient&gt;
		&lt;/defs&gt;
		&lt;g data-units="d"&gt;
			&lt;circle className="progress-clock__ring" cx="128" cy="128" r="74" fill="none" opacity="0.1" stroke="#e13e78" strokeWidth="12" /&gt;
			&lt;circle className="progress-clock__ring-fill" data-ring="mo" cx="128" cy="128" r="74" fill="none" stroke="#e13e78" strokeWidth="12" strokeDasharray="465 465" strokeDashoffset={(1-dayProgress)*465} strokeLinecap="round" transform="rotate(-90,128,128)" /&gt;
		&lt;/g&gt;
		&lt;g data-units="h"&gt;
			&lt;circle className="progress-clock__ring" cx="128" cy="128" r="90" fill="none" opacity="0.1" stroke="#e79742" strokeWidth="12" /&gt;
			&lt;circle className="progress-clock__ring-fill" data-ring="d" cx="128" cy="128" r="90" fill="none" stroke="#e79742" strokeWidth="12" strokeDasharray="565.5 565.5" strokeDashoffset={(1-hourProgress)*565.5} strokeLinecap="round" transform="rotate(-90,128,128)" /&gt;
		&lt;/g&gt;
		&lt;g data-units="m"&gt;
			&lt;circle className="progress-clock__ring" cx="128" cy="128" r="106" fill="none" opacity="0.1" stroke="#4483ec" strokeWidth="12" /&gt;
			&lt;circle className="progress-clock__ring-fill" data-ring="h" cx="128" cy="128" r="106" fill="none" stroke="#4483ec" strokeWidth="12" strokeDasharray="666 666" strokeDashoffset={(1-minProgress)*666} strokeLinecap="round" transform="rotate(-90,128,128)" /&gt;
		&lt;/g&gt;
		&lt;g data-units="s"&gt;
			&lt;circle className="progress-clock__ring" cx="128" cy="128" r="122" fill="none" opacity="0.1" stroke="#8f30eb" strokeWidth="12" /&gt;
			&lt;circle className="progress-clock__ring-fill" data-ring="m" cx="128" cy="128" r="122" fill="none" stroke="#8f30eb" strokeWidth="12" strokeDasharray="766.5 766.5" strokeDashoffset={(1-secProgress)*766.5} strokeLinecap="round" transform="rotate(-90,128,128)" /&gt;
		&lt;/g&gt;
	&lt;/svg&gt;
&lt;/div&gt;

)
å¤åˆ¶<br><br>]]></description><link>æ¨¡æ¿\ColorfulClock.html</link><guid isPermaLink="false">æ¨¡æ¿/ColorfulClock.md</guid><pubDate>Tue, 17 Oct 2023 13:49:09 GMT</pubDate></item><item><title><![CDATA[dataviewæ¨¡æ¿]]></title><description><![CDATA[ 
 <br>(1.åˆ—å‡ºæ¸…å•ï¼šä»æ‰€æœ‰ç¬”è®°ä¸­ï¼Œåˆ—å‡ºæŸä¸ªæ ‡ç­¾ä¸º123çš„æ‰€æœ‰ç¬”è®°ï¼‰<br>Dataview: No results to show for list query.<br>(2.åˆ—å‡ºæ¸…å•ï¼šä» ç¤ºä¾‹æ–‡ä»¶ å¤¹ä¸­ï¼Œåˆ—å‡ºç¬”è®°ååŒ…å«123(å¯å¤åˆ¶ä¸€è¡Œï¼Œç»„åˆå…³é”®å­—ç­›é€‰ï¼‰çš„æ‰€æœ‰ç¬”è®°ï¼‰<br><br><a data-tooltip-position="top" aria-label="æ—¥è®°/2023-10-26.md" data-href="æ—¥è®°/2023-10-26.md" href="\æ—¥è®°\2023-10-26.html" class="internal-link" target="_self" rel="noopener">2023-10-26</a><br><a data-tooltip-position="top" aria-label="æ—¥è®°/2023-10-25.md" data-href="æ—¥è®°/2023-10-25.md" href="\æ—¥è®°\2023-10-25.html" class="internal-link" target="_self" rel="noopener">2023-10-25</a><br><a data-tooltip-position="top" aria-label="æ—¥è®°/2023-10-24.md" data-href="æ—¥è®°/2023-10-24.md" href="\æ—¥è®°\2023-10-24.html" class="internal-link" target="_self" rel="noopener">2023-10-24</a><br><a data-tooltip-position="top" aria-label="æ—¥è®°/2023-10-23.md" data-href="æ—¥è®°/2023-10-23.md" href="\æ—¥è®°\2023-10-23.html" class="internal-link" target="_self" rel="noopener">2023-10-23</a><br><a data-tooltip-position="top" aria-label="æ—¥è®°/2023-10-22.md" data-href="æ—¥è®°/2023-10-22.md" href="\æ—¥è®°\2023-10-22.html" class="internal-link" target="_self" rel="noopener">2023-10-22</a><br><a data-tooltip-position="top" aria-label="æ—¥è®°/2023-10-21.md" data-href="æ—¥è®°/2023-10-21.md" href="\æ—¥è®°\2023-10-21.html" class="internal-link" target="_self" rel="noopener">2023-10-21</a><br><a data-tooltip-position="top" aria-label="æ—¥è®°/2023-10-19.md" data-href="æ—¥è®°/2023-10-19.md" href="\æ—¥è®°\2023-10-19.html" class="internal-link" target="_self" rel="noopener">2023-10-19</a><br><a data-tooltip-position="top" aria-label="æ—¥è®°/2023-10-18.md" data-href="æ—¥è®°/2023-10-18.md" href="\æ—¥è®°\2023-10-18.html" class="internal-link" target="_self" rel="noopener">2023-10-18</a><br><a data-tooltip-position="top" aria-label="æ—¥è®°/2023-10-17.md" data-href="æ—¥è®°/2023-10-17.md" href="\æ—¥è®°\2023-10-17.html" class="internal-link" target="_self" rel="noopener">2023-10-17</a><br><a data-tooltip-position="top" aria-label="æ—¥è®°/2023-10-16.md" data-href="æ—¥è®°/2023-10-16.md" href="\æ—¥è®°\2023-10-16.html" class="internal-link" target="_self" rel="noopener">2023-10-16</a><br><a data-tooltip-position="top" aria-label="æ—¥è®°/2023-10-15.md" data-href="æ—¥è®°/2023-10-15.md" href="\æ—¥è®°\2023-10-15.html" class="internal-link" target="_self" rel="noopener">2023-10-15</a><br><a data-tooltip-position="top" aria-label="æ—¥è®°/2023-10-14.md" data-href="æ—¥è®°/2023-10-14.md" href="\æ—¥è®°\2023-10-14.html" class="internal-link" target="_self" rel="noopener">2023-10-14</a><br>(3.åˆ—å‡ºè¡¨æ ¼ï¼šä»æ‰€æœ‰ç¬”è®°ä¸­ï¼Œåˆ—å‡ºæŸä¸ªæ ‡ç­¾ä¸º123çš„æ‰€æœ‰ç¬”è®°ï¼‰<br>Dataview: No results to show for table query.<br>&lt;&lt;<a data-tooltip-position="top" aria-label="Invalid date" data-href="Invalid date" href="\Invalid date" class="internal-link" target="_self" rel="noopener">å›é¡¾æ˜¨å¤©</a>  <a data-tooltip-position="top" aria-label="Invalid date" data-href="Invalid date" href="\Invalid date" class="internal-link" target="_self" rel="noopener">|å±•æœ›æ˜å¤©</a>&gt;&gt;<br>æ­£åœ¨è¿›è¡Œçš„ä»»åŠ¡<br>Dataview: No results to show for list query.<br>ä»Šå¤©æ–°å»ºçš„ç¬”è®°<br>Dataview: No results to show for list query.]]></description><link>æ¨¡æ¿\dataviewæ¨¡æ¿.html</link><guid isPermaLink="false">æ¨¡æ¿/dataviewæ¨¡æ¿.md</guid><pubDate>Wed, 18 Oct 2023 01:34:24 GMT</pubDate></item><item><title><![CDATA[MySQLæ•°æ®åº“å­˜å‚¨]]></title><description><![CDATA[<a class="tag" href="?query=tag:sql" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#sql</a> <a class="tag" href="?query=tag:python" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#python</a> 
 <br><br><a href=".?query=tag:sql" class="tag" target="_blank" rel="noopener">#sql</a> <a href=".?query=tag:python" class="tag" target="_blank" rel="noopener">#python</a><br><br>â€‹		æ•°æ®åº“, æ˜¯æˆ‘ä»¬å­˜å‚¨æ•°æ®æœ€å¸¸ç”¨çš„ä¸€ç§è½¯ä»¶. åœ¨ä¹‹å‰çš„æ¡ˆä¾‹ä¸­, æˆ‘ä»¬éƒ½æ˜¯æŠŠæ•°æ®å­˜å‚¨åœ¨æ–‡ä»¶é‡Œçš„. è¿™æ ·å­˜å‚¨çš„å¥½å¤„æ˜¯æ¯”è¾ƒæ–¹ä¾¿. ç®€å•. ä½†æ˜¯è¿™æ ·å­˜å‚¨æ•°æ®çš„å¼Šç«¯ä¹Ÿéå¸¸æ˜æ˜¾. æ•°æ®æå–çš„æ—¶å€™ç›¸å½“ç¹ç. å°¤å…¶åœ¨å­˜å‚¨äº†å¤§é‡æ•°æ®é›†å. æƒ³æå–ä¸€ä¸ªäººçš„åå­—å¯èƒ½éƒ½æ˜¯éå¸¸å›°éš¾çš„. æ­¤æ—¶, æ•°æ®åº“å°±ä½“ç°äº†å®ƒçš„ç”¨å¤„. <br>â€‹		æ•°æ®åº“çš„æœ¬è´¨å°±æ˜¯ä¸€ä¸ªèƒ½å­˜å‚¨æ•°æ®çš„è½¯ä»¶. æˆ‘ä»¬æŠŠæ•°æ®äº¤ç»™æ•°æ®åº“å, æ•°æ®åº“ä¼šæŒ‰ç…§å®ƒè‡ªå·±çš„è§„åˆ™å°†æ•°æ®å­˜å‚¨åœ¨æ–‡ä»¶ä¸­. åŒºåˆ«äºæˆ‘ä»¬ç›´æ¥å­˜å‚¨åœ¨æ–‡ä»¶é‡Œ. å®ƒçš„è¿™ç§å­˜å‚¨ä¼šéå¸¸çš„æ–¹ä¾¿æˆ‘ä»¬å¯¹æ•°æ®è¿›è¡Œæå–å’Œå¤„ç†. åœ¨ä»Šå¤©çš„äº’è”ç½‘å¦‚æ­¤å‘è¾¾çš„æ—¶ä»£. æ•°æ®åº“å·²ç»æ˜¯æ¯ä¸€æ¬¾è½¯ä»¶ä½œä¸ºæ•°æ®æŒä¹…åŒ–å­˜å‚¨çš„å¿…é€‰æ–¹æ¡ˆ. <br>â€‹		æ•°æ®åº“åˆåˆ†ä¸ºå…³ç³»å‹å’Œéå…³ç³»å‹æ•°æ®åº“(NoSQL), æˆ‘ä»¬è¿™èŠ‚åªèŠå…³ç³»å‹æ•°æ®åº“. <br>â€‹		å¸¸è§çš„å…³ç³»å‹æ•°æ®åº“, <br>â€‹				MySQL, MSSQL, Oracle,ç­‰ç­‰.....<br>â€‹		æ€»ä¹‹, ç›®å‰å¸‚åœºä¸Šæœ€è®¤å¯çš„å°±æ˜¯MySQL.æ‰€ä»¥æˆ‘ä»¬å­¦MySQL<br><br><br>å…ˆå»mysqlå®˜ç½‘ä¸‹è½½å¥½å®‰è£…åŒ…. (<a rel="noopener" class="external-link" href="https://dev.mysql.com/downloads/" target="_blank">https://dev.mysql.com/downloads/</a>)<br>â€œimage-20210710114626664.pngâ€ could not be found.<br>â€œimage-20210710114553371.pngâ€ could not be found.<br>â€œimage-20210710114707734.pngâ€ could not be found.<br>â€œimage-20210710114815804.pngâ€ could not be found.<br>â€œimage-20210710114930711.pngâ€ could not be found.<br>â€œimage-20210710115027365.pngâ€ could not be found.<br>â€œimage-20210710115102924.pngâ€ could not be found.<br>â€œimage-20210710115119749.pngâ€ could not be found.<br>æ¥ä¸‹æ¥æ˜¯MySQLçš„å›¾å½¢åŒ–ç•Œé¢å·¥å…·.  æ¨èç”¨navicat. å¥½å¤šå¹´äº†, å¾ˆå¥½ç”¨. <br><br>â€œimage-20210710144159210.pngâ€ could not be found.<br>â€œimage-20210710144409473.pngâ€ could not be found.<br>â€œimage-20210710144519309.pngâ€ could not be found.<br>â€œimage-20210710144744253.pngâ€ could not be found.<br>å“¦äº†, è‡³æ­¤, Navicatå¯ä»¥æ“çºµä½ çš„æ•°æ®åº“äº†. <br><br><br>åœ¨æ‰€æœ‰å…³ç³»å‹æ•°æ®åº“ä¸­, æ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯ä»¥è¡¨æ ¼çš„å½¢å¼è¿›è¡Œå­˜å‚¨çš„. é‚£è¡¨æ ¼åº”è¯¥å¦‚ä½•è¿›è¡Œè®¾è®¡å‘¢? å…¶å®è¿™é‡Œè•´å«äº†ä¸€ä¸ªæ˜ å°„å…³ç³»çš„. <br>æ¯”å¦‚, æˆ‘ä»¬æƒ³è¦å­˜å­¦ç”Ÿä¿¡æ¯. é‚£æˆ‘ä»¬å…ˆæ€è€ƒ. åœ¨ä½ æœªæ¥çš„è§„åˆ’ä¸­, ä¸€ä¸ªå­¦ç”Ÿåº”è¯¥ä¼šæœ‰å“ªäº›æ•°æ®å­˜åœ¨? <br>å­¦ç”Ÿ: å­¦å·(å”¯ä¸€æ ‡è¯†), å§“å, ç”Ÿæ—¥, å®¶åº­ä½å€, ç”µè¯å·ç­‰ä¿¡æ¯. OK. æˆ‘ä»¬æŠ›å¼€æ•°æ®åº“ä¸è°ˆ. æƒ³è¦å­˜å‚¨è¿™äº›æ•°æ®, è¡¨æ ¼åˆ›å»ºèµ·æ¥çš„è¯åº”è¯¥æ˜¯æ˜¯è¿™æ ·çš„:<br>â€œimage-20210712100401960.pngâ€ could not be found.<br>OK. æŒ‰ç…§è¿™ä¸ªè§„åˆ™æ¥çœ‹. æ¯ä¸€æ¡æ•°æ®å¯¹åº”çš„å°±æ˜¯ä¸€ä¸ªäººçš„ä¿¡æ¯. <br><br>åˆ›å»ºè¡¨æœ‰ä¸¤ç§æ–¹æ¡ˆ: <br>
<br>
ç”¨SQLè¯­å¥åˆ›å»ºè¡¨æ ¼
Sqlcreate table student(
	sno int(10) primary key auto_increment,
    sname varchar(50) not null, 
    sbirthday date not null,
    saddress varchar(255),
    sphone varchar(12),
    class_name varchar(50),
)
å¤åˆ¶
æ•°æ®ç±»å‹:
â€‹	int æ•´æ•°
â€‹	doubleå°æ•°
â€‹	varchar  å­—ç¬¦ä¸²
â€‹	date  æ—¶é—´(å¹´æœˆæ—¥)
â€‹	datetime æ—¶é—´(å¹´æœˆæ—¥æ—¶åˆ†ç§’)
â€‹	text å¤§æ–‡æœ¬
â€‹	
çº¦æŸæ¡ä»¶:
â€‹	primary key ä¸»é”®, å…¨è¡¨å”¯ä¸€å€¼. å°±åƒå­¦å·. èº«ä»½è¯å·. èƒ½å¤Ÿå”¯ä¸€çš„ç¡®å®šä¸€æ¡æ•°æ®
â€‹	auto_increment ä¸»é”®è‡ªå¢.
â€‹	not null  ä¸å¯ä»¥ä¸ºç©º.
â€‹	null  å¯ä»¥ä¸ºç©º
â€‹	default è®¾ç½®é»˜è®¤å€¼
â€‹		

<br>
ç”¨Navicatå›¾å½¢åŒ–å·¥å…·æ¥åˆ›å»º
â€œimage-20210712110029287.pngâ€ could not be found.
â€œimage-20210712164027033.pngâ€ could not be found.
â€œimage-20210712110221729.pngâ€ could not be found.

<br><br>
<br>
SQLæ–¹å¼(äº†è§£)
Python-- æ·»åŠ ä¸€åˆ—
ALTER TABLE table_name
ADD COLUMN column_name datatype

-- åˆ é™¤ä¸€åˆ—
ALTER TABLE table_name 
DROP COLUMN column_name

-- ä¿®æ”¹ä¸€åˆ—çš„æ•°æ®ç±»å‹
ALTER TABLE table_name
MODIFY COLUMN column_name datatype

-- è¡¨æ ¼é‡å‘½å
ALTER TABLE table_name RENAME TO new_name;

å¤åˆ¶

<br>
Navicatæ–¹å¼
â€œimage-20210712143112984.pngâ€ could not be found.

<br><br><br>SqlINSERT INTO table_name(col1, col2, ccol3...) values (val1,val2,val3)
å¤åˆ¶<br>Sql-- æ·»åŠ å­¦ç”Ÿä¿¡æ¯
INTO STUDENT(sname, sbirthday, saddress, sage, class_name) values ('å‘¨æ°ä¼¦', '2020-01-02', "åŒ—äº¬å¸‚æ˜Œå¹³åŒº", 18, "äºŒç­");
å¤åˆ¶<br>æ³¨æ„, å¦‚æœä¸»é”®è®¾ç½®è‡ªå¢, å°±ä¸ç”¨å¤„ç†ä¸»é”®äº†. mysqlä¼šè‡ªåŠ¨çš„å¸®æˆ‘ä»¬æŒ‰ç…§è‡ªç„¶é¡ºåºè¿›è¡Œé€ä¸€è‡ªå¢.<br><br>SqlDELETE FROM table_name where_clause
å¤åˆ¶<br>Sql-- åˆ é™¤å­¦ç”Ÿä¿¡æ¯
DELETE FROM STUDENT where sno = 1 ; 
å¤åˆ¶<br><br>SqlUPDATE table_name SET col1 = val1, col2 = val2... where_clause
å¤åˆ¶<br>Sql-- ä¿®æ”¹å­¦ç”Ÿä¿¡æ¯
UPDATE STUDENT SET SNAME = 'ç‹åŠ›å®' where sno = 1;
å¤åˆ¶<br>æ³¨æ„, ä¿®æ”¹å’Œåˆ é™¤æ•°æ®çš„æ—¶å€™ä¸€å®šè¦å¸¦ä¸Šwhereæ¡ä»¶, å¦åˆ™å…¨è¡¨æ›´æ–°(åˆ é™¤). å°ç™½ä¸€å®šè¦å°å¿ƒ!!!!!<br><br><br>SqlSELECT *|col1, col2, col3 
FROM table_name 
where_clause
å¤åˆ¶<br>Sql-- å…¨è¡¨æŸ¥è¯¢
SELECT * FROM STUDENT;

-- æŸ¥è¯¢å­¦ç”Ÿå§“å, å¹´é¾„
SELECT sname, sage FROM STUDENT;

-- æŸ¥è¯¢å­¦å·æ˜¯1çš„å­¦ç”Ÿä¿¡æ¯
select * from student where sno = 1;

-- æŸ¥è¯¢å¹´é¾„å¤§äº20çš„å­¦ç”Ÿä¿¡æ¯
select * from student where sage &gt; 20;

-- æŸ¥è¯¢å­¦ç”Ÿå¹´é¾„å¤§äº20 å°äº40çš„ä¿¡æ¯(åŒ…å«)
select * from student where sage &gt;= 20 and sage &lt;= 40;
select * from student where sage between 20 and 40 ;

-- æŸ¥è¯¢å§“å¼ çš„å­¦ç”Ÿä¿¡æ¯
-- 		_ä¸€ä½å­—ç¬¦ä¸²
-- 		%å¤šä½å­—ç¬¦ä¸²
select * from student where sname like 'å¼ %';
å¤åˆ¶<br><br>å¦‚ä½•æŸ¥è¯¢æ¯ä¸ªç­çº§å­¦ç”Ÿçš„å¹³å‡å¹´é¾„? <br>æˆ‘ä»¬å…ˆæŠŠæ•°æ®æ‰©å……ä¸€ä¸‹ä¸‹<br>â€œimage-20210712164529290.pngâ€ could not be found.<br>æ¯ä¸ªç­çº§çš„å¹³å‡å¹´é¾„. æˆ‘ä»¬æ˜¯ä¸æ˜¯éœ€è¦å…ˆæŠŠç­çº§ä¸ç­çº§å…ˆåˆ†å¼€.  æ¯ä¸ªç­çº§è‡ªå·±å†…éƒ¨è¿›è¡Œè®¡ç®—.å¯¹å§. æ­¤æ—¶, æˆ‘ä»¬éœ€è¦çš„å°±æ˜¯ä¸€ä¸ªåˆ†ç»„çš„æ“ä½œ. æ­¤æ—¶éœ€è¦ç”¨åˆ°group byè¯­å¥<br>Sqlselect * from table_name group by col_name
å¤åˆ¶<br>æ³¨æ„, ä¸Šæ–¹çš„sqlæ˜¯æ— æ³•ä½¿ç”¨çš„.  sqlè¦æ±‚åˆ†ç»„å, åˆ°åº•è¦åšä»€ä¹ˆå¿…é¡»æ˜ç¡®æŒ‡å‡º. å¦åˆ™æŠ¥é”™<br>é‚£å¾ˆå®¹æ˜“å‘€, æˆ‘ä»¬åˆ†å®Œç»„è¦è®¡ç®—æ¯ä¸ªç­çº§çš„å¹³å‡å¹´é¾„. å¹³å‡æ•°å¦‚ä½•è®¡ç®—, è¿™å°±è¦ç”¨åˆ°èšåˆå‡½æ•°. sqlä¸­æä¾›5ç§èšåˆå‡½æ•°, åˆ†åˆ«æ˜¯: avg(), sum(), min(), max(), count()<br>Sql-- æŸ¥è¯¢æ¯ä¸€ä¸ªç­çº§çš„å¹³å‡å¹´é¾„
select avg(sage), class_name from STUDENT group by class_name;

-- æŸ¥è¯¢æ¯ä¸ªç­çº§æœ€å°çš„å¹´é¾„
select min(sage), class_name from STUDENT group by class_name;

-- æŸ¥è¯¢æ¯ä¸ªç­çš„æœ€å¤§å¹´é¾„
select max(sage), class_name from STUDENT group by class_name;

-- æŸ¥è¯¢æ¯ä¸ªç­çš„å­¦ç”Ÿæ•°é‡
select count(*), class_name from STUDENT group by class_name;

-- æŸ¥è¯¢æ¯ä¸ªç­çº§çš„å¹´é¾„å’Œ
select sum(sage), class_name from STUDENT group by class_name;
å¤åˆ¶<br>æ³¨æ„, ä¸è¦æŠŠæ²¡æœ‰æ”¾åœ¨group byçš„å†…å®¹ç›´æ¥æ”¾åœ¨selectä¸­. ä½ æƒ³æƒ³. æŒ‰ç…§ç­çº§æ¥æŸ¥è¯¢å¹³å‡å¹´é¾„, ä½ éè¦æŠŠæŸä¸€ä¸ªäººçš„ä¿¡æ¯æ”¾åœ¨ç»“æœé‡Œ. æ˜¯ä¸åˆé€‚çš„. <br><br>å¦‚æœæˆ‘ä»¬éœ€è¦å¯¹èšåˆå‡½æ•°è®¡ç®—çš„ç»“æœè¿›ä¸€æ­¥çš„ç­›é€‰. å¯ä»¥ç”¨havingè¯­å¥<br>Sql-- æŸ¥è¯¢å¹³å‡å¹´é¾„åœ¨15å²ä»¥ä¸Šçš„ç­çº§ä¿¡æ¯
select avg(sage), class_name from student group by class_name having avg(sage) &gt; 15;
å¤åˆ¶<br>havingå’Œwhereçš„åŒºåˆ«:<br>
<br>
where, åœ¨åŸå§‹æ•°æ®ä¸Šè¿›è¡Œçš„æ•°æ®ç­›é€‰. 

<br>
having, åœ¨èšåˆå‡½æ•°è®¡ç®—åçš„ç»“æœè¿›è¡Œç­›é€‰. 

<br><br>sqlä¸­ä½¿ç”¨order byè¯­å¥å¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œæ’åº. <br>Sql-- æŒ‰ç…§å¹´é¾„ä»å°åˆ°å¤§æŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯
select * from student order by sage asc

-- æŒ‰ç…§å¹´é¾„ä»å¤§åˆ°å°æŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯
select * from student order by sage desc
å¤åˆ¶<br><br>(ä»è¿™é‡Œå¼€å§‹åé¢å†…å®¹æƒ³äº†è§£å°±äº†è§£, ä¸æƒ³äº†è§£ç›´æ¥è¿‡. )<br>åœ¨å®é™…ä½¿ç”¨ä¸­, ä¸€ä¸ªè¡¨æ ¼è‚¯å®šæ˜¯æ— æ³•æ»¡è¶³æˆ‘ä»¬æ•°æ®å­˜å‚¨çš„. æ¯”å¦‚, åœ¨å­¦ç”Ÿé€‰è¯¾ç³»ç»Ÿä¸­. æˆ‘ä»¬å°±å¯ä»¥è®¾è®¡æˆä»¥ä¸‹è¡¨ç»“æ„:<br>
<br>å­¦ç”Ÿè¡¨: å­¦å·, å§“å, æ€§åˆ«, ä½å€ç­‰...
<br>è¯¾ç¨‹è¡¨: è¯¾ç¨‹ç¼–å·, è¯¾ç¨‹åç§°, æˆè¯¾æ•™å¸ˆç­‰...
<br>å­¦ç”Ÿè¯¾ç¨‹-æˆç»©è¡¨:  æˆç»©è¡¨ç¼–å·, å­¦å·, è¯¾ç¨‹ç¼–å·, æˆç»©
<br>åœ¨è¿™æ ·çš„è¡¨ç»“æ„ä¸­:<br>â€‹	ä¼˜åŠ¿: æ¯ä¸ªè¡¨çš„ç»“æ„ç›¸å¯¹æ˜ç¡®. ä¸å­˜åœ¨æ­§ä¹‰.  æ•°æ®ä¿å­˜å®Œæ•´, æ²¡æœ‰å†—ä½™.
â€‹	åŠ£åŠ¿: æ–°æ‰‹ä¸å¤ªå¥½æƒ³. æƒ³ä¸é€šä¸ºä»€ä¹ˆè¦è¿™æ ·è®¾è®¡. è¿™é‡Œæ¶‰åŠåˆ°æ•°æ®åº“è¡¨ç»“æ„è®¾è®¡èŒƒå¼, è¯¥æ¨¡å‹å±äºç¬¬ä¸‰èŒƒå¼(å¬è¿‡å°±è¡Œ).<br>åœ¨è¯¥æ¨¡å‹è¡¨ç»“æ„ä¸­. æˆç»©è¡¨æ˜¯éå¸¸é‡è¦çš„.  åœ¨æˆç»©è¡¨ä¸­, æ˜ç¡®çš„è¯´æ˜äº†å“ªä¸ªå­¦ç”Ÿçš„å“ªä¸€é—¨è¯¾ç¨‹å¾—äº†å¤šå°‘åˆ†. å®ƒå°†ä¸¤ä¸ªåŸæ¥æ¯«ä¸ç›¸å…³çš„è¡¨å…³è”äº†èµ·æ¥. å»ºç«‹äº†ä¸»å¤–é”®å…³ç³».  <br>ä½•ä¸ºä¸»å¤–é”®å…³ç³»: <br>â€‹		æŠŠAè¡¨ä¸­çš„ä¸»é”®æ”¾åœ¨å¦ä¸€å¼ è¡¨é‡Œä½œä¸ºæ™®é€šå­—æ®µä½¿ç”¨,  ä½†æ•°æ®è¦æ±‚å¿…é¡»æ¥è‡ªäºA. è¿™ä¸ªå¾ˆå¥½ç†è§£. æ¯”å¦‚, å­¦ç”Ÿæˆç»©è¡¨ä¸­çš„å­¦ç”Ÿç¼–å·æ•°æ®å°±å¿…é¡»æ¥è‡ªäºå­¦ç”Ÿè¡¨. å¦åˆ™è¯¥æ•°æ®æ˜¯æ— æ„ä¹‰çš„. <br>æ³¨æ„, ä»¥ä¸Šç»“æ„åªæ˜¯ä¸ºäº†è®²è§£å¤šè¡¨å…³ç³». å¹¶éå®Œæ•´çš„å­¦ç”Ÿé€‰è¯¾ç³»ç»Ÿè¡¨ç»“æ„. <br>å»ºè¡¨è¯­å¥:<br>Sql-- åˆ›å»ºå­¦ç”Ÿè¡¨, è¯¾ç¨‹è¡¨, æˆç»©è¡¨
-- 1. å­¦ç”Ÿè¡¨: å­¦å·, å§“å, æ€§åˆ«, ä½å€ç­‰...
-- 2. è¯¾ç¨‹è¡¨: è¯¾ç¨‹ç¼–å·, è¯¾ç¨‹åç§°, æˆè¯¾æ•™å¸ˆç­‰...
-- 3. å­¦ç”Ÿè¯¾ç¨‹-æˆç»©è¡¨:  æˆç»©è¡¨ç¼–å·, å­¦å·, è¯¾ç¨‹ç¼–å·, æˆç»©
create table stu(
	sid int primary key auto_increment,
	sname varchar(50) not null, 
	gender int(1),
	address varchar(255)
);

create table course(
	cid int primary key auto_increment,
	cname varchar(50) not null, 
	teacher varchar(50)
);

create table sc(
	sc_id int primary key auto_increment,
	s_id int, 
	c_id int,
	score int,
	CONSTRAINT FK_SC_STU_S_ID FOREIGN key(s_id) REFERENCES stu(sid),
	CONSTRAINT FK_SC_COURSE_C_ID FOREIGN key(c_id) REFERENCES course(cid)
);

å¤åˆ¶<br><br>â€‹	åœ¨whereè¯­å¥ä¸­å¯ä»¥è¿›è¡Œå¦å¤–çš„ä¸€ä¸ªæŸ¥è¯¢. <br>â€‹	ä¾‹å¦‚, æŸ¥è¯¢é€‰æ‹©äº†"ç¼–ç¨‹"è¿™é—¨è¯¾çš„å­¦ç”Ÿ<br>Sql-- æŸ¥è¯¢é€‰æ‹©äº†"ç¼–ç¨‹"è¿™é—¨è¯¾çš„å­¦ç”Ÿ
-- å…ˆæŸ¥è¯¢ç¼–ç¨‹è¯¾ç¨‹çš„ç¼–å·
select cid from course where cname = 'ç¼–ç¨‹';
-- æ ¹æ®cidå¯ä»¥å»scè¡¨æŸ¥è¯¢å‡ºå­¦ç”Ÿçš„id
select s_id from sc where c_id = 2;
-- æ ¹æ®å­¦ç”ŸIDæŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯
select * from stu where sid in (1,2,3,4,5,6);

-- æŠŠä¸Šé¢çš„sqlç©¿èµ·æ¥ 
select * from stu where sid in (
    select s_id from sc where c_id in (
        select cid from course where cname = 'ç¼–ç¨‹'
    )
);

-- æŸ¥è¯¢è¯¾ç¨‹åç§°ä¸ºâ€œç¼–ç¨‹â€ï¼Œä¸”åˆ†æ•°ä½äº60çš„å­¦ç”Ÿå§“åå’Œåˆ†æ•°
select stu.sname, sc.score from stu, sc where stu.sid = sc.s_id and sc.score &lt; 60 and sc.c_id in (
	select cid from course where cname = 'ç¼–ç¨‹'
)

å¤åˆ¶<br><br>å…³è”æŸ¥è¯¢å°±æ˜¯æŠŠå¤šä¸ªè¡¨æ ¼é€šè¿‡joinçš„æ–¹å¼åˆå¹¶åœ¨ä¸€èµ·. ç„¶åè¿›è¡Œæ¡ä»¶æ£€ç´¢. <br>è¯­æ³•è§„åˆ™:<br>Sqlselect ... from A xxx join B on A.å­—æ®µ1 = b.å­—æ®µ2

è¡¨ç¤º:  Aè¡¨å’ŒBè¡¨è¿æ¥. é€šè¿‡Aè¡¨çš„å­—æ®µ1å’Œbè¡¨çš„å­—æ®µ2è¿›è¡Œè¿æ¥. é€šå¸¸onåé¢çš„éƒ½æ˜¯ä¸»å¤–é”®å…³ç³»
å¤åˆ¶<br><br>Sql-- æŸ¥è¯¢æ¯é—¨è¯¾ç¨‹è¢«é€‰ä¿®çš„å­¦ç”Ÿæ•°
-- count(*)
-- group by cid

select c.cid,c.cname, count(*) from sc inner join course c on sc.c_id = c.cid group by c.cid, c.cname
å¤åˆ¶<br><br>Sql-- æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿçš„é€‰è¯¾æƒ…å†µ
select s.sname, c.cname from stu s left join sc on s.sid= sc.s_id left join course c on sc.c_id = c.cid

-- æŸ¥è¯¢ä»»ä½•ä¸€é—¨è¯¾ç¨‹æˆç»©åœ¨70åˆ†ä»¥ä¸Šçš„å§“åã€è¯¾ç¨‹åç§°å’Œåˆ†æ•°
-- score &gt; 70 sc
-- sname student
-- cname course
select s.sname, c.cname, sc.score from stu s inner join sc on s.sid = sc.s_id inner join course c on sc.c_id = c.cid
where sc.score &gt; 70
å¤åˆ¶<br><br>pythonè¿æ¥mysqlå¯ä»¥ç”¨pymysqlæ¨¡å—<br>Pythonpip install pymysql
å¤åˆ¶<br>pymysqlåŸºæœ¬ä½¿ç”¨:<br>Pythonimport pymysql

# é“¾æ¥æ•°æ®åº“
conn = pymysql.connect(
    host='localhost',
    port=3306,
    user='root',
    password='test123456',
    database='spider_back'
)
# åˆ›å»ºæ¸¸æ ‡
cursor = conn.cursor()
# æ¥ä¸‹æ¥å°±å¯ä»¥ç”¨æ¸¸æ ‡å»æ‰§è¡Œå„ç§æ“ä½œäº†
å¤åˆ¶<br><br><br>Pythontry:
    cursor = conn.cursor()
    result = cursor.execute("insert into stu(sname, address, gender) values ('æå˜‰è¯š', 'å…«å®å±±', 1)")
    print(cursor.lastrowid)  # è·å–è‡ªå¢çš„IDå€¼
    print(result)  # resultæ˜¯è¯¥sqlä¼šå½±å“å¤šå°‘æ¡æ•°æ®
    conn.commit()  # æäº¤
except:
    conn.rollback()  # å›æ»š
å¤åˆ¶<br><br>Pythontry:
    cursor = conn.cursor()
    result = cursor.execute("update stu set gender = 2 where sid = 12")
    print(result)  # resultæ˜¯è¯¥sqlä¼šå½±å“å¤šå°‘æ¡æ•°æ®
    conn.commit()  # æäº¤
except:
    conn.rollback()  # å›æ»š
å¤åˆ¶<br><br>Pythontry:
    cursor = conn.cursor()
    result = cursor.execute("delete from stu where sid = 12")
    print(result)  # resultæ˜¯è¯¥sqlä¼šå½±å“å¤šå°‘æ¡æ•°æ®
    conn.commit()  # æäº¤
except:
    conn.rollback()  # å›æ»š
å¤åˆ¶<br><br>Python# æŸ¥è¯¢
from pymysql.cursors import DictCursor
# cursor = conn.cursor(DictCursor)  # ä½¿ç”¨å­—å…¸æ¸¸æ ‡. æŸ¥è¯¢å‡ºçš„ç»“æœè‡ªåŠ¨ä¿å­˜åœ¨å­—å…¸ä¸­
cursor = conn.cursor()  # é»˜è®¤æ¸¸æ ‡. æŸ¥è¯¢å‡ºçš„ç»“æœè‡ªåŠ¨ä¿å­˜åœ¨å…ƒç»„ä¸­

sql = """
    select * from stu
"""
ret_num = cursor.execute(sql)
# result = cursor.fetchall()  # è·å–å…¨éƒ¨ç»“æœ
# result = cursor.fetchmany(5)  # è·å–éƒ¨åˆ†ç»“æœ
result = cursor.fetchone()  # è·å–å•ä¸ªç»“æœ
print(result)
result = cursor.fetchone()  # è·å–å•ä¸ªç»“æœ, å¯ä»¥è¿ç»­è·å–
print(result)
å¤åˆ¶<br>æ³¨æ„, ä¸€ä¸ªæ¸¸æ ‡å¦‚æœè¢«æ‹¿ç©ºäº†. åˆ™ä¸èƒ½å†æ¬¡è·å–å†…å®¹. <br><br>Python
import pymysql
from pymysql.cursors import DictCursor


class NoDataBaseException(Exception):
    pass


class DBHelper:
    def __init__(self, database=None, host="localhost", port=3306, username="root", password="test123456"):
        if database:
            self.conn = pymysql.connect(
                host=host,
                port=port,
                user=username,
                password=password,
                database=database
            )
        else:
            raise NoDataBaseException("æ²¡æœ‰æä¾›æ­£ç¡®çš„æ•°æ®åº“")

    def __enter__(self):
        return self

    def __exit__(self, exc_type, exc_val, exc_tb):
        return self.conn.close()

    def _change(self, sql,  *args, isInsert=False):
        cursor = self.conn.cursor()
        try:
            rownum = cursor.execute(sql, args)
            self.conn.commit()
            if isInsert:
                return cursor.lastrowid
            else:
                return rownum
        except Exception as e:
            print("æŠ¥é”™äº†", e)
            self.conn.rollback()
        finally:
            cursor.close()

    def insert(self, sql, *args):
        return self._change(sql, *args, isInsert=True)

    def update(self, sql, *args):
        return self._change(sql, *args)

    def delete(self, sql, *args):
        return self._change(sql, *args)

    def query_list(self, sql, *args):
        cursor = self.conn.cursor()
        try:
            cursor.execute(sql, args)
            result = cursor.fetchall()
            return result
        finally:
            cursor.close()

    def query_one(self, sql, *args):
        cursor = self.conn.cursor()
        try:
            cursor.execute(sql, args)
            result = cursor.fetchone()
            return result
        finally:
            cursor.close()


if __name__ == '__main__':
    with DBHelper("spider_back") as db:
        # result = db.query_list("select * from stu where gender=%s and address like %s", 1, "%åŒ—äº¬%")
        # print(result)
        result = db.delete("delete from stu where sid = %s", 10)
        print(result)

å¤åˆ¶<br>é™„: MySQLè¿œç¨‹è¿æ¥æ—¶, å¿…é¡»å¯¹æ•°æ®åº“åšä¸€ä¸ªç®€çŸ­çš„é…ç½®<br>1, æ‰“å¼€mysqlå‘½ä»¤è¡Œ. <br>2, è¾“å…¥ä»¥ä¸‹å†…å®¹<br>MysqlGRANT ALL PRIVILEGES ON *.* TO 'ç”¨æˆ·å'@'%' IDENTIFIED BY 'å¯†ç ' WITH GRANT OPTION;
FLUSH PRIVILEGES;
å¤åˆ¶<br>â€œimage-20210727172811954.pngâ€ could not be found.]]></description><link>çˆ¬è™«\çˆ¬è™«æ–‡æ¡£\06_MySQLæ•°æ®å­˜å‚¨.html</link><guid isPermaLink="false">çˆ¬è™«/çˆ¬è™«æ–‡æ¡£/06_MySQLæ•°æ®å­˜å‚¨.md</guid><pubDate>Tue, 17 Oct 2023 12:44:04 GMT</pubDate></item><item><title><![CDATA[é¢å‘å¯¹è±¡]]></title><description><![CDATA[<a class="tag" href="?query=tag:python" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#python</a> <a class="tag" href="?query=tag:é¢å‘å¯¹è±¡" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#é¢å‘å¯¹è±¡</a> 
 <br><br><a href=".?query=tag:python" class="tag" target="_blank" rel="noopener">#python</a> <a href=".?query=tag:é¢å‘å¯¹è±¡" class="tag" target="_blank" rel="noopener">#é¢å‘å¯¹è±¡</a><br><br>
<br>
è½¯ä»¶ç¼–ç¨‹å°±æ˜¯å°†æˆ‘ä»¬çš„æ€ç»´è½¬å˜æˆè®¡ç®—æœºèƒ½å¤Ÿè¯†åˆ«è¯­è¨€çš„ä¸€ä¸ªè¿‡ç¨‹
â€œé¢å‘å¯¹è±¡.assets/image-20200110221611335.pngâ€ could not be found.

<br>
ä»€ä¹ˆæ˜¯é¢å‘è¿‡ç¨‹ï¼Ÿ
è‡ªä¸Šè€Œä¸‹é¡ºåºæ‰§è¡Œï¼Œé€æ­¥æ±‚ç²¾
å…¶ç¨‹åºç»“æ„æ˜¯æŒ‰åŠŸèƒ½åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªåŸºæœ¬æ¨¡å—ï¼Œè¿™äº›æ¨¡å—å½¢æˆä¸€ä¸ªæ ‘çŠ¶ç»“æ„ï¼›
å„æ¨¡å—ä¹‹é—´çš„å…³ç³»å°½å¯èƒ½ç®€å•ï¼Œåœ¨åŠŸèƒ½ä¸Šç›¸å¯¹ç‹¬ç«‹
æ¯ä¸€æ¨¡å—å†…éƒ¨å‡æ˜¯ç”±é¡ºåºã€é€‰æ‹©å’Œå¾ªç¯ä¸‰ç§åŸºæœ¬ç»“æ„ç»„æˆ
å…¶æ¨¡å—åŒ–å®ç°çš„å…·ä½“æ–¹æ³•æ˜¯ä½¿ç”¨å­ç¨‹åº
ç¨‹åºæµç¨‹åœ¨å†™ç¨‹åºæ—¶å°±å·²å†³å®š

<br>
ä»€ä¹ˆæ˜¯é¢å‘å¯¹è±¡ï¼Ÿ
æŠŠæ•°æ®åŠå¯¹æ•°æ®çš„æ“ä½œæ–¹æ³•æ”¾åœ¨ä¸€èµ·ï¼Œä½œä¸ºä¸€ä¸ªç›¸äº’ä¾å­˜çš„æ•´ä½“â€”â€”å¯¹è±¡
å¯¹åŒç±»å¯¹è±¡æŠ½è±¡å‡ºå…¶å…±æ€§ï¼Œå½¢æˆç±»
ç±»ä¸­çš„å¤§å¤šæ•°æ•°æ®ï¼Œåªèƒ½ç”¨æœ¬ç±»çš„æ–¹æ³•è¿›è¡Œå¤„ç†
ç±»é€šè¿‡ä¸€ä¸ªç®€å•çš„å¤–éƒ¨æ¥å£ä¸å¤–ç•Œå‘ç”Ÿå…³ç³»ï¼Œå¯¹è±¡ä¸å¯¹è±¡ä¹‹é—´é€šè¿‡æ¶ˆæ¯è¿›è¡Œé€šä¿¡
ç¨‹åºæµç¨‹ç”±ç”¨æˆ·åœ¨ä½¿ç”¨ä¸­å†³å®š

<br>
ç†è§£é¢å‘å¯¹è±¡

<br>
é¢å‘å¯¹è±¡æ˜¯ç›¸å¯¹é¢å‘è¿‡ç¨‹è€Œè¨€

<br>
é¢å‘å¯¹è±¡å’Œé¢å‘è¿‡ç¨‹éƒ½æ˜¯ä¸€ç§æ€æƒ³

<br>
é¢å‘è¿‡ç¨‹
å¼ºè°ƒçš„æ˜¯åŠŸèƒ½è¡Œä¸º
å…³æ³¨çš„æ˜¯è§£å†³é—®é¢˜éœ€è¦å“ªäº›æ­¥éª¤

<br>
é¢å‘å¯¹è±¡
å°†åŠŸèƒ½å°è£…è¿›å¯¹è±¡ï¼Œå¼ºè°ƒå…·å¤‡äº†åŠŸèƒ½çš„å¯¹è±¡
å…³æ³¨çš„æ˜¯è§£å†³é—®é¢˜éœ€è¦å“ªäº›å¯¹è±¡

<br>
é¢å‘å¯¹è±¡æ˜¯åŸºäºé¢å‘è¿‡ç¨‹çš„



<br>
æŠŠğŸ˜å…³å†°ç®±
é¢å‘è¿‡ç¨‹
â€œé¢å‘å¯¹è±¡.assets/æˆªå±2020-01-1022.19.20.pngâ€ could not be found.
é¢å‘å¯¹è±¡ï¼šæ›´åŠ ç¬¦åˆäººæ°‘æ€è€ƒä¹ æƒ¯çš„æ€æƒ³ï¼Œä»æ‰§è¡Œè€…å˜æˆäº†æŒ‡æŒ¥è€…
â€œé¢å‘å¯¹è±¡.assets/æˆªå±2020-01-1022.19.24.pngâ€ could not be found.

<br>
é¢å‘å¯¹è±¡çš„ç‰¹ç‚¹
æ˜¯ä¸€ç§ç¬¦åˆäººä»¬æ€è€ƒä¹ æƒ¯çš„æ€æƒ³
å¯ä»¥å°†å¤æ‚çš„äº‹æƒ…ç®€å•åŒ–
å°†ç¨‹åºå‘˜ä»æ‰§è¡Œè€…è½¬æ¢æˆäº†æŒ‡æŒ¥è€…

<br>
å®Œæˆéœ€æ±‚æ—¶
aã€å…ˆè¦å»æ‰¾å…·æœ‰æ‰€éœ€çš„åŠŸèƒ½çš„å¯¹è±¡æ¥ç”¨
bã€å¦‚æœè¯¥å¯¹è±¡ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆåˆ›å»ºä¸€ä¸ªå…·æœ‰æ‰€éœ€åŠŸèƒ½çš„å¯¹è±¡

<br>
ç±»ä¸å¯¹è±¡çš„å…³ç³»
ä½¿ç”¨è®¡ç®—æœºè¯­è¨€å°±æ˜¯ä¸æ–­çš„åœ¨æè¿°ç°å®ç”Ÿæ´»ä¸­çš„äº‹ç‰©
Pythonä¸­æè¿°äº‹ç‰©é€šè¿‡ç±»çš„å½¢å¼ä½“ç°ï¼Œç±»æ˜¯å…·ä½“äº‹ç‰©çš„æŠ½è±¡ï¼Œæ¦‚å¿µä¸Šçš„å®šä¹‰
å¯¹è±¡å³æ˜¯è¯¥ç±»äº‹ç‰©å®å®åœ¨åœ¨å­˜åœ¨çš„ä¸ªä½“
â€œé¢å‘å¯¹è±¡.assets/æˆªå±2020-01-1022.23.25.pngâ€ could not be found.
â€œé¢å‘å¯¹è±¡.assets/æˆªå±2020-01-1022.23.32.pngâ€ could not be found.

<br><br>
<br>
è®¾è®¡ç±»åªå…³å¿ƒ3æ ·ä¸œè¥¿

<br>
è¯´æ˜
ç±»åï¼šé¦–å­—æ¯å¤§å†™ï¼Œéµå®ˆæ ‡è¯†ç¬¦è§„åˆ™
å±æ€§ï¼šéµå®ˆæ ‡è¯†ç¬¦è§„åˆ™
è¡Œä¸º(åŠŸèƒ½ã€æ–¹æ³•ã€å‡½æ•°)ï¼šéµå®ˆæ ‡è¯†ç¬¦è§„åˆ™

<br>
è®¾è®¡ç±»
äººç±»
ç±»åï¼šPersonl
å±æ€§ï¼šname age sex height weight
è¡Œä¸ºï¼šæ¬ç –ã€ç›–æˆ¿å­
å¤åˆ¶
æ±½è½¦ç±»
ç±»åï¼šCar
å±æ€§ï¼šcolor kuanshi(æ¬¾å¼) weight pailiang(æ’é‡)
è¡Œä¸ºï¼šè·‘ã€æ‹‰ä¸œè¥¿
å¤åˆ¶



<br>
åˆ›å»ºç±»

<br>
æ ¼å¼
class ç±»å(çˆ¶ç±»å):
    å±æ€§&amp;è¡Œä¸º
å¤åˆ¶

<br>
è¯´æ˜
classï¼šè¡¨æ˜è¿™æ˜¯ä¸€ä¸ªç±»
ç±»åï¼šç±»çš„åå­—
()ï¼šçˆ¶ç±»é›†åˆçš„å¼€å§‹å’Œç»“æŸ
çˆ¶ç±»åï¼šçˆ¶ç±»çš„åå­—ï¼Œå®šä¹‰çš„ç±»ç»§æ‰¿è‡ªçˆ¶ç±»ï¼Œå¯ä»¥ä¸å†™ï¼Œé»˜è®¤æ˜¯objectã€‚objectæ˜¯æ‰€æœ‰ç±»çš„ç›´æ¥æˆ–é—´æ¥çˆ¶ç±»

<br>
ä»£ç 
class Person(object):
    pass
class Person:
    pass
å¤åˆ¶



<br>
<br>
åˆ›å»ºå­˜åœ¨å±æ€§ä¸æ–¹æ³•çš„ç±»
"""
wife
å±æ€§: sex age  height  weight  name faceValue
è¡Œä¸ºï¼šæ´—è¡£æœ  åšé¥­    ç”Ÿå°å­©
"""
"""
husband
å±æ€§ï¼šsex age  height  weight  name faceValue
è¡Œä¸ºï¼šåƒé¥­   å¸®å¿™ç”Ÿå°å­©   ä¹°èœ  èµšé’±
"""
class Wife:
    sex = "å¥³" #ç±»å±æ€§
    age = "20"
    height = 160
    name = "è‹è‹"
    faceValue = "å¾ˆ é«˜"
    #self ä»£è¡¨å½“å‰ çš„å¯¹è±¡  ä¸ä¸€å®šåå­—å«åšself  æ ‡å‡†æ¥è¯´ éƒ½å«self
    def washClothes(self):
        print("æ´—è¡£æœ")
    def cook(self):
        print("åšé¥­")
    def papapa(self):
        print("ç”Ÿå°å­©")
zhangSan = Wife() #ç±»çš„å®ä¾‹åŒ–  ç§°ä¸º å¯¹è±¡
å¤åˆ¶

<br><br>
<br>
æ ¼å¼
å¯¹è±¡å = ç±»å(å‚æ•°åˆ—è¡¨)

<br>
è¯´æ˜
å‚æ•°åˆ—è¡¨ï¼šä¸ºäº†åé¢ç»™å±æ€§è¿›è¡Œèµ‹å€¼çš„

<br>
å®ä¾‹åŒ–ä»£ç 
per1 = Person()
print(per1)
per2 = Person()
print(per2)
å¤åˆ¶

<br><br>
<br>
æ¦‚è¿°

<br>
åœ¨ç±»åœ°å†…éƒ¨ï¼Œä½¿ç”¨ def å…³é”®å­—æ¥å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œä¸ä¸€èˆ¬å‡½æ•°å®šä¹‰ä¸åŒï¼Œç±»æ–¹æ³•å¿…é¡»åŒ…å«å‚æ•° selfï¼Œä¸”ä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œself ä»£è¡¨çš„æ˜¯ç±»çš„å®ä¾‹ï¼Œè€Œéç±»

<br>
self çš„åå­—å¹¶ä¸æ˜¯è§„å®šæ­»çš„ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ thisï¼Œä½†æ˜¯æœ€å¥½è¿˜æ˜¯æŒ‰ç…§çº¦å®šä½¿ç”¨ selfã€‚

<br>
è¿™ä¸ªselfçš„å‚æ•° ä¸éœ€è¦ä¼ å‚çš„  å®ƒæ˜¯ä»£è¡¨ å½“å‰å®ä¾‹åŒ–åçš„å¯¹è±¡



<br>
self ä¸æ˜¯ python å…³é”®å­—ï¼Œæˆ‘ä»¬æŠŠä»–æ¢æˆargä¹Ÿæ˜¯å¯ä»¥æ­£å¸¸æ‰§è¡Œ
class Test:
    def prt(arg):
        print(arg)
        print(arg.__class__)
 
t = Test()
t.prt()
å¤åˆ¶
ä¸‹é¢ä»£ç å¯ä»¥éªŒè¯
class A:
    name = "ss"
    def aa(self):
        print(self.__dict__)
        print(id(self)) #æ‰“å°slefå¯¹è±¡çš„å­˜å‚¨åœ°å€
a = A()
a.name = 'a'
print(a.__dict__)
print(id(a)) #æ‰“å°å½“å‰ç±»å®ä¾‹çš„å˜é‡açš„å­˜å‚¨åœ°å€
å¤åˆ¶

<br>
æ³¨æ„ï¼š

<br>self å°±æ˜¯å½“å‰ç±»å®ä¾‹åŒ–çš„å¯¹è±¡  å“ªä¸ªå¯¹è±¡è°ƒç”¨å®ƒ  å®ƒå°±æ˜¯å“ªä¸ªå¯¹è±¡
<br>selfä¸æ˜¯å¿…é¡»çš„ ä½†æ˜¯ä½œä¸ºæ ‡å‡†è§„èŒƒ æ˜¯å¿…é¡»å«self
<br>self åœ¨ç±»ä¸­åˆ›å»ºå¯¹è±¡  è°ƒç”¨ç±»ä¸­çš„å±æ€§ä¸æ–¹æ³•


<br><br>
<br>
æ ¼å¼
å¯¹è±¡.å±æ€§å
å¯¹è±¡.æ–¹æ³•å(å‚æ•°...)
å¤åˆ¶

<br>
æ–¹æ³•çš„è¿”å›å€¼ return
æ–¹æ³•é‡Œ å¦‚æœ æ²¡æœ‰è¿”å›å€¼ æ‰“å°æ–¹æ³•çš„æ—¶å€™  è¿”å› None
å¦‚æœæœ‰è¿”å›å€¼å¾— æ–¹æ³•  éœ€è¦ä½¿ç”¨ print() å°†å…¶è¾“å‡º
class ç±»åï¼š
	def æ–¹æ³•å():
        return "å€¼"
å¤åˆ¶

<br>
æ³¨æ„ï¼š
return ä¸‹æ–¹çš„ä»£ç ä¸åœ¨æ‰§è¡Œ  é‡åˆ°return å°±è®¤ä¸ºæ˜¯ç»“æŸäº†ï¼

<br><br><br>
<br>
å®šä¹‰
class Person(object):
    # å®šä¹‰ç±»å±æ€§
    # å½“å¤šä¸ªç±»çš„å¯¹è±¡çš„å±æ€§å€¼éœ€è¦ç›¸åŒæ—¶å¯ä»¥ä½¿ç”¨ç±»å±æ€§
    name = "lilei"
    age = 18
    sex = "ç”·"
å¤åˆ¶

<br>
è°ƒç”¨
å¯ä»¥é€šè¿‡ç±»è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å¯¹è±¡è°ƒç”¨

<br>
ç»™ç±»ç»‘å®šå±æ€§
â€‹	ç±»å.å±æ€§å = å±æ€§å€¼

<br>
ä½¿ç”¨
# å®ä¾‹åŒ–å¯¹è±¡æ—¶ï¼Œæ¯ä¸€ä¸ªå¯¹è±¡çš„å±æ€§å€¼éƒ½ç›¸åŒ
per1 = Person()
per2 = Person()

#é€šè¿‡å¯¹è±¡æ–¹æ³•ç±»å±æ€§   å¯¹è±¡å.ç±»å±æ€§å
print(per1.name, per1.age, per1.sex)
print(per2.name, per2.age, per2.sex)

# ä¿®æ”¹å¯¹è±¡å±æ€§å€¼ï¼Œå¦‚æœå¯¹è±¡å±æ€§ä¸å­˜åœ¨åˆ™å˜ä¸ºå¢åŠ å¯¹è±¡å±æ€§
per1.name = "liudh"
per2.name = "daol"
print(per1.name, per2.name, Person.name)

print(hasattr(per1, 'name'))
print(setattr(per1, 'name', 'lucky'))
print(getattr(per1, 'name'))
å¤åˆ¶

<br>
é—®é¢˜
ä½¿ç”¨ç±»åˆ›å»ºçš„æ‰€æœ‰å¯¹è±¡çš„å±æ€§åˆå§‹å€¼éƒ½æ˜¯ä¸€æ ·çš„

<br><br>
<br>
æ¦‚è¿°ï¼š

<br>é€šè¿‡selfä»¥åŠå®ä¾‹åŒ–åå¯¹è±¡æ‰€åˆ›å»ºçš„å±æ€§ä¸ºå¯¹è±¡å±æ€§


<br>
é€šè¿‡ç±»ä¸­å®šä¹‰ä»¥åŠç±»åç§°åˆ›å»ºçš„å±æ€§ä¸ºå¯¹è±¡å±æ€§ 

<br>å¯¹è±¡å±æ€§åªå­˜åœ¨äºå½“å‰å¯¹è±¡ä¸­


<br>
å¯¹è±¡å±æ€§åªèƒ½ç”±å¯¹è±¡è°ƒç”¨

<br>
å®ä¾‹å¯¹è±¡ç»‘å®šå±æ€§

<br>
é€šè¿‡ç±»çš„selfå˜é‡

<br>
ç›´æ¥ç»™å®ä¾‹å¯¹è±¡èµ‹å€¼


class Student(object):
    def __init__(self, name):
        self.name = name
s = Student('lucky')#æ–¹æ³•ä¸€ é€šè¿‡ç±»çš„selfå˜é‡ç»‘å®šå±æ€§
s.score = 90#æ–¹æ³•äºŒ ç›´æ¥èµ‹å€¼
å¤åˆ¶

<br>
å®ä¾‹
class Person(object):
     # è¿™é‡Œçš„å±æ€§å®é™…ä¸Šå±äºç±»å±æ€§(ç”¨ç±»åæ¥è°ƒç”¨)
    name = "person"
    def __init__(self, name):
        pass
        #å¯¹è±¡å±æ€§
        self.name = name


print(Person.name)
per = Person("lucky")
#å¯¹è±¡å±æ€§çš„ä¼˜å…ˆçº§é«˜äºç±»å±æ€§
print(per.name)
#åŠ¨æ€çš„ç»™å¯¹è±¡æ·»åŠ å¯¹è±¡å±æ€§
per.age = 18  # åªé’ˆå¯¹äºå½“å‰å¯¹è±¡ç”Ÿæ•ˆï¼Œå¯¹äºç±»åˆ›å»ºçš„å…¶ä»–å¯¹è±¡æ²¡æœ‰ä½œç”¨
print(Person.name)
per2 = Person("lilei")
#print(per2.age)  #æ²¡æœ‰ageå±æ€§


#åˆ é™¤å¯¹è±¡ä¸­çš„nameå±æ€§ï¼Œåœ¨è°ƒç”¨ä¼šä½¿ç”¨åˆ°åŒåçš„ç±»å±æ€§
del per.name
print(per.name)

#æ³¨æ„ï¼šä»¥ååƒä¸‡ä¸è¦å°†å¯¹è±¡å±æ€§ä¸ç±»å±æ€§é‡åï¼Œå› ä¸ºå¯¹è±¡å±æ€§ä¼šå±è”½æ‰ç±»å±æ€§ã€‚ä½†æ˜¯å½“åˆ é™¤å¯¹è±¡å±æ€§åï¼Œåœ¨ä½¿ç”¨åˆèƒ½ä½¿ç”¨ç±»å±æ€§äº†ã€‚
å¤åˆ¶

<br>
æ³¨æ„ï¼š

<br>ä½¿ç”¨å¯¹è±¡åˆ›å»ºçš„å±æ€§ åªæœ‰å½“å‰å¯¹è±¡å­˜åœ¨è¯¥å±æ€§  ç§°ä¸ºå¯¹è±¡å±æ€§
<br>ä½¿ç”¨ç±»åˆ›å»ºçš„å±æ€§ åœ¨æ¯ä¸ªå¯¹è±¡é‡Œéƒ½ä¼šå­˜åœ¨ ç§°ä¸ºç±»å±æ€§
<br>å½“åœ¨å¯¹è±¡é‡Œå»ä¿®æ”¹ ç±»å±æ€§çš„å€¼çš„æ—¶å€™ åœ¨å½“å‰çš„å¯¹è±¡é‡Œé¢æ–°åˆ›å»ºäº†ä¸€ä¸ªå¯¹è±¡å±æ€§  å½“è°ƒç”¨çš„æ—¶å€™ ä¼šä¼˜å…ˆè°ƒç”¨ å¯¹è±¡å±æ€§  è€Œç±»å±æ€§æœ¬èº«çš„å€¼ ä¸ä¼šæ”¹å˜
<br>ä½¿ç”¨ ç±»é‡Œé¢çš„æ–¹æ³•åˆ›å»ºçš„å±æ€§ ä¹Ÿæ˜¯å¯¹è±¡å±æ€§  ä¸èƒ½å¤Ÿä½¿ç”¨ç±»å»è°ƒç”¨
<br>å½“å¯¹è±¡çš„å±æ€§åˆ æ‰ä»¥å è¿˜ä¼šè°ƒç”¨ ç±»å±æ€§
<br>ä¸èƒ½å†å¯¹è±¡é‡Œå»åˆ é™¤ç±»çš„å±æ€§  AttributeError: å±æ€§å
<br>å¯¹è±¡å±æ€§çš„ä¼˜å…ˆçº§é«˜äºç±»å±æ€§


<br><br>
<br>æ³¨æ„ï¼š

<br>é€šè¿‡selfä»¥åŠå®ä¾‹åŒ–åå¯¹è±¡æ‰€åˆ›å»ºçš„å±æ€§ä¸ºå¯¹è±¡å±æ€§
<br>é€šè¿‡ç±»ä¸­å®šä¹‰ä»¥åŠç±»åç§°åˆ›å»ºçš„å±æ€§ä¸ºå¯¹è±¡å±æ€§ 
<br>ç±»å±æ€§ä¼šå­˜åœ¨æ¯ä¸ªå®ä¾‹åŒ–çš„å¯¹è±¡ä¸­
<br>å¯¹è±¡å±æ€§åªå­˜åœ¨äºå½“å‰å¯¹è±¡ä¸­
<br>ç±»å±æ€§å¯ä»¥ä½¿ç”¨å¯¹è±¡è¿›è¡Œè°ƒç”¨
<br>å¯¹è±¡å±æ€§åªèƒ½ç”±å¯¹è±¡è°ƒç”¨


<br><br>
<br>
éœ€æ±‚
ç±»åˆ›å»ºçš„å¤šä¸ªå¯¹è±¡çš„å±æ€§çš„åˆå§‹å€¼æ˜¯ä¸åŒçš„

<br>
_init__ æ–¹æ³•
å®šä¹‰
class Person(object):
    # ç±»å±æ€§
    country = "ä¸­å›½"

    # æ„é€ æ–¹æ³•ï¼šåœ¨ä½¿ç”¨ç±»åˆ›å»ºå®ä¾‹å¯¹è±¡æ—¶è‡ªåŠ¨è°ƒç”¨ï¼Œç›®çš„æ˜¯åˆå§‹åŒ–å¯¹è±¡çš„å†…å®¹
    def __init__(self, name, age, sex):
        # å®šä¹‰å¯¹è±¡å±æ€§
        # åªèƒ½å¯¹è±¡è°ƒç”¨
        self.name = name
        self.age = age
        self.sex = sex
å¤åˆ¶

<br>
ä½¿ç”¨
# åˆ›å»ºå¯¹è±¡æ—¶ç»™æ¯ä¸ªå¯¹è±¡çš„å±æ€§è¿›è¡Œèµ‹å€¼
per1 = Person("daol", 45, "ç”·")
per2 = Person("liudh", 55, "ç”·")

print(per1.name)
print(per2.name)

# print(Person.name) # ç±»ä¸­æ²¡æœ‰nameå±æ€§ï¼Œä¸”ç±»æ— æ³•è°ƒç”¨å¯¹è±¡å±æ€§
å¤åˆ¶

<br><br><br>â€œé¢å‘å¯¹è±¡.assets/11ã€ç»§æ‰¿.pngâ€ could not be found.<br>é¢å‘å¯¹è±¡çš„ç¼–ç¨‹å¸¦æ¥çš„ä¸»è¦å¥½å¤„ä¹‹ä¸€æ˜¯ä»£ç çš„é‡ç”¨ï¼Œå®ç°è¿™ç§é‡ç”¨çš„æ–¹æ³•ä¹‹ä¸€æ˜¯é€šè¿‡ç»§æ‰¿æœºåˆ¶ã€‚ç»§æ‰¿å®Œå…¨å¯ä»¥ç†è§£æˆç±»ä¹‹é—´çš„ç±»å‹å’Œå­ç±»å‹å…³ç³»ã€‚<br>åœ¨OOPç¨‹åºè®¾è®¡ä¸­ï¼Œå½“æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªclassçš„æ—¶å€™ï¼Œå¯ä»¥ä»æŸä¸ªç°æœ‰çš„classç»§æ‰¿ï¼Œæ–°çš„classç§°ä¸ºå­ç±»ï¼ˆSubclassï¼‰ï¼Œè€Œè¢«ç»§æ‰¿çš„classç§°ä¸ºåŸºç±»ã€çˆ¶ç±»æˆ–è¶…ç±»ï¼ˆBase classã€Super classï¼‰ã€‚<br><br>classåé¢ç´§æ¥ç€æ˜¯ç±»åï¼Œå³Studentï¼Œç±»åé€šå¸¸æ˜¯å¤§å†™å¼€å¤´çš„å•è¯ï¼Œç´§æ¥ç€æ˜¯(object)ï¼Œè¡¨ç¤ºè¯¥ç±»æ˜¯ä»å“ªä¸ªç±»ç»§æ‰¿ä¸‹æ¥çš„ï¼Œç»§æ‰¿çš„æ¦‚å¿µæˆ‘ä»¬åé¢å†è®²ï¼Œé€šå¸¸ï¼Œå¦‚æœæ²¡æœ‰åˆé€‚çš„ç»§æ‰¿ç±»ï¼Œå°±ä½¿ç”¨objectç±»ï¼Œè¿™æ˜¯æ‰€æœ‰ç±»æœ€ç»ˆéƒ½ä¼šç»§æ‰¿çš„ç±»<br>å•ç»§æ‰¿çš„å®ç°<br>
<br>
æ ¼å¼ï¼š
class Student(object):
    pass
å¤åˆ¶
Python åŒæ ·æ”¯æŒç±»çš„ç»§æ‰¿ï¼Œå¦‚æœä¸€ç§è¯­è¨€ä¸æ”¯æŒç»§æ‰¿ï¼Œç±»å°±æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰ã€‚æ´¾ç”Ÿç±»çš„å®šä¹‰å¦‚ä¸‹æ‰€ç¤º:
class DerivedClassName(BaseClassName1):
    &lt;statement-1&gt;
    .
    .
    .
    &lt;statement-N&gt;
å¤åˆ¶

#ç±»å®šä¹‰
class people:
    #å®šä¹‰åŸºæœ¬å±æ€§
    name = ''
    age = 0
    #å®šä¹‰ç§æœ‰å±æ€§,ç§æœ‰å±æ€§åœ¨ç±»å¤–éƒ¨æ— æ³•ç›´æ¥è¿›è¡Œè®¿é—®
    __weight = 0
    #å®šä¹‰æ„é€ æ–¹æ³•
    def __init__(self,n,a,w):
        self.name = n
        self.age = a
        self.__weight = w
    def speak(self):
        print("%s è¯´: æˆ‘ %d å²ã€‚" %(self.name,self.age))
  #å•ç»§æ‰¿ç¤ºä¾‹
class student(people):
    grade = ''
    def __init__(self,n,a,w,g):
        #è°ƒç”¨çˆ¶ç±»çš„æ„å‡½
        people.__init__(self,n,a,w)
        self.grade = g
    #è¦†å†™çˆ¶ç±»çš„æ–¹æ³•
    def speak(self):
        print("%s è¯´: æˆ‘ %d å²äº†ï¼Œæˆ‘åœ¨è¯» %d å¹´çº§"%(self.name,self.age,self.grade))
å¤åˆ¶
â€‹

<br><br>
<br>
æ–¹å¼

<br>
æ–¹å¼1
super(Dog, self).saySomething()

<br>
æ–¹å¼2 [æ¨è]
super().saySomething()  

<br>
æ–¹å¼3
Animal.saySomething(self)



<br>


<br>
å¦‚æœæ˜¯å•ä¸€ç»§æ‰¿  super() ä¼šè‡ªåŠ¨è°ƒç”¨ çˆ¶ç±»çš„è¢«è¦†ç›–çš„æ–¹æ³•

<br>
ä½¿ç”¨super(ç±»å,self) ä¼šæ ¹æ®å½“å‰çš„ç±»å å¾€å³è¿›è¡Œæ£€ç´¢ çˆ¶ç±»ç›¸åŒçš„æ–¹æ³•
è¿™æ ·åšæœ‰ä¸€äº›ç¼ºç‚¹ï¼Œæ¯”å¦‚è¯´å¦‚æœä¿®æ”¹äº†çˆ¶ç±»åç§°ï¼Œé‚£ä¹ˆåœ¨å­ç±»ä¸­ä¼šæ¶‰åŠå¤šå¤„ä¿®æ”¹ï¼Œå¦å¤–ï¼ŒPythonæ˜¯å…è®¸å¤šç»§æ‰¿çš„è¯­è¨€ï¼Œå¦‚ä¸Šæ‰€ç¤ºçš„æ–¹æ³•åœ¨å¤šç»§æ‰¿æ—¶å°±éœ€è¦é‡å¤å†™å¤šæ¬¡ï¼Œæ˜¾å¾—ç´¯èµ˜ã€‚ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼ŒPythonå¼•å…¥äº†super()æœºåˆ¶



<br>
å®ä¾‹
#  æ–¹å¼1
super(ç±»å, self).saySomething()
#  æ–¹å¼2 [æ¨è]
super().saySomething()
# æ–¹å¼3
Animal.saySomething(self)
class Animal():
    def __init__(self, name):
        self.name = name
    def saySomething(self):
        print("I am " + self.name)

class Dog(Animal):
    def __init__(self, name):
        super().__init__(name)

    def saySomething(self):
        print("I am " + self.name + ", and I can bark")

    def animal_say_1(self):
        # å­ç±»è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•
        #  æ–¹å¼1
        super(Dog, self).saySomething()

    def animal_say_2(self):
        #  æ–¹å¼2 [æ¨è]
        super().saySomething()

    def animal_say_3(self):
        # æ–¹å¼3
        Animal.saySomething(self)

dog = Dog("Blake")
dog.saySomething()
dog.animal_say_1()
dog.animal_say_2()
dog.animal_say_3()
å¤åˆ¶

<br><br>
<br>
ç›®çš„ï¼šå¦‚æœä½ çš„çˆ¶ç±»æ–¹æ³•çš„åŠŸèƒ½ä¸èƒ½æ»¡è¶³ä½ çš„éœ€æ±‚ï¼Œä½ å¯ä»¥åœ¨å­ç±»é‡å†™ä½ çˆ¶ç±»çš„æ–¹æ³•
class Parent:        # å®šä¹‰çˆ¶ç±»
   def myMethod(self):
      print ('è°ƒç”¨çˆ¶ç±»æ–¹æ³•')
 
class Child(Parent): # å®šä¹‰å­ç±»
   def myMethod(self):
      print ('è°ƒç”¨å­ç±»æ–¹æ³•')
 
c = Child()          # å­ç±»å®ä¾‹
c.myMethod()         # å­ç±»è°ƒç”¨é‡å†™æ–¹æ³•
å¤åˆ¶

]]></description><link>çˆ¬è™«\çˆ¬è™«æ–‡æ¡£\é¢å‘å¯¹è±¡.html</link><guid isPermaLink="false">çˆ¬è™«/çˆ¬è™«æ–‡æ¡£/é¢å‘å¯¹è±¡.md</guid><pubDate>Mon, 16 Oct 2023 15:06:21 GMT</pubDate></item><item><title><![CDATA[beautifulsoup]]></title><description><![CDATA[<a class="tag" href="?query=tag:bs4" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#bs4</a> 
 <br><br><a href=".?query=tag:bs4" class="tag" target="_blank" rel="noopener">#bs4</a><br><br>ç®€å•æ¥è¯´ï¼ŒBeautiful Soupæ˜¯pythonçš„ä¸€ä¸ªåº“ï¼Œæœ€ä¸»è¦çš„åŠŸèƒ½æ˜¯ä»ç½‘é¡µæŠ“å–æ•°æ®ã€‚å®˜æ–¹è§£é‡Šå¦‚ä¸‹ï¼š<br>Beautiful Soupæä¾›ä¸€äº›ç®€å•çš„ã€pythonå¼çš„å‡½æ•°ç”¨æ¥å¤„ç†å¯¼èˆªã€æœç´¢ã€ä¿®æ”¹åˆ†ææ ‘ç­‰åŠŸèƒ½ã€‚
å®ƒæ˜¯ä¸€ä¸ªå·¥å…·ç®±ï¼Œé€šè¿‡è§£ææ–‡æ¡£ä¸ºç”¨æˆ·æä¾›éœ€è¦æŠ“å–çš„æ•°æ®ï¼Œå› ä¸ºç®€å•ï¼Œæ‰€ä»¥ä¸éœ€è¦å¤šå°‘ä»£ç å°±å¯ä»¥å†™å‡ºä¸€ä¸ªå®Œæ•´çš„åº”ç”¨ç¨‹åºã€‚<br><br>pip install beautifulsoup4
å¤åˆ¶<br>pip install beautifulsoup4 -i <a rel="noopener" class="external-link" href="http://pypi.douban.com/simple/" target="_blank">http://pypi.douban.com/simple/</a><br><br>Beautiful Soupæ”¯æŒPythonæ ‡å‡†åº“ä¸­çš„HTMLè§£æå™¨,è¿˜æ”¯æŒä¸€äº›ç¬¬ä¸‰æ–¹çš„è§£æå™¨ï¼Œå¦‚æœæˆ‘ä»¬ä¸å®‰è£…å®ƒï¼Œåˆ™ Python ä¼šä½¿ç”¨ Pythoné»˜è®¤çš„è§£æå™¨ï¼Œlxml è§£æå™¨æ›´åŠ å¼ºå¤§ï¼Œé€Ÿåº¦æ›´å¿«ï¼Œæ¨èå®‰è£…ã€‚<br>Pythonpip install lxml
å¤åˆ¶<br><br><a data-tooltip-position="top" aria-label="http://beautifulsoup.readthedocs.io/zh_CN/latest/" rel="noopener" class="external-link" href="http://beautifulsoup.readthedocs.io/zh_CN/latest/" target="_blank">å®˜ç½‘æ–‡æ¡£</a><br><br>ä¸‹é¢çš„ä¸€æ®µHTMLä»£ç å°†ä½œä¸ºä¾‹å­è¢«å¤šæ¬¡ç”¨åˆ°.è¿™æ˜¯ çˆ±ä¸½ä¸æ¢¦æ¸¸ä»™å¢ƒçš„ çš„ä¸€æ®µå†…å®¹(ä»¥åå†…å®¹ä¸­ç®€ç§°ä¸º çˆ±ä¸½ä¸ çš„æ–‡æ¡£):<br>Pythonhtml_doc = """
&lt;html&gt;&lt;head&gt;&lt;title&gt;The Dormouse's story&lt;/title&gt;&lt;/head&gt;
&lt;body&gt;
&lt;p class="title"&gt;&lt;b&gt;The Dormouse's story&lt;/b&gt;&lt;/p&gt;

&lt;p class="story"&gt;Once upon a time there were three little sisters; and their names were
&lt;a href="http://example.com/elsie" class="sister" id="link1"&gt;Elsie&lt;/a&gt;,
&lt;a href="http://example.com/lacie" class="sister" id="link2"&gt;Lacie&lt;/a&gt; and
&lt;a href="http://example.com/tillie" class="sister" id="link3"&gt;Tillie&lt;/a&gt;;
and they lived at the bottom of a well.&lt;/p&gt;

&lt;p class="story"&gt;...&lt;/p&gt;
"""
å¤åˆ¶<br>ä½¿ç”¨BeautifulSoupè§£æè¿™æ®µä»£ç ,èƒ½å¤Ÿå¾—åˆ°ä¸€ä¸ª BeautifulSoup çš„å¯¹è±¡,å¹¶èƒ½æŒ‰ç…§æ ‡å‡†çš„ç¼©è¿›æ ¼å¼çš„ç»“æ„è¾“å‡º:<br>Pythonfrom bs4 import BeautifulSoup
soup = BeautifulSoup(html_doc, 'lxml')
# htmlè¿›è¡Œç¾åŒ–
print(soup.prettify())
å¤åˆ¶<br>åŒ¹é…ä»£ç <br>Python&lt;html&gt;
 &lt;head&gt;
  &lt;title&gt;
   The Dormouse's story
  &lt;/title&gt;
 &lt;/head&gt;
 &lt;body&gt;
  &lt;p class="title"&gt;
   &lt;b&gt;
    The Dormouse's story
   &lt;/b&gt;
  &lt;/p&gt;
  &lt;p class="story"&gt;
   Once upon a time there were three little sisters; and their names were
   &lt;a class="sister" href="http://example.com/elsie" id="link1"&gt;
    Elsie
   &lt;/a&gt;
   ,
   &lt;a class="sister" href="http://example.com/lacie" id="link2"&gt;
    Lacie
   &lt;/a&gt;
   and
   &lt;a class="sister" href="http://example.com/tillie" id="link3"&gt;
    Tillie
   &lt;/a&gt;
   ;
and they lived at the bottom of a well.
  &lt;/p&gt;
  &lt;p class="story"&gt;
   ...
  &lt;/p&gt;
 &lt;/body&gt;
&lt;/html&gt;
å¤åˆ¶<br>å‡ ä¸ªç®€å•çš„æµè§ˆç»“æ„åŒ–æ•°æ®çš„æ–¹æ³•:<br>Pythonsoup.title  # è·å–æ ‡ç­¾title
# &lt;title&gt;The Dormouse's story&lt;/title&gt;

soup.title.name   # è·å–æ ‡ç­¾åç§°
# 'title'

soup.title.string   # è·å–æ ‡ç­¾titleå†…çš„å†…å®¹
# 'The Dormouse's story'

soup.title.parent  # è·å–çˆ¶çº§æ ‡ç­¾

soup.title.parent.name  # è·å–çˆ¶çº§æ ‡ç­¾åç§°
# 'head'

soup.p
# &lt;p class="title"&gt;&lt;b&gt;The Dormouse's story&lt;/b&gt;&lt;/p&gt;

soup.p['class']  # è·å–pçš„classå±æ€§å€¼
# 'title'

soup.a
# &lt;a class="sister" href="http://example.com/elsie" id="link1"&gt;Elsie&lt;/a&gt;

soup.find_all('a')
# [&lt;a class="sister" href="http://example.com/elsie" id="link1"&gt;Elsie&lt;/a&gt;,
#  &lt;a class="sister" href="http://example.com/lacie" id="link2"&gt;Lacie&lt;/a&gt;,
#  &lt;a class="sister" href="http://example.com/tillie" id="link3"&gt;Tillie&lt;/a&gt;]

soup.find(id="link3")  # è·å–idä¸ºlink3çš„æ ‡ç­¾
# &lt;a class="sister" href="http://example.com/tillie" id="link3"&gt;Tillie&lt;/a&gt;
å¤åˆ¶<br>ä»æ–‡æ¡£ä¸­æ‰¾åˆ°æ‰€æœ‰&lt;a&gt;æ ‡ç­¾çš„é“¾æ¥:<br>Pythonfor link in soup.find_all('a'):
    print(link.get('href'))
    # http://example.com/elsie
    # http://example.com/lacie
    # http://example.com/tillie
å¤åˆ¶<br>ä»æ–‡æ¡£ä¸­è·å–æ‰€æœ‰æ–‡å­—å†…å®¹:<br>Pythonprint(soup.get_text())
å¤åˆ¶<br><br>å°†ä¸€æ®µæ–‡æ¡£ä¼ å…¥BeautifulSoup çš„æ„é€ æ–¹æ³•,å°±èƒ½å¾—åˆ°ä¸€ä¸ªæ–‡æ¡£çš„å¯¹è±¡, å¯ä»¥ä¼ å…¥ä¸€æ®µå­—ç¬¦ä¸²æˆ–ä¸€ä¸ªæ–‡ä»¶å¥æŸ„.<br>Pythonfrom bs4 import BeautifulSoup

soup = BeautifulSoup(open("index.html"))

soup = BeautifulSoup("&lt;html&gt;data&lt;/html&gt;", 'lxml')
å¤åˆ¶<br>ç„¶å,Beautiful Soupé€‰æ‹©æœ€åˆé€‚çš„è§£æå™¨æ¥è§£æè¿™æ®µæ–‡æ¡£,å¦‚æœæ‰‹åŠ¨æŒ‡å®šè§£æå™¨é‚£ä¹ˆBeautiful Soupä¼šé€‰æ‹©æŒ‡å®šçš„è§£æå™¨æ¥è§£ææ–‡æ¡£ã€‚<br><br>è¿˜æ‹¿â€çˆ±ä¸½ä¸æ¢¦æ¸¸ä»™å¢ƒâ€çš„æ–‡æ¡£æ¥åšä¾‹å­:<br>Pythonhtml_doc = """
&lt;html&gt;&lt;head&gt;&lt;title&gt;The Dormouse's story&lt;/title&gt;&lt;/head&gt;
    &lt;body&gt;
&lt;p class="title"&gt;&lt;b&gt;The Dormouse's story&lt;/b&gt;&lt;/p&gt;

&lt;p class="story"&gt;Once upon a time there were three little sisters; and their names were
&lt;a href="http://example.com/elsie" class="sister" id="link1"&gt;Elsie&lt;/a&gt;,
&lt;a href="http://example.com/lacie" class="sister" id="link2"&gt;Lacie&lt;/a&gt; and
&lt;a href="http://example.com/tillie" class="sister" id="link3"&gt;Tillie&lt;/a&gt;;
and they lived at the bottom of a well.&lt;/p&gt;

&lt;p class="story"&gt;...&lt;/p&gt;
"""

from bs4 import BeautifulSoup
# lxmlå’Œhtml.parserè§£æçš„æœ‰æ—¶å€™ä¼šæ ¹æ®htmlæ˜¯å¦å®Œæ•´è€Œæœ‰è§£æä¸åŒçš„é—®é¢˜ï¼Œéœ€è¦æ³¨æ„
soup = BeautifulSoup(html_doc, 'html.parser')
å¤åˆ¶<br>é€šè¿‡è¿™æ®µä¾‹å­æ¥æ¼”ç¤ºæ€æ ·ä»æ–‡æ¡£çš„ä¸€æ®µå†…å®¹æ‰¾åˆ°å¦ä¸€æ®µå†…å®¹<br><br>ä¸€ä¸ªTagå¯èƒ½åŒ…å«å¤šä¸ªå­—ç¬¦ä¸²æˆ–å…¶å®ƒçš„Tag,è¿™äº›éƒ½æ˜¯è¿™ä¸ªTagçš„å­èŠ‚ç‚¹.Beautiful Soupæä¾›äº†è®¸å¤šæ“ä½œå’Œéå†å­èŠ‚ç‚¹çš„å±æ€§.<br>æ³¨æ„: Beautiful Soupä¸­å­—ç¬¦ä¸²èŠ‚ç‚¹ä¸æ”¯æŒè¿™äº›å±æ€§,å› ä¸ºå­—ç¬¦ä¸²æ²¡æœ‰å­èŠ‚ç‚¹ã€‚<br><br>tagçš„ .contents å±æ€§å¯ä»¥å°†tagçš„å­èŠ‚ç‚¹ä»¥åˆ—è¡¨çš„æ–¹å¼è¾“å‡º:<br>Pythonhead_tag = soup.head
head_tag
# &lt;head&gt;&lt;title&gt;The Dormouse's story&lt;/title&gt;&lt;/head&gt;

head_tag.contents
[&lt;title&gt;The Dormouse's story&lt;/title&gt;]

title_tag = head_tag.contents[0]
title_tag
# &lt;title&gt;The Dormouse's story&lt;/title&gt;
title_tag.contents
# [u'The Dormouse's story']
å¤åˆ¶<br>å­—ç¬¦ä¸²æ²¡æœ‰ .contents å±æ€§,å› ä¸ºå­—ç¬¦ä¸²æ²¡æœ‰å­èŠ‚ç‚¹:<br>Pythontext = title_tag.contents[0]
text.contents
# AttributeError: 'NavigableString' object has no attribute 'contents'
å¤åˆ¶<br><br><br>å¦‚æœtagåªæœ‰ä¸€ä¸ª NavigableString ç±»å‹å­èŠ‚ç‚¹,é‚£ä¹ˆè¿™ä¸ªtagå¯ä»¥ä½¿ç”¨ .string å¾—åˆ°å­èŠ‚ç‚¹ã€‚å¦‚æœä¸€ä¸ªtagä»…æœ‰ä¸€ä¸ªå­èŠ‚ç‚¹,é‚£ä¹ˆè¿™ä¸ªtagä¹Ÿå¯ä»¥ä½¿ç”¨ .string æ–¹æ³•,è¾“å‡ºç»“æœä¸å½“å‰å”¯ä¸€å­èŠ‚ç‚¹çš„ .string ç»“æœç›¸åŒã€‚<br>é€šä¿—ç‚¹è¯´å°±æ˜¯ï¼šå¦‚æœä¸€ä¸ªæ ‡ç­¾é‡Œé¢æ²¡æœ‰æ ‡ç­¾äº†ï¼Œé‚£ä¹ˆ .string å°±ä¼šè¿”å›æ ‡ç­¾é‡Œé¢çš„å†…å®¹ã€‚å¦‚æœæ ‡ç­¾é‡Œé¢åªæœ‰å”¯ä¸€çš„ä¸€ä¸ªæ ‡ç­¾äº†ï¼Œé‚£ä¹ˆ .string ä¹Ÿä¼šè¿”å›æœ€é‡Œé¢çš„å†…å®¹ã€‚ä¾‹å¦‚ï¼š<br>Pythonprint (soup.head.string)
#The Dormouse's story
# &lt;title&gt;&lt;b&gt;The Dormouse's story&lt;/b&gt;&lt;/title&gt;
print (soup.title.string)
#The Dormouse's story
å¤åˆ¶<br>å¦‚æœtagåŒ…å«äº†å¤šä¸ªå­èŠ‚ç‚¹,tagå°±æ— æ³•ç¡®å®šï¼Œstring æ–¹æ³•åº”è¯¥è°ƒç”¨å“ªä¸ªå­èŠ‚ç‚¹çš„å†…å®¹, .string çš„è¾“å‡ºç»“æœæ˜¯ None<br>Pythonprint (soup.html.string)
#None
å¤åˆ¶<br><br>å¦‚æœtagåŒ…å«äº†å¤šä¸ªå­èŠ‚ç‚¹, textåˆ™ä¼šè¿”å›å†…éƒ¨æ‰€æœ‰æ–‡æœ¬å†…å®¹<br>print (soup.html.text)
å¤åˆ¶<br>æ³¨æ„ï¼š<br>stringså’Œtextéƒ½å¯ä»¥è¿”å›æ‰€æœ‰æ–‡æœ¬å†…å®¹  <br>åŒºåˆ«ï¼štextè¿”å›å†…å®¹ä¸ºå­—ç¬¦ä¸²ç±»å‹  stringsä¸ºç”Ÿæˆå™¨generator<br><br>.strings .stripped_strings å±æ€§
å¤åˆ¶<br><br>è·å–å¤šä¸ªå†…å®¹ï¼Œä¸è¿‡éœ€è¦éå†è·å–ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ï¼š<br>Pythonfor string in soup.strings:
    print(repr(string))
    
    
'''
  '\n'
"The Dormouse's story"
'\n'
'\n'
"The Dormouse's story"
'\n'
'Once upon a time there were three little sisters; and their names were\n'
'Elsie'
',\n'
'Lacie'
' and\n'
'Tillie'
';\nand they lived at the bottom of a well.'
'\n'
'...'
'\n'  
    
'''    
å¤åˆ¶<br><br>è¾“å‡ºçš„å­—ç¬¦ä¸²ä¸­å¯èƒ½åŒ…å«äº†å¾ˆå¤šç©ºæ ¼æˆ–ç©ºè¡Œ,ä½¿ç”¨ .stripped_strings å¯ä»¥å»é™¤å¤šä½™ç©ºç™½å†…å®¹<br>Pythonfor string in soup.stripped_strings:
    print(repr(string))


'''

"The Dormouse's story"
"The Dormouse's story"
'Once upon a time there were three little sisters; and their names were'
'Elsie'
','
'Lacie'
'and'
'Tillie'
';\nand they lived at the bottom of a well.'
'...'

'''
å¤åˆ¶<br><br>ç»§ç»­åˆ†ææ–‡æ¡£æ ‘,æ¯ä¸ªtagæˆ–å­—ç¬¦ä¸²éƒ½æœ‰çˆ¶èŠ‚ç‚¹:è¢«åŒ…å«åœ¨æŸä¸ªtagä¸­<br><br>é€šè¿‡ .parent å±æ€§æ¥è·å–æŸä¸ªå…ƒç´ çš„çˆ¶èŠ‚ç‚¹.åœ¨ä¾‹å­â€œçˆ±ä¸½ä¸â€çš„æ–‡æ¡£ä¸­,&lt;head&gt;æ ‡ç­¾æ˜¯&lt;title&gt;æ ‡ç­¾çš„çˆ¶èŠ‚ç‚¹:<br>Pythontitle_tag = soup.title
title_tag
# &lt;title&gt;The Dormouse's story&lt;/title&gt;
title_tag.parent
# &lt;head&gt;&lt;title&gt;The Dormouse's story&lt;/title&gt;&lt;/head&gt;
å¤åˆ¶<br>æ–‡æ¡£çš„é¡¶å±‚èŠ‚ç‚¹æ¯”å¦‚&lt;html&gt;çš„çˆ¶èŠ‚ç‚¹æ˜¯ BeautifulSoup å¯¹è±¡:<br>Pythonhtml_tag = soup.html
type(html_tag.parent)
# &lt;class 'bs4.BeautifulSoup'&gt;
å¤åˆ¶<br><br><br>Pythonfind_all( name , attrs , recursive , string , **kwargs )
å¤åˆ¶<br>find_all() æ–¹æ³•æœç´¢å½“å‰tagçš„æ‰€æœ‰tagå­èŠ‚ç‚¹,å¹¶åˆ¤æ–­æ˜¯å¦ç¬¦åˆè¿‡æ»¤å™¨çš„æ¡ä»¶:<br>Pythonsoup.find_all("title")
# [&lt;title&gt;The Dormouse's story&lt;/title&gt;]

soup.find_all("a")
# [&lt;a class="sister" href="http://example.com/elsie" id="link1"&gt;Elsie&lt;/a&gt;,
#  &lt;a class="sister" href="http://example.com/lacie" id="link2"&gt;Lacie&lt;/a&gt;,
#  &lt;a class="sister" href="http://example.com/tillie" id="link3"&gt;Tillie&lt;/a&gt;]

soup.find_all(id="link2")
# [&lt;a class="sister" href="http://example.com/lacie" id="link2"&gt;Lacie&lt;/a&gt;]

import re
# æ¨¡ç³ŠæŸ¥è¯¢ åŒ…å«sistersçš„å°±å¯ä»¥
soup.find(string=re.compile("sisters"))
# 'Once upon a time there were three little sisters; and their names were\n'
å¤åˆ¶<br>æœ‰å‡ ä¸ªæ–¹æ³•å¾ˆç›¸ä¼¼,è¿˜æœ‰å‡ ä¸ªæ–¹æ³•æ˜¯æ–°çš„,å‚æ•°ä¸­çš„ string å’Œ id æ˜¯ä»€ä¹ˆå«ä¹‰? ä¸ºä»€ä¹ˆ find_all("p", "title") è¿”å›çš„æ˜¯CSS Classä¸ºâ€titleâ€çš„&lt;p&gt;æ ‡ç­¾? æˆ‘ä»¬æ¥ä»”ç»†çœ‹ä¸€ä¸‹ find_all() çš„å‚æ•°.<br><br>name å‚æ•°å¯ä»¥æŸ¥æ‰¾æ‰€æœ‰åå­—ä¸º name çš„tag,å­—ç¬¦ä¸²å¯¹è±¡ä¼šè¢«è‡ªåŠ¨å¿½ç•¥æ‰.<br>ç®€å•çš„ç”¨æ³•å¦‚ä¸‹:<br>Pythonsoup.find_all("title")
# [&lt;title&gt;The Dormouse's story&lt;/title&gt;]
å¤åˆ¶<br>æœç´¢ name å‚æ•°çš„å€¼å¯ä»¥ä½¿ä»»ä¸€ç±»å‹çš„ è¿‡æ»¤å™¨ ,å­—ç¬¦ä¸²,æ­£åˆ™è¡¨è¾¾å¼,åˆ—è¡¨,æ–¹æ³•æˆ–æ˜¯ True .<br>&lt;1&gt; ä¼ å­—ç¬¦ä¸²<br>æœ€ç®€å•çš„è¿‡æ»¤å™¨æ˜¯å­—ç¬¦ä¸².åœ¨æœç´¢æ–¹æ³•ä¸­ä¼ å…¥ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°,Beautiful Soupä¼šæŸ¥æ‰¾ä¸å­—ç¬¦ä¸²å®Œæ•´åŒ¹é…çš„å†…å®¹,ä¸‹é¢çš„ä¾‹å­ç”¨äºæŸ¥æ‰¾æ–‡æ¡£ä¸­æ‰€æœ‰çš„æ ‡ç­¾<br>Pythonsoup.find_all('b')
# [&lt;b&gt;The Dormouse's story&lt;/b&gt;]
å¤åˆ¶<br>&lt;2&gt; ä¼ æ­£åˆ™è¡¨è¾¾å¼<br>å¦‚æœä¼ å…¥æ­£åˆ™è¡¨è¾¾å¼ä½œä¸ºå‚æ•°,Beautiful Soupä¼šé€šè¿‡æ­£åˆ™è¡¨è¾¾å¼çš„ match() æ¥åŒ¹é…å†…å®¹.ä¸‹é¢ä¾‹å­ä¸­æ‰¾å‡ºæ‰€æœ‰ä»¥bå¼€å¤´çš„æ ‡ç­¾,è¿™è¡¨ç¤º&lt;body&gt;å’Œ&lt;b&gt;æ ‡ç­¾éƒ½åº”è¯¥è¢«æ‰¾åˆ°<br>Pythonimport re
for tag in soup.find_all(re.compile("^b")):
    print(tag.name)
# body
# b
å¤åˆ¶<br>&lt;3&gt; ä¼ åˆ—è¡¨<br>å¦‚æœä¼ å…¥åˆ—è¡¨å‚æ•°,Beautiful Soupä¼šå°†ä¸åˆ—è¡¨ä¸­ä»»ä¸€å…ƒç´ åŒ¹é…çš„å†…å®¹è¿”å›.ä¸‹é¢ä»£ç æ‰¾åˆ°æ–‡æ¡£ä¸­æ‰€æœ‰&lt;a&gt;æ ‡ç­¾å’Œ&lt;b&gt;æ ‡ç­¾<br>Pythonsoup.find_all(["a", "b"])
# [&lt;b&gt;The Dormouse's story&lt;/b&gt;,
#  &lt;a class="sister" href="http://example.com/elsie" id="link1"&gt;Elsie&lt;/a&gt;,
#  &lt;a class="sister" href="http://example.com/lacie" id="link2"&gt;Lacie&lt;/a&gt;,
#  &lt;a class="sister" href="http://example.com/tillie" id="link3"&gt;Tillie&lt;/a&gt;]
å¤åˆ¶<br><br>å¦‚æœä¸€ä¸ªæŒ‡å®šåå­—çš„å‚æ•°ä¸æ˜¯æœç´¢å†…ç½®çš„å‚æ•°å,æœç´¢æ—¶ä¼šæŠŠè¯¥å‚æ•°å½“ä½œæŒ‡å®šåå­—tagçš„å±æ€§æ¥æœç´¢,å¦‚æœåŒ…å«ä¸€ä¸ªåå­—ä¸º id çš„å‚æ•°,Beautiful Soupä¼šæœç´¢æ¯ä¸ªtagçš„â€idâ€å±æ€§.<br>Pythonsoup.find_all(id='link2')
# [&lt;a class="sister" href="http://example.com/lacie" id="link2"&gt;Lacie&lt;/a&gt;]

import re
# è¶…é“¾æ¥åŒ…å«elsieæ ‡ç­¾
print(soup.find_all(href=re.compile("elsie")))
# [&lt;a class="sister" href="http://example.com/elsie" id="link1"&gt;Elsie&lt;/a&gt;]
# ä»¥Theä½œä¸ºå¼€å¤´çš„å­—ç¬¦ä¸²
print(soup.find_all(text=re.compile("^The"))) 
# ["The Dormouse's story", "The Dormouse's story"]
# classé€‰æ‹©å™¨åŒ…å«stçš„èŠ‚ç‚¹
print(soup.find_all(class_=re.compile("st")))
å¤åˆ¶<br>æœç´¢æŒ‡å®šåå­—çš„å±æ€§æ—¶å¯ä»¥ä½¿ç”¨çš„å‚æ•°å€¼åŒ…æ‹¬ å­—ç¬¦ä¸² , æ­£åˆ™è¡¨è¾¾å¼ , åˆ—è¡¨, True .<br>ä¸‹é¢çš„ä¾‹å­åœ¨æ–‡æ¡£æ ‘ä¸­æŸ¥æ‰¾æ‰€æœ‰åŒ…å« id å±æ€§çš„tag,æ— è®º id çš„å€¼æ˜¯ä»€ä¹ˆ:<br>Pythonsoup.find_all(id=True)
# [&lt;a class="sister" href="http://example.com/elsie" id="link1"&gt;Elsie&lt;/a&gt;,
#  &lt;a class="sister" href="http://example.com/lacie" id="link2"&gt;Lacie&lt;/a&gt;,
#  &lt;a class="sister" href="http://example.com/tillie" id="link3"&gt;Tillie&lt;/a&gt;]
å¤åˆ¶<br>ä½¿ç”¨å¤šä¸ªæŒ‡å®šåå­—çš„å‚æ•°å¯ä»¥åŒæ—¶è¿‡æ»¤tagçš„å¤šä¸ªå±æ€§:<br>Pythonsoup.find_all(href=re.compile("elsie"), id='link1')
# [&lt;a class="sister" href="http://example.com/elsie" id="link1"&gt;three&lt;/a&gt;]
å¤åˆ¶<br>åœ¨è¿™é‡Œæˆ‘ä»¬æƒ³ç”¨ class è¿‡æ»¤ï¼Œä¸è¿‡ class æ˜¯ python çš„å…³é”®è¯ï¼Œè¿™æ€ä¹ˆåŠï¼ŸåŠ ä¸ªä¸‹åˆ’çº¿å°±å¯ä»¥<br>Pythonprint(soup.find_all("a", class_="sister"))

'''
[&lt;a class="sister" href="http://example.com/elsie" id="link1"&gt;Elsie&lt;/a&gt;,
&lt;a class="sister" href="http://example.com/lacie" id="link2"&gt;Lacie&lt;/a&gt;,
&lt;a class="sister" href="http://example.com/tillie" id="link3"&gt;Tillie&lt;/a&gt;
]

'''
å¤åˆ¶<br>é€šè¿‡ find_all() æ–¹æ³•çš„ attrs å‚æ•°å®šä¹‰ä¸€ä¸ªå­—å…¸å‚æ•°æ¥æœç´¢åŒ…å«ç‰¹æ®Šå±æ€§çš„tag:<br>Pythondata_soup.find_all(attrs={"data-foo": "value"})
# [&lt;div data-foo="value"&gt;foo!&lt;/div&gt;]
å¤åˆ¶<br>æ³¨æ„ï¼šå¦‚ä½•æŸ¥çœ‹æ¡ä»¶idå’ŒclassåŒæ—¶å­˜åœ¨æ—¶çš„å†™æ³•<br>Pythonprint(soup.find_all('b', class_="story", id="x"))
print(soup.find_all('b', attrs={"class":"story", "id":"x"}))
å¤åˆ¶<br><br>é€šè¿‡ text å‚æ•°å¯ä»¥æœæœæ–‡æ¡£ä¸­çš„å­—ç¬¦ä¸²å†…å®¹.ä¸ name å‚æ•°çš„å¯é€‰å€¼ä¸€æ ·, text å‚æ•°æ¥å— å­—ç¬¦ä¸² , æ­£åˆ™è¡¨è¾¾å¼ , åˆ—è¡¨, True<br>Pythonimport re

print(soup.find_all(text="Elsie"))
# ['Elsie']

print(soup.find_all(text=["Tillie", "Elsie", "Lacie"]))
# ['Elsie', 'Lacie', 'Tillie']

# åªè¦åŒ…å«Dormouseå°±å¯ä»¥
print(soup.find_all(text=re.compile("Dormouse")))
# ["The Dormouse's story", "The Dormouse's story"]
å¤åˆ¶<br><br>find_all() æ–¹æ³•è¿”å›å…¨éƒ¨çš„æœç´¢ç»“æ„,å¦‚æœæ–‡æ¡£æ ‘å¾ˆå¤§é‚£ä¹ˆæœç´¢ä¼šå¾ˆæ…¢.å¦‚æœæˆ‘ä»¬ä¸éœ€è¦å…¨éƒ¨ç»“æœ,å¯ä»¥ä½¿ç”¨ limit å‚æ•°é™åˆ¶è¿”å›ç»“æœçš„æ•°é‡.æ•ˆæœä¸SQLä¸­çš„limitå…³é”®å­—ç±»ä¼¼,å½“æœç´¢åˆ°çš„ç»“æœæ•°é‡è¾¾åˆ° limit çš„é™åˆ¶æ—¶,å°±åœæ­¢æœç´¢è¿”å›ç»“æœ.<br>Pythonprint(soup.find_all("a",limit=2))
print(soup.find_all("a")[0:2])

'''
[&lt;a class="sister" href="http://example.com/elsie" id="link1"&gt;Elsie&lt;/a&gt;, 
&lt;a class="sister" href="http://example.com/lacie" id="link2"&gt;Lacie&lt;/a&gt;]
'''
å¤åˆ¶<br><br>Pythonfind( name , attrs , recursive , string , **kwargs )
å¤åˆ¶<br>find_all() æ–¹æ³•å°†è¿”å›æ–‡æ¡£ä¸­ç¬¦åˆæ¡ä»¶çš„æ‰€æœ‰tag,å°½ç®¡æœ‰æ—¶å€™æˆ‘ä»¬åªæƒ³å¾—åˆ°ä¸€ä¸ªç»“æœ.æ¯”å¦‚æ–‡æ¡£ä¸­åªæœ‰ä¸€ä¸ª&lt;body&gt;æ ‡ç­¾,é‚£ä¹ˆä½¿ç”¨ find_all() æ–¹æ³•æ¥æŸ¥æ‰¾&lt;body&gt;æ ‡ç­¾å°±ä¸å¤ªåˆé€‚, ä½¿ç”¨ find_all æ–¹æ³•å¹¶è®¾ç½® limit=1 å‚æ•°ä¸å¦‚ç›´æ¥ä½¿ç”¨ find() æ–¹æ³•.ä¸‹é¢ä¸¤è¡Œä»£ç æ˜¯ç­‰ä»·çš„:<br>Pythonsoup.find_all('title', limit=1)
# [&lt;title&gt;The Dormouse's story&lt;/title&gt;]

soup.find('title')
# &lt;title&gt;The Dormouse's story&lt;/title&gt;
å¤åˆ¶<br>å”¯ä¸€çš„åŒºåˆ«æ˜¯ find_all() æ–¹æ³•çš„è¿”å›ç»“æœæ˜¯å€¼åŒ…å«ä¸€ä¸ªå…ƒç´ çš„åˆ—è¡¨,è€Œ find() æ–¹æ³•ç›´æ¥è¿”å›ç»“æœ.<br>find_all() æ–¹æ³•æ²¡æœ‰æ‰¾åˆ°ç›®æ ‡æ˜¯è¿”å›ç©ºåˆ—è¡¨, find() æ–¹æ³•æ‰¾ä¸åˆ°ç›®æ ‡æ—¶,è¿”å› None .<br>Pythonprint(soup.find("nosuchtag"))
# None
å¤åˆ¶<br>soup.head.title æ˜¯ tagçš„åå­— æ–¹æ³•çš„ç®€å†™.è¿™ä¸ªç®€å†™çš„åŸç†å°±æ˜¯å¤šæ¬¡è°ƒç”¨å½“å‰tagçš„ find() æ–¹æ³•:<br>Pythonsoup.head.title
# &lt;title&gt;The Dormouse's story&lt;/title&gt;

soup.find("head").find("title")
# &lt;title&gt;The Dormouse's story&lt;/title&gt;
å¤åˆ¶<br><br>æˆ‘ä»¬åœ¨å†™ CSS æ—¶ï¼Œæ ‡ç­¾åä¸åŠ ä»»ä½•ä¿®é¥°ï¼Œç±»åå‰åŠ ç‚¹ï¼Œidåå‰åŠ  åœ¨è¿™é‡Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ©ç”¨ç±»ä¼¼çš„æ–¹æ³•æ¥ç­›é€‰å…ƒç´ ï¼Œç”¨åˆ°çš„æ–¹æ³•æ˜¯ soup.select()ï¼Œè¿”å›ç±»å‹æ˜¯ list<br><br>Pythonprint(soup.select("title"))  #[&lt;title&gt;The Dormouse's story&lt;/title&gt;]
print(soup.select("b"))      #[&lt;b&gt;The Dormouse's story&lt;/b&gt;]
å¤åˆ¶<br><br>Pythonprint(soup.select(".sister")) 

'''
[&lt;a class="sister" href="http://example.com/elsie" id="link1"&gt;Elsie&lt;/a&gt;, 
&lt;a class="sister" href="http://example.com/lacie" id="link2"&gt;Lacie&lt;/a&gt;, 
&lt;a class="sister" href="http://example.com/tillie" id="link3"&gt;Tillie&lt;/a&gt;]

'''
å¤åˆ¶<br><br>Pythonprint(soup.select("#link1"))
# [&lt;a class="sister" href="http://example.com/elsie" id="link1"&gt;Elsie&lt;/a&gt;]
å¤åˆ¶<br><br>ç»„åˆæŸ¥æ‰¾å³å’Œå†™ class æ–‡ä»¶æ—¶ï¼Œæ ‡ç­¾åä¸ç±»åã€idåè¿›è¡Œçš„ç»„åˆåŸç†æ˜¯ä¸€æ ·çš„ï¼Œä¾‹å¦‚æŸ¥æ‰¾ p æ ‡ç­¾ä¸­ï¼Œid ç­‰äº link1çš„å†…å®¹ï¼ŒäºŒè€…éœ€è¦ç”¨ç©ºæ ¼åˆ†å¼€<br>Pythonprint(soup.select("p #link2"))

#[&lt;a class="sister" href="http://example.com/lacie" id="link2"&gt;Lacie&lt;/a&gt;]
å¤åˆ¶<br>ç›´æ¥å­æ ‡ç­¾æŸ¥æ‰¾<br>Pythonprint(soup.select("p &gt; #link2"))
# [&lt;a class="sister" href="http://example.com/lacie" id="link2"&gt;Lacie&lt;/a&gt;]
å¤åˆ¶<br>æŸ¥æ‰¾æ—¢æœ‰classä¹Ÿæœ‰idé€‰æ‹©å™¨çš„æ ‡ç­¾<br>a_string = soup.select(".story#test")
å¤åˆ¶<br>æŸ¥æ‰¾æœ‰å¤šä¸ªclassé€‰æ‹©å™¨çš„æ ‡ç­¾<br>a_string = soup.select(".story.test")
å¤åˆ¶<br>æŸ¥æ‰¾æœ‰å¤šä¸ªclassé€‰æ‹©å™¨å’Œä¸€ä¸ªidé€‰æ‹©å™¨çš„æ ‡ç­¾<br>a_string = soup.select(".story.test#book")
å¤åˆ¶<br><br>æŸ¥æ‰¾æ—¶è¿˜å¯ä»¥åŠ å…¥å±æ€§å…ƒç´ ï¼Œå±æ€§éœ€è¦ç”¨ä¸­æ‹¬å·æ‹¬èµ·æ¥ï¼Œæ³¨æ„å±æ€§å’Œæ ‡ç­¾å±äºåŒä¸€èŠ‚ç‚¹ï¼Œæ‰€ä»¥ä¸­é—´ä¸èƒ½åŠ ç©ºæ ¼ï¼Œå¦åˆ™ä¼šæ— æ³•åŒ¹é…åˆ°ã€‚<br>Pythonprint(soup.select("a[href='http://example.com/tillie']"))
#[&lt;a class="sister" href="http://example.com/tillie" id="link3"&gt;Tillie&lt;/a&gt;]
å¤åˆ¶<br>select æ–¹æ³•è¿”å›çš„ç»“æœéƒ½æ˜¯åˆ—è¡¨å½¢å¼ï¼Œå¯ä»¥éå†å½¢å¼è¾“å‡ºï¼Œç„¶åç”¨ get_text() æ–¹æ³•æ¥è·å–å®ƒçš„å†…å®¹ï¼š<br>Pythonfor title in soup.select('a'):
    print (title.get_text())

'''
Elsie
Lacie
Tillie
'''
å¤åˆ¶<br><br><br>â€œ./BS4è§£æå®Œæ•´.assets/image-20220610123612886.pngâ€ could not be found.<br><br>åªè¦åŸå¸‚ä¸æ°”æ¸©<br>â€œ./BS4è§£æå®Œæ•´.assets/image-20220610123825110.pngâ€ could not be found.<br>åŒ¹é…åç»“æœä¸º<br>â€œ./BS4è§£æå®Œæ•´.assets/image-20220610123845530.pngâ€ could not be found.<br><br>åŒ¹é…çº¢è‰²æ¡†å†…çš„å†…å®¹<br>â€œ./BS4è§£æå®Œæ•´.assets/image-20220610124307970.pngâ€ could not be found.]]></description><link>çˆ¬è™«\çˆ¬è™«æ–‡æ¡£\BS4ç¬”è®°.html</link><guid isPermaLink="false">çˆ¬è™«/çˆ¬è™«æ–‡æ¡£/BS4ç¬”è®°.md</guid><pubDate>Mon, 16 Oct 2023 15:07:14 GMT</pubDate></item><item><title><![CDATA[xpath]]></title><description><![CDATA[<a class="tag" href="?query=tag:xpath" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#xpath</a> 
 <br><br><a href=".?query=tag:xpath" class="tag" target="_blank" rel="noopener">#xpath</a><br><br>å®‰è£…<br>
<br>
å®‰è£…lxmlåº“
pip install lxml  -i pipæº

<br><br>è§£ææµç¨‹<br>
<br>å®ä¾‹åŒ–ä¸€ä¸ªetreeçš„å¯¹è±¡ï¼ŒæŠŠå³å°†è¢«è§£æçš„é¡µé¢æºç åŠ è½½åˆ°è¯¥å¯¹è±¡
<br>è°ƒç”¨è¯¥å¯¹è±¡çš„xpathæ–¹æ³•ç»“åˆç€ä¸åŒå½¢å¼çš„xpathè¡¨è¾¾è¿›è¡Œæ ‡ç­¾å®šä½å’Œæ•°æ®æå–
<br>ä½¿ç”¨<br>
<br>
å¯¼å…¥lxml.etree
from lxml import etree

<br>
etree.parse()
è§£ææœ¬åœ°htmlæ–‡ä»¶
html_tree = etree.parse('XX.html')

<br>
etree.HTML()(å»ºè®®)
è§£æç½‘ç»œçš„htmlå­—ç¬¦ä¸²
html_tree = etree.HTML(htmlå­—ç¬¦ä¸²)

<br>
html_tree.xpath()
ä½¿ç”¨xpathè·¯å¾„æŸ¥è¯¢ä¿¡æ¯ï¼Œè¿”å›ä¸€ä¸ªåˆ—è¡¨

<br>æ³¨æ„ï¼šå¦‚æœlxmlè§£ææœ¬åœ°HTMLæ–‡ä»¶æŠ¥é”™å¯ä»¥å®‰è£…å¦‚ä¸‹æ·»åŠ å‚æ•°<br>Pythonparser = etree.HTMLParser(encoding="utf-8")
selector = etree.parse('./lol_1.html',parser=parser)
result=etree.tostring(selector)
å¤åˆ¶<br><br>XPath æ˜¯ä¸€é—¨åœ¨ XML æ–‡æ¡£ä¸­æŸ¥æ‰¾ä¿¡æ¯çš„è¯­è¨€ã€‚XPath ç”¨äºåœ¨ XML æ–‡æ¡£ä¸­é€šè¿‡å…ƒç´ å’Œå±æ€§è¿›è¡Œå¯¼èˆªã€‚<br>
<br>
è·¯å¾„è¡¨è¾¾å¼

å®ä¾‹
åœ¨ä¸‹é¢çš„è¡¨æ ¼ä¸­ï¼Œæˆ‘ä»¬å·²åˆ—å‡ºäº†ä¸€äº›è·¯å¾„è¡¨è¾¾å¼ä»¥åŠè¡¨è¾¾å¼çš„ç»“æœï¼š


<br>
è°“è¯­ï¼ˆPredicatesï¼‰
è°“è¯­ç”¨æ¥æŸ¥æ‰¾æŸä¸ªç‰¹å®šçš„èŠ‚ç‚¹æˆ–è€…åŒ…å«æŸä¸ªæŒ‡å®šçš„å€¼çš„èŠ‚ç‚¹ã€‚
è°“è¯­è¢«åµŒåœ¨æ–¹æ‹¬å·ä¸­ã€‚
å®ä¾‹
åœ¨ä¸‹é¢çš„è¡¨æ ¼ä¸­ï¼Œæˆ‘ä»¬åˆ—å‡ºäº†å¸¦æœ‰è°“è¯­çš„ä¸€äº›è·¯å¾„è¡¨è¾¾å¼ï¼Œä»¥åŠè¡¨è¾¾å¼çš„ç»“æœï¼š


<br>
é€‰å–æœªçŸ¥èŠ‚ç‚¹
XPath é€šé…ç¬¦å¯ç”¨æ¥é€‰å–æœªçŸ¥çš„ XML å…ƒç´ ã€‚

å®ä¾‹
åœ¨ä¸‹é¢çš„è¡¨æ ¼ä¸­ï¼Œæˆ‘ä»¬åˆ—å‡ºäº†ä¸€äº›è·¯å¾„è¡¨è¾¾å¼ï¼Œä»¥åŠè¿™äº›è¡¨è¾¾å¼çš„ç»“æœï¼š

é€‰å–è‹¥å¹²è·¯å¾„
é€šè¿‡åœ¨è·¯å¾„è¡¨è¾¾å¼ä¸­ä½¿ç”¨â€œ|â€è¿ç®—ç¬¦ï¼Œæ‚¨å¯ä»¥é€‰å–è‹¥å¹²ä¸ªè·¯å¾„ã€‚
å®ä¾‹
åœ¨ä¸‹é¢çš„è¡¨æ ¼ä¸­ï¼Œæˆ‘ä»¬åˆ—å‡ºäº†ä¸€äº›è·¯å¾„è¡¨è¾¾å¼ï¼Œä»¥åŠè¿™äº›è¡¨è¾¾å¼çš„ç»“æœï¼š


<br>
é€»è¾‘è¿ç®—

<br>
æŸ¥æ‰¾æ‰€æœ‰idå±æ€§ç­‰äºheadå¹¶ä¸”classå±æ€§ç­‰äºs_downçš„divæ ‡ç­¾
Python//div[@id="head" and @class="s_down"]
å¤åˆ¶

<br>
é€‰å–æ–‡æ¡£ä¸­çš„æ‰€æœ‰ title å’Œ price å…ƒç´ ã€‚
//title | //price
å¤åˆ¶
æ³¨æ„: â€œ|â€ä¸¤è¾¹å¿…é¡»æ˜¯å®Œæ•´çš„xpathè·¯å¾„



<br>
å±æ€§æŸ¥è¯¢

<br>
æŸ¥æ‰¾æ‰€æœ‰åŒ…å«idå±æ€§çš„divèŠ‚ç‚¹
//div[@id]
å¤åˆ¶

<br>
æŸ¥æ‰¾æ‰€æœ‰idå±æ€§ç­‰äºmaincontentçš„divæ ‡ç­¾
//div[@id="maincontent"]
å¤åˆ¶

<br>
æŸ¥æ‰¾æ‰€æœ‰çš„classå±æ€§
//@class
å¤åˆ¶

<br>
//@attrName
//li[@name="xx"]//text()  # è·å–liæ ‡ç­¾nameä¸ºxxçš„é‡Œé¢çš„æ–‡æœ¬å†…å®¹
å¤åˆ¶



<br>
è·å–ç¬¬å‡ ä¸ªæ ‡ç­¾  ç´¢å¼•ä»1å¼€å§‹
tree.xpath('//li[1]/a/text()')  # è·å–ç¬¬ä¸€ä¸ª
tree.xpath('//li[last()]/a/text()')  # è·å–æœ€åä¸€ä¸ª
tree.xpath('//li[last()-1]/a/text()')  # è·å–å€’æ•°ç¬¬äºŒä¸ª
å¤åˆ¶

<br>
æ¨¡ç³ŠæŸ¥è¯¢

<br>
æŸ¥è¯¢æ‰€æœ‰idå±æ€§ä¸­åŒ…å«heçš„divæ ‡ç­¾
//div[contains(@id, "he")]
å¤åˆ¶

<br>
æŸ¥è¯¢æ‰€æœ‰idå±æ€§ä¸­åŒ…ä»¥heå¼€å¤´çš„divæ ‡ç­¾
//div[starts-with(@id, "he")]
å¤åˆ¶



<br>
å†…å®¹æŸ¥è¯¢
æŸ¥æ‰¾æ‰€æœ‰divæ ‡ç­¾ä¸‹çš„ç›´æ¥å­èŠ‚ç‚¹h1çš„å†…å®¹
//div/h1/text()
å¤åˆ¶

<br>
å±æ€§å€¼è·å–
//div/a/@href   è·å–aé‡Œé¢çš„hrefå±æ€§å€¼
å¤åˆ¶

<br>
è·å–æ‰€æœ‰
//*  #è·å–æ‰€æœ‰
//*[@class="xx"]  #è·å–æ‰€æœ‰classä¸ºxxçš„æ ‡ç­¾
å¤åˆ¶

<br>
è·å–èŠ‚ç‚¹å†…å®¹è½¬æ¢æˆå­—ç¬¦ä¸²
c = tree.xpath('//li/a')[0]
result=etree.tostring(c, encoding='utf-8')
print(result.decode('UTF-8'))
å¤åˆ¶

<br>ç»ƒä¹ ï¼š<br>
<br>
è±†ç“£
åŒ¹é…å‡ºè™šæ„ç±»å’Œéè™šæ„ç±»ä¸­çš„å›¾ç‰‡ï¼Œæ ‡é¢˜å’Œç®€ä»‹

<br>
è‚¡ç¥¨æ•°æ®
æŠ“åˆ°æ¯ä¸€è¡Œè‚¡ç¥¨æ•°æ®

]]></description><link>çˆ¬è™«\çˆ¬è™«æ–‡æ¡£\day06 xpath.html</link><guid isPermaLink="false">çˆ¬è™«/çˆ¬è™«æ–‡æ¡£/day06 xpath.md</guid><pubDate>Mon, 16 Oct 2023 15:07:32 GMT</pubDate></item><item><title><![CDATA[IPä»£ç†æ± ]]></title><description><![CDATA[ 
 <br><br><br>ç›®å½•ç»“æ„<br>
<br>get_ip.py    æŠ“å–å…è´¹ipçš„æ–‡ä»¶
<br>test_ip.py   æµ‹è¯•ipæ˜¯å¦å¯ç”¨çš„æ–‡ä»¶
<br>proxy_redis.py   å­˜å‚¨å’Œå¤„ç†å½“å‰çš„ip
<br>app.py    è¯·æ±‚è¿™ä¸ªæ–‡ä»¶çš„æ¥å£    è¿”å›å¯ç”¨çš„ip
<br>settings.py  å…¨å±€çš„é…ç½®æ–‡ä»¶
<br>main.py   æ•´ä¸ªipä»£ç†æ± è¿è¡Œçš„å…¥å£
<br><br><br>
<br>
zadd  æ·»åŠ é›†åˆ
zadd proxy_redis 1 a 2 b  æ·»åŠ æœ‰åºé›†åˆä¸­a æˆå‘˜ æƒé‡1  bæˆå‘˜ æƒé‡2

<br>
zscore  è·å–æˆå‘˜çš„æƒé‡
zscore proxy_redis a  è·å–æˆå‘˜açš„æƒé‡

<br>
zincrby  å¢åŠ /å‡å°‘æƒé‡
zincrby proxy_redis 10 a       ç»™æˆå‘˜a å¢åŠ 10æƒé‡
 zincrby proxy_redis -10 a    ç»™æˆå‘˜a å‡å°‘10æƒé‡

<br>
zrange  è·å–èŒƒå›´åŒºé—´çš„ip
 zrange proxy_redis 0 -1  è·å–æ‰€æœ‰çš„æˆå‘˜

<br>
zrangebyscore   è·å–æƒé‡åŒºé—´èŒƒå›´çš„ip
 zrangebyscore proxy_redis 0 20     è¿”å›æƒé‡åœ¨0-20ä¹‹é—´çš„æˆå‘˜

<br>
zrem  åˆ é™¤
zrem proxy_redis a  åˆ é™¤æˆå‘˜a

]]></description><link>çˆ¬è™«\çˆ¬è™«æ–‡æ¡£\ipä»£ç†è¯æ€è·¯è§„åˆ’.html</link><guid isPermaLink="false">çˆ¬è™«/çˆ¬è™«æ–‡æ¡£/ipä»£ç†è¯æ€è·¯è§„åˆ’.md</guid><pubDate>Tue, 19 Sep 2023 09:55:12 GMT</pubDate></item><item><title><![CDATA[NoSQL Mongodb]]></title><description><![CDATA[<a class="tag" href="?query=tag:æ•°æ®åº“" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#æ•°æ®åº“</a> <a class="tag" href="?query=tag:MGdb" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#MGdb</a> 
 <br><br><a href=".?query=tag:æ•°æ®åº“" class="tag" target="_blank" rel="noopener">#æ•°æ®åº“</a> <a href=".?query=tag:MGdb" class="tag" target="_blank" rel="noopener">#MGdb</a><br>
<br>ä¸‹è½½mongodbçš„ç‰ˆæœ¬ï¼Œä¸¤ç‚¹æ³¨æ„

<br>æ ¹æ®ä¸šç•Œè§„åˆ™ï¼Œå¶æ•°ä¸ºç¨³å®šç‰ˆï¼Œå¦‚1.6.Xï¼Œå¥‡æ•°ä¸ºå¼€å‘ç‰ˆï¼Œå¦‚1.7.X
<br>32bitçš„mongodbæœ€å¤§åªèƒ½å­˜æ”¾2Gçš„æ•°æ®ï¼Œ64bitå°±æ²¡æœ‰é™åˆ¶


<br>æ€§èƒ½<br>BSONæ ¼å¼çš„ç¼–ç å’Œè§£ç éƒ½æ˜¯éå¸¸å¿«é€Ÿçš„ã€‚å®ƒä½¿ç”¨äº†Cé£æ ¼çš„æ•°æ®è¡¨ç°å½¢å¼ï¼Œè¿™æ ·åœ¨å„ç§è¯­è¨€ä¸­éƒ½å¯ä»¥é«˜æ•ˆåœ°ä½¿ç”¨ã€‚<br>NoSQL(NoSQL = Not Only SQL )ï¼Œæ„å³"ä¸ä»…ä»…æ˜¯SQL"ã€‚<br>MongoDB å°†æ•°æ®å­˜å‚¨ä¸ºä¸€ä¸ªæ–‡æ¡£ï¼Œæ•°æ®ç»“æ„ç”±é”®å€¼(key=&gt;value)å¯¹ç»„æˆã€‚MongoDB æ–‡æ¡£ç±»ä¼¼äº JSON å¯¹è±¡ã€‚å­—æ®µå€¼å¯ä»¥åŒ…å«å…¶ä»–æ–‡æ¡£ï¼Œæ•°ç»„åŠæ–‡æ¡£æ•°ç»„ã€‚<br><br>ä¸‹è½½mongodbçš„ç‰ˆæœ¬ï¼Œä¸¤ç‚¹æ³¨æ„<br>
<br>æ ¹æ®ä¸šç•Œè§„åˆ™ï¼Œå¶æ•°ä¸ºç¨³å®šç‰ˆï¼Œå¦‚1.6.Xï¼Œå¥‡æ•°ä¸ºå¼€å‘ç‰ˆï¼Œå¦‚1.7.X
<br>32bitçš„mongodbæœ€å¤§åªèƒ½å­˜æ”¾2Gçš„æ•°æ®ï¼Œ64bitå°±æ²¡æœ‰é™åˆ¶
<br>é¦–å…ˆå»å®˜ç½‘ä¸‹è½½MongoDBçš„å®‰è£…åŒ…, <a rel="noopener" class="external-link" href="https://www.mongodb.com/try/download/community" target="_blank">https://www.mongodb.com/try/download/community</a><br>â€œMongodb.assets/image-20210728093724660.pngâ€ could not be found.<br>â€œMongodb.assets/image-20210728093838499.pngâ€ could not be found.<br>â€œMongodb.assets/image-20210728093906551.pngâ€ could not be found.<br>â€œMongodb.assets/image-20210728094404958.pngâ€ could not be found.<br>â€œMongodb.assets/image-20210728094441168.pngâ€ could not be found.<br>â€œMongodb.assets/image-20210728094521878.pngâ€ could not be found.<br>â€œMongodb.assets/image-20210728094547434.pngâ€ could not be found.<br>â€œMongodb.assets/image-20210728094627838.pngâ€ could not be found.<br>â€œMongodb.assets/image-20210728094653296.pngâ€ could not be found.<br>â€œMongodb.assets/image-20210728094727302.pngâ€ could not be found.<br>â€œMongodb.assets/image-20210728094750500.pngâ€ could not be found.<br>å°†mongodbç›®å½•ä¸‹çš„binæ–‡ä»¶å¤¹æ·»åŠ åˆ°ç¯å¢ƒå˜é‡<br>â€œMongodb.assets/image-20210728095340874.pngâ€ could not be found.<br>â€œMongodb.assets/image-20210728095433900.pngâ€ could not be found.<br>â€œMongodb.assets/image-20210728095507330.pngâ€ could not be found.<br>â€œMongodb.assets/image-20210728095631337.pngâ€ could not be found.<br>â€œMongodb.assets/image-20210728100113133.pngâ€ could not be found.<br>â€œMongodb.assets/image-20210729195132883.pngâ€ could not be found.<br>â€œMongodb.assets/image-20210729195203348.pngâ€ could not be found.<br>å¯¹äºmacçš„å®‰è£…å¯ä»¥ä½¿ç”¨homebrewå®‰è£….  æˆ–å‚è€ƒè¿™é‡Œ<a rel="noopener" class="external-link" href="https://www.runoob.com/mongodb/mongodb-osx-install.html" target="_blank">https://www.runoob.com/mongodb/mongodb-osx-install.html</a><br><br><br><br><br>
<br>æ–‡æ¡£ä¸­çš„é”®/å€¼å¯¹æ˜¯æœ‰åºçš„ã€‚
<br>æ–‡æ¡£ä¸­çš„å€¼ä¸ä»…å¯ä»¥æ˜¯åœ¨åŒå¼•å·é‡Œé¢çš„å­—ç¬¦ä¸²,è¿˜å¯ä»¥æ˜¯å…¶ä»–å‡ ç§æ•°æ®ç±»å‹ï¼ˆç”šè‡³å¯ä»¥æ˜¯æ•´ä¸ªåµŒå…¥çš„æ–‡æ¡£)ã€‚
<br>MongoDBåŒºåˆ†ç±»å‹å’Œå¤§å°å†™ã€‚
<br>MongoDBçš„æ–‡æ¡£ä¸èƒ½æœ‰é‡å¤çš„é”®ã€‚
<br>æ–‡æ¡£çš„é”®æ˜¯å­—ç¬¦ä¸²ã€‚é™¤äº†å°‘æ•°ä¾‹å¤–æƒ…å†µï¼Œé”®å¯ä»¥ä½¿ç”¨ä»»æ„UTF-8å­—ç¬¦ã€‚
<br><br>
<br>.å’Œ$æœ‰ç‰¹åˆ«çš„æ„ä¹‰ï¼Œåªæœ‰åœ¨ç‰¹å®šç¯å¢ƒä¸‹æ‰èƒ½ä½¿ç”¨ã€‚
<br>ä»¥ä¸‹åˆ’çº¿"_"å¼€å¤´çš„é”®æ˜¯ä¿ç•™çš„(ä¸æ˜¯ä¸¥æ ¼è¦æ±‚çš„)ã€‚
<br><br><br>è¾“å…¥ mongod.exe     --dbpath=è·¯å¾„<br><br>â€‹	cd   mongoå®‰è£…çš„ç›®å½•/bin<br>â€‹	mongo.exe   æ­¤åˆ» è¿›å…¥åˆ°Mongodbæ•°æ®åº“äº†<br><br><br>â€‹	show dbs<br><br>â€‹	use åº“å <br>â€‹	æ³¨æ„:<br>â€‹		æ–°åˆ›å»ºçš„æ•°æ®åº“ é»˜è®¤ä½ æ˜¯çœ‹ä¸åˆ°çš„ å¯ä»¥ä½¿ç”¨db/db.getName() å»æŸ¥çœ‹å½“å‰æ‰€åœ¨çš„åº“   å¾€æ–°çš„åº“é‡Œåˆ›å»ºé›†åˆ<br><br>Python1. db
2. db.getName()
å¤åˆ¶<br><br>
<br>
db.createCollection("é›†åˆå")
remoä¾‹å¦‚ï¼šdb.createCollection("user") åˆ›å»ºä¸€ä¸ªuserçš„é›†åˆ åœ¨å½“å‰çš„åº“é‡Œ

<br>
db.é›†åˆå.insert(æ–‡æ¡£)  å¦‚æœ å½“å‰çš„é›†åˆåä¸å­˜åœ¨ é‚£ä¹ˆå°±åˆ›å»ºè¯¥é›†åˆ å¹¶æ’å…¥æ–‡æ¡£(æ•°æ®) 

<br>æ³¨æ„ï¼š<br>Python1. åœ¨åº“é‡Œå¯¹äºæ–‡æ¡£ é›†åˆçš„æ“ä½œ ç»Ÿä¸€ä½¿ç”¨db. (dbä»£è¡¨å½“å‰çš„åº“)
2. ä¸¥æ ¼åŒºåˆ†å¤§å°å†™
å¤åˆ¶<br><br>â€‹	show collections<br><br>â€‹	db.é›†åˆå.drop()<br><br>ä½¿ç”¨insert <br>â€‹	db.é›†åˆå.insert(æ–‡æ¡£) å¦‚æœæ˜¯æ·»åŠ æ•°æ® å»ºè®®ä½¿ç”¨ insert<br>æ’å…¥å¤šæ¡æ•°æ®:<br>â€‹	db.é›†åˆå.insert([æ–‡æ¡£])æ³¨æ„ ä¸€å®šè¦åŠ [] å¦åˆ™å¯èƒ½åªä¼šæŠŠ ç¬¬ä¸€æ¡æ–‡æ¡£æ’å…¥è¿›å»<br>db.user.insert({'name':'lisi', 'age': 20})

db.user.insert([{'name':'lisi', 'age': 20},{'name': 'wangwu', 'age': 30}])
å¤åˆ¶<br>3.2 ç‰ˆæœ¬åè¿˜æœ‰ä»¥ä¸‹å‡ ç§è¯­æ³•å¯ç”¨äºæ’å…¥æ–‡æ¡£:ï¼ˆå»ºè®®ä½¿ç”¨ï¼‰<br>
<br>db.collection.insertOne():å‘æŒ‡å®šé›†åˆä¸­æ’å…¥ä¸€æ¡æ–‡æ¡£æ•°zæ®
<br>db.collection.insertMany():å‘æŒ‡å®šé›†åˆä¸­æ’å…¥å¤šæ¡æ–‡æ¡£æ•°æ®
<br>db.user.insertOne({'name':'lisi', 'age': 20})

db.user.insertMany([{'name':'lisi', 'age': 20},{'name': 'wangwu', 'age': 30}])
å¤åˆ¶<br><br><br>â€‹	db.é›†åˆå.find([æ¡ä»¶],{key1:1[,[key2:1]]}) æŸ¥è¯¢æ‰€æœ‰çš„æ•°æ®   ä»£è¡¨ æ˜¾ç¤ºå“ªäº›å­—æ®µå<br>â€‹	db.collection.find(query, {title: 1, by: 1}) // inclusionæ¨¡å¼ æŒ‡å®šè¿”å›çš„é”®ï¼Œä¸è¿”å›å…¶ä»–é”®<br>â€‹	db.collection.find(query, {title: 0, by: 0}) // exclusionæ¨¡å¼ æŒ‡å®šä¸è¿”å›çš„é”®,è¿”å›å…¶ä»–é”®<br>æ³¨æ„ï¼š<br>ä¸¤ç§æ¨¡å¼ä¸å¯æ··ç”¨ï¼ˆå› ä¸ºè¿™æ ·çš„è¯æ— æ³•æ¨æ–­å…¶ä»–é”®æ˜¯å¦åº”è¿”å›ï¼‰<br>Pythondb.collection.find(query, {title: 1, by: 0}) // é”™è¯¯
å¤åˆ¶<br>_id é”®é»˜è®¤è¿”å›ï¼Œéœ€è¦ä¸»åŠ¨æŒ‡å®š _id:0 æ‰ä¼šéšè—<br>åªèƒ½å…¨1æˆ–å…¨0ï¼Œé™¤äº†åœ¨inclusionæ¨¡å¼æ—¶å¯ä»¥æŒ‡å®š_idä¸º0<br>Pythondb.collection.find(query, {_id:0, title: 1, by: 1}) // æ­£ç¡®
å¤åˆ¶<br>å®ä¾‹<br>db.user.find({}, {'name': 0})
db.user.find({'age': 18}, {'name': 1})  # åªè¿”å›é‚£ä¹ˆå­—æ®µ
db.user.find({'age': 18}, {'name': 0})  # ä¸è¿”å›nameå­—æ®µ
å¤åˆ¶<br><br>â€‹	db.é›†åˆå.findOne([æ¡ä»¶],{key1:1[,[key2:1]]}) æŸ¥è¯¢ä¸€æ¡æ•°æ®  ä»£è¡¨ æ˜¾ç¤ºå“ªäº›å­—æ®µå<br>db.user.findOne({}, {name:1})
å¤åˆ¶<br><br>â€‹	db.é›†åˆå.find([æ¡ä»¶]).count()<br>db.user.find({}).count()
å¤åˆ¶<br><br>â€‹	db.é›†åˆå.find([æ¡ä»¶]).pretty()<br>db.user.find({}).pretty()
å¤åˆ¶<br><br><br><br>Pythondb.col.find({key1:value1, key2:value2}).pretty()
å¤åˆ¶<br>db.é›†åˆå.find({æ¡ä»¶ä¸€ï¼Œæ¡ä»¶äºŒ,,,})<br>ä¾‹å¦‚ï¼š	<br>db.user.find({name:"å¼ ä¸‰",age:{$gt:10}}) #æŸ¥è¯¢nameä¸ºå¼ ä¸‰çš„ ä¸” å¹´é¾„ å¤§äº10å²çš„

db.user.find({name:"å¼ ä¸‰",age:10}) 		#æŸ¥è¯¢nameä¸ºå¼ ä¸‰çš„ ä¸” å¹´é¾„ä¸º10å²çš„
å¤åˆ¶<br><br>db.é›†åˆå.find({$or:[{æ¡ä»¶ä¸€},{æ¡ä»¶äºŒ},,,]})<br>ä¾‹å¦‚ï¼š<br>db.user.find({$or:[{name:"å¼ ä¸‰"},{name:"èµµå…­"}]})   #æŸ¥è¯¢nameä¸ºå¼ ä¸‰ æˆ–è€…ä¸ºèµµå…­çš„æ‰€æœ‰æ•°æ®
å¤åˆ¶<br><br>db.é›†åˆå.find({æ¡ä»¶ä¸€,,,$or:[{æ¡ä»¶1},{æ¡ä»¶2}]})<br>ä¾‹å¦‚:<br>db.user.find({name:"å¼ ä¸‰",$or:[{age:10},{age:28}]})  #nameä¸ºå¼ ä¸‰   å¹´é¾„ä¸º10å²æˆ–è€…28å²çš„æ‰€æœ‰æ•°æ®
å¤åˆ¶<br><br>db.é›†åˆå.find().limit(num)   ä»ç¬¬0ä¸ªå¼€å§‹å–å‡ ä¸ª<br>ä¾‹å¦‚ï¼š<br>db.user.find().limit(5)   #ä»0å¼€å§‹å–5æ¡æ•°æ®
å¤åˆ¶<br><br>db.é›†åˆå.find().skip(num) è·³è¿‡å‡ æ¡æ•°æ®<br>ä¾‹å¦‚:<br>db.user.find().skip(2) #ä»ç¬¬ä¸‰æ¡æ•°æ® å–åˆ°æœ€å
å¤åˆ¶<br><br>db.é›†åˆå.find().skip().limit(num) <br>ä¾‹å¦‚:<br>db.user.find().skip(2).limit(2)  #ä»ç¬¬ä¸‰ä¸ªå¼€å§‹ å–2ä¸ª
å¤åˆ¶<br><br>åœ¨MongoDBä¸­ä½¿ç”¨ä½¿ç”¨sort()æ–¹æ³•å¯¹æ•°æ®è¿›è¡Œæ’åºï¼Œsort()æ–¹æ³•å¯ä»¥é€šè¿‡å‚æ•°æŒ‡å®šæ’åºçš„å­—æ®µï¼Œå¹¶ä½¿ç”¨ 1 å’Œ -1 æ¥æŒ‡å®šæ’åºçš„æ–¹å¼ï¼Œå…¶ä¸­ 1 ä¸ºå‡åºæ’åˆ—ï¼Œè€Œ-1æ˜¯ç”¨äºé™åºæ’åˆ—ã€‚<br>db.é›†åˆå.find().sort({key:1|-1})  å‡åºæˆ–è€…é™åº<br>ä¾‹å¦‚:	<br>db.user.find().sort({age:1})  #æŸ¥è¯¢æ‰€æœ‰æ•°æ® æŒ‰ç…§å¹´é¾„ å‡åº

db.user.find().sort({age:-1})  #æŸ¥è¯¢æ‰€æœ‰æ•°æ® æŒ‰ç…§å¹´é¾„ é™åº
å¤åˆ¶<br><br>ç»“æ„ï¼š<br>Pythondb.collection.update(
   &lt;query&gt;,
   &lt;update&gt;,
   {
     upsert: &lt;boolean&gt;,
     multi: &lt;boolean&gt;,
     writeConcern: &lt;document&gt;
   }
)u
å¤åˆ¶<br>
<br>query : updateçš„æŸ¥è¯¢æ¡ä»¶ï¼Œç±»ä¼¼sql updateæŸ¥è¯¢å†…whereåé¢çš„ã€‚
<br>update : updateçš„å¯¹è±¡å’Œä¸€äº›æ›´æ–°çš„æ“ä½œç¬¦ï¼ˆå¦‚inc...ï¼‰ç­‰ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºsql updateæŸ¥è¯¢å†…setåé¢çš„
<br><br>
<br>
db.é›†åˆå.update(æ¡ä»¶,æ•°æ®,{multi:true}) æ›´æ”¹
Sqldb.user.update({name:"å¼ ä¸‰"},{$inc:{age:5}}) #ä¿®æ”¹nameä¸ºå¼ ä¸‰çš„æ–‡æ¡£  å°†ageåœ¨åŸæœ‰çš„åŸºç¡€ä¸Š åŠ 5

db.user.update({name:"å¼ ä¸‰"},{$set:{age:5}}) #ä¿®æ”¹nameä¸ºå¼ ä¸‰çš„æ–‡æ¡£  å°†ageçš„å€¼ ä¿®æ”¹ä¸º5

db.user.update({name:"å¼ ä¸‰"},{$set:{age:5}}) #å°†nameä¸ºå¼ ä¸‰çš„æ–‡æ¡£ çš„å¹´é¾„ ä¿®æ”¹ä¸º 5
å¤åˆ¶

<br>
åªæ›´æ–°ç¬¬ä¸€æ¡è®°å½•ï¼š
Sqldb.col.update({"count" : {$gt:1}} , { $set : {"test2" : "OK"}});
å¤åˆ¶

<br>
å…¨éƒ¨æ›´æ–°ï¼š
Sqldb.col.update({"count" : {$gt: 3 }} , {$set : {"test2" : "OK"} }); 
å¤åˆ¶

<br>
åªæ·»åŠ ç¬¬ä¸€æ¡ï¼š
Sqldb.col.update({ "count" : { $gt : 4 }} , {$set : {"test5" : "OK"} });
å¤åˆ¶
  â€‹
3.2ç‰ˆæœ¬ä»¥åï¼ˆå»ºè®®ä½¿ç”¨ï¼‰

<br>updateOne()  æ›´æ–°ä¸€æ¡<br>db.user.updateOne({'name':'lisi'}, {$inc:{'age':5}})
å¤åˆ¶<br>updateMany(query,update) æ›´æ–°å¤šæ¡ <br>db.user.updateMany({'name':'lisi'}, {$inc:{'age':5}})
å¤åˆ¶<br><br>ä¸»ä½“ç»“æ„<br>Pythondb.collection.remove(
   &lt;query&gt;,
   {
     justOne: &lt;boolean&gt;,
     writeConcern: &lt;document&gt;
   }
)
å¤åˆ¶<br><br>
<br>query :ï¼ˆå¯é€‰ï¼‰åˆ é™¤çš„æ–‡æ¡£çš„æ¡ä»¶ã€‚
<br>justOne : ï¼ˆå¯é€‰ï¼‰å¦‚æœè®¾ä¸º true æˆ– 1ï¼Œåˆ™åªåˆ é™¤ä¸€ä¸ªæ–‡æ¡£ã€‚
<br>writeConcern :ï¼ˆå¯é€‰ï¼‰æŠ›å‡ºå¼‚å¸¸çš„çº§åˆ«ã€‚
<br><br>db.é›†åˆå.remove(æ¡ä»¶) é»˜è®¤å°†æ‰€æœ‰éƒ½åŒ¹é…åˆ°çš„æ•°æ®è¿›è¡Œåˆ é™¤<br>db.é›†åˆå.remove(æ¡ä»¶,1) åªåˆ é™¤ ç¬¬ä¸€ä¸ªåŒ¹é…åˆ°çš„æ•°æ®<br>db.é›†åˆå.remove(æ¡ä»¶,,{justOne:true}) åªåˆ é™¤ ç¬¬ä¸€ä¸ªåŒ¹é…åˆ°çš„æ•°æ®<br>ç¤ºä¾‹<br>Sqlb.user.remove({'age':{$gt: 30}})  # åˆ é™¤å¹´é¾„å¤§äº30çš„æ‰€æœ‰æ•°æ®
b.user.remove({'age':{$gt: 30}}, 1)  # åˆ é™¤å¹´é¾„å¤§äº30çš„ä¸€æ¡æ•°æ®
db.col.remove({})  æ¸…ç©ºé›†åˆ "col" çš„æ•°æ®
å¤åˆ¶<br><br>remove() æ–¹æ³•å·²ç»è¿‡æ—¶äº†ï¼Œç°åœ¨å®˜æ–¹æ¨èä½¿ç”¨ <br>deleteOne() åˆ é™¤ä¸€æ¡<br>Sqldb.user.deleteOne({'age':{$gt: 0}})
å¤åˆ¶<br>deleteMany() åˆ é™¤å¤šæ¡<br>Sqldb.user.deleteMany({'age':{$gt: 0}})
å¤åˆ¶<br><br><br>
<br>åˆ é™¤ä¹‹å‰ æœ€å¥½useä¸€ä¸‹
<br>db.dropDatabase()
<br><br>exit<br><br><br>from pymongo import MongoClient<br><br><br>è¿æ¥MongoDBæˆ‘ä»¬éœ€è¦ä½¿ç”¨PyMongoåº“é‡Œé¢çš„MongoClientï¼Œä¸€èˆ¬æ¥è¯´ä¼ å…¥MongoDBçš„IPåŠç«¯å£å³å¯ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºåœ°å€hostï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºç«¯å£portï¼Œç«¯å£å¦‚æœä¸ä¼ é»˜è®¤æ˜¯27017ã€‚<br><br>Pythonconn = MongoClient("localhost")

MongoClient(host='127.0.0.1',port=27017)
å¤åˆ¶<br><br><br><br><br>###4ã€æ’å…¥æ•°æ®<br><br>insert_one æ’å…¥ä¸€æ¡æ•°æ® <br>insert_many() æ’å…¥å¤šæ¡æ•°æ®<br><br>data.inserted_id<br>data.inserted_ids<br><br><br>db.user.find_one()<br><br>db.user.find({"name":"å¼ ä¸‰"})<br><br>from bson.objectid import ObjectId*#ç”¨äºIDæŸ¥è¯¢<br>data = db.user.find({"_id":ObjectId("59a2d304b961661b209f8da1")})<br>Pythondata = db.user.find({'_id': ObjectId('59f290b01683f9339214746d')}) #_id': ObjectId('59f290b01683f9339214746d')
å¤åˆ¶<br><br>
<br>
{"name":{'$regex':"å¼ "}}

<br>
{'xxx':re.compile('xxx')}  

<br><br><br>å¹´é¾„ å¤§äº10<br>Pythondata = db.user.find({"age":{"$gt":10}}).sort("age",1) #å¹´é¾„ å‡åº æŸ¥è¯¢  pymongo.ASCENDING   --å‡åº

data = db.user.find({"age":{"$gt":10}}).sort("age",-1) #å¹´é¾„ é™åº æŸ¥è¯¢	pymongo.DESCENDING --é™åº
å¤åˆ¶<br><br><br>Pythondb.user.find().limit(3)
m= db.user.find({"age":{"$gt":10}}).sort("age",-1).limit(3)
å¤åˆ¶<br><br>db.user.find().skip(2)<br><br>update()æ–¹æ³•å…¶å®ä¹Ÿæ˜¯å®˜æ–¹ä¸æ¨èä½¿ç”¨çš„æ–¹æ³•ï¼Œåœ¨è¿™é‡Œä¹Ÿåˆ†äº†update_one()æ–¹æ³•å’Œupdate_many()æ–¹æ³•ï¼Œç”¨æ³•æ›´åŠ ä¸¥æ ¼ï¼Œ<br><br>db.user.update_one({"name":"å¼ ä¸‰"},{"$set":{"age":99}})<br><br>db.user.update_many({"name":"å¼ ä¸‰"},{"$set":{"age":91}})<br>(3) å…¶è¿”å›ç»“æœæ˜¯UpdateResultç±»å‹ï¼Œç„¶åè°ƒç”¨matched_countå’Œmodified_countå±æ€§åˆ†åˆ«å¯ä»¥è·å¾—åŒ¹é…çš„æ•°æ®æ¡æ•°å’Œå½±å“çš„æ•°æ®æ¡æ•°ã€‚<br>
<br>result.matched_count
<br>result.modified_count
<br><br>åˆ é™¤æ“ä½œæ¯”è¾ƒç®€å•ï¼Œç›´æ¥è°ƒç”¨remove()æ–¹æ³•æŒ‡å®šåˆ é™¤çš„æ¡ä»¶å³å¯ï¼Œç¬¦åˆæ¡ä»¶çš„æ‰€æœ‰æ•°æ®å‡ä¼šè¢«åˆ é™¤ï¼Œ<br><br>delete_one()å³åˆ é™¤ç¬¬ä¸€æ¡ç¬¦åˆæ¡ä»¶çš„æ•°æ®<br>collection.delete_one({â€œnameâ€:â€œ Kevinâ€})<br><br>delete_many()å³åˆ é™¤æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„æ•°æ®ï¼Œè¿”å›ç»“æœæ˜¯DeleteResultç±»å‹<br>collection.delete_many({â€œageâ€: {$lt:25}})<br><br>result.deleted_count<br><br>conn.close()]]></description><link>çˆ¬è™«\çˆ¬è™«æ–‡æ¡£\Mongodb.html</link><guid isPermaLink="false">çˆ¬è™«/çˆ¬è™«æ–‡æ¡£/Mongodb.md</guid><pubDate>Mon, 16 Oct 2023 15:08:32 GMT</pubDate></item><item><title><![CDATA[Redisæ•°æ®åº“]]></title><description><![CDATA[ 
 <br><br><br>Redisæ˜¯å®Œå…¨å¼€æºå…è´¹çš„ï¼Œéµå®ˆBSDåè®®ï¼Œæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„key-valueæ•°æ®åº“ã€‚<br>Redisä¸å…¶ä»– key- value ç¼“å­˜äº§å“æœ‰ä»¥ä¸‹ä¸‰ä¸ªç‰¹ç‚¹ï¼š<br>Redisæ”¯æŒæ•°æ®çš„æŒä¹…åŒ–ï¼Œå¯ä»¥å°†å†…å­˜ä¸­çš„æ•°æ®ä¿å­˜åœ¨ç£ç›˜ä¸­ï¼Œé‡å¯çš„æ—¶å€™å¯ä»¥å†æ¬¡åŠ è½½è¿›è¡Œä½¿ç”¨ã€‚<br>Redisä¸ä»…ä»…æ”¯æŒç®€å•çš„key-valueç±»å‹çš„æ•°æ®ï¼ŒåŒæ—¶è¿˜æä¾›listï¼Œsetï¼Œzsetï¼Œhashç­‰æ•°æ®ç»“æ„çš„å­˜å‚¨ã€‚<br>redisï¼š åŠæŒä¹…åŒ–ï¼Œå­˜å‚¨äºå†…å­˜å’Œç¡¬ç›˜<br><br>Redisæ˜¯å®Œå…¨åœ¨å†…å­˜ä¸­ä¿å­˜æ•°æ®çš„æ•°æ®åº“ï¼Œä½¿ç”¨ç£ç›˜åªæ˜¯ä¸ºäº†æŒä¹…æ€§ç›®çš„,Redisæ•°æ®å…¨éƒ¨å­˜åœ¨å†…å­˜ï¼Œå®šæœŸå†™å…¥ç£ç›˜ï¼Œå½“å†…å­˜ä¸å¤Ÿæ—¶ï¼Œå¯ä»¥é€‰æ‹©æŒ‡å®šçš„LRUç®—æ³•åˆ é™¤æ•°æ®,æŒä¹…åŒ–æ˜¯ä½¿ç”¨RDBæ–¹å¼æˆ–è€…aofæ–¹å¼ã€‚<br>mongodbæ˜¯æ–‡æ¡£å‹çš„éå…³ç³»å‹æ•°æ®åº“ï¼ŒMongoDBæ›´ç±»ä¼¼MySQLï¼Œæ”¯æŒå­—æ®µç´¢å¼•ã€æ¸¸æ ‡æ“ä½œï¼Œå…¶ä¼˜åŠ¿åœ¨äºæŸ¥è¯¢åŠŸèƒ½æ¯”è¾ƒå¼ºå¤§ï¼Œæ“…é•¿æŸ¥è¯¢JSONæ•°æ®ï¼Œèƒ½å­˜å‚¨æµ·é‡æ•°æ®ï¼Œä½†æ˜¯ä¸æ”¯æŒäº‹åŠ¡ã€‚<br><br><br><a rel="noopener" class="external-link" href="https://github.com/ServiceStack/redis-windows" target="_blank">https://github.com/ServiceStack/redis-windows</a><br><a rel="noopener" class="external-link" href="https://github.com/MSOpenTech/redis/releases" target="_blank">https://github.com/MSOpenTech/redis/releases</a><br><br>455è¡Œ maxheap 1024000000   è®¾ç½®æœ€å¤§çš„æ•°æ®å †çš„å¤§å°<br>387è¡Œ requirepass 123456		è®¾ç½®æ•°æ®åº“çš„å¯†ç <br><br>cd C:\redis64-2.8.2101<br>C:\redis64-2.8.2101&gt;redis-server.exe redis.windows.conf  æ‰§è¡Œ redis-server.exe å¹¶åŠ è½½Windowsçš„é…ç½®æ–‡ä»¶<br>C:\redis64-2.8.2101â€”&gt;dump.rdb  ä¸ºæ•°æ®æ–‡ä»¶<br><br>1ã€æ‰§è¡Œ brew install redis<br>2ã€å¯åŠ¨ redisï¼Œå¯ä»¥ä½¿ç”¨åå°æœåŠ¡å¯åŠ¨ brew services start redisã€‚æˆ–è€…ç›´æ¥å¯åŠ¨ï¼šredis-server /usr/local/etc/redis.conf<br><br><br><br>C:\redis64-2.8.2101&gt;redis-cli.exe<br>127.0.0.1:6379&gt;auth '123456'    <br><br>å¯†ç  ä¸º å­—ç¬¦ä¸²ç±»å‹<br><br>
<br>


<br>


<br>


<br>


<br>


<br><br><a rel="noopener" class="external-link" href="http://redis.cn/commands.html" target="_blank">http://redis.cn/commands.html</a><br>config get databases æŸ¥çœ‹æ‰€æœ‰çš„æ•°æ®åº“ æ•°æ®åº“ä»¥0å¼€å§‹ ä¸€å…±16ä¸ª<br><br>æ¦‚è¿°ï¼šStringæ˜¯redisæœ€åŸºæœ¬çš„ç±»å‹ï¼Œæœ€å¤§èƒ½å­˜å‚¨512MBçš„æ•°æ®ï¼ŒStringç±»å‹æ˜¯äºŒè¿›åˆ¶å®‰å…¨çš„ï¼Œå³å¯ä»¥å­˜å‚¨ä»»ä½•æ•°æ®ã€æ¯”å¦‚æ•°å­—ã€å›¾ç‰‡ã€åºåˆ—åŒ–å¯¹è±¡ç­‰<br>ä¸€ä¸ªkeyå¯¹åº”ä¸€ä¸ªvalue<br>stringç±»å‹æ˜¯Redisæœ€åŸºæœ¬çš„æ•°æ®ç±»å‹ï¼Œä¸€ä¸ªé”®æœ€å¤§èƒ½å­˜å‚¨512MBã€‚<br><br><br>
set key value 
<br>Pythonset name "zhangsan"
å¤åˆ¶<br><br>
setex key seconds value
<br>Pythonsetex name 10 'zhangsan'
å¤åˆ¶<br><br>
ttl key
<br>Pythonttl name
å¤åˆ¶<br><br>
persist key
<br>persist name
å¤åˆ¶<br><br>
setnx key value
<br> setnx name 'a'
å¤åˆ¶<br><br>
mset key value [key value â€¦â€¦]
<br>Pythonmset name 'zs' age 18 	
å¤åˆ¶<br><br><br>
get key
<br> get name<br><br>
mget key [key â€¦â€¦]
<br>  mget name age<br><br>
getrange key start end
<br>Pythongetrange name 0 4
å¤åˆ¶<br><br>
getset key value
<br>Pythongetset name 'x'
å¤åˆ¶<br><br><br><br>
incr key   
<br> incr age<br><br>
decr key
<br>decr age<br><br>
incrby key intnum
<br> incrby age 10		<br><br>
decrby key intnum
<br>decrby age 10<br><br>
strlen key
<br>  strlen age<br><br><br>
keys *
<br><br>
exists key
<br>exists name<br><br>
type key
<br> type name<br><br>
del key [key â€¦â€¦]
<br><br>
expire key seconds
<br>   expire age 10<br><br>
ttl key
<br><br>
pttl key 
<br><br>
persist key
<br><br>
flushdb	åˆ é™¤å½“å‰æ•°æ®åº“ä¸­çš„æ‰€æœ‰
<br>
flushall		åˆ é™¤æ‰€æœ‰æ•°æ®åº“ä¸­çš„key
<br><br>
rename key newkey
<br><br>
Move key db
<br>Pythonmove name 1	# å°†name ç§»åŠ¨åˆ°æ•°æ®åº“1
å¤åˆ¶<br><br>
randomkey
<br><br><br>{<br>â€‹	name:"tom",
â€‹	age:18<br>}<br>Redis hash æ˜¯ä¸€ä¸ªé”®å€¼(key=&gt;value)å¯¹é›†åˆã€‚<br><br><br>
hset key field value
<br>Pythonredis&gt; hset myhash name lucky
(integer) 1
redis&gt; HGET myhash name
"Hello"
å¤åˆ¶<br><br>
hmset key field value [field value â€¦â€¦]
<br>Pythonhmset myhash a 1 b 2 c 3
å¤åˆ¶<br><br>
hincrby key field incrment
<br>Pythonhincrby hh age 10
å¤åˆ¶<br><br>
hsetnx key field value
<br>Python hget hh name
å¤åˆ¶<br><br><br>
hget key field
<br>hget name field1<br><br>
hmget key filed [filed â€¦â€¦]
<br><br>
hgetall key
<br><br>
hkeys key
<br><br>
hvals key
<br><br>
hlen key
<br><br><br>
hexists key field
<br>hexists a x<br><br>
hdel key field [field â€¦â€¦]
<br> hdel a x y z<br><br>
hstrlen key field
<br><br>æ¦‚è¿°ï¼šRedis åˆ—è¡¨æ˜¯ç®€å•çš„å­—ç¬¦ä¸²åˆ—è¡¨ï¼ŒæŒ‰ç…§æ’å…¥é¡ºåºæ’åºã€‚ä½ å¯ä»¥æ·»åŠ ä¸€ä¸ªå…ƒç´ åˆ°åˆ—è¡¨çš„å¤´éƒ¨ï¼ˆå·¦è¾¹ï¼‰æˆ–è€…å°¾éƒ¨ï¼ˆå³è¾¹ï¼‰<br><br><br>
lpush key value [vlaue â€¦â€¦] 
<br>Pythonlpush demo 2 3`
å¤åˆ¶<br><br>
Lpushx  key val
<br>lpushx list 'a'
å¤åˆ¶<br><br>
rpush key value [vlaue â€¦â€¦]
<br>Pythonrpush demo 2 1
å¤åˆ¶<br><br>
rpushx  key val
<br>Pythonrpushx mm 'a'	
å¤åˆ¶<br><br><br>
lpop key
<br>Pythonlpop demo
å¤åˆ¶<br><br>
rpop key
<br>Pythonrpop demo
å¤åˆ¶<br><br>
lrange key  start end
<br>Pythonlrange demo 0 -1	#æŸ¥çœ‹åˆ—è¡¨ä¸­çš„æ‰€æœ‰å…ƒç´ 
å¤åˆ¶<br>æ³¨æ„ï¼šstart endéƒ½æ˜¯ä»0å¼€å§‹
æ³¨æ„ï¼šåç§»é‡å¯ä»¥æ˜¯è´Ÿæ•°<br><br><br>
ltrim key start end
<br>Pythonltrim demo 1 -1	#å°†ç´¢å¼•ä¸º1 åˆ° -1çš„å…ƒç´ è£å‰ªå‡ºæ¥
å¤åˆ¶<br>æ³¨æ„ï¼šstart endéƒ½æ˜¯ä»0å¼€å§‹
æ³¨æ„ï¼šåç§»é‡å¯ä»¥æ˜¯è´Ÿæ•°<br><br>
llen key
<br><br>
lindex key index
<br>PythonLINDEX mylist 0
å¤åˆ¶<br><br>æ¦‚è¿°ï¼šæ— åºé›†åˆï¼Œå…ƒç´ ç±»å‹ä¸ºStringç±»å‹ï¼Œå…ƒç´ å…·æœ‰å”¯ä¸€æ€§ï¼Œä¸é‡å¤<br>{ 'a','b'}<br><br><br>
sadd key member [member â€¦â€¦]
<br>Pythonsadd set 'a' 'b' 'c'
å¤åˆ¶<br><br><br>
smembers key
<br>Pythonsmembers set
å¤åˆ¶<br><br>
scard key
<br>Pythonscard set
å¤åˆ¶<br><br>
spop  key
<br>spop set
å¤åˆ¶<br><br>
srandmember  key  count
<br>Pythons set		#è¿”å›ä¸€ä¸ªéšæœºå…ƒç´ 
srandmember set 2	#è¿”å›2ä¸ªéšæœºå…ƒç´ 
å¤åˆ¶<br><br>
srem  key   member1 [memkber2]
<br>Pythonsrem set 'd' 'b'ss
å¤åˆ¶<br><br><br>
sinter key [key â€¦â€¦]
<br>Python sinter m l	#æ±‚é›†åˆlå’Œé›†åˆmçš„äº¤é›†
å¤åˆ¶<br><br>
sdiff key [key â€¦â€¦]
<br>Pythonsdiff m l	#æ±‚å·®é›† æ³¨æ„æ¯”è¾ƒé¡ºåº
å¤åˆ¶<br><br>
sismember key member
<br>Pythonsissmember m 'a'   #é›†åˆmä¸­æ˜¯å¦å­˜åœ¨å…ƒç´ 'a'
å¤åˆ¶<br><br><br><br><br><br><br>
zadd key score member [score member â€¦â€¦]
<br>Pythonzadd zset 1 a 5 b 3 c 2 d 4 e
å¤åˆ¶<br><br>
Zincrby	key increment  mcfaember
<br>zincrby zset 10 'a'   #ç»™açš„æƒé‡ä¸ŠåŠ 10
å¤åˆ¶<br><br><br>
zrange key start end
<br>Pythonzrange z1 0 -1
å¤åˆ¶<br><br>
zcard key
<br>Python zcard z1
å¤åˆ¶<br><br>
zcount key min max
<br><br>
zscore key member
<br>Pythonzscore l 'c'	#sè¿”å›cçš„æƒé‡
å¤åˆ¶<br><br>
ZRANGE key 0 -1 WITHSCORES
<br><br>
ZRANGEBYSCORE key min max [WITHSCORES][LIMIT offset count]
<br>åŒºé—´åŠæ— é™<br>minå’Œmaxå¯ä»¥æ˜¯-infå’Œ+infï¼Œè¿™æ ·ä¸€æ¥ï¼Œä½ å°±å¯ä»¥åœ¨ä¸çŸ¥é“æœ‰åºé›†çš„æœ€ä½å’Œæœ€é«˜scoreå€¼çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨ZRANGEBYSCOREè¿™ç±»å‘½ä»¤ã€‚<br>Sqlredis&gt; ZADD myzset 1 "one"
(integer) 1
redis&gt; ZADD myzset 2 "two"
(integer) 1
redis&gt; ZADD myzset 3 "three"
(integer) 1
redis&gt; ZRANGEBYSCORE myzset -inf +inf
1) "one"
2) "two"
3) "three"
redis&gt; ZRANGEBYSCORE myzset 1 2
1) "one"
2) "two"
å¤åˆ¶<br><br><br>å½“keyå­˜åœ¨ï¼Œä½†æ˜¯å…¶ä¸æ˜¯æœ‰åºé›†åˆç±»å‹ï¼Œå°±è¿”å›ä¸€ä¸ªé”™è¯¯ã€‚<br>
ZREM key member [member ...]
<br>Sqlredis&gt; ZADD myzset 1 "one"
(integer) 1
redis&gt; ZADD myzset 2 "two"
(integer) 1
redis&gt; ZADD myzset 3 "three"
(integer) 1
redis&gt; ZREM myzset "two"
(integer) 1
redis&gt; ZRANGE myzset 0 -1 WITHSCORES
1) "one"
2) "1"
3) "three"
4) "3"
redis&gt; 
å¤åˆ¶<br><br>é»˜è®¤åœ¨ æ•°æ®åº“ 0<br>select num  è¿›è¡Œæ•°æ®åº“çš„åˆ‡æ¢<br>select  1  è¿›å…¥åˆ°æ•°æ®åº“1<br><br>æ³¨æ„ï¼šå½“å‰å¯†ç ä¿®æ”¹åå¦‚æœæœåŠ¡é‡å¯åˆ™éœ€è¦é‡æ–°è®¾å®š<br>æˆ‘ä»¬å¯ä»¥é€šè¿‡ redis çš„é…ç½®æ–‡ä»¶è®¾ç½®å¯†ç å‚æ•°ï¼Œè¿™æ ·å®¢æˆ·ç«¯è¿æ¥åˆ° redis æœåŠ¡å°±éœ€è¦å¯†ç éªŒè¯ï¼Œè¿™æ ·å¯ä»¥è®©ä½ çš„ redis æœåŠ¡æ›´å®‰å…¨ã€‚<br><br>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹æ˜¯å¦è®¾ç½®äº†å¯†ç éªŒè¯ï¼š<br>127.0.0.1:6379&gt; CONFIG get requirepass
1) "requirepass"
2) ""
å¤åˆ¶<br>é»˜è®¤æƒ…å†µä¸‹ requirepass å‚æ•°æ˜¯ç©ºçš„ï¼Œè¿™å°±æ„å‘³ç€ä½ æ— éœ€é€šè¿‡å¯†ç éªŒè¯å°±å¯ä»¥è¿æ¥åˆ° redis æœåŠ¡ã€‚<br>ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ¥ä¿®æ”¹è¯¥å‚æ•°ï¼š<br>127.0.0.1:6379&gt; CONFIG set requirepass "lucky"
OK
127.0.0.1:6379&gt; CONFIG get requirepass
1) "requirepass"
2) "lucky"
å¤åˆ¶<br>è®¾ç½®å¯†ç åï¼Œå®¢æˆ·ç«¯è¿æ¥ redis æœåŠ¡å°±éœ€è¦å¯†ç éªŒè¯ï¼Œå¦åˆ™æ— æ³•æ‰§è¡Œå‘½ä»¤ã€‚<br><br>AUTH å‘½ä»¤åŸºæœ¬è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š<br>127.0.0.1:6379&gt; AUTH password
å¤åˆ¶<br><br>127.0.0.1:6379&gt; AUTH "lucky"
OK
127.0.0.1:6379&gt; SET mykey "Test value"
OK
127.0.0.1:6379&gt; GET mykey
"Test value"
å¤åˆ¶<br><br>Redis SAVE å‘½ä»¤ç”¨äºåˆ›å»ºå½“å‰æ•°æ®åº“çš„å¤‡ä»½ã€‚<br><br>redis Save å‘½ä»¤åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š<br>redis 127.0.0.1:6379&gt; SAVE 
å¤åˆ¶<br><br>redis 127.0.0.1:6379&gt; SAVE 
OK
å¤åˆ¶<br>è¯¥å‘½ä»¤å°†åœ¨ redis å®‰è£…ç›®å½•ä¸­åˆ›å»ºdump.rdbæ–‡ä»¶ã€‚<br><br><br>å¦‚æœéœ€è¦æ¢å¤æ•°æ®ï¼Œåªéœ€å°†å¤‡ä»½æ–‡ä»¶ (dump.rdb) ç§»åŠ¨åˆ° redis å®‰è£…ç›®å½•å¹¶å¯åŠ¨æœåŠ¡å³å¯ã€‚è·å– redis ç›®å½•å¯ä»¥ä½¿ç”¨ CONFIG å‘½ä»¤ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š<br>redis 127.0.0.1:6379&gt; CONFIG GET dir
1) "dir"
2) "/usr/local/redis/bin"
å¤åˆ¶<br>ä»¥ä¸Šå‘½ä»¤ CONFIG GET dir è¾“å‡ºçš„ redis å®‰è£…ç›®å½•ä¸º /usr/local/redis/binã€‚<br><br><br>åˆ›å»º redis å¤‡ä»½æ–‡ä»¶ä¹Ÿå¯ä»¥ä½¿ç”¨å‘½ä»¤ BGSAVEï¼Œè¯¥å‘½ä»¤åœ¨åå°æ‰§è¡Œã€‚<br><br>127.0.0.1:6379&gt; BGSAVE

Background saving started
å¤åˆ¶<br><br><br>pip install redis<br>å¯¼å…¥<br>import  redis<br><br>redisæä¾›äº†2ä¸ªæ–¹æ³•<br>
<br>StrictRedisï¼šå®ç°å¤§éƒ¨åˆ†å®˜æ–¹çš„å‘½ä»¤
<br>Redisï¼šæ˜¯StrictRedisçš„å­ç±»ï¼Œç”¨äºå‘åå…¼å®¹æ—§ç‰ˆçš„redisã€‚
<br><br><br>Pythonimport redis

# decode_responses=True  è‡ªåŠ¨è§£ç 
r = redis.Redis(host='127.0.0.1',port=6379,password='123c456',db=0,decode_responses=True) #é»˜è®¤æ•°æ®åº“ä¸º0 

r = redis.StrictRedis(host='10.10.2.14',port=6379,password='123456',decode_responses=True)
å¤åˆ¶<br><br> ç®¡ç†å¯¹ä¸€ä¸ªredis serverçš„æ‰€æœ‰è¿æ¥ï¼Œé¿å…æ¯æ¬¡å»ºç«‹ï¼Œé‡Šæ”¾è¿æ¥çš„å¼€é”€ã€‚é»˜è®¤ï¼Œæ¯ä¸ªrediså®ä¾‹éƒ½ä¼šç»´æŠ¤ä¸€ä¸ªè‡ªå·±çš„è¿æ¥æ± ï¼Œå¯ä»¥ç›´æ¥å»ºç«‹ä¸€ä¸ªè¿æ¥æ± ï¼Œä½œä¸ºå‚æ•°ä¼ ç»™redisï¼Œè¿™æ ·å¯ä»¥å®ç°å¤šä¸ªrediså®ä¾‹å…±äº«ä¸€ä¸ªè¿æ¥æ± ã€‚<br>ä¸¾ä¾‹ï¼ˆè¿æ¥æ± ï¼‰ï¼š<br>Pythonpool = redis.ConnectionPool(host='127.0.0.1',port=6379,db=0,password='123456',decode_responses=True)

r = redis.Redis(connection_pool=pool)
å¤åˆ¶]]></description><link>çˆ¬è™«\çˆ¬è™«æ–‡æ¡£\redis.html</link><guid isPermaLink="false">çˆ¬è™«/çˆ¬è™«æ–‡æ¡£/redis.md</guid><pubDate>Mon, 16 Oct 2023 15:03:24 GMT</pubDate></item><item><title><![CDATA[Scrapyæ¡†æ¶]]></title><description><![CDATA[<a class="tag" href="?query=tag:scrapy" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#scrapy</a> 
 <br><br><a href=".?query=tag:scrapy" class="tag" target="_blank" rel="noopener">#scrapy</a> <br><br><br>å‰é¢æˆ‘ä»¬å­¦ä¹ äº†åŸºç¡€çš„çˆ¬è™«å®ç°æ–¹æ³•å’Œseleniumä»¥åŠmongodbæ•°æ®åº“ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥ä¼šæˆ‘ä»¬å­¦ä¹ ä¸€ä¸ªä¸Šåœºç‡éå¸¸é«˜çš„çˆ¬è™«æ¡†æ¶ï¼šscrapy<br><br>
<br>scrapyçš„åŸºç¡€æ¦‚å¿µå’Œå·¥ä½œæµç¨‹
<br>scrapyå…¥é—¨ä½¿ç”¨
<br><br><br>
<br>äº†è§£ scrapyçš„æ¦‚å¿µ
<br>æŒæ¡ scrapyæ¡†æ¶çš„è¿è¡Œæµç¨‹
<br>æŒæ¡ scrapyæ¡†æ¶çš„ä½œç”¨
<br><br>
<br>èƒ½å¤Ÿè®©å¼€å‘è¿‡ç¨‹æ–¹ä¾¿ã€å¿«é€Ÿ
<br>scrapyæ¡†æ¶èƒ½å¤Ÿè®©æˆ‘ä»¬çš„çˆ¬è™«æ•ˆç‡æ›´é«˜
<br><br>æ–‡æ¡£åœ°å€ï¼š<a rel="noopener" class="external-link" href="https://docs.scrapy.org/en/latest/" target="_blank">https://docs.scrapy.org/en/latest/</a><br>Scrapy ä½¿ç”¨äº†Twisted['twÉªstÉªd]å¼‚æ­¥ç½‘ç»œæ¡†æ¶ï¼Œå¯ä»¥åŠ å¿«æˆ‘ä»¬çš„ä¸‹è½½é€Ÿåº¦ã€‚<br>Scrapyæ˜¯ä¸€ä¸ªä¸ºäº†çˆ¬å–ç½‘ç«™æ•°æ®ï¼Œæå–ç»“æ„æ€§æ•°æ®è€Œç¼–å†™çš„åº”ç”¨æ¡†æ¶ï¼Œæˆ‘ä»¬åªéœ€è¦å®ç°å°‘é‡çš„ä»£ç ï¼Œå°±èƒ½å¤Ÿå¿«é€Ÿçš„æŠ“å–ã€‚<br><br>å‰é¢æˆ‘ä»¬è¯´Twistedæ˜¯ä¸€ä¸ªå¼‚æ­¥çš„ç½‘ç»œæ¡†æ¶ï¼Œç»å¸¸æˆ‘ä»¬ä¹Ÿå¬åˆ°ä¸€ä¸ªè¯è¯­å«åšéé˜»å¡ï¼Œé‚£ä¹ˆä»–ä»¬æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ<br>â€œScrapyæ¡†æ¶01.assets/åŒæ­¥å’Œå¼‚æ­¥-2520822.pngâ€ could not be found.<br>å¼‚æ­¥ï¼šè°ƒç”¨åœ¨å‘å‡ºä¹‹åï¼Œè¿™ä¸ªè°ƒç”¨å°±ç›´æ¥è¿”å›ï¼Œä¸ç®¡æœ‰æ— ç»“æœï¼›å¼‚æ­¥æ˜¯è¿‡ç¨‹ã€‚ éé˜»å¡ï¼šå…³æ³¨çš„æ˜¯ç¨‹åºåœ¨ç­‰å¾…è°ƒç”¨ç»“æœï¼ˆæ¶ˆæ¯ï¼Œè¿”å›å€¼ï¼‰æ—¶çš„çŠ¶æ€ï¼ŒæŒ‡åœ¨ä¸èƒ½ç«‹åˆ»å¾—åˆ°ç»“æœä¹‹å‰ï¼Œè¯¥è°ƒç”¨ä¸ä¼šé˜»å¡å½“å‰çº¿ç¨‹ã€‚<br><br><br>â€œScrapyæ¡†æ¶01.assets/çˆ¬è™«æµç¨‹-1-2520822.pngâ€ could not be found.<br><br>â€œScrapyæ¡†æ¶01.assets/çˆ¬è™«æµç¨‹-2-2520822.pngâ€ could not be found.<br><br>â€œScrapyæ¡†æ¶01.assets/çˆ¬è™«æµç¨‹-3-1047805-2520822.pngâ€ could not be found.<br><br>
<br>è°ƒåº¦å™¨æŠŠrequests--&gt;å¼•æ“--&gt;ä¸‹è½½ä¸­é—´ä»¶---&gt;ä¸‹è½½å™¨
<br>ä¸‹è½½å™¨å‘é€è¯·æ±‚ï¼Œè·å–å“åº”----&gt;ä¸‹è½½ä¸­é—´ä»¶----&gt;å¼•æ“---&gt;çˆ¬è™«ä¸­é—´ä»¶---&gt;çˆ¬è™«
<br>çˆ¬è™«æå–urlåœ°å€ï¼Œç»„è£…æˆrequestå¯¹è±¡----&gt;çˆ¬è™«ä¸­é—´ä»¶---&gt;å¼•æ“---&gt;è°ƒåº¦å™¨
<br>çˆ¬è™«æå–æ•°æ®---&gt;å¼•æ“---&gt;ç®¡é“
<br>ç®¡é“è¿›è¡Œæ•°æ®çš„å¤„ç†å’Œä¿å­˜
<br><br>
<br>å›¾ä¸­ç»¿è‰²çº¿æ¡çš„è¡¨ç¤ºæ•°æ®çš„ä¼ é€’
<br>æ³¨æ„å›¾ä¸­ä¸­é—´ä»¶çš„ä½ç½®ï¼Œå†³å®šäº†å…¶ä½œç”¨
<br>æ³¨æ„å…¶ä¸­å¼•æ“çš„ä½ç½®ï¼Œæ‰€æœ‰çš„æ¨¡å—ä¹‹å‰ç›¸äº’ç‹¬ç«‹ï¼Œåªå’Œå¼•æ“è¿›è¡Œäº¤äº’
<br><br>â€œScrapyæ¡†æ¶01.assets/scrapyç»„ä»¶-2520822.pngâ€ could not be found.<br><br>
<br>
scrapyçš„æ¦‚å¿µï¼šScrapyæ˜¯ä¸€ä¸ªä¸ºäº†çˆ¬å–ç½‘ç«™æ•°æ®ï¼Œæå–ç»“æ„æ€§æ•°æ®è€Œç¼–å†™çš„åº”ç”¨æ¡†æ¶

<br>
scrapyæ¡†æ¶çš„è¿è¡Œæµç¨‹ä»¥åŠæ•°æ®ä¼ é€’è¿‡ç¨‹ï¼š

<br>è°ƒåº¦å™¨æŠŠrequests--&gt;å¼•æ“--&gt;ä¸‹è½½ä¸­é—´ä»¶---&gt;ä¸‹è½½å™¨
<br>ä¸‹è½½å™¨å‘é€è¯·æ±‚ï¼Œè·å–å“åº”----&gt;ä¸‹è½½ä¸­é—´ä»¶----&gt;å¼•æ“---&gt;çˆ¬è™«ä¸­é—´ä»¶---&gt;çˆ¬è™«
<br>çˆ¬è™«æå–urlåœ°å€ï¼Œç»„è£…æˆrequestå¯¹è±¡----&gt;çˆ¬è™«ä¸­é—´ä»¶---&gt;å¼•æ“---&gt;è°ƒåº¦å™¨
<br>çˆ¬è™«æå–æ•°æ®---&gt;å¼•æ“---&gt;ç®¡é“
<br>ç®¡é“è¿›è¡Œæ•°æ®çš„å¤„ç†å’Œä¿å­˜


<br>
scrapyæ¡†æ¶çš„ä½œç”¨ï¼šé€šè¿‡å°‘é‡ä»£ç å®ç°å¿«é€ŸæŠ“å–

<br>
æŒæ¡scrapyä¸­æ¯ä¸ªæ¨¡å—çš„ä½œç”¨ï¼š 
å¼•æ“(engine)ï¼šè´Ÿè´£æ•°æ®å’Œä¿¡å·åœ¨ä¸åŒæ¨¡å—é—´çš„ä¼ é€’ è°ƒåº¦å™¨(scheduler)ï¼šå®ç°ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå­˜æ”¾å¼•æ“å‘è¿‡æ¥çš„requestè¯·æ±‚å¯¹è±¡ 
ä¸‹è½½å™¨(downloader)ï¼šå‘é€å¼•æ“å‘è¿‡æ¥çš„requestè¯·æ±‚ï¼Œè·å–å“åº”ï¼Œå¹¶å°†å“åº”äº¤ç»™å¼•æ“ 
çˆ¬è™«(spider)ï¼šå¤„ç†å¼•æ“å‘è¿‡æ¥çš„responseï¼Œæå–æ•°æ®ï¼Œæå–urlï¼Œå¹¶äº¤ç»™å¼•æ“ 
ç®¡é“(pipeline)ï¼šå¤„ç†å¼•æ“ä¼ é€’è¿‡æ¥çš„æ•°æ®ï¼Œæ¯”å¦‚å­˜å‚¨ 
ä¸‹è½½ä¸­é—´ä»¶(downloader middleware)ï¼šå¯ä»¥è‡ªå®šä¹‰çš„ä¸‹è½½æ‰©å±•ï¼Œæ¯”å¦‚è®¾ç½®ä»£ç†ip 
çˆ¬è™«ä¸­é—´ä»¶(spider middleware)ï¼šå¯ä»¥è‡ªå®šä¹‰requestè¯·æ±‚å’Œè¿›è¡Œresponseè¿‡æ»¤

<br>
ç†è§£å¼‚æ­¥å’Œéé˜»å¡çš„åŒºåˆ«ï¼šå¼‚æ­¥æ˜¯è¿‡ç¨‹ï¼Œéé˜»å¡æ˜¯çŠ¶æ€

<br><br><br>
<br>æŒæ¡ scrapyçš„å®‰è£…
<br>åº”ç”¨ åˆ›å»ºscrapyçš„é¡¹ç›®
<br>åº”ç”¨ åˆ›å»ºscrapyçˆ¬è™«
<br>åº”ç”¨ è¿è¡Œscrapyçˆ¬è™«
<br>åº”ç”¨ è§£æå¹¶è·å–scrapyçˆ¬è™«ä¸­çš„æ•°æ®
<br><br>
<br>åˆ›å»ºä¸€ä¸ªscrapyé¡¹ç›®:scrapy startproject mySpider
<br>ç”Ÿæˆä¸€ä¸ªçˆ¬è™«:scrapy genspider myspider <a class="internal-link" data-href="www.xxx.cn" href="\www.xxx.cn" target="_self" rel="noopener">www.xxx.cn</a>
<br>æå–æ•°æ®:å®Œå–„spiderï¼Œä½¿ç”¨xpathç­‰æ–¹æ³•
<br>ä¿å­˜æ•°æ®:pipelineä¸­ä¿å­˜æ•°æ®
<br><br>å®‰è£…scrapyå‘½ä»¤ï¼š<br> pip install scrapy==2.5.1
 pip install -i https://pypi.tuna.tsinghua.edu.cn/simple scrapy==2.5.1 
 pip install scrapy-redis==0.7.2
å¤åˆ¶<br>å¦‚æœå®‰è£…å¤±è´¥. è¯·å…ˆå‡çº§ä¸€ä¸‹pip.  ç„¶åé‡æ–°å®‰è£…scrapyå³å¯. <br>æœ€æ–°ç‰ˆæœ¬çš„pipå‡çº§å®Œæˆå. å®‰è£…ä¾ç„¶å¤±è´¥, å¯ä»¥æ ¹æ®æŠ¥é”™ä¿¡æ¯è¿›è¡Œä¸€ç‚¹ç‚¹çš„è°ƒæ•´, å¤šè¯•å‡ æ¬¡pip. ç›´è‡³success. <br>æ³¨æ„ï¼š<br>å¦‚æœä¸Šè¿°è¿‡ç¨‹è¿˜æ˜¯æ— æ³•æ­£å¸¸å®‰è£…scrapy, å¯ä»¥è€ƒè™‘ç”¨ä¸‹é¢çš„æ–¹æ¡ˆæ¥å®‰è£…:<br>å¦‚æœä¸Šè¿°è¿‡ç¨‹è¿˜æ˜¯æ— æ³•æ­£å¸¸å®‰è£…scrapy, å¯ä»¥è€ƒè™‘ç”¨ä¸‹é¢çš„æ–¹æ¡ˆæ¥å®‰è£…:<br>
<br>
å®‰è£…wheel
pip install wheel
å¤åˆ¶

<br>
ä¸‹è½½twistedå®‰è£…åŒ…, <a rel="noopener" class="external-link" href="https://www.lfd.uci.edu/~gohlke/pythonlibs/#twisted" target="_blank">https://www.lfd.uci.edu/~gohlke/pythonlibs/#twisted</a>
â€œScrapyæ¡†æ¶01.assets/image-20210803144429440-2520822.pngâ€ could not be found.

<br>
ç”¨wheelå®‰è£…twisted. 
pip install Twistedâ€‘21.7.0â€‘py3â€‘noneâ€‘any.whl
å¤åˆ¶

<br>
å®‰è£…pywin32
pip install pywin32
å¤åˆ¶

<br>
å®‰è£…scrapy
pip install scrapy
å¤åˆ¶

<br>æ€»ä¹‹, æœ€ç»ˆä½ çš„æ§åˆ¶å°è¾“å…¥scrapy versionèƒ½æ˜¾ç¤ºç‰ˆæœ¬å·. å°±ç®—æˆåŠŸäº†<br><br>åˆ›å»ºscrapyé¡¹ç›®çš„å‘½ä»¤ï¼šscrapy startproject +&lt;é¡¹ç›®åå­—&gt;<br>ç¤ºä¾‹ï¼šscrapy startproject myspider<br><br>â€œScrapyæ¡†æ¶01.assets/scrapyå…¥é—¨ä½¿ç”¨-1-2520822.pngâ€ could not be found.<br><br>
<br>å¼•æ“(Scrapy)
ç”¨æ¥å¤„ç†æ•´ä¸ªç³»ç»Ÿçš„æ•°æ®æµå¤„ç†, è§¦å‘äº‹åŠ¡(æ¡†æ¶æ ¸å¿ƒ)
<br>è°ƒåº¦å™¨(Scheduler)
ç”¨æ¥æ¥å—å¼•æ“å‘è¿‡æ¥çš„è¯·æ±‚, å‹å…¥é˜Ÿåˆ—ä¸­, å¹¶åœ¨å¼•æ“å†æ¬¡è¯·æ±‚çš„æ—¶å€™è¿”å›. å¯ä»¥æƒ³åƒæˆä¸€ä¸ªURLï¼ˆæŠ“å–ç½‘é¡µçš„ç½‘å€æˆ–è€…è¯´æ˜¯é“¾æ¥ï¼‰çš„ä¼˜å…ˆé˜Ÿåˆ—, ç”±å®ƒæ¥å†³å®šä¸‹ä¸€ä¸ªè¦æŠ“å–çš„ç½‘å€æ˜¯ä»€ä¹ˆ, åŒæ—¶å»é™¤é‡å¤çš„ç½‘å€
<br>ä¸‹è½½å™¨(Downloader)
ç”¨äºä¸‹è½½ç½‘é¡µå†…å®¹, å¹¶å°†ç½‘é¡µå†…å®¹è¿”å›ç»™èœ˜è››(Scrapyä¸‹è½½å™¨æ˜¯å»ºç«‹åœ¨twistedè¿™ä¸ªé«˜æ•ˆçš„å¼‚æ­¥æ¨¡å‹ä¸Šçš„)
<br>çˆ¬è™«(Spiders)
çˆ¬è™«æ˜¯ä¸»è¦å¹²æ´»çš„, ç”¨äºä»ç‰¹å®šçš„ç½‘é¡µä¸­æå–è‡ªå·±éœ€è¦çš„ä¿¡æ¯, å³æ‰€è°“çš„å®ä½“(Item)ã€‚ç”¨æˆ·ä¹Ÿå¯ä»¥ä»ä¸­æå–å‡ºé“¾æ¥,è®©Scrapyç»§ç»­æŠ“å–ä¸‹ä¸€ä¸ªé¡µé¢
<br>é¡¹ç›®ç®¡é“(Pipeline)
è´Ÿè´£å¤„ç†çˆ¬è™«ä»ç½‘é¡µä¸­æŠ½å–çš„å®ä½“ï¼Œä¸»è¦çš„åŠŸèƒ½æ˜¯æŒä¹…åŒ–å®ä½“ã€éªŒè¯å®ä½“çš„æœ‰æ•ˆæ€§ã€æ¸…é™¤ä¸éœ€è¦çš„ä¿¡æ¯ã€‚å½“é¡µé¢è¢«çˆ¬è™«è§£æåï¼Œå°†è¢«å‘é€åˆ°é¡¹ç›®ç®¡é“ï¼Œå¹¶ç»è¿‡å‡ ä¸ªç‰¹å®šçš„æ¬¡åºå¤„ç†æ•°æ®ã€‚
<br><br>å‘½ä»¤ï¼šåœ¨é¡¹ç›®è·¯å¾„ä¸‹æ‰§è¡Œ:scrapy genspider +&lt;çˆ¬è™«åå­—&gt; + &lt;å…è®¸çˆ¬å–çš„åŸŸå&gt;<br>ç¤ºä¾‹ï¼š<br>
<br>scrapy startproject duanzi01
<br>cd duanzi01/
<br>scrapy genspider duanzi duanzixing.com
<br>ç”Ÿæˆçš„ç›®å½•å’Œæ–‡ä»¶ç»“æœå¦‚ä¸‹ï¼š<br>â€œScrapyæ¡†æ¶01.assets/scrapyå…¥é—¨ä½¿ç”¨-2-2520822.pngâ€ could not be found.<br><br>å®Œå–„spiderå³é€šè¿‡æ–¹æ³•è¿›è¡Œæ•°æ®çš„æå–ç­‰æ“ä½œ<br>åœ¨/duanzi01/duanzi01/spiders/duanzi.pyä¸­ä¿®æ”¹å†…å®¹å¦‚ä¸‹:<br>Python import scrapy
 
 # è‡ªå®šä¹‰spiderç±»ï¼Œç»§æ‰¿scrapy.spider
 class DuanziSpider(scrapy.Spider):
     # çˆ¬è™«åå­—
     name = 'duanzi'
     # å…è®¸çˆ¬å–çš„èŒƒå›´ï¼Œé˜²æ­¢çˆ¬è™«çˆ¬åˆ°åˆ«çš„ç½‘ç«™
     allowed_domains = ['duanzixing.com']
     # å¼€å§‹çˆ¬å–çš„urlåœ°å€
     start_urls = ['http://duanzixing.com/']
 
     # æ•°æ®æå–çš„æ–¹æ³•ï¼Œæ¥å—ä¸‹è½½ä¸­é—´ä»¶ä¼ è¿‡æ¥çš„response æ˜¯é‡å†™çˆ¶ç±»ä¸­çš„parseæ–¹æ³•
     def parse(self, response, **kwargs):
         # æ‰“å°æŠ“å–åˆ°çš„é¡µé¢æºç 
         # print(response.text)
         # xpathåŒ¹é…æ¯æ¡æ®µå­çš„articleåˆ—è¡¨
         article_list = response.xpath('//article[@class="excerpt"]')
         # print(article_list)
         # å¾ªç¯è·å–æ¯ä¸€ä¸ªarticle
         for article in article_list:
             # åŒ¹é…æ ‡é¢˜
             # title = article.xpath('./header/h2/a/text()')
             # [&lt;Selector xpath='./header/h2/a/text()' data='ä¸€ä¸ªä¸å°å¿ƒå°±æŠŠ2000å—é’±çš„åŒ…åŒ…è®¾ç½®æˆäº†50åŒ…é‚®'&gt;]
             # title = article.xpath('./header/h2/a/text()')[0].extract()
             # ç­‰åŒäº
             title = article.xpath('./header/h2/a/text()').extract_first()
 
             # è·å–æ®µå­å†…å®¹
             con = article.xpath('./p[@class="note"]/text()').extract_first()
             print('title', title)
             print('con', con)
å¤åˆ¶<br>å¯åŠ¨çˆ¬è™«å‘½ä»¤ï¼š scrapy crawl  duanzi<br>responseå“åº”å¯¹è±¡çš„å¸¸ç”¨å±æ€§<br>
<br>response.urlï¼šå½“å‰å“åº”çš„urlåœ°å€
<br>response.request.urlï¼šå½“å‰å“åº”å¯¹åº”çš„è¯·æ±‚çš„urlåœ°å€
<br>response.headersï¼šå“åº”å¤´
<br>response.request.headersï¼šå½“å‰å“åº”çš„è¯·æ±‚å¤´
<br>response.bodyï¼šå“åº”ä½“ï¼Œä¹Ÿå°±æ˜¯htmlä»£ç ï¼Œbyteç±»å‹
<br>response.text  è¿”å›å“åº”çš„å†…å®¹ å­—ç¬¦ä¸²
<br>response.statusï¼šå“åº”çŠ¶æ€ç 
<br><br>
<br>
response.xpathæ–¹æ³•çš„è¿”å›ç»“æœæ˜¯ä¸€ä¸ªç±»ä¼¼listçš„ç±»å‹ï¼Œå…¶ä¸­åŒ…å«çš„æ˜¯selectorå¯¹è±¡ï¼Œæ“ä½œå’Œåˆ—è¡¨ä¸€æ ·ï¼Œä½†æ˜¯æœ‰ä¸€äº›é¢å¤–çš„æ–¹æ³•

<br>
extract() è¿”å›ä¸€ä¸ªåŒ…å«æœ‰å­—ç¬¦ä¸²çš„åˆ—è¡¨  
å¦‚æœä½¿ç”¨åˆ—è¡¨è°ƒç”¨extract()åˆ™è¡¨ç¤ºï¼Œextractä¼šå°†åˆ—è¡¨ä¸­æ¯ä¸€ä¸ªåˆ—è¡¨å…ƒç´ è¿›è¡Œextractæ“ä½œï¼Œè¿”å›åˆ—è¡¨

<br>
extract_first() è¿”å›åˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œåˆ—è¡¨ä¸ºç©ºæ²¡æœ‰è¿”å›None

<br>
spiderä¸­çš„parseæ–¹æ³•å¿…é¡»æœ‰

<br>
éœ€è¦æŠ“å–çš„urlåœ°å€å¿…é¡»å±äºallowed_domains,ä½†æ˜¯start_urlsä¸­çš„urlåœ°å€æ²¡æœ‰è¿™ä¸ªé™åˆ¶

<br>
å¯åŠ¨çˆ¬è™«çš„æ—¶å€™æ³¨æ„å¯åŠ¨çš„ä½ç½®ï¼Œæ˜¯åœ¨é¡¹ç›®è·¯å¾„ä¸‹å¯åŠ¨

<br><br>
<br>
ROBOTSTXT_OBEY = False
robotsæ˜¯ä¸€ç§åçˆ¬åè®®ã€‚åœ¨åè®®ä¸­è§„å®šäº†å“ªäº›èº«ä»½çš„çˆ¬è™«æ— æ³•çˆ¬å–çš„èµ„æºæœ‰å“ªäº›ã€‚
åœ¨é…ç½®æ–‡ä»¶ä¸­settingï¼Œå–æ¶ˆrobotsçš„ç›‘æµ‹ï¼š

<br>
åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®å…¨å±€çš„UAï¼šUSER_AGENT='xxxx'

<br>
åœ¨é…ç½®æ–‡ä»¶ä¸­åŠ å…¥æ—¥å¿—ç­‰çº§ï¼šLOG_LEVEL = 'ERROR'  åªè¾“å‡ºé”™è¯¯ä¿¡æ¯
å…¶å®ƒæ—¥å¿—çº§åˆ«

<br>CRITICAL  ä¸¥é‡é”™è¯¯
<br>ERROR  é”™è¯¯
<br>WARNING  è­¦å‘Š
<br>INFO  æ¶ˆæ¯
<br>DEBUG   è°ƒè¯•


<br>ä»£ç å®ä¾‹<br>Python # Scrapy settings for mySpider project
 USER_AGENT = 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.127 Safari/537.36'
 
 ROBOTSTXT_OBEY = False
 
 LOG_LEVEL = 'ERROR'
å¤åˆ¶<br><br><br>
<br>
ä»£ç é…ç½®
/myspider/myspider/spiders/ITSpider.py
Python class ITSpider(scrapy.Spider):
     name = 'ITSpider'
     # allowed_domains = ['www.xxx.com']
     start_urls = ['https://duanzixing.com/page/2/']
 
     # é€šè¿‡ç»ˆç«¯å†™å…¥æ–‡ä»¶çš„æ–¹å¼
     def parse(self, response):
         article_list = response.xpath('/html/body/section/div/div/article')
         # åˆ›å»ºåˆ—è¡¨ï¼Œ å­˜å‚¨æ•°æ®
         all_data = []
         for article in article_list:
             title = article.xpath('./header/h2/a/text()').extract_first()
             con = article.xpath('./p[2]/text()').extract_first()
             dic = {
                 'title': title,
                 'con': con
             }
             all_data.append(dic)
         return all_data
å¤åˆ¶

<br>
ç»ˆç«¯å‘½ä»¤
scrapy crawl ITSpider -o ITSpider.csv  
å°†æ–‡ä»¶å­˜å‚¨åˆ°ITSpider.csv  æ–‡ä»¶ä¸­

<br><br>å…ˆè·Ÿç€é…ç½® åé¢ä¼šå•è®²<br>ä»£ç é…ç½®<br>
<br>
æ‰“å¼€items.pyæ–‡ä»¶ æ·»åŠ å¦‚ä¸‹ä»£ç 
myspider/myspider/items.py
Python import scrapy
 
 
 class MyspiderItem(scrapy.Item):
     # define the fields for your item here like:
     # name = scrapy.Field()
     title = scrapy.Field()
     con = scrapy.Field()
å¤åˆ¶

<br>
/myspider/myspider/spiders/ITSpider.py
Python import scrapy
 from myspider.items import MyspiderItem
 
 class ITSpiderSpider(scrapy.Spider):
     name = 'ITSpider'
     # allowed_domains = ['www.xxx.com']
     start_urls = ['https://duanzixing.com/page/2/']
 
     # å†™å…¥ç®¡é“ æŒä¹…åŒ–å­˜å‚¨
     def parse(self, response):
         article_list = response.xpath('/html/body/section/div/div/article')
         for article in article_list:
             title = article.xpath('./header/h2/a/text()').extract_first()
             con = article.xpath('./p[2]/text()').extract_first()
             item = DuanziproItem()
             item['title'] = title
             item['con'] = con
             yield item
å¤åˆ¶
åœ¨çˆ¬è™«æ–‡ä»¶ITSpider.pyä¸­parse()å‡½æ•°ä¸­æœ€åæ·»åŠ 
Python yield item
å¤åˆ¶
æ€è€ƒï¼šä¸ºä»€ä¹ˆè¦ä½¿ç”¨yieldï¼Ÿ

<br>è®©æ•´ä¸ªå‡½æ•°å˜æˆä¸€ä¸ªç”Ÿæˆå™¨ï¼Œæœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿ
<br>éå†è¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼çš„æ—¶å€™ï¼ŒæŒ¨ä¸ªæŠŠæ•°æ®è¯»åˆ°å†…å­˜ï¼Œä¸ä¼šé€ æˆå†…å­˜çš„ç¬é—´å ç”¨è¿‡é«˜
<br>python3ä¸­çš„rangeå’Œpython2ä¸­çš„xrangeåŒç†

æ³¨æ„ï¼šyieldèƒ½å¤Ÿä¼ é€’çš„å¯¹è±¡åªèƒ½æ˜¯ï¼šBaseItem,Request,dict,None

<br>
æ‰“å¼€ç®¡é“æ–‡ä»¶ pipelines.py  æ·»åŠ å¦‚ä¸‹ä»£ç  
myspider/myspider/pipelines.py
 class ITSpiderPipeline:
     f = None
     def open_spider(self, spider):
         print('çˆ¬è™«å¼€å§‹æ—¶è¢«è°ƒç”¨ä¸€æ¬¡')
         self.f = open('./duanzi.text', 'w')
         
     # çˆ¬è™«æ–‡ä»¶ä¸­æå–æ•°æ®çš„æ–¹æ³•æ¯yieldä¸€æ¬¡itemï¼Œå°±ä¼šè¿è¡Œä¸€æ¬¡
     # è¯¥æ–¹æ³•ä¸ºå›ºå®šåç§°å‡½æ•°
     def process_item(self, item, spider):
         print(item)
         self.f.write(item['title']+item['con']+'\n')
         return item
 
     def close_spider(self, spider):
         print('çˆ¬è™«ç»“æŸæ—¶è¢«è°ƒç”¨')
         self.f.close()
å¤åˆ¶

<br>
open_spideræ–¹æ³•
é‡å†™çˆ¶ç±»ä¸­open_spideræ–¹æ³•  åªæœ‰çˆ¬è™«å¼€å§‹åè¢«è°ƒç”¨ä¸€æ¬¡

<br>
close_spider æ–¹æ³•
é‡å†™çˆ¶ç±»ä¸­lose_spideræ–¹æ³•  çˆ¬è™«ç»“æŸæ—¶è¢«è°ƒç”¨ä¸€æ¬¡



<br>
åœ¨settings.pyè®¾ç½®å¼€å¯pipeline
å°†é»˜è®¤è¢«æ³¨é‡Šçš„ç®¡é“æ‰“å¼€
 ITEM_PIPELINES = {
    'myspider.pipelines.MyspiderPipeline': 300,
 }
å¤åˆ¶
å…¶ä¸­æ•°å€¼ä»£è¡¨ä¼˜å…ˆçº§  æ•°å€¼è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜

<br><br>å‘½ä»¤ï¼šåœ¨é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œscrapy crawl +&lt;çˆ¬è™«åå­—&gt;<br>ç¤ºä¾‹ï¼šscrapy crawl ITSpider<br><br>
<br>srapyçš„å®‰è£…ï¼špip install scrapy
<br>åˆ›å»ºscrapyçš„é¡¹ç›®: scrapy startproject myspider
<br>åˆ›å»ºscrapyçˆ¬è™«ï¼šåœ¨é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œ scrapy genspider ITSpider <a class="internal-link" data-href="www.xxx.cn" href="\www.xxx.cn" target="_self" rel="noopener">www.xxx.cn</a>
<br>è¿è¡Œscrapyçˆ¬è™«ï¼šåœ¨é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œ scrapy crawl ITSpider
<br>è§£æå¹¶è·å–scrapyçˆ¬è™«ä¸­çš„æ•°æ®ï¼š

<br>response.xpathæ–¹æ³•çš„è¿”å›ç»“æœæ˜¯ä¸€ä¸ªç±»ä¼¼listçš„ç±»å‹ï¼Œå…¶ä¸­åŒ…å«çš„æ˜¯selectorå¯¹è±¡ï¼Œæ“ä½œå’Œåˆ—è¡¨ä¸€æ ·ï¼Œä½†æ˜¯æœ‰ä¸€äº›é¢å¤–çš„æ–¹æ³•
<br>extract() è¿”å›ä¸€ä¸ªåŒ…å«æœ‰å­—ç¬¦ä¸²çš„åˆ—è¡¨
<br>extract_first() è¿”å›åˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œåˆ—è¡¨ä¸ºç©ºæ²¡æœ‰è¿”å›None


<br>scrapyç®¡é“çš„åŸºæœ¬ä½¿ç”¨:

<br>å®Œå–„pipelines.pyä¸­çš„process_itemå‡½æ•°
<br>åœ¨settings.pyä¸­è®¾ç½®å¼€å¯pipeline


]]></description><link>çˆ¬è™«\çˆ¬è™«æ–‡æ¡£\Scrapy01-æ¡†æ¶åˆè®¤è¯†.html</link><guid isPermaLink="false">çˆ¬è™«/çˆ¬è™«æ–‡æ¡£/Scrapy01-æ¡†æ¶åˆè®¤è¯†.md</guid><pubDate>Mon, 16 Oct 2023 15:10:16 GMT</pubDate></item><item><title><![CDATA[Scrapyæ·±å…¥ä½¿ç”¨-å­˜å‚¨]]></title><description><![CDATA[<a class="tag" href="?query=tag:scrapy" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#scrapy</a> <a class="tag" href="?query=tag:æ¡†æ¶" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#æ¡†æ¶</a> <a class="tag" href="?query=tag:sql" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#sql</a> <a class="tag" href="?query=tag:MGdb" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#MGdb</a> 
 <br><br><a href=".?query=tag:scrapy" class="tag" target="_blank" rel="noopener">#scrapy</a> <a href=".?query=tag:æ¡†æ¶" class="tag" target="_blank" rel="noopener">#æ¡†æ¶</a><br><br><br>
<br>äº†è§£ scrapy debugä¿¡æ¯
<br>äº†è§£ scrapy shellçš„ä½¿ç”¨
<br>æŒæ¡ scrapyçš„settings.pyè®¾ç½®
<br>æŒæ¡ scrapyç®¡é“(pipelines.py)çš„ä½¿ç”¨
<br>æŒæ¡scrapyä¸‹è½½å›¾ç‰‡
<br><br><br>â€œScrapy02-å­˜å‚¨.assets/scrapy_debug.pngâ€ could not be found.<br><br>scrapy shellæ˜¯scrapyæä¾›çš„ä¸€ä¸ªç»ˆç«¯å·¥å…·ï¼Œèƒ½å¤Ÿé€šè¿‡å®ƒæŸ¥çœ‹scrapyä¸­å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ï¼Œä»¥åŠæµ‹è¯•xpath<br>ä½¿ç”¨æ–¹æ³•ï¼š<br>Linuxscrapy shell http://www.baidu.com
å¤åˆ¶<br>åœ¨ç»ˆç«¯è¾“å…¥ä¸Šè¿°å‘½ä»¤åï¼Œèƒ½å¤Ÿè¿›å…¥pythonçš„äº¤äº’å¼ç»ˆç«¯ï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨ï¼š<br>
<br>response.xpath()ï¼šç›´æ¥æµ‹è¯•xpathè§„åˆ™æ˜¯å¦æ­£ç¡®
<br>response.urlï¼šå½“å‰å“åº”çš„urlåœ°å€
<br>response.request.urlï¼šå½“å‰å“åº”å¯¹åº”çš„è¯·æ±‚çš„urlåœ°å€
<br>response.headersï¼šå“åº”å¤´
<br>response.bodyï¼šå“åº”ä½“ï¼Œä¹Ÿå°±æ˜¯htmlä»£ç ï¼Œé»˜è®¤æ˜¯byteç±»å‹
<br>response.request.headersï¼šå½“å‰å“åº”çš„è¯·æ±‚å¤´
<br><br><br>åœ¨é…ç½®æ–‡ä»¶ä¸­å­˜æ”¾ä¸€äº›å…¬å…±å˜é‡ï¼Œåœ¨åç»­çš„é¡¹ç›®ä¸­æ–¹ä¾¿ä¿®æ”¹ï¼Œå¦‚ï¼šæœ¬åœ°æµ‹è¯•æ•°æ®åº“å’Œéƒ¨ç½²æœåŠ¡å™¨çš„æ•°æ®åº“ä¸ä¸€è‡´<br><br>
<br>å˜é‡åä¸€èˆ¬å…¨éƒ¨å¤§å†™
<br>å¯¼å…¥å³å¯ä½¿ç”¨
<br><br>
<br>
USER_AGENT è®¾ç½®ua

<br>
ROBOTSTXT_OBEY æ˜¯å¦éµå®ˆrobotsåè®®ï¼Œé»˜è®¤æ˜¯éµå®ˆ

<br>
CONCURRENT_REQUESTS è®¾ç½®å¹¶å‘è¯·æ±‚çš„æ•°é‡ï¼Œé»˜è®¤æ˜¯16ä¸ª

<br>
DOWNLOAD_DELAY ä¸‹è½½å»¶è¿Ÿï¼Œé»˜è®¤æ— å»¶è¿Ÿ ï¼ˆä¸‹è½½å™¨åœ¨ä»åŒä¸€ç½‘ç«™ä¸‹è½½è¿ç»­é¡µé¢ä¹‹å‰åº”ç­‰å¾…çš„æ—¶é—´ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ã€‚è¿™å¯ä»¥ç”¨æ¥é™åˆ¶çˆ¬è¡Œé€Ÿåº¦ï¼Œä»¥é¿å…å¯¹æœåŠ¡å™¨é€ æˆå¤ªå¤§å½±å“ï¼‰

<br>
COOKIES_ENABLED æ˜¯å¦å¼€å¯cookieï¼Œå³æ¯æ¬¡è¯·æ±‚å¸¦ä¸Šå‰ä¸€æ¬¡çš„cookieï¼Œé»˜è®¤æ˜¯å¼€å¯çš„

<br>
DEFAULT_REQUEST_HEADERS è®¾ç½®é»˜è®¤è¯·æ±‚å¤´ï¼Œè¿™é‡ŒåŠ å…¥äº†USER_AGENTå°†ä¸èµ·ä½œç”¨

<br>
SPIDER_MIDDLEWARES çˆ¬è™«ä¸­é—´ä»¶ï¼Œè®¾ç½®è¿‡ç¨‹å’Œç®¡é“ç›¸åŒ

<br>
DOWNLOADER_MIDDLEWARES ä¸‹è½½ä¸­é—´ä»¶

<br>
LOG_LEVEL æ§åˆ¶ç»ˆç«¯è¾“å‡ºä¿¡æ¯çš„logçº§åˆ«ï¼Œç»ˆç«¯é»˜è®¤æ˜¾ç¤ºçš„æ˜¯debugçº§åˆ«çš„logä¿¡æ¯

<br>LOG_LEVEL = "WARNING"

<br>CRITICAL  ä¸¥é‡
<br>ERROR  é”™è¯¯
<br>WARNING  è­¦å‘Š
<br>INFO  æ¶ˆæ¯
<br>DEBUG   è°ƒè¯•




<br>
LOG_FILE è®¾ç½®logæ—¥å¿—æ–‡ä»¶çš„ä¿å­˜è·¯å¾„ï¼Œå¦‚æœè®¾ç½®è¯¥å‚æ•°ï¼Œç»ˆç«¯å°†ä¸å†æ˜¾ç¤ºä¿¡æ¯
LOG_FILE = "./test.log"

<br>
å…¶ä»–è®¾ç½®å‚è€ƒï¼š<a rel="noopener" class="external-link" href="https://www.jianshu.com/p/df9c0d1e9087" target="_blank">https://www.jianshu.com/p/df9c0d1e9087</a>

<br><br>
ä¹‹å‰æˆ‘ä»¬åœ¨scrapyå…¥é—¨ä½¿ç”¨ä¸€èŠ‚ä¸­å­¦ä¹ äº†ç®¡é“çš„åŸºæœ¬ä½¿ç”¨ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ·±å…¥çš„å­¦ä¹ scrapyç®¡é“çš„ä½¿ç”¨
<br><br>
<br>
ä»£ç é…ç½®
/myspider/myspider/spiders/ITSpider.py
Pythonclass ITSpider(scrapy.Spider):
    name = 'ITSpider'
    # allowed_domains = ['www.xxx.com']
    start_urls = ['https://duanzixing.com/page/1/']

    # é€šè¿‡ç»ˆç«¯å†™å…¥æ–‡ä»¶çš„æ–¹å¼
    def parse(self, response):
        article_list = response.xpath('/html/body/section/div/div/article')
        # åˆ›å»ºåˆ—è¡¨ï¼Œ å­˜å‚¨æ•°æ®
        all_data = []
        for article in article_list:
            title = article.xpath('./header/h2/a/text()').extract_first()
            con = article.xpath('./p[2]/text()').extract_first()
            dic = {
                'title': title,
                'con': con
            }
            all_data.append(dic)
        return all_data
å¤åˆ¶

<br>
ç»ˆç«¯å‘½ä»¤
scrapy crawl çˆ¬è™«åç§°-o æ–‡ä»¶å.csv  
scrapy crawl ITSpider -o ITSpider.csv  
å°†æ–‡ä»¶å­˜å‚¨åˆ°ITSpider.csv  æ–‡ä»¶ä¸­

<br><br><br><br>
<br>
scrapy startproject doubanfile

<br>
cd doubanfile

<br>
scrapy genspider db movie.douban.com/chart

<br><br>æŠ“å–ï¼š<br>
<br>å°é¢
<br>ç”µå½±åç§°
<br>ä¸»æ¼”
<br><br>LOG_LEVEL = 'ERROR'
ROBOTSTXT_OBEY = False
å¤åˆ¶<br><br>å…ˆæŠ“å–æ¯ä¸€è¡Œæ•°æ®çš„tråˆ—è¡¨<br>Pythonimport scrapy


class DbSpider(scrapy.Spider):
    name = 'db'
    allowed_domains = ['https://movie.douban.com/chart']
    start_urls = ['https://movie.douban.com/chart']

    def parse(self, resp, **kwargs):
        print(resp.text)
        # å…ˆè·å–åˆ°æ¯ä¸€è¡Œæ•°æ®çš„tr
        tr_list = resp.xpath('//div[@class="indent"]/div/table/tr[@class="item"]')
        print(tr_list)
å¤åˆ¶<br>æ­¤åˆ»è¿è¡Œæ‰“å°<br>srapy crawl db<br>å‘ç°æ— ä»»ä½•æ‰“å°ï¼Œå°†LOG_LEVEL = 'ERROR' æ›´æ”¹ä¸º INFO  ï¼Œå‘ç°æ­¤åˆ»è¯·æ±‚æ²¡æœ‰æƒé™<br>â€œScrapy02-å­˜å‚¨.assets/image-20220907143413102.pngâ€ could not be found.<br>å‘ç°é—®é¢˜æ‰€åœ¨åä¿®æ”¹settings.py<br>åœ¨é»˜è®¤è¯·æ±‚å¤´DEFAULT_REQUEST_HEADERSä¸­æ·»åŠ User-Agent<br>PythonDEFAULT_REQUEST_HEADERS = {
  'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
  'Accept-Language': 'en',
  'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36'
}
å¤åˆ¶<br>å†æ¬¡è¯·æ±‚ï¼ŒæˆåŠŸ<br><br>Pythonimport scrapy
import re

class DbSpider(scrapy.Spider):
    name = 'db'
    allowed_domains = ['https://movie.douban.com/chart']
    start_urls = ['https://movie.douban.com/chart']

    def parse(self, resp, **kwargs):
        # print(resp.text)
        # å…ˆè·å–åˆ°æ¯ä¸€è¡Œæ•°æ®çš„tr
        tr_list = resp.xpath('//div[@class="indent"]/div/table/tr[@class="item"]')
        for tr in tr_list:
            # è·å–å°é¢
            img_src = tr.xpath('./td[1]/a/img/@src').extract_first()
            # ç”µå½±åç§°
            name = tr.xpath('./td[2]/div[@class="pl2"]/a//text()').extract_first()
            # å»é™¤ç©ºç™½å­—ç¬¦ä½¿ç”¨replaceæ›¿æ¢
            # name = name.replace('\n', '').replace('\r', '').replace('/', '').replace(' ', '')
            # å»é™¤ç©ºç™½å­—ç¬¦ä½¿ç”¨æ­£åˆ™æ›¿æ¢
            name = re.sub('(/)|(\s)', '', name)
            # ä¸»æ¼”
            to_star = tr.xpath('./td[2]/div[@class="pl2"]/p[@class="pl"]/text()').extract_first()
å¤åˆ¶<br><br>æ·»åŠ å¦‚ä¸‹ä»£ç <br>å±æ€§åç§°å’Œå½“å‰çˆ¬è™«db.pyä¸­æŠ“åˆ°è¦å­˜å‚¨æ•°æ®çš„å˜é‡ä¸€è‡´ å¦åˆ™æŠ¥é”™<br>Pythonimport scrapy


class DoubanfileItem(scrapy.Item):
    # define the fields for your item here like:
    # name = scrapy.Field()
    img_src = scrapy.Field()
    name = scrapy.Field()
    to_star = scrapy.Field()
å¤åˆ¶<br><br>Pythonimport scrapy
import re
from doubanfile.items import DoubanfileItem

class DbSpider(scrapy.Spider):
    name = 'db'
    allowed_domains = ['https://movie.douban.com/chart']
    start_urls = ['https://movie.douban.com/chart']

    def parse(self, resp, **kwargs):
        item = DoubanfileItem()  # å®ä¾‹åŒ–itemç±»
        # print(resp.text)
        # å…ˆè·å–åˆ°æ¯ä¸€è¡Œæ•°æ®çš„tr
        tr_list = resp.xpath('//div[@class="indent"]/div/table/tr[@class="item"]')
        for tr in tr_list:
            # è·å–å°é¢
            item['img_src'] = tr.xpath('./td[1]/a/img/@src').extract_first()
            # ç”µå½±åç§°
            name = tr.xpath('./td[2]/div[@class="pl2"]/a//text()').extract_first()
            # å»é™¤ç©ºç™½å­—ç¬¦ä½¿ç”¨replaceæ›¿æ¢
            # name = name.replace('\n', '').replace('\r', '').replace('/', '').replace(' ', '')
            # å»é™¤ç©ºç™½å­—ç¬¦ä½¿ç”¨æ­£åˆ™æ›¿æ¢
            item['name'] = re.sub('(/)|(\s)', '', name)
            # ä¸»æ¼”
            item['to_star'] = tr.xpath('./td[2]/div[@class="pl2"]/p[@class="pl"]/text()').extract_first()
            yield item
å¤åˆ¶<br>æ€è€ƒï¼šä¸ºä»€ä¹ˆè¦ä½¿ç”¨yieldï¼Ÿ<br>
<br>è®©æ•´ä¸ªå‡½æ•°å˜æˆä¸€ä¸ªç”Ÿæˆå™¨ï¼Œæœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿ
<br>éå†è¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼çš„æ—¶å€™ï¼ŒæŒ¨ä¸ªæŠŠæ•°æ®è¯»åˆ°å†…å­˜ï¼Œä¸ä¼šé€ æˆå†…å­˜çš„ç¬é—´å ç”¨è¿‡é«˜
<br>python3ä¸­çš„rangeå’Œpython2ä¸­çš„xrangeåŒç†
<br>æ³¨æ„ï¼šyieldèƒ½å¤Ÿä¼ é€’çš„å¯¹è±¡åªèƒ½æ˜¯ï¼šBaseItem,Request,dict,None<br><br>pipelineä¸­å¸¸ç”¨çš„æ–¹æ³•ï¼š<br>
<br>process_item(self,item,spider):å®ç°å¯¹itemæ•°æ®çš„å¤„ç†
<br>open_spider(self, spider): åœ¨çˆ¬è™«å¼€å¯çš„æ—¶å€™ä»…æ‰§è¡Œä¸€æ¬¡
<br>close_spider(self, spider): åœ¨çˆ¬è™«å…³é—­çš„æ—¶å€™ä»…æ‰§è¡Œä¸€æ¬¡
<br>settings.py æ‰“å¼€å½“å‰æ³¨é‡Š<br>PythonITEM_PIPELINES = {
   'doubanfile.pipelines.DoubanfilePipeline': 300,
}
å¤åˆ¶<br><br>Pythonclass DoubanfilePipeline:
    f = None
    def open_spider(self, item):
        self.f = open('./db.text', 'w')
    def process_item(self, item, spider):
        print(item)
        self.f.write(item['img_src']+'\n')
        self.f.write(item['name']+'\n')
        self.f.write(item['to_star']+'\n')
        return item

    def close_spider(self, item):
        self.f.close()
å¤åˆ¶<br>æ³¨æ„ï¼š<br>å½“å‰process_itemä¸­çš„return itemå¿…é¡»å­˜åœ¨ï¼Œå¦‚æœå½“å‰çˆ¬è™«å­˜åœ¨äºå¤šä¸ªç®¡é“çš„æ—¶å€™ï¼Œå¦‚æœæ²¡æœ‰return item åˆ™ä¸‹ä¸€ä¸ªç®¡é“ä¸èƒ½è·å–åˆ°å½“å‰çš„itemæ•°æ®<br><br><a href=".?query=tag:sql" class="tag" target="_blank" rel="noopener">#sql</a> <br><br><br>
<br>
scrapy startproject doubanmysql

<br>
cd doubanmysql

<br>
scrapy genspider db movie.douban.com/chart

<br><br>æŠ“å–ï¼š<br>
<br>å°é¢
<br>ç”µå½±åç§°
<br>ä¸»æ¼”
<br><br>Python# è®¾ç½®æ—¥å¿—çº§åˆ«
LOG_LEVEL = 'ERROR'
ROBOTSTXT_OBEY = False
# è®¾ç½®è¯·æ±‚å¤´
DEFAULT_REQUEST_HEADERS = {
  'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
  'Accept-Language': 'en',
  'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36'
}
# å¼€å¯ç®¡é“
ITEM_PIPELINES = {
   'doubanmysql.pipelines.DoubanmysqlPipeline': 300,
}
å¤åˆ¶<br><br>Sqlcreate database douban character set utf8;
use douban
CREATE TABLE `douban` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `img_src` varchar(200) NOT NULL COMMENT 'å°é¢åœ°å€',
  `name` varchar(50) NOT NULL COMMENT 'ç”µå½±åç§°',
  `to_star` varchar(250) NOT NULL COMMENT 'ä¸»æ¼”',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8
å¤åˆ¶<br>ç¤ºä¾‹SQLè¯­å¥<br>Pythoninsert into info(img_src, name, to_star) values("https://img9.doubanio.com/view/photo/s_ratio_poster/public/p2673202034.webp", "å°¼ç½—æ²³ä¸Šçš„æƒ¨æ¡ˆ Death on the Nile", "è‚¯å°¼æ€Â·å¸ƒæ‹‰çº³", "è¿ˆå…‹å°”Â·æ ¼æ— / é˜¿åŠ èÂ·å…‹é‡Œæ–¯è’‚", "è‚¯å°¼æ€Â·å¸ƒæ‹‰çº³è‰¾ç›Â·éº¦åŸº/è‰¾ç±³Â·æ±‰è«/çå¦®å¼—Â·æ¡‘å¾·æ–¯/è‹è²Â·å¥¥åº·å†…å¤š/å®‰å¦®ç‰¹Â·è´å®/å¦®åŸºå¡”Â·æŸ¥è¾¾å“ˆ/æ±¤å§†Â·å·´ç‰¹æ›¼/äºšå½“Â·åŠ è¥¿äºš/æ±‰/çˆ±å¾·åÂ·åˆ˜æ˜“æ–¯Â·å¼—ä¼¦å¥‡/æ‹‰æ™®æ´›æ–¯Â·å¡ä¼¦ç¦ä½æ–¯")
å¤åˆ¶<br><br>Pythonimport scrapy


class DoubanmysqlItem(scrapy.Item):
    # define the fields for your item here like:
    # name = scrapy.Field()
    img_src = scrapy.Field()
    name = scrapy.Field()
    to_star = scrapy.Field()
å¤åˆ¶<br><br>Pythonimport scrapy
from doubanmysql.items import DoubanmysqlItem
import re

class DbSpider(scrapy.Spider):
    name = 'db'
    allowed_domains = ['movie.douban.com/chart']
    start_urls = ['http://movie.douban.com/chart/']

    def parse(self, resp, **kwargs):
        item = DoubanmysqlItem()  # å®ä¾‹åŒ–itemç±»
        # print(resp.text)
        # å…ˆè·å–åˆ°æ¯ä¸€è¡Œæ•°æ®çš„tr
        tr_list = resp.xpath('//div[@class="indent"]/div/table/tr[@class="item"]')
        for tr in tr_list:
            # è·å–å°é¢
            item['img_src'] = tr.xpath('./td[1]/a/img/@src').extract_first()
            # ç”µå½±åç§°
            name = tr.xpath('./td[2]/div[@class="pl2"]/a//text()').extract_first()
            # å»é™¤ç©ºç™½å­—ç¬¦ä½¿ç”¨replaceæ›¿æ¢
            # name = name.replace('\n', '').replace('\r', '').replace('/', '').replace(' ', '')
            # å»é™¤ç©ºç™½å­—ç¬¦ä½¿ç”¨æ­£åˆ™æ›¿æ¢
            item['name'] = re.sub('(/)|(\s)', '', name)
            # ä¸»æ¼”
            item['to_star'] = tr.xpath('./td[2]/div[@class="pl2"]/p[@class="pl"]/text()').extract_first()
            yield item
å¤åˆ¶<br><br>Pythonfrom itemadapter import ItemAdapter
import pymysql

class DoubanmysqlPipeline:
    db = None
    cursor = None
    def open_spider(self, spider):
        # åˆ¤æ–­å½“å‰è¿è¡Œçš„æ˜¯å¦ä¸ºdbçˆ¬è™«ï¼Œä¸æ˜¯dbçˆ¬è™«åˆ™ä¸‹é¢ä»£ç ä¸æ‰§è¡Œ
        # å½“å‰ä»…é™äºä¸€ä¸ªscrapyä¸‹æœ‰å¤šä¸ªçˆ¬è™«å·¥ç¨‹
        if spider.name == 'db':
            self.db = pymysql.connect(host='127.0.0.1', port=3306, db='douban', user='root', passwd='123456', charset='utf8')
            self.cursor = self.db.cursor()

    def process_item(self, item, spider):
        # åˆ¤æ–­å½“å‰è¿è¡Œçš„æ˜¯å¦ä¸ºdbçˆ¬è™«
        if spider.name == 'db':
            try:
                sql = f'insert into douban(img_src, name, to_star) values("{item["img_src"]}", "{item["name"]}", "{item["to_star"]}")'
                self.cursor.execute(sql)
                self.db.commit()
            except Exception as e:
                print(e)
                print(sql)
                self.db.rollback()
				return item
    def close_spider(self, item):
        # å…³é—­æ•°æ®åº“è¿æ¥
        self.db.close()
å¤åˆ¶<br><br>scrapy crawl db<br>æŸ¥çœ‹ç»ˆç«¯æ•°æ®æ˜¯å¦æœ‰æŠ¥é”™ï¼Œå¦‚æœæ²¡æœ‰æŠ¥é”™æŸ¥çœ‹æ•°æ®åº“æ•°æ®æ˜¯å¦å­˜å‚¨æˆåŠŸ<br>â€œScrapy02-å­˜å‚¨.assets/image-20220907153347418.pngâ€ could not be found.<br><br><a href=".?query=tag:MGdb" class="tag" target="_blank" rel="noopener">#MGdb</a> <br><br><br>
<br>
scrapy startproject doubanmongodb

<br>
cd doubanmongodb

<br>
scrapy genspider db movie.douban.com/chart

<br><br>æŠ“å–ï¼š<br>
<br>å°é¢
<br>ç”µå½±åç§°
<br>ä¸»æ¼”
<br><br>Python# è®¾ç½®æ—¥å¿—çº§åˆ«
LOG_LEVEL = 'ERROR'
ROBOTSTXT_OBEY = False
# è®¾ç½®è¯·æ±‚å¤´
DEFAULT_REQUEST_HEADERS = {
  'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
  'Accept-Language': 'en',
  'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36'
}
# å¼€å¯ç®¡é“
ITEM_PIPELINES = {
   'doubanmongodb.pipelines.DoubanmongodbPipeline': 300,
}
å¤åˆ¶<br><br>Pythonimport scrapy


class DoubanmongodbItem(scrapy.Item):
    # define the fields for your item here like:
    # name = scrapy.Field()
    img_src = scrapy.Field()
    name = scrapy.Field()
    to_star = scrapy.Field()
å¤åˆ¶<br><br>Pythonimport scrapy
from doubanmongodb.items import DoubanmongodbItem
import re


class DbSpider(scrapy.Spider):
    name = 'db'
    allowed_domains = ['movie.douban.com/chart']
    start_urls = ['http://movie.douban.com/chart/']

    def parse(self, resp, **kwargs):
        item = DoubanmongodbItem()  # å®ä¾‹åŒ–itemç±»
        # print(resp.text)
        # å…ˆè·å–åˆ°æ¯ä¸€è¡Œæ•°æ®çš„tr
        tr_list = resp.xpath('//div[@class="indent"]/div/table/tr[@class="item"]')
        for tr in tr_list:
            # è·å–å°é¢
            item['img_src'] = tr.xpath('./td[1]/a/img/@src').extract_first()
            # ç”µå½±åç§°
            name = tr.xpath('./td[2]/div[@class="pl2"]/a//text()').extract_first()
            # å»é™¤ç©ºç™½å­—ç¬¦ä½¿ç”¨replaceæ›¿æ¢
            # name = name.replace('\n', '').replace('\r', '').replace('/', '').replace(' ', '')
            # å»é™¤ç©ºç™½å­—ç¬¦ä½¿ç”¨æ­£åˆ™æ›¿æ¢
            item['name'] = re.sub('(/)|(\s)', '', name)
            # ä¸»æ¼”
            item['to_star'] = tr.xpath('./td[2]/div[@class="pl2"]/p[@class="pl"]/text()').extract_first()
            yield item
å¤åˆ¶<br><br>Pythonfrom itemadapter import ItemAdapter
from pymongo import MongoClient

class DoubanmongodbPipeline:
    con = None
    collection = None
    def open_spider(self, spider):  # åœ¨çˆ¬è™«å¼€å¯çš„æ—¶å€™ä»…æ‰§è¡Œä¸€æ¬¡
        if spider.name == 'db':
            self.con = MongoClient(host='127.0.0.1', port=27017) # å®ä¾‹åŒ–mongoclient
            self.collection = self.con.spider.douban  # åˆ›å»ºæ•°æ®åº“åä¸ºspider,é›†åˆåä¸ºdoubançš„é›†åˆæ“ä½œå¯¹è±¡

    def process_item(self, item, spider):
        if spider.name == 'db':
            # print(spider.name)
            self.collection.insert_one(dict(item)) # æ­¤æ—¶itemå¯¹è±¡éœ€è¦å…ˆè½¬æ¢ä¸ºå­—å…¸,å†æ’å…¥
        # ä¸returnçš„æƒ…å†µä¸‹ï¼Œå¦ä¸€ä¸ªæƒé‡è¾ƒä½çš„pipelineå°†ä¸ä¼šè·å¾—item
        return item

    def close_spider(self, item):
        # å…³é—­æ•°æ®åº“è¿æ¥
        self.con.close()
å¤åˆ¶<br>æ³¨æ„ï¼š<br>éœ€è¦å¼€å¯mongoæœåŠ¡<br>mongod.exe  --dbpath=C:/User/xxx/db<br>æ–°å¼€ç»ˆç«¯<br>mongo.exe<br><br>scrapy crawl db<br>æŸ¥çœ‹ç»ˆç«¯æ•°æ®æ˜¯å¦æœ‰æŠ¥é”™ï¼Œå¦‚æœæ²¡æœ‰æŠ¥é”™æŸ¥çœ‹æ•°æ®åº“æ•°æ®æ˜¯å¦å­˜å‚¨æˆåŠŸ<br>â€œScrapy02-å­˜å‚¨.assets/image-20220907154832959.pngâ€ could not be found.<br><br><br><br>
<br>
scrapy startproject douban

<br>
cd douban

<br>
scrapy genspider db movie.douban.com/chart

<br><br>æŠ“å–ï¼š<br>
<br>å°é¢
<br>ç”µå½±åç§°
<br>ä¸»æ¼”
<br><br>Python# è®¾ç½®æ—¥å¿—çº§åˆ«
LOG_LEVEL = 'ERROR'
ROBOTSTXT_OBEY = False
# è®¾ç½®è¯·æ±‚å¤´
DEFAULT_REQUEST_HEADERS = {
  'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
  'Accept-Language': 'en',
  'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36'
}
# å¼€å¯ç®¡é“
ITEM_PIPELINES = {
   'douban.pipelines.DoubanPipeline': 300,
}
å¤åˆ¶<br><br>Pythonimport scrapy


class DoubanItem(scrapy.Item):
    # define the fields for your item here like:
    # name = scrapy.Field()
    img_src = scrapy.Field()
    name = scrapy.Field()
    to_star = scrapy.Field()
å¤åˆ¶<br><br>Pythonimport scrapy
from douban.items import DoubanItem
import re


class DbSpider(scrapy.Spider):
    name = 'db'
    allowed_domains = ['movie.douban.com/chart']
    start_urls = ['http://movie.douban.com/chart/']

    def parse(self, resp, **kwargs):
        item = DoubanItem()  # å®ä¾‹åŒ–itemç±»
        # print(resp.text)
        # å…ˆè·å–åˆ°æ¯ä¸€è¡Œæ•°æ®çš„tr
        tr_list = resp.xpath('//div[@class="indent"]/div/table/tr[@class="item"]')
        for tr in tr_list:
            # è·å–å°é¢
            item['img_src'] = tr.xpath('./td[1]/a/img/@src').extract_first()
            # ç”µå½±åç§°
            name = tr.xpath('./td[2]/div[@class="pl2"]/a//text()').extract_first()
            # å»é™¤ç©ºç™½å­—ç¬¦ä½¿ç”¨replaceæ›¿æ¢
            # name = name.replace('\n', '').replace('\r', '').replace('/', '').replace(' ', '')
            # å»é™¤ç©ºç™½å­—ç¬¦ä½¿ç”¨æ­£åˆ™æ›¿æ¢
            item['name'] = re.sub('(/)|(\s)', '', name)
            # ä¸»æ¼”
            item['to_star'] = tr.xpath('./td[2]/div[@class="pl2"]/p[@class="pl"]/text()').extract_first()
            yield item
å¤åˆ¶<br><br>Python# Define your item pipelines here
#
# Don't forget to add your pipeline to the ITEM_PIPELINES setting
# See: https://docs.scrapy.org/en/latest/topics/item-pipeline.html


# useful for handling different item types with a single interface
from itemadapter import ItemAdapter
import pymysql
from pymongo import MongoClient


class DoubanFilePipeline:
    '''
    è®¾ç½®æ–‡ä»¶å­˜å‚¨
    '''
    f = None
    def open_spider(self, item):
        self.f = open('./db.text', 'w')

    def process_item(self, item, spider):
        print(item)
        self.f.write(item['img_src'] + '\n')
        self.f.write(item['name'] + '\n')
        self.f.write(item['to_star'] + '\n')
        return item

    def close_spider(self, item):
        self.f.close()

class DoubanmysqlPipeline:
    '''
    å­˜å‚¨åˆ°MySQLæ•°æ®åº“ä¸­
    '''
    db = None
    cursor = None
    def open_spider(self, spider):
        # åˆ¤æ–­å½“å‰è¿è¡Œçš„æ˜¯å¦ä¸ºdbçˆ¬è™«ï¼Œä¸æ˜¯dbçˆ¬è™«åˆ™ä¸‹é¢ä»£ç ä¸æ‰§è¡Œ
        # å½“å‰ä»…é™äºä¸€ä¸ªscrapyä¸‹æœ‰å¤šä¸ªçˆ¬è™«å·¥ç¨‹
        if spider.name == 'db':
            self.db = pymysql.connect(host='127.0.0.1', port=3306, db='douban', user='root', passwd='123456', charset='utf8')
            self.cursor = self.db.cursor()

    def process_item(self, item, spider):
        # åˆ¤æ–­å½“å‰è¿è¡Œçš„æ˜¯å¦ä¸ºdbçˆ¬è™«
        if spider.name == 'db':
            try:
                sql = f'insert into douban(img_src, name, to_star) values("{item["img_src"]}", "{item["name"]}", "{item["to_star"]}")'
                self.cursor.execute(sql)
                self.db.commit()
            except Exception as e:
                print(e)
                print(sql)
                self.db.rollback()
        return item
    def close_spider(self, item):
        # å…³é—­æ•°æ®åº“è¿æ¥
        self.db.close()


class DoubanmongodbPipeline:
    '''
    å­˜å‚¨åˆ°MongoDBæ•°æ®åº“ä¸­
    '''
    con = None
    collection = None
    def open_spider(self, spider):  # åœ¨çˆ¬è™«å¼€å¯çš„æ—¶å€™ä»…æ‰§è¡Œä¸€æ¬¡
        if spider.name == 'db':
            self.con = MongoClient(host='127.0.0.1', port=27017) # å®ä¾‹åŒ–mongoclient
            self.collection = self.con.spider.douban  # åˆ›å»ºæ•°æ®åº“åä¸ºspider,é›†åˆåä¸ºdoubançš„é›†åˆæ“ä½œå¯¹è±¡

    def process_item(self, item, spider):
        if spider.name == 'db':
            # print(spider.name)
            self.collection.insert_one(dict(item)) # æ­¤æ—¶itemå¯¹è±¡éœ€è¦å…ˆè½¬æ¢ä¸ºå­—å…¸,å†æ’å…¥
        # ä¸returnçš„æƒ…å†µä¸‹ï¼Œå¦ä¸€ä¸ªæƒé‡è¾ƒä½çš„pipelineå°†ä¸ä¼šè·å¾—item
        return item

    def close_spider(self, item):
        # å…³é—­æ•°æ®åº“è¿æ¥
        self.con.close()
å¤åˆ¶<br><br>PythonITEM_PIPELINES = {
   'douban.pipelines.DoubanFilePipeline': 300,  # 300è¡¨ç¤ºæƒé‡
   'douban.pipelines.DoubanmysqlPipeline': 400,
   'douban.pipelines.DoubanmongodbPipeline': 500,
}
å¤åˆ¶<br>æ‚¨åœ¨æ­¤è®¾ç½®ä¸­åˆ†é…ç»™ç±»çš„æ•´æ•°å€¼å†³å®šäº†å®ƒä»¬è¿è¡Œçš„é¡ºåºï¼šé¡¹ç›®ä»ä½å€¼åˆ°é«˜å€¼çš„ç±»ã€‚é€šå¸¸å°†è¿™äº›æ•°å­—å®šä¹‰åœ¨ 0-1000 èŒƒå›´å†…ã€‚<br>æ€è€ƒï¼špipelineåœ¨settingsä¸­èƒ½å¤Ÿå¼€å¯å¤šä¸ªï¼Œä¸ºä»€ä¹ˆéœ€è¦å¼€å¯å¤šä¸ªï¼Ÿ<br>
<br>ä¸åŒçš„pipelineå¯ä»¥å¤„ç†ä¸åŒçˆ¬è™«çš„æ•°æ®ï¼Œé€šè¿‡spider.nameå±æ€§æ¥åŒºåˆ†
<br>ä¸åŒçš„pipelineèƒ½å¤Ÿå¯¹ä¸€ä¸ªæˆ–å¤šä¸ªçˆ¬è™«è¿›è¡Œä¸åŒçš„æ•°æ®å¤„ç†çš„æ“ä½œï¼Œæ¯”å¦‚ä¸€ä¸ªè¿›è¡Œæ•°æ®æ¸…æ´—ï¼Œä¸€ä¸ªè¿›è¡Œæ•°æ®çš„ä¿å­˜
<br>åŒä¸€ä¸ªç®¡é“ç±»ä¹Ÿå¯ä»¥å¤„ç†ä¸åŒçˆ¬è™«çš„æ•°æ®ï¼Œé€šè¿‡spider.nameå±æ€§æ¥åŒºåˆ†
<br><br>
<br>ä½¿ç”¨ä¹‹å‰éœ€è¦åœ¨settingsä¸­å¼€å¯
<br>pipelineåœ¨settingä¸­é”®è¡¨ç¤ºä½ç½®(å³pipelineåœ¨é¡¹ç›®ä¸­çš„ä½ç½®å¯ä»¥è‡ªå®šä¹‰)ï¼Œå€¼è¡¨ç¤ºè·ç¦»å¼•æ“çš„è¿œè¿‘ï¼Œè¶Šè¿‘æ•°æ®ä¼šè¶Šå…ˆç»è¿‡
<br>æœ‰å¤šä¸ªpipelineçš„æ—¶å€™ï¼Œprocess_itemçš„æ–¹æ³•å¿…é¡»return item,å¦åˆ™åä¸€ä¸ªpipelineå–åˆ°çš„æ•°æ®ä¸ºNoneå€¼
<br>pipelineä¸­process_itemçš„æ–¹æ³•å¿…é¡»æœ‰ï¼Œå¦åˆ™itemæ²¡æœ‰åŠæ³•æ¥å—å’Œå¤„ç†
<br>process_itemæ–¹æ³•æ¥å—itemå’Œspiderï¼Œå…¶ä¸­spiderè¡¨ç¤ºå½“å‰ä¼ é€’itemè¿‡æ¥çš„spider
<br>open_spider(spider) :èƒ½å¤Ÿåœ¨çˆ¬è™«å¼€å¯çš„æ—¶å€™æ‰§è¡Œä¸€æ¬¡
<br>close_spider(spider) :èƒ½å¤Ÿåœ¨çˆ¬è™«å…³é—­çš„æ—¶å€™æ‰§è¡Œä¸€æ¬¡
<br>ä¸Šè¿°ä¿©ä¸ªæ–¹æ³•ç»å¸¸ç”¨äºçˆ¬è™«å’Œæ•°æ®åº“çš„äº¤äº’ï¼Œåœ¨çˆ¬è™«å¼€å¯çš„æ—¶å€™å»ºç«‹å’Œæ•°æ®åº“çš„è¿æ¥ï¼Œåœ¨çˆ¬è™«å…³é—­çš„æ—¶å€™æ–­å¼€å’Œæ•°æ®åº“çš„è¿æ¥
<br><br>
<br>debugèƒ½å¤Ÿå±•ç¤ºå½“å‰ç¨‹åºçš„è¿è¡ŒçŠ¶æ€ 
<br>scrapy shellèƒ½å¤Ÿå®ç°xpathçš„æµ‹è¯•å’Œå¯¹è±¡å±æ€§å’Œæ–¹æ³•çš„å°è¯•
<br>scrapyçš„settings.pyèƒ½å¤Ÿå®ç°å„ç§è‡ªå®šä¹‰çš„é…ç½®ï¼Œæ¯”å¦‚ä¸‹è½½å»¶è¿Ÿå’Œè¯·æ±‚å¤´ç­‰
<br>ç®¡é“èƒ½å¤Ÿå®ç°æ•°æ®çš„æ¸…æ´—å’Œä¿å­˜ï¼Œèƒ½å¤Ÿå®šä¹‰å¤šä¸ªç®¡é“å®ç°ä¸åŒçš„åŠŸèƒ½ï¼Œå…¶ä¸­æœ‰ä¸ªä¸‰ä¸ªæ–¹æ³•

<br>process_item(self,item,spider):å®ç°å¯¹itemæ•°æ®çš„å¤„ç†
<br>open_spider(self, spider): åœ¨çˆ¬è™«å¼€å¯çš„æ—¶å€™ä»…æ‰§è¡Œä¸€æ¬¡
<br>close_spider(self, spider): åœ¨çˆ¬è™«å…³é—­çš„æ—¶å€™ä»…æ‰§è¡Œä¸€æ¬¡


<br><br><br>åœ¨ä¹‹å‰çš„æŠ“å–ä¸­æˆ‘ä»¬éƒ½æ˜¯æŠ“å–å½“å‰å†ç”Ÿæˆspideræ—¶å€™çš„ç½‘å€ä¸­çš„æ•°æ®ï¼Œé‚£å¦‚æœæˆ‘ä»¬æƒ³è¦è®¿é—®å½“å‰æ•°æ®ä¸­çš„å­é¡µé¢çš„æ•°æ®ï¼Œé‚£åˆè¯¥å¦‚ä½•æ“ä½œå‘¢ï¼Œå›å¿†ä¸‹æˆ‘ä»¬åœ¨å‰é¢requestsè¯¾ç¨‹ä¸­æ˜¯å¦‚ä½•æŠ“å–å­é¡µé¢æ•°æ®çš„<br>æ€è·¯ï¼š<br>
<br>å…ˆå¯¹ç¬¬ä¸€å±‚urlè¿›è¡Œè¯·æ±‚
<br>è¯·æ±‚è¿”å›æ•°æ®è¿›è¡Œè§£æå¾ªç¯  æ‰¾åˆ°æ¯ä¸€æ¡å­é¡µé¢çš„url
<br>æ‰¾åˆ°å­é¡µé¢çš„urlä»¥åè¿›è¡Œå†æ¬¡è¯·æ±‚
<br>è¯·æ±‚è§£æå­é¡µé¢è¯·æ±‚è¿”å›çš„æ•°æ®
<br>ç»“æŸ
<br>é‚£ä¹ˆåœ¨æˆ‘ä»¬scrapyä¸­çš„æ€è·¯ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œé€šè¿‡æŠ“å–å½“å‰ç¬¬ä¸€å±‚é¡µé¢ä¸­è§£æå‡ºæ¥çš„å­é¡µé¢çš„æ•°æ®ï¼Œåœ¨é€šè¿‡scrapy.Rquestsè¿›è¡Œå­é¡µé¢çš„è¯·æ±‚ï¼Œé‚£æˆ‘ä»¬äº†è§£äº†å½“å‰æŠ“å–çš„æ€è·¯ï¼Œå°±å¼€å§‹æˆ‘ä»¬scrapyå­é¡µé¢çš„è¯·æ±‚ä¸æŠ“å–å§<br><br><br>
<br>
scrapy startproject doubandetail

<br>
cd doubandetail

<br>
scrapy genspider db movie.douban.com/chart

<br><br>æŠ“å–ï¼š<br>
<br>ç”µå½±åç§°
<br>å¯¼æ¼”
<br>ç¼–å‰§
<br>ä¸»æ¼”
<br>ç±»å‹
<br>é€šè¿‡ç¬¬ä¸€å±‚åŒ¹é…åˆ°çš„å­é¡µé¢çš„urlè¿›è¡Œè¯·æ±‚è¯¦æƒ…é¡µçš„urlæ•°æ®<br>â€œScrapy02-å­˜å‚¨.assets/image-20220907165307805.pngâ€ could not be found.<br><br><br>Python# è®¾ç½®æ—¥å¿—çº§åˆ«
LOG_LEVEL = 'ERROR'
ROBOTSTXT_OBEY = False
COOKIES_ENABLED = False  # cookiesçš„ä¸­é—´ä»¶å°†ä¸èµ·ä½œç”¨ï¼Œä¸‹é¢çš„cookieèµ·ä½œç”¨

# è®¾ç½®è¯·æ±‚å¤´
DEFAULT_REQUEST_HEADERS = {
  'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
  'Accept-Language': 'en',
  'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36',
  'Cookie': 'è®¾å®šcookie é˜²æ­¢åæ‰’'
}
# å¼€å¯ç®¡é“
ITEM_PIPELINES = {
   'doubandetail.pipelines.DoubandetailPipeline': 300,
}
å¤åˆ¶<br><br>
<br>
æ¦‚è¿°
å› ä¸ºå½“å‰éœ€è¦å¯¹è¯¦æƒ…é¡µé¢å†æ¬¡è¯·æ±‚ä»¥è·å–è¯¦æƒ…é¡µæ•°æ®ï¼Œè¯·æ±‚æ€è·¯å’Œä¹‹å‰requestsä¸€æ ·ï¼Œåªæ˜¯åœ¨è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨	yield scrapy.Request() è¿›è¡Œè¯·æ±‚ é»˜è®¤è¯·æ±‚æ–¹å¼ä¸ºget

<br>
yield scrapy.Request(url, callback=self.parse_deatil)

<br>
urlï¼šä¸ºå†æ¬¡è¯·æ±‚çš„URLåœ°å€

<br>
callbackï¼šè¯·æ±‚åè¿›è¡Œå¤„ç†çš„å›è°ƒæ–¹æ³•

<br>
method: è¯·æ±‚æ–¹å¼

<br>
callback: å›è°ƒå‡½æ•°

<br>
errback: æŠ¥é”™å›è°ƒ

<br>
dont_filter: é»˜è®¤False, è¡¨ç¤º"ä¸è¿‡æ»¤", è¯¥è¯·æ±‚ä¼šé‡æ–°è¿›è¡Œå‘é€

<br>
headers: è¯·æ±‚å¤´

<br>
cookies: cookieä¿¡æ¯



<br>
ä»£ç å®ç°
Pythonimport scrapy
from doubandetail.items import DoubandetailItem
import re

class DbSpider(scrapy.Spider):
    name = 'db'
    # éœ€è¦æ³¨é‡Šæ‰
    # allowed_domains = ['movie.douban.com/chart']
    start_urls = ['http://movie.douban.com/chart/']

    def parse(self, resp, **kwargs):
        print(resp.text)
        # å…ˆè·å–åˆ°æ¯ä¸€è¡Œæ•°æ®çš„tr
        tr_list = resp.xpath('//div[@class="indent"]/div/table/tr[@class="item"]')
        for tr in tr_list:
            # è·å–æ¯ä¸ªè¯¦æƒ…é¡µçš„url
            detail_url = tr.xpath('./td[1]/a/@href').extract_first()
            # è¯·æ±‚å­é¡µé¢
            print(detail_url)
            yield scrapy.Request(detail_url, callback=self.parse_deatil)

    # è§£æå­é¡µé¢æ•°æ®
    def parse_deatil(self, response):
        # é»˜è®¤æºå¸¦æˆ‘ä»¬settings.pyä¸­æ‰€é…ç½®çš„è¯·æ±‚å¤´è¿›è¡Œè¯·æ±‚
        # print(response.request.headers)
        item = DoubandetailItem()
        item['name'] = response.xpath('//*[@id="content"]/h1/span[1]/text()').extract_first()  # ç”µå½±åç§°
        item['director'] = response.xpath('//*[@id="info"]/span[1]/span[2]/a/text()').extract_first()  # å¯¼æ¼”
        item['screenwriter'] = ''.join(response.xpath('//*[@id="info"]/span[2]/span[2]//text()').extract())  # ç¼–å‰§
        item['to_star'] = ''.join(response.xpath('//*[@id="info"]/span[3]/span[2]//text()').extract())  # ä¸»æ¼”
        item['type'] = '/'.join(response.xpath('//span[@property="v:genre"]//text()').extract())  # ç±»å‹
        item['link_report'] = re.sub('(/)|(\s)|(\u3000)|(\'\n\')', '', link_report)
        print(item)
        return item
å¤åˆ¶

<br>
æ³¨æ„ï¼š
éœ€è¦å°†allowed_domainsæ³¨é‡Šæ‰ï¼Œå¦åˆ™è¯¦æƒ…é¡µurlä¸ç¬¦åˆå½“å‰å…è®¸ï¼Œæ‰€ä»¥ä¼šå‡ºç°ä¸è¯·æ±‚çš„é—®é¢˜

<br><br>Pythonimport scrapy


class DoubandetailItem(scrapy.Item):
    # define the fields for your item here like:
    # name = scrapy.Field()
    name = scrapy.Field()  # ç”µå½±åç§°
    director = scrapy.Field()  # å¯¼æ¼”
    screenwriter = scrapy.Field()  # ç¼–å‰§
    to_star = scrapy.Field()  # ä¸»æ¼”
    type = scrapy.Field()  # ç±»å‹
å¤åˆ¶<br><br>Python# Define your item pipelines here
#
# Don't forget to add your pipeline to the ITEM_PIPELINES setting
# See: https://docs.scrapy.org/en/latest/topics/item-pipeline.html


# useful for handling different item types with a single interface
from itemadapter import ItemAdapter
from pymongo import MongoClient

class DoubandetailPipeline:
    con = None
    collection = None
    def open_spider(self, spider):  # åœ¨çˆ¬è™«å¼€å¯çš„æ—¶å€™ä»…æ‰§è¡Œä¸€æ¬¡
        self.con = MongoClient(host='127.0.0.1', port=27017)  # å®ä¾‹åŒ–mongoclient
        self.collection = self.con.spider.douban  # åˆ›å»ºæ•°æ®åº“åä¸ºspider,é›†åˆåä¸ºdoubançš„é›†åˆæ“ä½œå¯¹è±¡

    def process_item(self, item, spider):
        print(item)
        self.collection.insert_one(dict(item))  # æ­¤æ—¶itemå¯¹è±¡éœ€è¦å…ˆè½¬æ¢ä¸ºå­—å…¸,å†æ’å…¥
        return item

    def close_spider(self, item):
        # å…³é—­æ•°æ®åº“è¿æ¥
        self.con.close()
å¤åˆ¶<br>æ³¨æ„ï¼š<br>å¦‚æœè®¿é—®é¢‘ç‡è¿‡é«˜è¢«ç¦æ­¢è®¿é—®ï¼Œå¯ä»¥æºå¸¦ç™»å½•åçš„cookiè¿›è¡Œè®¿é—®<br><br><br>pip3 install pillow
å¤åˆ¶<br><br><a rel="noopener" class="external-link" href="https://desk.zol.com.cn/dongman/" target="_blank">https://desk.zol.com.cn/dongman/</a><br><br>
<br>
scrapy startproject desk

<br>
cd desk

<br>
scrapy genspider img desk.zol.com.cn/dongman

<br><br>Python# è®¾ç½®æ—¥å¿—çº§åˆ«
LOG_LEVEL = 'ERROR'
ROBOTSTXT_OBEY = False
# è®¾ç½®è¯·æ±‚å¤´
DEFAULT_REQUEST_HEADERS = {
  'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
  'Accept-Language': 'en',
  'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36'
}
å¤åˆ¶<br><br>æ€è·¯ï¼š<br>æŠ“å–åˆ°è¯¦æƒ…é¡µä¸­å›¾ç‰‡çš„urlåœ°å€ï¼Œäº¤ç»™å›¾ç‰‡ç®¡é“è¿›è¡Œä¸‹è½½<br>Pythonimport scrapy
from urllib.parse import urljoin


class ImgSpider(scrapy.Spider):
    name = 'img'
    # allowed_domains = ['desk.zol.com.cn/dongman']
    start_urls = ['http://desk.zol.com.cn/dongman/']

    def parse(self, resp, **kwargs):
        # å…ˆæŠ“å–åˆ°æ¯ä¸ªå›¾ç‰‡è¯¦æƒ…çš„url
        url_list = resp.xpath('//ul[@class="pic-list2  clearfix"]/li/a/@href').extract()
        # è·å–åˆ°urlåˆ—è¡¨å è¿›è¡Œå¾ªç¯è¿›è¡Œæ¯ä¸€ä¸ªurlè¯¦æƒ…é¡µçš„è¯·æ±‚
        for url in url_list:
            # å› ä¸ºæŠ“å–åˆ°çš„urlå¹¶ä¸å®Œæ•´ï¼Œéœ€è¦è¿›è¡Œæ‰‹åŠ¨æ‹¼æ¥
            # urljoin('https://desk.zol.com.cn/dongman/', '/bizhi/8301_103027_2.html')
            url = urljoin('https://desk.zol.com.cn/dongman/', url)
            # æ‹¼å‡‘å®Œå‘ç°å½“å‰urlä¸­æœ‰ä¸‹è½½exeçš„urlï¼Œå°†å…¶å»é™¤
            if url.find('exe') != -1:
                continue
            yield scrapy.Request(url, callback=self.parse_detail)

    # å¯¹è¯¦æƒ…é¡µè¿›è¡Œè§£æ
    def parse_detail(self, resp):
        # è·å–å½“å‰è¯¦æƒ…é¡µä¸­æœ€å¤§å°ºå¯¸å›¾ç‰‡çš„url
        max_img_url = resp.xpath('//dd[@id="tagfbl"]/a/@href').extract()
        # åˆ¤æ–­å½“å‰æœ€å¤§å›¾ç‰‡çš„urlåœ°å€ï¼Œä¸ºå€’æ•°ç¬¬äºŒä¸ªï¼Œå¦‚æœå½“å‰å›¾ç‰‡åˆ—è¡¨urlé•¿åº¦å°äº2 åˆ™å½“å‰è¯æ˜ä¸æ˜¯å›¾ç‰‡çš„url
        if len(max_img_url) &gt; 2:
            max_img_url = urljoin('https://desk.zol.com.cn/', max_img_url[0])
            # å¯¹urlé¡µé¢è¿›è¡Œè¯·æ±‚ è·å–æœ€ç»ˆå¤§å›¾çš„é¡µé¢
            yield scrapy.Request(max_img_url, callback=self.parse_img_detail)

    def parse_img_detail(self, resp):
        # è§£æå‡ºå¤§å›¾çš„url
        img_src = resp.xpath("//img[1]/@src").extract_first()
        return {'img_src': img_src}
å¤åˆ¶<br>æ³¨æ„ï¼š<br>å¦‚æœæŠ“å–è¿‡ç¨‹ä¸­é‡åˆ°å¦‚ä¸‹æŠ¥é”™ï¼Œå¯èƒ½æ˜¯cryptography ç‰ˆæœ¬é—®é¢˜<br>twisted.web._newclient.ResponseNeverReceived: [&lt;twisted.python.failure.Failure OpenSSL.SSL.Error: [('SSL routines', '', 'unsafe legacy renegotiation disabled')]&gt;]
å¤åˆ¶<br>è§£å†³ï¼š<br>pip uninstall cryptography
pip install cryptography==36.0.2<br><br>æ‰“å¼€Pipelinesæ–‡ä»¶å¤¹<br>å› ä¸ºæˆ‘ä»¬ä¸èƒ½å†åƒä¹‹å‰å­˜å‚¨æ–‡æœ¬ä¸€æ ·ï¼Œä½¿ç”¨ä¹‹å‰çš„ç®¡é“ç±»ï¼ˆPipelineï¼‰ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°æ–°çš„å­˜å‚¨å›¾ç‰‡çš„ç®¡é“ç±»ImagesPipelineï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å…ˆå¯¼å…¥è¯¥ç±»<br>pipelines.py<br>
<br>
å¯¼å…¥
Pythonfrom scrapy.pipelines.images import ImagesPipeline
å¤åˆ¶

<br>
å®šä¹‰ä¸€ä¸ªImagesç±»
Pythonfrom itemadapter import ItemAdapter
from scrapy.pipelines.images import ImagesPipeline
import scrapy

class DeskPipeline:
    def process_item(self, item, spider):
        return item

class Imgspipline(ImagesPipeline):
    # 1. å‘é€è¯·æ±‚(ä¸‹è½½å›¾ç‰‡, æ–‡ä»¶, è§†é¢‘,xxx)
    def get_media_requests(self, item, info):
      	# è·å–åˆ°å›¾ç‰‡çš„url
        url = item['img_src']
        # è¿›è¡Œè¯·æ±‚
        yield scrapy.Request(url=url, meta={"url": url})  # ç›´æ¥è¿”å›ä¸€ä¸ªè¯·æ±‚å¯¹è±¡å³å¯

    # 2. å›¾ç‰‡å­˜å‚¨è·¯å¾„
    def file_path(self, request, response=None, info=None, *, item=None):
        # å½“å‰è·å–è¯·æ±‚çš„urlçš„æ–¹å¼æœ‰2ç§
        # è·å–åˆ°å½“å‰çš„url ç”¨äºå¤„ç†ä¸‹è½½å›¾ç‰‡çš„åç§°
        file_name = item['img_src'].split("/")[-1]  # ç”¨itemæ‹¿åˆ°url
        # file_name = request.meta['url'].split("/")[-1]  # ç”¨metaä¼ å‚è·å–
        return file_name

    # 3. å¯èƒ½éœ€è¦å¯¹itemè¿›è¡Œæ›´æ–°
    def item_completed(self, results, item, info):
        # print('results', results)
        for r in results:
            # è·å–æ¯ä¸ªå›¾ç‰‡çš„è·¯å¾„
            print(r[1]['path'])
        return item  # ä¸€å®šè¦return item æŠŠæ•°æ®ä¼ é€’ç»™ä¸‹ä¸€ä¸ªç®¡é“
å¤åˆ¶

<br><br>æ¥ç€æˆ‘ä»¬å†å®šä¹‰ä¸€ä¸ªä¿å­˜æ•°æ®çš„å‡½æ•°ï¼Œå¹¶è®¾ç½®å¥½å­˜å‚¨çš„æ–‡ä»¶åï¼Œç„¶åå­˜å‚¨çš„è·¯å¾„éœ€è¦åœ¨è®¾ç½®ä¸­ï¼ˆsettingï¼‰æ–‡ä»¶ä¸­ï¼Œæ·»åŠ IMAGE_STOREè®¾ç½®å¥½å­˜å‚¨çš„è·¯å¾„<br>å¼€å¯å›¾ç‰‡ç®¡é“<br>settings.py<br>PythonITEM_PIPELINES = {
   'desk.pipelines.DeskPipeline': 300,
   'desk.pipelines.Imgspipline': 400,  # å¼€å¯å›¾ç‰‡ç®¡é“
}
# é…ç½®å­˜å‚¨å›¾ç‰‡çš„è·¯å¾„
IMG_STORE = './imgs'
å¤åˆ¶]]></description><link>çˆ¬è™«\çˆ¬è™«æ–‡æ¡£\Scrapy02æ·±å…¥ä½¿ç”¨-å­˜å‚¨.html</link><guid isPermaLink="false">çˆ¬è™«/çˆ¬è™«æ–‡æ¡£/Scrapy02æ·±å…¥ä½¿ç”¨-å­˜å‚¨.md</guid><pubDate>Tue, 17 Oct 2023 12:44:04 GMT</pubDate></item><item><title><![CDATA[scrapyæ¨¡æ‹Ÿç™»é™†&amp;åˆ†é¡µ]]></title><description><![CDATA[<a class="tag" href="?query=tag:scrapy" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#scrapy</a> <a class="tag" href="?query=tag:æ¡†æ¶" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#æ¡†æ¶</a> 
 <br><a href=".?query=tag:scrapy" class="tag" target="_blank" rel="noopener">#scrapy</a>  <a href=".?query=tag:æ¡†æ¶" class="tag" target="_blank" rel="noopener">#æ¡†æ¶</a><br><br><br><br>
<br>åº”ç”¨ scrapyç›´æ¥æºå¸¦cookieæ¨¡æ‹Ÿç™»é™†çš„æ–¹æ³•
<br>åº”ç”¨ scrapy.FormRequest()å‘é€postè¯·æ±‚è¿›è¡Œç™»é™†
<br>åº”ç”¨ scrapy.FormRequest.from_response()å‘é€è¡¨å•è¯·æ±‚
<br><br><br><br>
<br>ç›´æ¥æºå¸¦cookiesè¯·æ±‚é¡µé¢
<br>æ‰¾urlåœ°å€ï¼Œå‘é€postè¯·æ±‚å­˜å‚¨cookie
<br><br>
<br>æ‰¾åˆ°å¯¹åº”çš„inputæ ‡ç­¾ï¼Œè¾“å…¥æ–‡æœ¬ç‚¹å‡»ç™»é™†
<br><br>
<br>ç›´æ¥æºå¸¦cookies
<br>æ‰¾urlåœ°å€ï¼Œå‘é€postè¯·æ±‚å­˜å‚¨cookie
<br>æ‰¾åˆ°å¯¹åº”çš„formè¡¨å•ï¼Œè‡ªåŠ¨è§£æinputæ ‡ç­¾ï¼Œè‡ªåŠ¨è§£æpostè¯·æ±‚çš„urlåœ°å€ï¼Œè‡ªåŠ¨å¸¦ä¸Šæ•°æ®ï¼Œè‡ªåŠ¨å‘é€è¯·æ±‚
<br><br>17kå°è¯´ç½‘<br>https://user.17k.com/
å¤åˆ¶<br><br>
<br>cookieè¿‡æœŸæ—¶é—´å¾ˆé•¿ï¼Œå¸¸è§äºä¸€äº›ä¸è§„èŒƒçš„ç½‘ç«™
<br>èƒ½åœ¨cookieè¿‡æœŸä¹‹å‰æŠŠæœæœ‰çš„æ•°æ®æ‹¿åˆ°
<br>é…åˆå…¶ä»–ç¨‹åºä½¿ç”¨ï¼Œæ¯”å¦‚å…¶ä½¿ç”¨seleniumæŠŠç™»é™†ä¹‹åçš„cookieè·å–åˆ°ä¿å­˜åˆ°æœ¬åœ°ï¼Œscrapyå‘é€è¯·æ±‚ä¹‹å‰å…ˆè¯»å–æœ¬åœ°cookie
<br><br>settings.py<br>PythonDEFAULT_REQUEST_HEADERS = {
  'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
  'Accept-Language': 'en',
  'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36',
  'Cookie': 'ASP.NET_SessionId=n4lwamv5eohaqcorfi3dvzcv; xiaohua_visitfunny=103174; xiaohua_web_userid=120326; xiaohua_web_userkey=r2sYazfFMt/rxUn8LJDmUYetwR2qsFCHIaNt7+Zpsscpp1p6zicW4w=='
}
å¤åˆ¶<br>æ³¨æ„ï¼šéœ€è¦æ‰“å¼€COOKIES_ENABLEDï¼Œå¦åˆ™ä¸Šé¢è®¾å®šçš„cookieå°†ä¸èµ·ä½œç”¨<br>Python# Disable cookies (enabled by default)
COOKIES_ENABLED = False
å¤åˆ¶<br>xiaoshuo.py<br>Pythonimport scrapy


class DengluSpider(scrapy.Spider):
    name = 'denglu'
    allowed_domains = ['17k.com']
    start_urls = ['https://user.17k.com/ck/user/mine/readList?page=1&amp;appKey=2406394919']

    def parse(self, res):
        print(res.text)
å¤åˆ¶<br>å±€é™æ€§ï¼š<br>å½“å‰è®¾å®šæ–¹å¼è™½ç„¶å¯ä»¥å®ç°æºå¸¦cookieä¿æŒç™»å½•ï¼Œä½†æ˜¯æ— æ³•è·å–åˆ°æ–°cookieï¼Œä¹Ÿå°±æ˜¯å½“å‰cookieä¸€ç›´æ˜¯å›ºå®šçš„<br>å¦‚æœcookieæ˜¯ç»å¸¸æ€§å˜åŒ–ï¼Œé‚£ä¹ˆå½“å‰ä¸é€‚ç”¨<br><br>scrapyä¸­start_urlæ˜¯é€šè¿‡start_requestsæ¥è¿›è¡Œå¤„ç†çš„ï¼Œå…¶å®ç°ä»£ç å¦‚ä¸‹<br>Pythondef start_requests(self):
    cls = self.__class__
    if method_is_overridden(cls, Spider, 'make_requests_from_url'):
        warnings.warn(
            "Spider.make_requests_from_url method is deprecated; it "
            "won't be called in future Scrapy releases. Please "
            "override Spider.start_requests method instead (see %s.%s)." % (
                cls.__module__, cls.__name__
            ),
        )
        for url in self.start_urls:
            yield self.make_requests_from_url(url)
    else:
        for url in self.start_urls:
            yield Request(url, dont_filter=True)
å¤åˆ¶<br>æ‰€ä»¥å¯¹åº”çš„ï¼Œå¦‚æœstart_urlåœ°å€ä¸­çš„urlæ˜¯éœ€è¦ç™»å½•åæ‰èƒ½è®¿é—®çš„urlåœ°å€ï¼Œåˆ™éœ€è¦é‡å†™start_requestæ–¹æ³•å¹¶åœ¨å…¶ä¸­æ‰‹åŠ¨æ·»åŠ ä¸Šcookie<br>settings.py<br>Pythonimport scrapy


class DengluSpider(scrapy.Spider):
    name = 'denglu'
    # allowed_domains = ['https://user.17k.com/ck/user/mine/readList?page=1']
    start_urls = ['https://user.17k.com/ck/user/mine/readList?page=1&amp;appKey=2406394919']

    def start_requests(self):
        cookies = 'GUID=796e4a09-ba11-4ecb-9cf6-aad19169267d; Hm_lvt_9793f42b498361373512340937deb2a0=1660545196; c_channel=0; c_csc=web; accessToken=avatarUrl%3Dhttps%253A%252F%252Fcdn.static.17k.com%252Fuser%252Favatar%252F18%252F98%252F90%252F96139098.jpg-88x88%253Fv%253D1650527904000%26id%3D96139098%26nickname%3D%25E4%25B9%25A6%25E5%258F%258BqYx51ZhI1%26e%3D1677033668%26s%3D8e116a403df502ab; sensorsdata2015jssdkcross=%7B%22distinct_id%22%3A%2296139098%22%2C%22%24device_id%22%3A%22181d13acb2c3bd-011f19b55b75a8-1c525635-1296000-181d13acb2d5fb%22%2C%22props%22%3A%7B%22%24latest_traffic_source_type%22%3A%22%E7%9B%B4%E6%8E%A5%E6%B5%81%E9%87%8F%22%2C%22%24latest_referrer%22%3A%22%22%2C%22%24latest_referrer_host%22%3A%22%22%2C%22%24latest_search_keyword%22%3A%22%E6%9C%AA%E5%8F%96%E5%88%B0%E5%80%BC_%E7%9B%B4%E6%8E%A5%E6%89%93%E5%BC%80%22%7D%2C%22first_id%22%3A%22796e4a09-ba11-4ecb-9cf6-aad19169267d%22%7D; Hm_lpvt_9793f42b498361373512340937deb2a0=1661483362'
        cookie_dic = {}
        for i in cookies.split(';'):
            v = i.split('=')
            cookie_dic[v[0]] = v[1]
        # {i.split('=')[0]:i.split('=')[1] for i in cookies_str.split('; ')}   # ç®€å†™
        for url in self.start_urls:
            yield scrapy.Request(url, cookies=cookie_dic)


    def parse(self, response):
        print(response.text)
å¤åˆ¶<br><br>
<br>scrapyä¸­cookieä¸èƒ½å¤Ÿæ”¾åœ¨headersä¸­ï¼Œåœ¨æ„é€ è¯·æ±‚çš„æ—¶å€™æœ‰ä¸“é—¨çš„cookieså‚æ•°ï¼Œèƒ½å¤Ÿæ¥å—å­—å…¸å½¢å¼çš„coookie
<br>åœ¨settingä¸­è®¾ç½®ROBOTSåè®®ã€USER_AGENT
<br><br>
æˆ‘ä»¬çŸ¥é“å¯ä»¥é€šè¿‡scrapy.Request()æŒ‡å®šmethodã€bodyå‚æ•°æ¥å‘é€postè¯·æ±‚ï¼›é‚£ä¹ˆä¹Ÿå¯ä»¥ä½¿ç”¨scrapy.FormRequest()æ¥å‘é€postè¯·æ±‚
<br><br>é€šè¿‡scrapy.FormRequestèƒ½å¤Ÿå‘é€postè¯·æ±‚ï¼ŒåŒæ—¶éœ€è¦æ·»åŠ fromdataå‚æ•°ä½œä¸ºè¯·æ±‚ä½“ï¼Œä»¥åŠcallback<br>Pythonlogin_url = 'https://passport.17k.com/ck/user/login'      
yield scrapy.FormRequest(
            url=login_url, 
            formdata={'loginName': '17346570232', 'password': 'xlg17346570232'}, 
            callback=self.do_login
)
å¤åˆ¶<br><br><br>
<br>æ‰¾åˆ°postçš„urlåœ°å€ï¼šç‚¹å‡»ç™»å½•æŒ‰é’®è¿›è¡ŒæŠ“åŒ…ï¼Œç„¶åå®šä½urlåœ°å€ä¸º<a rel="noopener" class="external-link" href="https://www.xiaohua.com/Handler/Login.ashx" target="_blank">https://www.xiaohua.com/Handler/Login.ashx</a>
<br>æ‰¾åˆ°è¯·æ±‚ä½“çš„è§„å¾‹ï¼šåˆ†æpostè¯·æ±‚çš„è¯·æ±‚ä½“ï¼Œå…¶ä¸­åŒ…å«çš„å‚æ•°å‡åœ¨å‰ä¸€æ¬¡çš„å“åº”ä¸­
<br>å¦ç™»å½•æˆåŠŸï¼šé€šè¿‡è¯·æ±‚ä¸ªäººä¸»é¡µï¼Œè§‚å¯Ÿæ˜¯å¦åŒ…å«ç”¨æˆ·å
<br><br>Pythonimport scrapy


class DengluSpider(scrapy.Spider):
    name = 'denglu'
    # allowed_domains = ['17k.com']
    start_urls = ['https://user.17k.com/ck/user/mine/readList?page=1&amp;appKey=2406394919']

    def start_requests(self):
        '''
        è¯·æ±‚ç™»é™†çš„è´¦å·å’Œå¯†ç 
        '''
        login_url = 'https://passport.17k.com/ck/user/login'
        # ä½¿ç”¨requestè¿›è¡Œè¯·æ±‚
        # yield scrapy.Request(url=login_url, body='loginName=17346570232&amp;password=xlg17346570232', callback=self.do_login, method='POST')
        # ä½¿ç”¨Requestå­ç±»FormRequestè¿›è¡Œè¯·æ±‚  è‡ªåŠ¨ä¸ºpostè¯·æ±‚
        yield scrapy.FormRequest(
            url=login_url,
            formdata={'loginName': '17346570232', 'password': 'xlg17346570232'},
            callback=self.do_login
        )

    def do_login(self, response):
        '''
        ç™»é™†æˆåŠŸåè°ƒç”¨parseè¿›è¡Œå¤„ç†
        cookieä¸­é—´ä»¶ä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨å¤„ç†æºå¸¦cookie
        '''
        for url in self.start_urls:
            yield scrapy.Request(url=url, callback=self.parse)

    def parse(self, response, **kwargs):
        print(response.text)
å¤åˆ¶<br><br>åœ¨settings.pyä¸­é€šè¿‡è®¾ç½®COOKIES_DEBUG=TRUE èƒ½å¤Ÿåœ¨ç»ˆç«¯çœ‹åˆ°cookieçš„ä¼ é€’ä¼ é€’è¿‡ç¨‹<br>æ³¨æ„å…³é—­LOG_LEVEL <br>â€œScrapy03-æ¨¡æ‹Ÿç™»é™†ä»¥åŠåˆ†é¡µ.assets/scrapy-login-1.pngâ€ could not be found.<br><br>
<br>start_urlsä¸­çš„urlåœ°å€æ˜¯äº¤ç»™start_requestå¤„ç†çš„ï¼Œå¦‚æœ‰å¿…è¦ï¼Œå¯ä»¥é‡å†™start_requestå‡½æ•°
<br>ç›´æ¥æºå¸¦cookieç™»é™†ï¼šcookieåªèƒ½ä¼ é€’ç»™cookieså‚æ•°æ¥æ”¶
<br>scrapy.FormRequest()å‘é€postè¯·æ±‚
<br><br>ç¬‘è¯ç½‘ï¼š<a rel="noopener" class="external-link" href="https://www.xiaohua.com/" target="_blank">https://www.xiaohua.com/</a><br><br><br>
<br>åº”ç”¨ å®Œå–„å¹¶ä½¿ç”¨Itemæ•°æ®ç±»
<br>åº”ç”¨ æ„é€ Requestå¯¹è±¡ï¼Œå¹¶å‘é€è¯·æ±‚
<br>åº”ç”¨ åˆ©ç”¨metaå‚æ•°åœ¨ä¸åŒçš„è§£æå‡½æ•°ä¸­ä¼ é€’æ•°æ®
<br><br><br>å¯¹äºè¦æå–å¦‚ä¸‹å›¾ä¸­æ‰€æœ‰é¡µé¢ä¸Šçš„æ•°æ®è¯¥æ€ä¹ˆåŠï¼Ÿ<br>â€œ./Scrapy03-æ¨¡æ‹Ÿç™»é™†ä»¥åŠåˆ†é¡µ.assets/scrapyç¿»é¡µ.pngâ€ could not be found.<br>å›é¡¾requestsæ¨¡å—æ˜¯å¦‚ä½•å®ç°ç¿»é¡µè¯·æ±‚çš„ï¼š<br>
<br>æ‰¾åˆ°ä¸‹ä¸€é¡µçš„URLåœ°å€
<br>è°ƒç”¨requests.get(url)
<br>scrapyå®ç°ç¿»é¡µçš„æ€è·¯ï¼š<br>
<br>æ‰¾åˆ°ä¸‹ä¸€é¡µçš„urlåœ°å€
<br>æ„é€ urlåœ°å€çš„è¯·æ±‚ï¼Œä¼ é€’ç»™å¼•æ“
<br><br><br>
<br>ç¡®å®šurlåœ°å€
<br>æ„é€ è¯·æ±‚ï¼Œscrapy.Request(url,callback)

<br>callbackï¼šæŒ‡å®šè§£æå‡½æ•°åç§°ï¼Œè¡¨ç¤ºè¯¥è¯·æ±‚è¿”å›çš„å“åº”ä½¿ç”¨å“ªä¸€ä¸ªå‡½æ•°è¿›è¡Œè§£æ


<br>æŠŠè¯·æ±‚äº¤ç»™å¼•æ“ï¼šyield scrapy.Request(url,callback)
<br><br>
é€šè¿‡çˆ¬å–æ®µå­é¡µé¢çš„ä¿¡æ¯,å­¦ä¹ å¦‚ä½•å®ç°ç¿»é¡µè¯·æ±‚
åœ°å€ï¼š<a rel="noopener" class="external-link" href="https://duanzixing.com/" target="_blank">https://duanzixing.com/</a>
<br><br>
<br>è·å–é¦–é¡µçš„æ•°æ®
<br>å¯»æ‰¾ä¸‹ä¸€é¡µçš„åœ°å€ï¼Œè¿›è¡Œç¿»é¡µï¼Œè·å–æ•°æ®
<br><br>
<br>
å¯ä»¥åœ¨settingsä¸­è®¾ç½®ROBOTSåè®®
Python# Falseè¡¨ç¤ºå¿½ç•¥ç½‘ç«™çš„robots.txtåè®®ï¼Œé»˜è®¤ä¸ºTrue
ROBOTSTXT_OBEY = False
å¤åˆ¶

<br>
å¯ä»¥åœ¨settingsä¸­è®¾ç½®User-Agentï¼š
Python# scrapyå‘é€çš„æ¯ä¸€ä¸ªè¯·æ±‚çš„é»˜è®¤UAéƒ½æ˜¯è®¾ç½®çš„è¿™ä¸ªUser-Agent
USER_AGENT = 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.115 Safari/537.36'
å¤åˆ¶

<br><br>
<br>
æ®µå­å®ç°å¤šé¡µæŠ“å–
Pythonurl = 'https://duanzixing.com/page/%d/'
    num = 1
    def parse(self, response):
        article_list = response.xpath('/html/body/section/div/div/article')
        for article in article_list:
            title = article.xpath('./header/h2/a/text()').extract_first()
            con = article.xpath('./p[2]/text()').extract_first()
            # print(title)
            item = PageproItem()
            item['title'] = title
            item['con'] = con
            yield item
            
        if self.num &lt; 11:
          	# æ„é€ url
            new_url = format(self.url%self.num)
            self.num += 1
            print(new_url)
            # æ„é€ scrapy.Requestå¯¹è±¡ï¼Œå¹¶yieldç»™å¼•æ“
        		# åˆ©ç”¨callbackå‚æ•°æŒ‡å®šè¯¥Requestå¯¹è±¡ä¹‹åè·å–çš„å“åº”ç”¨å“ªä¸ªå‡½æ•°è¿›è¡Œè§£æ
        		# åˆ©ç”¨metaå‚æ•°å°†æœ¬å‡½æ•°ä¸­æå–çš„æ•°æ®ä¼ é€’ç»™callbackæŒ‡å®šçš„å‡½æ•°
        		# æ³¨æ„è¿™é‡Œæ˜¯yield
            yield scrapy.Request(new_url, callback=self.parse)
å¤åˆ¶

<br>
è±†ç“£ç”µå½±æŠ“å–å­é¡µé¢æ•°æ®(æ‰‹åŠ¨è°ƒç”¨è¯·æ±‚ç»ƒä¹ )
æ–°å»ºè±†ç“£é¡¹ç›®
scrapy startproject douban
cd douban
scrapy genspider db
scrapy crawl db
Pythonimport scrapy


class DbSpider(scrapy.Spider):
    name = 'db'
    # allowed_domains = ['www.xxx.com']
    start_urls = ['https://movie.douban.com/chart']

    def parse(self, response):
        table_list = response.xpath('//*[@id="content"]/div/div[1]/div/div/table')
        for table in table_list:
            # æŠ“å–å­é¡µé¢urlåœ°å€
            href = table.xpath('./tr/td[2]/div/a/@href').extract_first()
            print(href)
            # æ‰‹åŠ¨è¯·æ±‚å­é¡µé¢
            yield scrapy.Request(href, callback=self.parse_deatil)

    # è§£æå­é¡µé¢æ•°æ®
    def parse_deatil(self, response):
        # è·å–æ‰€æœ‰çš„ç”µå½±ä¿¡æ¯
        print(response.xpath('//*[@id="info"]//text()').extract())
å¤åˆ¶

<br><br>Pythonscrapy.Request(url[,callback,method="GET",headers,body,cookies, 
meta,dont_filter=False])
å¤åˆ¶<br><br>
<br>ä¸­æ‹¬å·ä¸­çš„å‚æ•°ä¸ºå¯é€‰å‚æ•°
<br>callbackï¼šè¡¨ç¤ºå½“å‰çš„urlçš„å“åº”äº¤ç»™å“ªä¸ªå‡½æ•°å»å¤„ç†
<br>metaï¼šå®ç°æ•°æ®åœ¨ä¸åŒçš„è§£æå‡½æ•°ä¸­ä¼ é€’ï¼Œmetaé»˜è®¤å¸¦æœ‰éƒ¨åˆ†æ•°æ®ï¼Œæ¯”å¦‚ä¸‹è½½å»¶è¿Ÿï¼Œè¯·æ±‚æ·±åº¦ç­‰
<br>dont_filter:é»˜è®¤ä¸ºFalseï¼Œä¼šè¿‡æ»¤è¯·æ±‚çš„urlåœ°å€ï¼Œå³è¯·æ±‚è¿‡çš„urlåœ°å€ä¸ä¼šç»§ç»­è¢«è¯·æ±‚ï¼Œå¯¹éœ€è¦é‡å¤è¯·æ±‚çš„urlåœ°å€å¯ä»¥æŠŠå®ƒè®¾ç½®ä¸ºTureï¼Œæ¯”å¦‚è´´å§çš„ç¿»é¡µè¯·æ±‚ï¼Œé¡µé¢çš„æ•°æ®æ€»æ˜¯åœ¨å˜åŒ–;start_urlsä¸­çš„åœ°å€ä¼šè¢«åå¤è¯·æ±‚ï¼Œå¦åˆ™ç¨‹åºä¸ä¼šå¯åŠ¨
<br>methodï¼šæŒ‡å®šPOSTæˆ–GETè¯·æ±‚
<br>headersï¼šæ¥æ”¶ä¸€ä¸ªå­—å…¸ï¼Œå…¶ä¸­ä¸åŒ…æ‹¬cookies
<br>cookiesï¼šæ¥æ”¶ä¸€ä¸ªå­—å…¸ï¼Œä¸“é—¨æ”¾ç½®cookies
<br>bodyï¼šæ¥æ”¶ä¸€ä¸ªå­—å…¸ï¼Œä¸ºPOSTçš„æ•°æ®
<br><br><br><br>åœ¨çˆ¬è™«æ–‡ä»¶çš„parseæ–¹æ³•ä¸­ï¼Œæå–è¯¦æƒ…é¡µå¢åŠ ä¹‹å‰callbackæŒ‡å®šçš„parse_detailå‡½æ•°ï¼š<br>Pythondef parse(self,response):
    ...
    yield scrapy.Request(detail_url, callback=self.parse_detail,meta={"item":item})
...

def parse_detail(self,response):
    #è·å–ä¹‹å‰ä¼ å…¥çš„item
    item = resposne.meta["item"]
å¤åˆ¶<br><br>
<br>metaå‚æ•°æ˜¯ä¸€ä¸ªå­—å…¸
<br>metaå­—å…¸ä¸­æœ‰ä¸€ä¸ªå›ºå®šçš„é”®proxyï¼Œè¡¨ç¤ºä»£ç†ipï¼Œå…³äºä»£ç†ipçš„ä½¿ç”¨æˆ‘ä»¬å°†åœ¨scrapyçš„ä¸‹è½½ä¸­é—´ä»¶çš„å­¦ä¹ ä¸­è¿›è¡Œä»‹ç»
<br><br><br>
<br>
å®šä¹‰itemå³æå‰è§„åˆ’å¥½å“ªäº›å­—æ®µéœ€è¦æŠ“å–ï¼Œscrapy.Field()ä»…ä»…æ˜¯æå‰å å‘ï¼Œé€šè¿‡item.pyèƒ½å¤Ÿè®©åˆ«äººæ¸…æ¥šè‡ªå·±çš„çˆ¬è™«æ˜¯åœ¨æŠ“å–ä»€ä¹ˆï¼ŒåŒæ—¶å®šä¹‰å¥½å“ªäº›å­—æ®µæ˜¯éœ€è¦æŠ“å–çš„ï¼Œæ²¡æœ‰å®šä¹‰çš„å­—æ®µä¸èƒ½ä½¿ç”¨ï¼Œé˜²æ­¢æ‰‹è¯¯

<br>
åœ¨pythonå¤§å¤šæ•°æ¡†æ¶ä¸­ï¼Œå¤§å¤šæ•°æ¡†æ¶éƒ½ä¼šè‡ªå®šä¹‰è‡ªå·±çš„æ•°æ®ç±»å‹(åœ¨pythonè‡ªå¸¦çš„æ•°æ®ç»“æ„åŸºç¡€ä¸Šè¿›è¡Œå°è£…)ï¼Œç›®çš„æ˜¯å¢åŠ åŠŸèƒ½ï¼Œå¢åŠ è‡ªå®šä¹‰å¼‚å¸¸

<br><br>åœ¨items.pyæ–‡ä»¶ä¸­å®šä¹‰è¦æå–çš„å­—æ®µï¼š<br>Pythonimport scrapy

class DoubanItem(scrapy.Item):
    # define the fields for your item here like:
    # name = scrapy.Field()
    name = scrapy.Field()     # ç”µå½±åç§°
    director = scrapy.Field()     # å¯¼æ¼”
    screenwriter = scrapy.Field()    # ç¼–å‰§
    to_star = scrapy.Field()    # ä¸»æ¼”
å¤åˆ¶<br><br>Itemä½¿ç”¨ä¹‹å‰éœ€è¦å…ˆå¯¼å…¥å¹¶ä¸”å®ä¾‹åŒ–ï¼Œä¹‹åçš„ä½¿ç”¨æ–¹æ³•å’Œä½¿ç”¨å­—å…¸ç›¸åŒ<br>ä¿®æ”¹çˆ¬è™«æ–‡ä»¶db.pyï¼š<br>Pythonimport scrapy
from douban.items import DoubanItem

class DbSpider(scrapy.Spider):
    name = 'db'
    # allowed_domains = ['www.xxx.com']
    start_urls = ['https://movie.douban.com/chart']
 
    def parse(self, response):
        table_list = response.xpath('//*[@id="content"]/div/div[1]/div/div/table')
        for table in table_list:
            # æŠ“å–å­é¡µé¢urlåœ°å€
            href = table.xpath('./tr/td[2]/div/a/@href').extract_first()
            print(href)
            # æ‰‹åŠ¨è¯·æ±‚å­é¡µé¢
            yield scrapy.Request(href, callback=self.parse_deatil)

    # è§£æå­é¡µé¢æ•°æ®
    def parse_deatil(self, response):
        # æå–ç”µå½±è¯¦æƒ…
        item = DoubanItem()
        item['name'] = response.xpath('//*[@id="content"]/h1/span[1]/text()').extract_first()  # ç”µå½±åç§°
        item['director'] = response.xpath('//*[@id="info"]/span[1]/span[2]/a/text()').extract_first()  # å¯¼æ¼”
        item['screenwriter'] = ''.join(response.xpath('//*[@id="info"]/span[2]/span[2]//text()').extract())  # ç¼–å‰§
        item['to_star'] = ''.join(response.xpath('//*[@id="info"]/span[3]/span[2]//text()').extract())  # ä¸»æ¼”
        print(item)
        return item
å¤åˆ¶<br><br>
<br>from myspider.items import ITSpiderItemè¿™ä¸€è¡Œä»£ç ä¸­ æ³¨æ„itemçš„æ­£ç¡®å¯¼å…¥è·¯å¾„ï¼Œå¿½ç•¥pycharmæ ‡è®°çš„é”™è¯¯
<br>pythonä¸­çš„å¯¼å…¥è·¯å¾„è¦è¯€ï¼šä»å“ªé‡Œå¼€å§‹è¿è¡Œï¼Œå°±ä»å“ªé‡Œå¼€å§‹å¯¼å…¥
<br>åœ¨parse_deatilä¸­item[key] å¿…é¡»è¦å’Œitems.pyä¸­çš„keyå¯¹åº”ï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸
<br><br>
<br>å®Œå–„å¹¶ä½¿ç”¨Itemæ•°æ®ç±»ï¼š

<br>åœ¨items.pyä¸­å®Œå–„è¦çˆ¬å–çš„å­—æ®µ
<br>åœ¨çˆ¬è™«æ–‡ä»¶ä¸­å…ˆå¯¼å…¥Item
<br>å®åŠ›åŒ–Itemå¯¹è±¡åï¼Œåƒå­—å…¸ä¸€æ ·ç›´æ¥ä½¿ç”¨


<br>æ„é€ Requestå¯¹è±¡ï¼Œå¹¶å‘é€è¯·æ±‚ï¼š

<br>å¯¼å…¥scrapy.Requestç±»
<br>åœ¨è§£æå‡½æ•°ä¸­æå–url
<br>yield scrapy.Request(url, callback=self.parse_detail, meta={})


<br>åˆ©ç”¨metaå‚æ•°åœ¨ä¸åŒçš„è§£æå‡½æ•°ä¸­ä¼ é€’æ•°æ®:

<br>é€šè¿‡å‰ä¸€ä¸ªè§£æå‡½æ•° yield scrapy.Request(url, callback=self.xxx, meta={}) æ¥ä¼ é€’meta
<br>åœ¨self.xxxå‡½æ•°ä¸­ response.meta.get('key', '') æˆ– response.meta['key'] çš„æ–¹å¼å–å‡ºä¼ é€’çš„æ•°æ®


]]></description><link>çˆ¬è™«\çˆ¬è™«æ–‡æ¡£\Scrapy03-æ¨¡æ‹Ÿç™»é™†ä»¥åŠåˆ†é¡µ.html</link><guid isPermaLink="false">çˆ¬è™«/çˆ¬è™«æ–‡æ¡£/Scrapy03-æ¨¡æ‹Ÿç™»é™†ä»¥åŠåˆ†é¡µ.md</guid><pubDate>Mon, 16 Oct 2023 15:12:12 GMT</pubDate></item><item><title><![CDATA[Scrapyä¸­é—´ä»¶]]></title><description><![CDATA[<a class="tag" href="?query=tag:scrapy" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#scrapy</a> <a class="tag" href="?query=tag:æ¡†æ¶" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#æ¡†æ¶</a> 
 <br><br><a href=".?query=tag:scrapy" class="tag" target="_blank" rel="noopener">#scrapy</a> <a href=".?query=tag:æ¡†æ¶" class="tag" target="_blank" rel="noopener">#æ¡†æ¶</a><br><br>
<br>åº”ç”¨ scrapyä¸­ä½¿ç”¨ä¸­é—´ä»¶ä½¿ç”¨éšæœºUAçš„æ–¹æ³•
<br>äº†è§£ scrapyä¸­ä½¿ç”¨ä»£ç†ipçš„çš„æ–¹æ³•
<br><br><br><br>æ ¹æ®scrapyè¿è¡Œæµç¨‹ä¸­æ‰€åœ¨ä½ç½®ä¸åŒåˆ†ä¸ºï¼š<br>
<br>ä¸‹è½½ä¸­é—´ä»¶
<br>çˆ¬è™«ä¸­é—´ä»¶
<br><br>
<br>ä¸»è¦åŠŸèƒ½æ˜¯åœ¨çˆ¬è™«è¿è¡Œè¿‡ç¨‹ä¸­è¿›è¡Œä¸€äº›å¤„ç†ï¼Œå¦‚å¯¹é200å“åº”çš„é‡è¯•ï¼ˆé‡æ–°æ„é€ Requestå¯¹è±¡yieldç»™å¼•æ“ï¼‰
<br>ä¹Ÿå¯ä»¥å¯¹headerä»¥åŠcookieè¿›è¡Œæ›´æ¢å’Œå¤„ç†
<br>å…¶ä»–æ ¹æ®ä¸šåŠ¡éœ€æ±‚å®ç°å“åº”çš„åŠŸèƒ½
<br>ä½†åœ¨scrapyé»˜è®¤çš„æƒ…å†µä¸‹ ä¸¤ç§ä¸­é—´ä»¶éƒ½åœ¨middlewares.pyä¸€ä¸ªæ–‡ä»¶ä¸­<br>çˆ¬è™«ä¸­é—´ä»¶ä½¿ç”¨æ–¹æ³•å’Œä¸‹è½½ä¸­é—´ä»¶ç›¸åŒï¼Œå¸¸ç”¨ä¸‹è½½ä¸­é—´ä»¶<br><br>
æ¥ä¸‹æ¥æˆ‘ä»¬å¯¹çˆ¬è™«è¿›è¡Œä¿®æ”¹å®Œå–„ï¼Œé€šè¿‡ä¸‹è½½ä¸­é—´ä»¶æ¥å­¦ä¹ å¦‚ä½•ä½¿ç”¨ä¸­é—´ä»¶ ç¼–å†™ä¸€ä¸ªDownloader Middlewareså’Œæˆ‘ä»¬ç¼–å†™ä¸€ä¸ªpipelineä¸€æ ·ï¼Œå®šä¹‰ä¸€ä¸ªç±»ï¼Œç„¶ååœ¨settingä¸­å¼€å¯
<br>Downloader Middlewaresé»˜è®¤çš„æ–¹æ³•ï¼šåœ¨ä¸­é—´ä»¶ç±»ä¸­ï¼Œæœ‰æ—¶éœ€è¦é‡å†™å¤„ç†è¯·æ±‚æˆ–è€…å“åº”çš„æ–¹æ³•ã€‘<br>
<br>
process_request(self, request, spider)ï¼šã€æ­¤æ–¹æ³•æ˜¯ç”¨çš„æœ€å¤šçš„ã€‘

<br>å½“æ¯ä¸ªrequesté€šè¿‡ä¸‹è½½ä¸­é—´ä»¶æ—¶ï¼Œè¯¥æ–¹æ³•è¢«è°ƒç”¨ã€‚
<br>è¿”å›Noneå€¼ï¼šç»§ç»­è¯·æ±‚  æ²¡æœ‰returnä¹Ÿæ˜¯è¿”å›Noneï¼Œè¯¥requestå¯¹è±¡ä¼ é€’ç»™ä¸‹è½½å™¨ï¼Œæˆ–é€šè¿‡å¼•æ“ä¼ é€’ç»™å…¶ä»–æƒé‡ä½çš„process_requestæ–¹æ³• ã€å¦‚æœæ‰€æœ‰çš„ä¸‹è½½å™¨ä¸­é—´ä»¶éƒ½è¿”å›ä¸ºNoneï¼Œåˆ™è¯·æ±‚æœ€ç»ˆè¢«äº¤ç»™ä¸‹è½½å™¨å¤„ç†ã€‘
<br>è¿”å›Responseå¯¹è±¡ï¼šä¸å†è¯·æ±‚ï¼ŒæŠŠresponseè¿”å›ç»™å¼•æ“ã€å¦‚æœè¿”å›ä¸ºè¯·æ±‚ï¼Œåˆ™å°†è¯·æ±‚äº¤ç»™è°ƒåº¦å™¨ã€‘
<br>è¿”å›Requestå¯¹è±¡ï¼šæŠŠrequestå¯¹è±¡äº¤ç»™è°ƒåº¦å™¨è¿›è¡Œåç»­çš„è¯·æ±‚  


<br>
process_response(self, request, response, spider)ï¼š

<br>å½“ä¸‹è½½å™¨å®Œæˆhttpè¯·æ±‚ï¼Œä¼ é€’å“åº”ç»™å¼•æ“çš„æ—¶å€™è°ƒç”¨
<br>è¿”å›Resposneï¼šé€šè¿‡å¼•æ“äº¤ç»™çˆ¬è™«å¤„ç†æˆ–äº¤ç»™æƒé‡æ›´ä½çš„å…¶ä»–ä¸‹è½½ä¸­é—´ä»¶çš„process_responseæ–¹æ³• ã€å¦‚æœè¿”å›ä¸ºè¯·æ±‚ï¼Œåˆ™å°†è¯·æ±‚äº¤ç»™è°ƒåº¦å™¨ã€‘
<br>è¿”å›Requestå¯¹è±¡ï¼šäº¤ç»™è°ƒå–å™¨ç»§ç»­è¯·æ±‚ï¼Œæ­¤æ—¶å°†ä¸é€šè¿‡å…¶ä»–æƒé‡ä½çš„process_requestæ–¹æ³•  ã€å°†å“åº”å¯¹è±¡äº¤ç»™spiderè¿›è¡Œè§£æã€‘


<br>
process_exception(self, request, exception, spider):

<br>
è¯·æ±‚å‡ºç°å¼‚å¸¸çš„æ—¶å€™è¿›è¡Œè°ƒç”¨

<br>
æ¯”å¦‚å½“å‰è¯·æ±‚è¢«è¯†åˆ«ä¸ºçˆ¬è™« å¯ä»¥ä½¿ç”¨ä»£ç†
Pythondef process_exception(self, request, exception, spider):
	request.meta['proxy'] = 'http://ipåœ°å€'
  	request.dont_filter = True  # å› ä¸ºé»˜è®¤è¯·æ±‚æ˜¯å»é™¤é‡å¤çš„ï¼Œå› ä¸ºå½“å‰å·²ç»è¯·æ±‚è¿‡ï¼Œæ‰€ä»¥éœ€è¦è®¾ç½®å½“å‰ä¸ºä¸å»é‡
	return request  # å°†ä¿®æ­£åçš„å¯¹è±¡é‡æ–°è¿›è¡Œè¯·æ±‚
å¤åˆ¶



<br>
åœ¨settings.pyä¸­é…ç½®å¼€å¯ä¸­é—´ä»¶ï¼Œæƒé‡å€¼è¶Šå°è¶Šä¼˜å…ˆæ‰§è¡Œ  ã€åŒç®¡é“çš„æ³¨å†Œä½¿ç”¨ã€‘

<br>
spiderå‚æ•°ï¼šä¸ºçˆ¬è™«ä¸­ç±»çš„å®ä¾‹åŒ–å¯ä»¥åœ¨è¿™é‡Œè¿›è¡Œè°ƒç”¨çˆ¬è™«ä¸­çš„å±æ€§
å¦‚ï¼šspider.name

<br><br>spiders.pyï¼ˆçˆ¬è™«ä»£ç ï¼‰news.163.com/domestic/<br>Pythonclass WySpider(scrapy.Spider):
    name = 'wy'
    start_urls = ['http://www.baidu.com/']  # ç»™ä¸€ä¸ªæ­£ç¡®çš„ç½‘å€
    # start_urls = ['http://www.baidu123.com/']  # ç»™ä¸€ä¸ªé”™è¯¯çš„ç½‘å€
    def parse(self, response, **kwargs):
        pass
å¤åˆ¶<br>settings.py(å¼€å¯ä¸­é—´ä»¶)<br>PythonDOWNLOADER_MIDDLEWARES = {
   'wangyi.middlewares.WangyiDownloaderMiddleware': 543,
}
å¤åˆ¶<br>middlewares.py<br>Pythonclass WangyiDownloaderMiddleware:
    # Not all methods need to be defined. If a method is not defined,
    # scrapy acts as if the downloader middleware does not modify the
    # passed objects.

    @classmethod
    def from_crawler(cls, crawler):
        # This method is used by Scrapy to create your spiders.
        s = cls()
        crawler.signals.connect(s.spider_opened, signal=signals.spider_opened)
        return s

    def process_request(self, request, spider):
        print('process_request')
        return None

    def process_response(self, request, response, spider):
        print('process_response')
        return response

    def process_exception(self, request, exception, spider):
        print('process_exception')
        return request
å¤åˆ¶<br>è¿è¡ŒæŸ¥çœ‹<br>â€œScrapy04-ä¸­é—´ä»¶.assets/image-20220926140805300.pngâ€ could not be found.<br>ä¿®æ”¹spiders.py  ç»™ä¸€ä¸ªé”™è¯¯çš„ç½‘å€åœ¨è¿›è¡ŒæŸ¥çœ‹ï¼Œä¼šå‘ç°å½“å‰ä¼šå¾ªç¯æ‰§è¡Œ<br>â€œScrapy04-ä¸­é—´ä»¶.assets/image-20220926141048451.pngâ€ could not be found.<br><br><br>PythonUSER_AGENTS_LIST = [ 
"Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Win64; x64; Trident/5.0; .NET CLR 3.5.30729; .NET CLR 3.0.30729; .NET CLR 2.0.50727; Media Center PC 6.0)", 
"Mozilla/5.0 (compatible; MSIE 8.0; Windows NT 6.0; Trident/4.0; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; .NET CLR 1.0.3705; .NET CLR 1.1.4322)",
"Mozilla/4.0 (compatible; MSIE 7.0b; Windows NT 5.2; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.2; .NET CLR 3.0.04506.30)",
"Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN) AppleWebKit/523.15 (KHTML, like Gecko, Safari/419.3) Arora/0.3 (Change: 287 c9dfb30)",
"Mozilla/5.0 (X11; U; Linux; en-US) AppleWebKit/527+ (KHTML, like Gecko, Safari/419.3) Arora/0.6",
"Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.2pre) Gecko/20070215 K-Ninja/2.1.1",
"Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN; rv:1.9) Gecko/20080705 Firefox/3.0 Kapiko/3.0", 
"Mozilla/5.0 (X11; Linux i686; U;) Gecko/20070322 Kazehakase/0.4.5" 
]
å¤åˆ¶<br><br>Pythonimport random
from Tencent.settings import USER_AGENTS_LIST # æ³¨æ„å¯¼å…¥è·¯å¾„,è¯·å¿½è§†pycharmçš„é”™è¯¯æç¤º

class UserAgentMiddleware(object):
    def process_request(self, request, spider):
        user_agent = random.choice(USER_AGENTS_LIST)
        request.headers['User-Agent'] = user_agent
å¤åˆ¶<br><br>Pythonclass CheckUA:
    def process_response(self,request,response,spider):
        print(request.headers['User-Agent'])
å¤åˆ¶<br><br>PythonDOWNLOADER_MIDDLEWARES = {
   'Tencent.middlewares.UserAgentMiddleware': 543,
}
å¤åˆ¶<br><br><br><br>
<br>
ä»£ç†æ·»åŠ çš„ä½ç½®ï¼šrequest.metaä¸­å¢åŠ proxyå­—æ®µ

<br>
è·å–ä¸€ä¸ªä»£ç†ipï¼Œèµ‹å€¼ç»™
Pythonrequest.meta['proxy']
å¤åˆ¶

<br>ä»£ç†æ± ä¸­éšæœºé€‰æ‹©ä»£ç†ip
<br>ä»£ç†ipçš„webapiå‘é€è¯·æ±‚è·å–ä¸€ä¸ªä»£ç†ip


<br><br>Pythonclass ProxyMiddleware(object):
    def process_request(self,request,spider):
        proxy = random.choice(proxies) # proxieså¯ä»¥åœ¨settings.pyä¸­ï¼Œä¹Ÿå¯ä»¥æ¥æºäºä»£ç†ipçš„webapi
        # proxy = 'http://192.168.1.1:8118'
        request.meta['proxy'] = proxy
        return None # å¯ä»¥ä¸å†™return
å¤åˆ¶<br><br>åœ¨ä½¿ç”¨äº†ä»£ç†ipçš„æƒ…å†µä¸‹å¯ä»¥åœ¨ä¸‹è½½ä¸­é—´ä»¶çš„process_response()æ–¹æ³•ä¸­å¤„ç†ä»£ç†ipçš„ä½¿ç”¨æƒ…å†µï¼Œå¦‚æœè¯¥ä»£ç†ipä¸èƒ½ä½¿ç”¨å¯ä»¥æ›¿æ¢å…¶ä»–ä»£ç†ip<br>Pythonclass ProxyMiddleware(object):
    def process_response(self, request, response, spider):
        if response.status != '200' and response.status != '302':
            #æ­¤æ—¶å¯¹ä»£ç†ipè¿›è¡Œæ“ä½œï¼Œæ¯”å¦‚åˆ é™¤
            return request
å¤åˆ¶<br><br>ç½‘å€ï¼š<a rel="noopener" class="external-link" href="https://www.kuaidaili.com/" target="_blank">https://www.kuaidaili.com/</a><br>
<br>
è¾“å…¥ç½‘å€   ç‚¹å‡»è´­ä¹°ä»£ç†
<img style="zoom:50%;" alt="image-20221222111151687" src="\Scrapy04-ä¸­é—´ä»¶.assets\image-20221222111151687.png" referrerpolicy="no-referrer">

<br>
é€‰æ‹©ä½ æƒ³è´­ä¹°ä»£ç†çš„ç±»å‹
â€œScrapy04-ä¸­é—´ä»¶.assets/image-20221222111226189.pngâ€ could not be found.

<br>
ä»¥éš§é“ä»£ç†ä¸ºä¾‹  ç‚¹å‡»è´­ä¹°
â€œScrapy04-ä¸­é—´ä»¶.assets/image-20221222111311561.pngâ€ could not be found.

<br>
è´­ä¹°åç‚¹å‡» æ–‡æ¡£ä¸­å¿ƒ
<img style="zoom:50%;" alt="image-20221222111528183" src="\Scrapy04-ä¸­é—´ä»¶.assets\image-20221222111528183.png" referrerpolicy="no-referrer">

<br>
ç‚¹å‡»
<img style="zoom:50%;" alt="image-20221222111550153" src="\Scrapy04-ä¸­é—´ä»¶.assets\image-20221222111550153.png" referrerpolicy="no-referrer">

<br>
é€‰æ‹©éš§é“ä»£ç†
<img style="zoom:50%;" alt="image-20221222111626751" src="\Scrapy04-ä¸­é—´ä»¶.assets\image-20221222111626751.png" referrerpolicy="no-referrer">

<br>
å‘ä¸‹æ‹‰ é€‰æ‹©ä½ å½“å‰è¦ä½¿ç”¨ä»£ç†çš„æ¨¡å—
æˆ‘ä»¬æ˜¯scrapyä½¿ç”¨éš§é“ æ‰€ä»¥é€‰æ‹©   Python-Scrapy
â€œScrapy04-ä¸­é—´ä»¶.assets/image-20221222111731483.pngâ€ could not be found.

<br>
æ‰¾åˆ°middlewares.py
<img style="zoom:50%;" alt="image-20221222111824669" src="\Scrapy04-ä¸­é—´ä»¶.assets\image-20221222111824669.png" referrerpolicy="no-referrer">

<br>
å°†ä¸­é—´ä»¶ç±»ä»£ç å¤åˆ¶åˆ°å½“å‰è‡ªå·±scrapyçš„ä¸­é—´ä»¶å¾—æ–‡ä»¶ä¸­å³å¯
â€œScrapy04-ä¸­é—´ä»¶.assets/image-20221222112013039.pngâ€ could not be found.

<br>
æŒ‰ç…§æ­¥éª¤å¼€å¯ä¸­é—´ä»¶ä¸å¡«å†™è‡ªå·±çš„ç”¨æˆ·åä¸å¯†ç ç­‰ä¿¡æ¯å³å¯

<br><br>ä¸­é—´ä»¶çš„ä½¿ç”¨ï¼š<br>
<br>å®Œå–„ä¸­é—´ä»¶ä»£ç ï¼š

<br>process_request(self, request, spider)ï¼š

<br>å½“æ¯ä¸ªrequesté€šè¿‡ä¸‹è½½ä¸­é—´ä»¶æ—¶ï¼Œè¯¥æ–¹æ³•è¢«è°ƒç”¨ã€‚
<br>è¿”å›Noneå€¼ï¼šç»§ç»­è¯·æ±‚
<br>è¿”å›Responseå¯¹è±¡ï¼šä¸å†è¯·æ±‚ï¼ŒæŠŠresponseè¿”å›ç»™å¼•æ“
<br>è¿”å›Requestå¯¹è±¡ï¼šæŠŠrequestå¯¹è±¡äº¤ç»™è°ƒåº¦å™¨è¿›è¡Œåç»­çš„è¯·æ±‚


<br>process_response(self, request, response, spider)ï¼š

<br>å½“ä¸‹è½½å™¨å®Œæˆhttpè¯·æ±‚ï¼Œä¼ é€’å“åº”ç»™å¼•æ“çš„æ—¶å€™è°ƒç”¨
<br>è¿”å›Resposneï¼šäº¤ç»™process_responseæ¥å¤„ç†
<br>è¿”å›Requestå¯¹è±¡ï¼šäº¤ç»™è°ƒå–å™¨ç»§ç»­è¯·æ±‚




<br>éœ€è¦åœ¨settings.pyä¸­å¼€å¯ä¸­é—´ä»¶ DOWNLOADER_MIDDLEWARES = { 'myspider.middlewares.UserAgentMiddleware': 543, }
<br><br>urlï¼š<a rel="noopener" class="external-link" href="https://news.163.com/" target="_blank">https://news.163.com/</a><br><br>
<br>scrapy startproject wangyi
<br>cd wangyi
<br>scrapy genspider wy  <a rel="noopener" class="external-link" href="https://news.163.com/" target="_blank">https://news.163.com/</a>
<br><br>æŠ“å– å›½å†… å›½é™… å†›äº‹ èˆªç©º<br>
<br>
åˆ†æ 
å›½å†…ç­‰æ•°æ®æ˜¯ç”±åŠ¨æ€åŠ è½½çš„ å¹¶ä¸æ˜¯è·Ÿç€å½“å‰çš„è¯·æ±‚ä¸€èµ·è¿”å›çš„ 
â€œScrapy04-ä¸­é—´ä»¶.assets/image-20220509095648595.pngâ€ could not be found.
è§£å†³æ–¹å¼2ç§

<br>
é€šè¿‡seleniumé…åˆçˆ¬è™«æŠ“å–é¡µé¢è¿›è¡Œæ•°æ®

<br>
æ‰¾åˆ°åŠ è½½åŠ¨æ€æ•°æ®çš„urlåœ°å€  é€šè¿‡çˆ¬è™«è¿›è¡ŒæŠ“å–
â€œScrapy04-ä¸­é—´ä»¶.assets/image-20220509100159399.pngâ€ could not be found.
â€œScrapy04-ä¸­é—´ä»¶.assets/image-20220509100235422.pngâ€ could not be found.


â€œScrapy04-ä¸­é—´ä»¶.assets/image-20220509100359070.pngâ€ could not be found.
å°†æ‰¾åˆ°çš„URLæ”¾åˆ°æµè§ˆå™¨ä¸­è¿›è¡Œè¯·æ±‚  æ•ˆæœå¦‚ä¸‹
â€œScrapy04-ä¸­é—´ä»¶.assets/image-20220509100447858.pngâ€ could not be found.

<br><br>
<br>
é…ç½®æ–‡ä»¶å¤„ç†settings.py
Python# Scrapy settings for wangyi project
BOT_NAME = 'wangyi'

SPIDER_MODULES = ['wangyi.spiders']
NEWSPIDER_MODULE = 'wangyi.spiders'

# é»˜è®¤è¯·æ±‚å¤´
USER_AGENT = 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.127 Safari/537.36'

# ç”¨äºæ›´æ¢éšæœºè¯·æ±‚å¤´
USER_AGENTS_LIST = [
"Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Win64; x64; Trident/5.0; .NET CLR 3.5.30729; .NET CLR 3.0.30729; .NET CLR 2.0.50727; Media Center PC 6.0)",
"Mozilla/5.0 (compatible; MSIE 8.0; Windows NT 6.0; Trident/4.0; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; .NET CLR 1.0.3705; .NET CLR 1.1.4322)",
"Mozilla/4.0 (compatible; MSIE 7.0b; Windows NT 5.2; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.2; .NET CLR 3.0.04506.30)",
"Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN) AppleWebKit/523.15 (KHTML, like Gecko, Safari/419.3) Arora/0.3 (Change: 287 c9dfb30)",
"Mozilla/5.0 (X11; U; Linux; en-US) AppleWebKit/527+ (KHTML, like Gecko, Safari/419.3) Arora/0.6",
"Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.2pre) Gecko/20070215 K-Ninja/2.1.1",
"Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN; rv:1.9) Gecko/20080705 Firefox/3.0 Kapiko/3.0",
"Mozilla/5.0 (X11; Linux i686; U;) Gecko/20070322 Kazehakase/0.4.5" ]

LOG_LEVEL = 'ERROR'
ROBOTSTXT_OBEY = False

DOWNLOADER_MIDDLEWARES = {
   'wangyi.middlewares.WangyiDownloaderMiddleware': 543,
}
ITEM_PIPELINES = {
   'wangyi.pipelines.WangyiPipeline': 300,
}
å¤åˆ¶

<br>
çˆ¬è™«ä»£ç wy.py
Pythonimport scrapy
from selenium import webdriver
from selenium.webdriver import ChromeOptions
from selenium.webdriver.chrome.options import Options
from wangyi.items import WangyiItem
class WySpider(scrapy.Spider):
      name = 'wy'
      # allowed_domains = ['news.163.com']
      start_urls = ['https://news.163.com/domestic/']
      li_index = [1, 2]  # å½“å‰è¦çˆ¬å–èœå•çš„ç´¢å¼•ä½ç½®
      page_url = []
      # éšè—æµè§ˆå™¨ç•Œé¢
      chrome_option = Options()
      chrome_option.add_argument('--headless')
      chrome_option.add_argument('--disable-gpu')
      # é˜²æ­¢æ£€æµ‹
      option = ChromeOptions()
      option.add_experimental_option('excludeSwitches', ['enable-automation'])
      # å¯¼å…¥é…ç½®
      driver = webdriver.Chrome(chrome_options=chrome_option, options=option)
      def parse(self, response, **kwargs):
          # æŠ“å– å›½å†… å›½é™…
          menu = response.xpath('/html/body/div/div[3]/div[2]/div[2]/div/ul/li/a/@href').extract()
          # å¾ªç¯è·å–å½“å‰æˆ‘ä»¬è¦æŠ“å–æ ç›®çš„url
          for i in range(len(menu)):
              if i in self.li_index:
                  url = menu[i]
                  self.page_url.append(url)
                  # å‘è¯¦æƒ…é¡µå‘èµ·è¯·æ±‚
                  yield scrapy.Request(url, callback=self.parse_detail)
      # å¯¹æ ç›®é¡µè¿›è¡Œè¯·æ±‚
      def parse_detail(self, response):
          # è·å–æ¯ä¸ªæ–°é—»çš„url
          detail_href_list = response.xpath('/html/body/div/div[3]/div[3]/div[1]/div[1]/div/ul/li/div/div/a/@href').extract()
          # print(detail_href_list)
          for url in detail_href_list:
              print(url)
              yield scrapy.Request(url, callback=self.parse_detail_con)
  # å¯¹äºæ–°é—»è¯¦æƒ…é¡µè¿›è¡Œè§£æ
  def parse_detail_con(self, response):
      # å®ä¾‹åŒ–item
      item = WangyiItem()
      # åŒ¹é…æ ‡é¢˜
      title = response.xpath('//*[@id="container"]/div[1]/h1/text()').extract_first()
      # åŒ¹é…å†…å®¹
      con = ''.join(response.xpath('//*[@id="content"]/div[2]//text()').extract())
      item['title'] = title
      item['con'] = con
      print(item)
      yield item

+ Items.py

â€‹```python
import scrapy
class WangyiItem(scrapy.Item):
    # define the fields for your item here like:
    # name = scrapy.Field()
    title = scrapy.Field()
    content = scrapy.Field()
å¤åˆ¶

<br>
Middlewares.py
Pythonfrom wangyi.settings import USER_AGENTS_LIST
import random
from scrapy.http import HtmlResponse

class WangyiDownloaderMiddleware:

    @classmethod
    def from_crawler(cls, crawler):
        # This method is used by Scrapy to create your spiders.
        s = cls()
        crawler.signals.connect(s.spider_opened, signal=signals.spider_opened)
        return s

    def process_request(self, request, spider):
        request.headers['User-Agent'] = random.choice(USER_AGENTS_LIST)
        # print(request.headers)
        return None

    def process_response(self, request, response, spider):
        # Called with the response returned from the downloader.
        driver = spider.driver  # è·å–åˆ°selenium
        if request.url in spider.page_url:
            driver.get(request.url)
            # æ»šåŠ¨æ¡æ»šåŠ¨åˆ°æœ€ä¸‹æ–¹
            driver.execute_script('window.scrollTo(0, document.body.scrollHeight)')
            time.sleep(1)
            # æ‹–åŠ¨ä¸¤æ¬¡
            driver.execute_script('window.scrollTo(0, document.body.scrollHeight)')
            time.sleep(1)
            text = driver.page_source
            # ç¯¡æ”¹å“åº”å¯¹è±¡å¹¶è¿”å›
            return HtmlResponse(url=request.url, body=text, encoding='UTF-8', request=request)
        return response

    def process_exception(self, request, exception, spider):
        # Called when a download handler or a process_request()
        pass
    def spider_opened(self, spider):
        spider.logger.info('Spider opened: %s' % spider.name)
å¤åˆ¶

]]></description><link>çˆ¬è™«\çˆ¬è™«æ–‡æ¡£\Scrapy04-ä¸­é—´ä»¶.html</link><guid isPermaLink="false">çˆ¬è™«/çˆ¬è™«æ–‡æ¡£/Scrapy04-ä¸­é—´ä»¶.md</guid><pubDate>Mon, 16 Oct 2023 15:12:15 GMT</pubDate><enclosure url="Scrapy04-ä¸­é—´ä»¶.assets\image-20221222111151687.png" length="0" type="image/png"/><content:encoded>&lt;figure&gt;&lt;img src=&quot;Scrapy04-ä¸­é—´ä»¶.assets\image-20221222111151687.png&quot;&gt;&lt;/figure&gt;</content:encoded></item><item><title><![CDATA[scrapyçš„crawlspiderçˆ¬è™«]]></title><description><![CDATA[<a class="tag" href="?query=tag:scrapy" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#scrapy</a> <a class="tag" href="?query=tag:æ¡†æ¶" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#æ¡†æ¶</a> 
 <br><br><a href=".?query=tag:scrapy" class="tag" target="_blank" rel="noopener">#scrapy</a> <a href=".?query=tag:æ¡†æ¶" class="tag" target="_blank" rel="noopener">#æ¡†æ¶</a> <br><br>
<br>äº†è§£ crawlspiderçš„ä½œç”¨
<br>åº”ç”¨ crawlspiderçˆ¬è™«åˆ›å»ºçš„æ–¹æ³•
<br>åº”ç”¨ crawlspiderä¸­rulesçš„ä½¿ç”¨ 
<br><br><br>
å›é¡¾ä¹‹å‰çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬æœ‰å¾ˆå¤§ä¸€éƒ¨åˆ†æ—¶é—´åœ¨å¯»æ‰¾ä¸‹ä¸€é¡µçš„urlåœ°å€æˆ–è€…æ˜¯å†…å®¹çš„urlåœ°å€ä¸Šé¢ï¼Œè¿™ä¸ªè¿‡ç¨‹èƒ½æ›´ç®€å•ä¸€äº›ä¹ˆï¼Ÿ
<br><br>
<br>ä»responseä¸­æå–æ‰€æœ‰çš„æ»¡è¶³è§„åˆ™çš„urlåœ°å€
<br>è‡ªåŠ¨çš„æ„é€ è‡ªå·±requestsè¯·æ±‚ï¼Œå‘é€ç»™å¼•æ“
<br>å¯¹åº”çš„crawlspiderå°±å¯ä»¥å®ç°ä¸Šè¿°éœ€æ±‚ï¼Œèƒ½å¤ŸåŒ¹é…æ»¡è¶³æ¡ä»¶çš„urlåœ°å€ï¼Œç»„è£…æˆReuqestå¯¹è±¡åè‡ªåŠ¨å‘é€ç»™å¼•æ“ï¼ŒåŒæ—¶èƒ½å¤ŸæŒ‡å®šcallbackå‡½æ•°<br>å³ï¼šcrawlspiderçˆ¬è™«å¯ä»¥æŒ‰ç…§è§„åˆ™è‡ªåŠ¨è·å–è¿æ¥<br><br>
é€šè¿‡crawlspiderçˆ¬å–è±†ç“£TOP250è¯¦æƒ…é¡µçš„ä¿¡æ¯
urlï¼š<a rel="noopener" class="external-link" href="https://movie.douban.com/top250" target="_blank">https://movie.douban.com/top250</a>
<br><br>
<br>å®šä¹‰ä¸€ä¸ªè§„åˆ™ï¼Œæ¥è¿›è¡Œåˆ—è¡¨é¡µç¿»é¡µï¼Œfollowéœ€è¦è®¾ç½®ä¸ºTrue
<br>å®šä¹‰ä¸€ä¸ªè§„åˆ™ï¼Œå®ç°ä»åˆ—è¡¨é¡µè¿›å…¥è¯¦æƒ…é¡µï¼Œå¹¶ä¸”æŒ‡å®šå›è°ƒå‡½æ•°
<br>åœ¨è¯¦æƒ…é¡µæå–æ•°æ®
<br><br><br><br>scrapy startproject project<br>cd project<br>scrapy genspider -t crawl douban book.douban.com/latest?subcat=%E5%85%A8%E9%83%A8&amp;p=1<br>url: è±†ç“£å›¾ä¹¦ <a rel="noopener" class="external-link" href="https://book.douban.com/latest?subcat=%E5%85%A8%E9%83%A8&amp;p=1" target="_blank">https://book.douban.com/latest?subcat=%E5%85%A8%E9%83%A8&amp;p=1</a><br><br>Pythonimport scrapy
from scrapy.linkextractors import LinkExtractor
from scrapy.spiders import CrawlSpider, Rule


class BookSpider(CrawlSpider):
    name = 'douban'
    # allowed_domains = ['https://movie.douban.com/top250']

    start_urls = ['https://movie.douban.com/top250']
    # åŒ¹é…é¡µç åœ°å€
    link = LinkExtractor(allow=r'start=\d+&amp;filter=')
    # åŒ¹é…è¯¦æƒ…é¡µåœ°å€
    link_detail = LinkExtractor(allow=r'https://movie.douban.com/subject/\d+/')
    # allowå€¼ä»€ä¹ˆéƒ½ä¸å†™ åˆ™ä¸ºæå–æ‰€æœ‰çš„url
    link_all = LinkExtractor(allow=r'')
    rules = (
        # Rule(link, callback='parse_item', follow=True),
        # Rule(link_detail, callback='parse_detail_item', follow=False),
        Rule(link_all, callback='parse_all_item', follow=True),
    )

    def parse_item(self, response):
        item = {}
        print(response)
        return item

    def parse_detail_item(self, response):
        item = {}
        print(response)
        return item

    def parse_all_item(self, response):
        item = {}
        print(response)
        return item
å¤åˆ¶<br><br>åœ¨crawlspiderçˆ¬è™«ä¸­ï¼Œæ²¡æœ‰parseå‡½æ•°<br><br>
<br>rulesæ˜¯ä¸€ä¸ªå…ƒç»„æˆ–è€…æ˜¯åˆ—è¡¨ï¼ŒåŒ…å«çš„æ˜¯Ruleå¯¹è±¡
<br>Ruleè¡¨ç¤ºè§„åˆ™ï¼Œå…¶ä¸­åŒ…å«LinkExtractor,callbackå’Œfollowç­‰å‚æ•°
<br>LinkExtractor:è¿æ¥æå–å™¨ï¼Œå¯ä»¥é€šè¿‡æ­£åˆ™æˆ–è€…æ˜¯xpathæ¥è¿›è¡Œurlåœ°å€çš„åŒ¹é…
<br>callback :è¡¨ç¤ºç»è¿‡è¿æ¥æå–å™¨æå–å‡ºæ¥çš„urlåœ°å€å“åº”çš„å›è°ƒå‡½æ•°ï¼Œå¯ä»¥æ²¡æœ‰ï¼Œæ²¡æœ‰è¡¨ç¤ºå“åº”ä¸ä¼šè¿›è¡Œå›è°ƒå‡½æ•°çš„å¤„ç†
<br>followï¼šè¿æ¥æå–å™¨æå–çš„urlåœ°å€å¯¹åº”çš„å“åº”æ˜¯å¦è¿˜ä¼šç»§ç»­è¢«rulesä¸­çš„è§„åˆ™è¿›è¡Œæå–ï¼ŒTrueè¡¨ç¤ºä¼šï¼ŒFlaseè¡¨ç¤ºä¸ä¼š
<br><br>
<br>é™¤äº†ç”¨å‘½ä»¤scrapy genspider -t crawl &lt;çˆ¬è™«å&gt; &lt;allowed_domail&gt;åˆ›å»ºä¸€ä¸ªcrawlspiderçš„æ¨¡æ¿ï¼Œé¡µå¯ä»¥æ‰‹åŠ¨åˆ›å»º
<br>crawlspiderä¸­ä¸èƒ½å†æœ‰ä»¥parseä¸ºåçš„æ•°æ®æå–æ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¢«crawlspiderç”¨æ¥å®ç°åŸºç¡€urlæå–ç­‰åŠŸèƒ½
<br>Ruleå¯¹è±¡ä¸­LinkExtractorä¸ºå›ºå®šå‚æ•°ï¼Œå…¶ä»–callbackã€followä¸ºå¯é€‰å‚æ•°
<br>ä¸æŒ‡å®šcallbackä¸”followä¸ºTrueçš„æƒ…å†µä¸‹ï¼Œæ»¡è¶³rulesä¸­è§„åˆ™çš„urlè¿˜ä¼šè¢«ç»§ç»­æå–å’Œè¯·æ±‚
<br>å¦‚æœä¸€ä¸ªè¢«æå–çš„urlæ»¡è¶³å¤šä¸ªRuleï¼Œé‚£ä¹ˆä¼šä»rulesä¸­é€‰æ‹©ä¸€ä¸ªæ»¡è¶³åŒ¹é…æ¡ä»¶çš„Ruleæ‰§è¡Œ
<br><br>
<br>
é“¾æ¥æå–å™¨LinkExtractorçš„æ›´å¤šå¸¸è§å‚æ•°

<br>
allow: æ»¡è¶³æ‹¬å·ä¸­çš„'re'è¡¨è¾¾å¼çš„urlä¼šè¢«æå–ï¼Œå¦‚æœä¸ºç©ºï¼Œåˆ™å…¨éƒ¨åŒ¹é…

<br>
deny: æ»¡è¶³æ‹¬å·ä¸­çš„'re'è¡¨è¾¾å¼çš„urlä¸ä¼šè¢«æå–ï¼Œä¼˜å…ˆçº§é«˜äºallow

<br>
allow_domains: ä¼šè¢«æå–çš„é“¾æ¥çš„domains(urlèŒƒå›´)ï¼Œå¦‚ï¼š['https://movie.douban.com/top250']

<br>
deny_domains: ä¸ä¼šè¢«æå–çš„é“¾æ¥çš„domains(urlèŒƒå›´)

<br>
restrict_xpaths: ä½¿ç”¨xpathè§„åˆ™è¿›è¡ŒåŒ¹é…ï¼Œå’Œallowå…±åŒè¿‡æ»¤urlï¼Œå³xpathæ»¡è¶³çš„èŒƒå›´å†…çš„urlåœ°å€ä¼šè¢«æå–
å¦‚ï¼šrestrict_xpaths='//div[@class="pagenav"]'

<br>
restrict_css: æ¥æ”¶ä¸€å †cssé€‰æ‹©å™¨, å¯ä»¥æå–ç¬¦åˆè¦æ±‚çš„cssé€‰æ‹©å™¨çš„é“¾æ¥

<br>
attrs: æ¥æ”¶ä¸€å †å±æ€§å, ä»æŸä¸ªå±æ€§ä¸­æå–é“¾æ¥, é»˜è®¤href

<br>
tags: æ¥æ”¶ä¸€å †æ ‡ç­¾å, ä»æŸä¸ªæ ‡ç­¾ä¸­æå–é“¾æ¥, é»˜è®¤a, area


å€¼å¾—æ³¨æ„çš„, åœ¨æå–åˆ°çš„urlä¸­, æ˜¯æœ‰é‡å¤çš„å†…å®¹çš„. ä½†æ˜¯æˆ‘ä»¬ä¸ç”¨ç®¡. scrapyä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬è¿‡æ»¤æ‰é‡å¤çš„urlè¯·æ±‚

<br>
æ¨¡æ‹Ÿä½¿ç”¨

<br>ã€€ã€€æ­£åˆ™ç”¨æ³•ï¼šã€€links1 = LinkExtractor(allow=r'list23\d+.html')<br>ã€€ã€€xpathç”¨æ³•ï¼š links2 = LinkExtractor(restrict_xpaths=r'//div[@class="x"]')<br>ã€€	cssç”¨æ³•ï¼š  links3 = LinkExtractor(restrict_css='.x')<br>5.æå–è¿æ¥<br>
<br>
Ruleå¸¸è§å‚æ•°

<br>LinkExtractor: é“¾æ¥æå–å™¨ï¼Œå¯ä»¥é€šè¿‡æ­£åˆ™æˆ–è€…æ˜¯xpathæ¥è¿›è¡Œurlåœ°å€çš„åŒ¹é…
<br>callback: è¡¨ç¤ºç»è¿‡è¿æ¥æå–å™¨æå–å‡ºæ¥çš„urlåœ°å€å“åº”çš„å›è°ƒå‡½æ•°ï¼Œå¯ä»¥æ²¡æœ‰ï¼Œæ²¡æœ‰è¡¨ç¤ºå“åº”ä¸ä¼šè¿›è¡Œå›è°ƒå‡½æ•°çš„å¤„ç†
<br>follow: è¿æ¥æå–å™¨æå–çš„urlåœ°å€å¯¹åº”çš„å“åº”æ˜¯å¦è¿˜ä¼šç»§ç»­è¢«rulesä¸­çš„è§„åˆ™è¿›è¡Œæå–ï¼Œé»˜è®¤Trueè¡¨ç¤ºä¼šï¼ŒFlaseè¡¨ç¤ºä¸ä¼š
<br>process_links: å½“é“¾æ¥æå–å™¨LinkExtractorè·å–åˆ°é“¾æ¥åˆ—è¡¨çš„æ—¶å€™è°ƒç”¨è¯¥å‚æ•°æŒ‡å®šçš„æ–¹æ³•ï¼Œè¿™ä¸ªè‡ªå®šä¹‰æ–¹æ³•å¯ä»¥ç”¨æ¥è¿‡æ»¤urlï¼Œä¸”è¿™ä¸ªæ–¹æ³•æ‰§è¡Œåæ‰ä¼šæ‰§è¡ŒcallbackæŒ‡å®šçš„æ–¹æ³•


<br><br>
<br>crawlspiderçš„ä½œç”¨ï¼šcrawlspiderå¯ä»¥æŒ‰ç…§è§„åˆ™è‡ªåŠ¨è·å–è¿æ¥
<br>crawlspiderçˆ¬è™«çš„åˆ›å»ºï¼šscrapy genspider -t crawl xxx  <a data-tooltip-position="top" aria-label="http://www.xxx.com" rel="noopener" class="external-link" href="http://www.xxx.com" target="_blank">www.xxx.com</a>
<br>crawlspiderä¸­rulesçš„ä½¿ç”¨ï¼š

<br>rulesæ˜¯ä¸€ä¸ªå…ƒç»„æˆ–è€…æ˜¯åˆ—è¡¨ï¼ŒåŒ…å«çš„æ˜¯Ruleå¯¹è±¡
<br>Ruleè¡¨ç¤ºè§„åˆ™ï¼Œå…¶ä¸­åŒ…å«LinkExtractor,callbackå’Œfollowç­‰å‚æ•°
<br>LinkExtractor:è¿æ¥æå–å™¨ï¼Œå¯ä»¥é€šè¿‡æ­£åˆ™æˆ–è€…æ˜¯xpathæ¥è¿›è¡Œurlåœ°å€çš„åŒ¹é…
<br>callback :è¡¨ç¤ºç»è¿‡è¿æ¥æå–å™¨æå–å‡ºæ¥çš„urlåœ°å€å“åº”çš„å›è°ƒå‡½æ•°ï¼Œå¯ä»¥æ²¡æœ‰ï¼Œæ²¡æœ‰è¡¨ç¤ºå“åº”ä¸ä¼šè¿›è¡Œå›è°ƒå‡½æ•°çš„å¤„ç†
<br>followï¼šè¿æ¥æå–å™¨æå–çš„urlåœ°å€å¯¹åº”çš„å“åº”æ˜¯å¦è¿˜ä¼šç»§ç»­è¢«rulesä¸­çš„è§„åˆ™è¿›è¡Œæå–ï¼ŒTrueè¡¨ç¤ºä¼šï¼ŒFlaseè¡¨ç¤ºä¸ä¼š


<br>]]></description><link>çˆ¬è™«\çˆ¬è™«æ–‡æ¡£\Scrapy05-åˆ†é¡µæŠ“å–_20230315_220513.html</link><guid isPermaLink="false">çˆ¬è™«/çˆ¬è™«æ–‡æ¡£/Scrapy05-åˆ†é¡µæŠ“å–_20230315_220513.md</guid><pubDate>Mon, 16 Oct 2023 15:12:20 GMT</pubDate></item><item><title><![CDATA[scrapy_redis]]></title><description><![CDATA[<a class="tag" href="?query=tag:scrapy" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#scrapy</a> <a class="tag" href="?query=tag:æ¡†æ¶" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#æ¡†æ¶</a> 
 <br><br><a href=".?query=tag:scrapy" class="tag" target="_blank" rel="noopener">#scrapy</a> <a href=".?query=tag:æ¡†æ¶" class="tag" target="_blank" rel="noopener">#æ¡†æ¶</a><br><br><br>
<br>äº†è§£ scarpy_redisçš„æ¦‚å¿µå’ŒåŠŸèƒ½
<br>äº†è§£ scrapy_redisçš„åŸç†
<br>äº†è§£ redisæ•°æ®åº“æ“ä½œå‘½ä»¤
<br><br>
åœ¨å‰é¢scrapyæ¡†æ¶ä¸­æˆ‘ä»¬å·²ç»èƒ½å¤Ÿä½¿ç”¨æ¡†æ¶å®ç°çˆ¬è™«çˆ¬å–ç½‘ç«™æ•°æ®,å¦‚æœå½“å‰ç½‘ç«™çš„æ•°æ®æ¯”è¾ƒåºå¤§, æˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨åˆ†å¸ƒå¼æ¥æ›´å¿«çš„çˆ¬å–æ•°æ®
<br><br><br>pip install scrapy_redis == 0.7.2<br><br>Scrapy_redisåœ¨scrapyçš„åŸºç¡€ä¸Šå®ç°äº†æ›´å¤šï¼Œæ›´å¼ºå¤§çš„åŠŸèƒ½ï¼Œå…·ä½“ä½“ç°åœ¨ï¼š<br>
<br>è¯·æ±‚å¯¹è±¡çš„æŒä¹…åŒ–
<br>å»é‡çš„æŒä¹…åŒ–
<br>å’Œå®ç°åˆ†å¸ƒå¼
<br><br><br>â€œscrapy_redis.assets/scrapyçš„æµç¨‹.pngâ€ could not be found.<br>é‚£ä¹ˆï¼Œåœ¨è¿™ä¸ªåŸºç¡€ä¸Šï¼Œå¦‚æœéœ€è¦å®ç°åˆ†å¸ƒå¼ï¼Œå³å¤šå°æœåŠ¡å™¨åŒæ—¶å®Œæˆä¸€ä¸ªçˆ¬è™«ï¼Œéœ€è¦æ€ä¹ˆåšå‘¢ï¼Ÿ<br><br>
<br>åœ¨scrapy_redisä¸­ï¼Œæ‰€æœ‰çš„å¸¦æŠ“å–çš„å¯¹è±¡å’Œå»é‡çš„æŒ‡çº¹éƒ½å­˜åœ¨æ‰€æœ‰çš„æœåŠ¡å™¨å…¬ç”¨çš„redisä¸­
<br>æ‰€æœ‰çš„æœåŠ¡å™¨å…¬ç”¨ä¸€ä¸ªredisä¸­çš„requestå¯¹è±¡
<br>æ‰€æœ‰çš„requestå¯¹è±¡å­˜å…¥rediså‰ï¼Œéƒ½ä¼šåœ¨åŒä¸€ä¸ªredisä¸­è¿›è¡Œåˆ¤æ–­ï¼Œä¹‹å‰æ˜¯å¦å·²ç»å­˜å…¥è¿‡
<br>åœ¨é»˜è®¤æƒ…å†µä¸‹æ‰€æœ‰çš„æ•°æ®ä¼šä¿å­˜åœ¨redisä¸­
<br>å…·ä½“æµç¨‹å¦‚ä¸‹ï¼š<br>â€œscrapy_redis.assets/scrapy_redisçš„æµç¨‹.pngâ€ could not be found.<br><br>
ç”±äºæ—¶é—´å…³ç³»,å¤§å®¶å¯¹redisçš„å‘½ä»¤é—å¿˜çš„å·®ä¸å¤šäº†, ä½†æ˜¯åœ¨scrapy_redisä¸­éœ€è¦ä½¿ç”¨redisçš„æ“ä½œå‘½ä»¤,æ‰€æœ‰éœ€è¦å›é¡¾ä¸‹redisçš„å‘½ä»¤æ“ä½œ
<br><br>redisæ˜¯ä¸€ä¸ªå¼€æºçš„å†…å­˜å‹æ•°æ®åº“ï¼Œæ”¯æŒå¤šç§æ•°æ®ç±»å‹å’Œç»“æ„ï¼Œæ¯”å¦‚åˆ—è¡¨ã€é›†åˆã€æœ‰åºé›†åˆç­‰,åŒæ—¶å¯ä»¥ä½¿ç”¨redis-manger-desktopç­‰å®¢æˆ·ç«¯è½¯ä»¶æŸ¥çœ‹redisä¸­çš„æ•°æ®ï¼Œå…³äºredis-manger-desktopçš„ä½¿ç”¨å¯ä»¥å‚è€ƒæ‰©å±•é˜…è¯»<br><br>
<br>redis-server.exe redis-windwos.conf å¯åŠ¨æœåŠ¡ç«¯
<br>redis-cli å®¢æˆ·ç«¯å¯åŠ¨
<br><br>
<br>select 1 åˆ‡æ¢db
<br>keys * æŸ¥çœ‹æ‰€æœ‰çš„é”®
<br>type é”® æŸ¥çœ‹é”®çš„ç±»å‹
<br>flushdb æ¸…ç©ºdb
<br>flushall æ¸…ç©ºæ•°æ®åº“
<br><br>redisçš„å‘½ä»¤å¾ˆå¤šï¼Œè¿™é‡Œæˆ‘ä»¬ç®€å•å¤ä¹ åç»­ä¼šä½¿ç”¨çš„å‘½ä»¤<br>â€œscrapy_redis.assets/rediså‘½ä»¤çš„å¤ä¹ .pngâ€ could not be found.<br><br>scarpy_redisçš„åˆ†å¸ƒå¼å·¥ä½œåŸç†<br>
<br>åœ¨scrapy_redisä¸­ï¼Œæ‰€æœ‰çš„å¸¦æŠ“å–çš„å¯¹è±¡å’Œå»é‡çš„æŒ‡çº¹éƒ½å­˜åœ¨æ‰€æœ‰çš„æœåŠ¡å™¨å…¬ç”¨çš„redisä¸­
<br>æ‰€æœ‰çš„æœåŠ¡å™¨å…¬ç”¨ä¸€ä¸ªredisä¸­çš„requestå¯¹è±¡
<br>æ‰€æœ‰çš„requestå¯¹è±¡å­˜å…¥rediså‰ï¼Œéƒ½ä¼šåœ¨åŒä¸€ä¸ªredisä¸­è¿›è¡Œåˆ¤æ–­ï¼Œä¹‹å‰æ˜¯å¦å·²ç»å­˜å…¥è¿‡
<br><br><br>é…ç½®å®Œæˆä½¿ç”¨åˆ†å¸ƒå¼çˆ¬è™«<br><br>åˆ†å¸ƒå¼çˆ¬è™«<br>
<br>ä½¿ç”¨å¤šå°æœºå™¨æ­å»ºä¸€ä¸ªåˆ†å¸ƒå¼çš„æœºå™¨ï¼Œç„¶åè®©ä»–ä»¬è”åˆä¸”åˆ†å¸ƒçš„å¯¹åŒä¸€ç»„èµ„æºè¿›è¡Œæ•°æ®çˆ¬å–
<br>åŸç”Ÿçš„scrapyæ¡†æ¶æ˜¯æ— æ³•å®ç°åˆ†å¸ƒå¼çˆ¬è™«ï¼Ÿ

<br>åŸå› ï¼šè°ƒåº¦å™¨ï¼Œç®¡é“æ— æ³•è¢«åˆ†å¸ƒå¼æœºç¾¤å…±äº«


<br>å¦‚ä½•å®ç°åˆ†å¸ƒå¼

<br>å€ŸåŠ©ï¼šscrapy-redisç»„ä»¶
<br>ä½œç”¨ï¼šæä¾›äº†å¯ä»¥è¢«å…±äº«çš„ç®¡é“å’Œè°ƒåº¦å™¨
<br>åªå¯ä»¥å°†çˆ¬å–åˆ°çš„æ•°æ®å­˜å‚¨åˆ°redisä¸­


<br><br>
<br>scrapy  startproject fbsPro
<br>cd fbsPro
<br>scrapy genspider -t crawl fbs <a data-tooltip-position="top" aria-label="http://www.xxx.com" rel="noopener" class="external-link" href="http://www.xxx.com" target="_blank">www.xxx.com</a>
<br><br>
<br>
(å¿…é¡»). ä½¿ç”¨äº†scrapy_redisçš„å»é‡ç»„ä»¶ï¼Œåœ¨redisæ•°æ®åº“é‡Œåšå»é‡
PythonDUPEFILTER_CLASS = "scrapy_redis.dupefilter.RFPDupeFilter"
å¤åˆ¶

<br>
(å¿…é¡»). ä½¿ç”¨äº†scrapy_redisçš„è°ƒåº¦å™¨ï¼Œåœ¨redisé‡Œåˆ†é…è¯·æ±‚
PythonSCHEDULER = "scrapy_redis.scheduler.Scheduler"
å¤åˆ¶

<br>
(å¯é€‰). åœ¨redisä¸­ä¿æŒscrapy-redisç”¨åˆ°çš„å„ä¸ªé˜Ÿåˆ—ï¼Œä»è€Œå…è®¸æš‚åœå’Œæš‚åœåæ¢å¤ï¼Œä¹Ÿå°±æ˜¯ä¸æ¸…ç†redis queues
SCHEDULER_PERSIST = True
å¤åˆ¶

<br>
(å¿…é¡»). é€šè¿‡é…ç½®RedisPipelineå°†itemå†™å…¥keyä¸º spider.name : items çš„redisçš„listä¸­ï¼Œä¾›åé¢çš„åˆ†å¸ƒå¼å¤„ç†item è¿™ä¸ªå·²ç»ç”± scrapy-redis å®ç°ï¼Œä¸éœ€è¦æˆ‘ä»¬å†™ä»£ç ï¼Œç›´æ¥ä½¿ç”¨å³å¯
ITEM_PIPELINES = {
ã€€ã€€ 'scrapy_redis.pipelines.RedisPipeline': 100 ,
}
å¤åˆ¶

<br>
(å¿…é¡»). æŒ‡å®šredisæ•°æ®åº“çš„è¿æ¥å‚æ•°
REDIS_HOST = '127.0.0.1' 
REDIS_PORT = 6379
REDIS_DB = 0  # (ä¸æŒ‡å®šé»˜è®¤ä¸º0)
#  è®¾ç½®å¯†ç 
REDIS_PARAMS = {'password': '123456'}
å¤åˆ¶

<br><br>settings.py<br>è¿™å‡ è¡Œè¡¨ç¤ºscrapy_redisä¸­é‡æ–°å®ç°çš„äº†å»é‡çš„ç±»ï¼Œä»¥åŠè°ƒåº¦å™¨ï¼Œå¹¶ä¸”ä½¿ç”¨çš„RedisPipeline<br>éœ€è¦æ·»åŠ redisçš„åœ°å€ï¼Œç¨‹åºæ‰èƒ½å¤Ÿä½¿ç”¨redis<br>åœ¨settings.pyæ–‡ä»¶ä¿®æ”¹pipelinesï¼Œå¢åŠ scrapy_redisã€‚<br>Python# é…ç½®åˆ†å¸ƒå¼
DUPEFILTER_CLASS = "scrapy_redis.dupefilter.RFPDupeFilter"
SCHEDULER = "scrapy_redis.scheduler.Scheduler"
SCHEDULER_PERSIST = True

ITEM_PIPELINES = {
    'scrapy_redis.pipelines.RedisPipeline': 400,
}


# æˆ–è€…ä½¿ç”¨ä¸‹é¢çš„æ–¹å¼
REDIS_HOST = "127.0.0.1"
REDIS_PORT = 6379
REDIS_PARAMS = {'password': '123456'}
å¤åˆ¶<br>æ³¨æ„ï¼šscrapy_redisçš„ä¼˜å…ˆçº§è¦è°ƒé«˜<br><br>Pythonfrom scrapy_redis.spiders import RedisCrawlSpider

# æ³¨æ„  ä¸€å®šè¦ç»§æ‰¿RedisCrawlSpider
class FbsSpider(RedisCrawlSpider):
    name = 'fbs'
    # allowed_domains = ['www.xxx.com']
    # start_urls = ['http://www.xxx.com/']
    redis_key = 'fbsQueue'  # ä½¿ç”¨ç®¡é“åç§°ï¼ˆè¯¾æ ¹æ®å®é™…åŠŸèƒ½èµ·åç§°ï¼‰
å¤åˆ¶<br><br>scrapy-redisä¸­éƒ½æ˜¯ç”¨key-valueå½¢å¼å­˜å‚¨æ•°æ®ï¼Œå…¶ä¸­æœ‰å‡ ä¸ªå¸¸è§çš„key-valueå½¢å¼ï¼š<br>1ã€ â€œé¡¹ç›®å:itemsâ€  --&gt;list ç±»å‹ï¼Œä¿å­˜çˆ¬è™«è·å–åˆ°çš„æ•°æ®item å†…å®¹æ˜¯ json å­—ç¬¦ä¸²<br>2ã€ â€œé¡¹ç›®å:dupefilterâ€   --&gt;setç±»å‹ï¼Œç”¨äºçˆ¬è™«è®¿é—®çš„URLå»é‡ å†…å®¹æ˜¯ 40ä¸ªå­—ç¬¦çš„ url çš„hashå­—ç¬¦ä¸²<br>3ã€ â€œé¡¹ç›®å:requestsâ€   --&gt;zsetç±»å‹ï¼Œç”¨äºschedulerè°ƒåº¦å¤„ç† requests å†…å®¹æ˜¯ request å¯¹è±¡çš„åºåˆ—åŒ– å­—ç¬¦ä¸²<br><br>
<br>
ç½‘å€
é˜³å…‰é—®æ”¿ä¸ºä¾‹
<a rel="noopener" class="external-link" href="https://wz.sun0769.com/political/index/politicsNewest" target="_blank">https://wz.sun0769.com/political/index/politicsNewest</a>

<br>
settings.py
PythonBOT_NAME = 'fbsPro'

SPIDER_MODULES = ['fbsPro.spiders']
NEWSPIDER_MODULE = 'fbsPro.spiders'

USER_AGENT = 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.127 Safari/537.36'

# Obey robots.txt rules
ROBOTSTXT_OBEY = False

# é…ç½®åˆ†å¸ƒå¼
DUPEFILTER_CLASS = "scrapy_redis.dupefilter.RFPDupeFilter"
SCHEDULER = "scrapy_redis.scheduler.Scheduler"
SCHEDULER_PERSIST = True

ITEM_PIPELINES = {
    'scrapy_redis.pipelines.RedisPipeline': 400,
}

# æˆ–è€…ä½¿ç”¨ä¸‹é¢çš„æ–¹å¼
REDIS_HOST = "127.0.0.1"
REDIS_PORT = 6379
REDIS_PARAMS = {'password': '123456'}
å¤åˆ¶

<br>
fbs.py
å®ç°æ–¹å¼å°±æ˜¯ä¹‹å‰çš„crawlspiderç±»å‹çš„çˆ¬è™«
Pythonimport scrapy
from scrapy.linkextractors import LinkExtractor
from scrapy.spiders import CrawlSpider, Rule
from scrapy_redis.spiders import RedisCrawlSpider

# æ³¨æ„  ä¸€å®šè¦ç»§æ‰¿RedisCrawlSpider
class FbsSpider(RedisCrawlSpider):
    name = 'fbs'
    # allowed_domains = ['www.xxx.com']
    # start_urls = ['http://www.xxx.com/']
    redis_key = 'fbsQueue'  # ä½¿ç”¨ç®¡é“åç§°
    link = LinkExtractor(allow=r'/political/politics/index?id=\d+')
    rules = (
        Rule(link, callback='parse_item', follow=True),
    )

    def parse_item(self, response):
        item = {}
        yield item
å¤åˆ¶

<br>
redisä¸­

<br>
redis-windwos.conf  

<br>56è¡Œæ·»åŠ æ³¨é‡Š å–æ¶ˆç»‘å®š127.0.0.1  # bind 127.0.0.1
<br>75è¡Œ  ä¿®æ”¹ä¿æŠ¤æ¨¡å¼ä¸ºno  protected-mode no


<br>
å¯åŠ¨redis

<br>
é˜Ÿåˆ—ä¸­æ·»åŠ urlåœ°å€
æ·»åŠ ï¼šlpush fbsQueue <a rel="noopener" class="external-link" href="https://wz.sun0769.com/political/index/politicsNewest" target="_blank">https://wz.sun0769.com/political/index/politicsNewest</a>
æŸ¥çœ‹ï¼šlrange fbsQueue 0 -1 



<br>
è¿è¡Œ
scrapy crawl fbs

<br>
å»redisä¸­æŸ¥çœ‹å­˜å‚¨çš„æ•°æ®

]]></description><link>çˆ¬è™«\çˆ¬è™«æ–‡æ¡£\Scrapy06-scrapy_redis.html</link><guid isPermaLink="false">çˆ¬è™«/çˆ¬è™«æ–‡æ¡£/Scrapy06-scrapy_redis.md</guid><pubDate>Mon, 16 Oct 2023 15:12:22 GMT</pubDate></item><item><title><![CDATA[selenium]]></title><description><![CDATA[<a class="tag" href="?query=tag:æ¡†æ¶" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#æ¡†æ¶</a> 
 <br><br><a href=".?query=tag:æ¡†æ¶" class="tag" target="_blank" rel="noopener">#æ¡†æ¶</a><br><br><br>seleniumæœ¬èº«æ˜¯ä¸€ä¸ªè‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·ã€‚å®ƒå¯ä»¥è®©pythonä»£ç è°ƒç”¨æµè§ˆå™¨ã€‚å¹¶è·å–åˆ°æµè§ˆå™¨ä¸­åŠ è½½çš„å„ç§èµ„æºã€‚ æˆ‘ä»¬å¯ä»¥åˆ©ç”¨seleniumæä¾›çš„å„é¡¹åŠŸèƒ½ã€‚ å¸®åŠ©æˆ‘ä»¬å®Œæˆæ•°æ®çš„æŠ“å–ã€‚<br><br>
<br>æŒæ¡ seleniumå‘é€è¯·æ±‚ï¼ŒåŠ è½½ç½‘é¡µçš„æ–¹æ³•
<br>æŒæ¡ seleniumç®€å•çš„å…ƒç´ å®šä½çš„æ–¹æ³•
<br>æŒæ¡ seleniumçš„åŸºç¡€å±æ€§å’Œæ–¹æ³•
<br>æŒæ¡ seleniumé€€å‡ºçš„æ–¹æ³•
<br><br>å®‰è£…ï¼špip install selenium<br>å®ƒä¸å…¶ä»–åº“ä¸åŒçš„åœ°æ–¹æ˜¯ä»–è¦å¯åŠ¨ä½ ç”µè„‘ä¸Šçš„æµè§ˆå™¨, è¿™å°±éœ€è¦ä¸€ä¸ªé©±åŠ¨ç¨‹åºæ¥è¾…åŠ©. <br>è¿™é‡Œæ¨èç”¨chromeæµè§ˆå™¨<br>chromeé©±åŠ¨åœ°å€:<a rel="noopener" class="external-link" href="http://chromedriver.storage.googleapis.com/index.html" target="_blank">http://chromedriver.storage.googleapis.com/index.html</a><br>â€œselenium.assets/image-20210125174618013.pngâ€ could not be found.<br>â€œselenium.assets/image-20210125174658971.pngâ€ could not be found.<br>æ ¹æ®ä½ ç”µè„‘çš„ä¸åŒè‡ªè¡Œé€‰æ‹©å§.  win64é€‰win32å³å¯.<br>ç„¶åå…³é”®çš„æ¥äº†. æŠŠä½ ä¸‹è½½çš„æµè§ˆå™¨é©±åŠ¨æ”¾åœ¨pythonè§£é‡Šå™¨æ‰€åœ¨çš„æ–‡ä»¶å¤¹<br>Windwos:  py -0p     æŸ¥çœ‹Pythonè·¯å¾„<br>Mac: open + è·¯å¾„<br>ä¾‹å¦‚ï¼šopen /usr/local/bin/<br>â€œselenium.assets/image-20210125175328245.pngâ€ could not be found.<br> å‰æœŸå‡†å¤‡å·¥ä½œå®Œæ¯•.  ä¸Šä»£ç çœ‹çœ‹ æ„Ÿå—ä¸€ä¸‹selenium<br>Pythonfrom selenium.webdriver import Chrome  # å¯¼å…¥è°·æ­Œæµè§ˆå™¨çš„ç±»


# åˆ›å»ºæµè§ˆå™¨å¯¹è±¡
web = Chrome()  # å¦‚æœä½ çš„æµè§ˆå™¨é©±åŠ¨æ”¾åœ¨äº†è§£é‡Šå™¨æ–‡ä»¶å¤¹

web.get("http://www.baidu.com")  # è¾“å…¥ç½‘å€
print(web.title)  # æ‰“å°title
å¤åˆ¶<br>è¿è¡Œä¸€ä¸‹ä½ ä¼šå‘ç°ç¥å¥‡çš„äº‹æƒ…å‘ç”Ÿäº†. æµè§ˆå™¨è‡ªåŠ¨æ‰“å¼€äº†. å¹¶ä¸”è¾“å…¥äº†ç½‘å€. ä¹Ÿèƒ½æ‹¿åˆ°ç½‘é¡µä¸Šçš„titleæ ‡é¢˜. <br>â€œselenium.assets/image-20210125175906255.pngâ€ could not be found.<br><br><br>seleniumé€šè¿‡æ§åˆ¶æµè§ˆå™¨ï¼Œæ‰€ä»¥å¯¹åº”çš„è·å–çš„æ•°æ®éƒ½æ˜¯elementsä¸­çš„å†…å®¹<br>Pythonfrom selenium import webdriver
from selenium.webdriver.common.by import By

driver = webdriver.Chrome()
# è®¿é—®ç™¾åº¦
driver.get("http://www.baidu.com/")
# æˆªå›¾
driver.save_screenshot("baidu.png")
å¤åˆ¶<br><br>Python# æœç´¢å…³é”®å­— æœå¡è¿ª
driver.find_element(By.ID, "kw").send_keys("æœå¡è¿ª")
# ç‚¹å‡»idä¸ºsuçš„æœç´¢æŒ‰é’®
driver.find_element(By.ID, "su").click()
å¤åˆ¶<br><br>Pythondriver.page_source   # è·å–é¡µé¢å†…å®¹
driver.get_cookies()
driver.current_url
å¤åˆ¶<br><br>Pythondriver.close()  # é€€å‡ºå½“å‰é¡µé¢
driver.quit()   # é€€å‡ºæµè§ˆå™¨
å¤åˆ¶<br><br>
<br>seleniumçš„å¯¼åŒ…:from selenium import webdriver
<br>seleniumåˆ›å»ºdriverå¯¹è±¡:driver = webdriver.Chrome()
<br>seleniumè¯·æ±‚æ•°æ®:driver.get("http://www.baidu.com/")
<br>seleniumæŸ¥çœ‹æ•°æ®: driver.page_source
<br>å…³é—­æµè§ˆå™¨: driver.quit()
<br>æ ¹æ®idå®šä½å…ƒç´ : driver.find_element_by_id("kw")/driver.find_element(By.ID, "kw")
<br>æ“ä½œç‚¹å‡»äº‹ä»¶: click()
<br>ç»™è¾“å…¥æ¡†èµ‹å€¼:send_keys()
<br><br><br>
<br>æŒæ¡ seleniumå®šä½å…ƒç´ çš„æ–¹æ³•
<br>æŒæ¡ seleniumä»å…ƒç´ ä¸­è·å–æ–‡æœ¬å’Œå±æ€§çš„æ–¹æ³•
<br>
é€šè¿‡seleniumçš„åŸºæœ¬ä½¿ç”¨å¯ä»¥ç®€å•å®šä½å…ƒç´ å’Œè·å–å¯¹åº”çš„æ•°æ®,æ¥ä¸‹æ¥æˆ‘ä»¬å†æ¥å­¦ä¹ ä¸‹ å®šä½å…ƒç´ çš„å…¶ä»–æ–¹æ³•
<br><br>
<br>
å…ƒç´ å®šä½çš„ä¸¤ç§å†™æ³•ï¼š

<br>
ç›´æ¥è°ƒç”¨å‹
Python el = driver.find_element_by_xxx(value)
 # xxxæ˜¯å®šä½æ–¹å¼ï¼Œåé¢æˆ‘ä»¬ä¼šè®²ï¼Œvalueä¸ºè¯¥æ–¹å¼å¯¹åº”çš„å€¼
å¤åˆ¶

<br>
ä½¿ç”¨Byç±»å‹(éœ€è¦å¯¼å…¥By)  å»ºè®®ä½¿ç”¨è¿™ç§æ–¹å¼
Python # ç›´æ¥æ‰ç”¨çš„æ–¹å¼ä¼šåœ¨åº•å±‚ç¿»è¯‘æˆè¿™ç§æ–¹å¼
from selenium.webdriver.common.by import By
driver.find_element(By.xxx,value)
å¤åˆ¶



<br>
å…ƒç´ å®šä½çš„ä¸¤ç§æ–¹å¼:

<br>
ç²¾ç¡®å®šä½ä¸€ä¸ªå…ƒç´ ,è¿”å›ç»“æœä¸ºä¸€ä¸ªelementå¯¹è±¡,å®šä½ä¸åˆ°åˆ™æŠ¥é”™
Pythondriver.find_element(By.xx, value)  # å»ºè®®ä½¿ç”¨
driver.find_element_by_xxx(value)
å¤åˆ¶

<br>
å®šä½ä¸€ç»„å…ƒç´ ,è¿”å›ç»“æœä¸ºelementå¯¹è±¡åˆ—è¡¨,å®šä½ä¸åˆ°è¿”å›ç©ºåˆ—è¡¨
Pythondriver.find_elements(By.xx, value)  # å»ºè®®ä½¿ç”¨
driver.find_elements_by_xxx(value)
å¤åˆ¶



<br>
å…ƒç´ å®šä½çš„å…«ç§æ–¹æ³•:
ä»¥ä¸‹æ–¹æ³•åœ¨elementä¹‹åæ·»åŠ så°±å˜æˆèƒ½å¤Ÿè·å–ä¸€ç»„å…ƒç´ çš„æ–¹æ³•

<br>
By.ID  ä½¿ç”¨idå€¼å®šä½
Pythonel = driver.find_element(By.ID, '')
el = driver.find_element_by_id()            
å¤åˆ¶

<br>
By.XPATH ä½¿ç”¨xpathå®šä½
Pythonel = driver.find_element(By.XPATH, '')
el = driver.find_element_by_xpath()         
å¤åˆ¶

<br>
By.TAG_NAME. ä½¿ç”¨æ ‡ç­¾åå®šä½
Pythonel = driver.find_element(By.TAG_NAME, '')
el = driver.find_element_by_tag_name()     
å¤åˆ¶

<br>
By.LINK_TEXTä½¿ç”¨è¶…é“¾æ¥æ–‡æœ¬å®šä½
Pythonel = driver.find_element(By.LINK_TEXT, '')
el = driver.find_element_by_link_text() 
å¤åˆ¶

<br>
By.PARTIAL_LINK_TEXT  ä½¿ç”¨éƒ¨åˆ†è¶…é“¾æ¥æ–‡æœ¬å®šä½
Pythonel = driver.find_element(By.PARTIAL_LINK_TEXT  , '')
el = driver.find_element_by_partial_link_text()
å¤åˆ¶

<br>
By.NAME   ä½¿ç”¨nameå±æ€§å€¼å®šä½
Pythonel = driver.find_element(By.NAME, '')
el = driver.find_element_by_name()
å¤åˆ¶

<br>
By.CLASS_NAME     ä½¿ç”¨classå±æ€§å€¼å®šä½
Pythonel = driver.find_element(By.CLASS_NAME, '')   
el = driver.find_element_by_class_name()
å¤åˆ¶

<br>
By.CSS_SELECTOR   ä½¿ç”¨cssé€‰æ‹©å™¨å®šä½
Pythonel = driver.find_element(By.CSS_SELECTOR, '')  
el = driver.find_element_by_css_selector()
å¤åˆ¶



<br>æ³¨æ„ï¼š<br>
<br>
å»ºè®®ä½¿ç”¨find_element/find_elements

<br>
find_elementå’Œfind_elementsçš„åŒºåˆ« 

<br>
by_link_textå’Œby_partial_link_textçš„åŒºåˆ«ï¼š
å…¨éƒ¨æ–‡æœ¬å’ŒåŒ…å«æŸä¸ªæ–‡æœ¬

<br>
<br>
ä½¿ç”¨ï¼š ä»¥è±†ç“£ä¸ºä¾‹
Pythonimport time
from selenium import webdriver
from selenium.webdriver.common.by import By

driver = webdriver.Chrome()
driver.implicitly_wait(10)  # ç­‰å¾…èŠ‚ç‚¹åŠ è½½å®Œæˆ
driver.get("https://www.douban.com/search?q=%E6%9D%B0%E6%A3%AE%E6%96%AF%E5%9D%A6%E6%A3%AE")
time.sleep(2)
# ä½¿ç”¨idçš„æ–¹å¼è·å–å³ä¸Šè§’çš„æœç´¢æ¡†
# ret1 = driver.find_element(By.ID, 'inp-query')
# ret1 = driver.find_element(By.ID, 'inp-query').send_keys("æ°æ£®æ–¯å¦æ£®")
# ret1 = driver.find_element_by_id("inp-query")
# print(ret1)

# è¾“å‡ºä¸ºï¼š&lt;selenium.webdriver.remote.webelement.WebElement (session="ea6f94544ac3a56585b2638d352e97f3", element="0.5335773935305805-1")&gt;

# æœç´¢è¾“å…¥æ¡†  ä½¿ç”¨find_elementsè¿›è¡Œè·å–
# ret2 = driver.find_elements(By.ID, "inp-query")
# ret2 = driver.find_elements_by_id("inp-query")
# print(ret2)
#è¾“å‡ºä¸ºï¼š[&lt;selenium.webdriver.remote.webelement.WebElement (session="ea6f94544ac3a56585b2638d352e97f3", element="0.5335773935305805-1")&gt;]

# æœç´¢æŒ‰é’®  ä½¿ç”¨xpathè¿›è¡Œè·å–
# ret3 = driver.find_elements(By.XPATH, '//*[@id="inp-query"]')
# ret3 = driver.find_elements_by_xpath("//*[@id="inp-query"]")
# print(len(ret3))
# print(ret3)

# åŒ¹é…å›¾ç‰‡æ ‡ç­¾
ret4 = driver.find_elements(By.TAG_NAME, 'img')
for url in ret4:
    print(url.get_attribute('src'))

 #ret4 = driver.find_elements_by_tag_name("img")
print(len(ret4))

ret5 = driver.find_elements(By.LINK_TEXT, "æµè§ˆå‘ç°")
# ret5 = driver.find_elements_by_link_text("æµè§ˆå‘ç°")
print(len(ret5))
print(ret5)

ret6 = driver.find_elements(By.PARTIAL_LINK_TEXT, "æµè§ˆå‘ç°")
# ret6 = driver.find_elements_by_partial_link_text("æµè§ˆå‘ç°")
print(len(ret6))
# ä½¿ç”¨classåç§°æŸ¥æ‰¾
ret7 = driver.find_elements(By.CLASS_NAME, 'nbg')
print(ret7)
driver.close()
å¤åˆ¶

<br>æ³¨æ„ï¼š<br>find_elementä¸find_elementsåŒºåˆ«<br>
<br>åªæŸ¥æ‰¾ä¸€ä¸ªå…ƒç´ çš„æ—¶å€™:å¯ä»¥ä½¿ç”¨find_element(),find_elements()
find_element()ä¼šè¿”å›ä¸€ä¸ªWebElementèŠ‚ç‚¹å¯¹è±¡,ä½†æ˜¯æ²¡æ‰¾åˆ°ä¼šæŠ¥é”™,è€Œfind_elements()ä¸ä¼š,ä¹‹åè¿”å›ä¸€ä¸ªç©ºåˆ—è¡¨
<br>æŸ¥æ‰¾å¤šä¸ªå…ƒç´ çš„æ—¶å€™:åªèƒ½ç”¨find_elements(),è¿”å›ä¸€ä¸ªåˆ—è¡¨,åˆ—è¡¨é‡Œçš„å…ƒç´ å…¨æ˜¯WebElementèŠ‚ç‚¹å¯¹è±¡
<br>æ‰¾åˆ°éƒ½æ˜¯èŠ‚ç‚¹(æ ‡ç­¾)
<br>å¦‚æœæƒ³è¦è·å–ç›¸å…³å†…å®¹(åªå¯¹find_element()æœ‰æ•ˆ,åˆ—è¡¨å¯¹è±¡æ²¡æœ‰è¿™ä¸ªå±æ€§)  ä½¿ç”¨  .text
<br>å¦‚æœæƒ³è¦è·å–ç›¸å…³å±æ€§çš„å€¼(å¦‚hrefå¯¹åº”çš„é“¾æ¥ç­‰,åªå¯¹find_element()æœ‰æ•ˆ,åˆ—è¡¨å¯¹è±¡æ²¡æœ‰è¿™ä¸ªå±æ€§):ä½¿ç”¨   .get_attribute("href")                                        
<br><br>
find_element_by_xxxæ–¹æ³•ä»…ä»…èƒ½å¤Ÿè·å–å…ƒç´ å¯¹è±¡ï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥å¯¹å…ƒç´ æ‰§è¡Œä»¥ä¸‹æ“ä½œ ä»å®šä½åˆ°çš„å…ƒç´ ä¸­æå–æ•°æ®çš„æ–¹æ³•
<br>
<br>ä»å®šä½åˆ°çš„å…ƒç´ ä¸­è·å–æ•°æ®
<br>Pythonel.get_attribute(key)           # è·å–keyå±æ€§åå¯¹åº”çš„å±æ€§å€¼
el.text                        	# è·å–å¼€é—­æ ‡ç­¾ä¹‹é—´çš„æ–‡æœ¬å†…å®¹
å¤åˆ¶<br>
<br>å¯¹å®šä½åˆ°çš„å…ƒç´ çš„æ“ä½œ
<br>Pythonel.click()                      # å¯¹å…ƒç´ æ‰§è¡Œç‚¹å‡»æ“ä½œ

el.submit()                     # å¯¹å…ƒç´ æ‰§è¡Œæäº¤æ“ä½œ

el.clear()                      # æ¸…ç©ºå¯è¾“å…¥å…ƒç´ ä¸­çš„æ•°æ®

el.send_keys(data)              # å‘å¯è¾“å…¥å…ƒç´ è¾“å…¥æ•°æ®
å¤åˆ¶<br>ä½¿ç”¨ç¤ºä¾‹ï¼š<br>Pythonfrom selenium import webdriver
from selenium.webdriver.common.by import By

driver =webdriver.Chrome()

driver.get("https://www.douban.com/")
# æ‰“å°é¡µé¢å†…å®¹ ï¼ˆè·å–åˆ°ä»¥åå¯ä»¥è¿›è¡Œåç»­çš„xpath,bs4 æˆ–è€…å­˜å‚¨ç­‰ï¼‰
print(driver.page_source)

ret4 = driver.find_elements(By.TAG_NAME, "h1")
print(ret4[0].text)
#è¾“å‡ºï¼šè±†ç“£

ret5 = driver.find_elements(By.LINK_TEXT, "ä¸‹è½½è±†ç“£ App")
print(ret5[0].get_attribute("href"))
#è¾“å‡ºï¼šhttps://www.douban.com/doubanapp/app?channel=nimingye

driver.close()
å¤åˆ¶<br><br>
<br>æ ¹æ®xpathå®šä½å…ƒç´ :driver.find_elements(By.XPATH,"//*[@id='s']/h1/a")
<br>æ ¹æ®classå®šä½å…ƒç´ :driver.find_elements(By.CLASS_NAME, "box")
<br>æ ¹æ®link_textå®šä½å…ƒç´ :driver.find_elements(By.LINK_TEXT, "ä¸‹è½½è±†ç“£ App")
<br>æ ¹æ®tag_nameå®šä½å…ƒç´ :driver.find_elements(By.TAG_NAME, "h1")
<br>è·å–å…ƒç´ æ–‡æœ¬å†…å®¹:element.text
<br>è·å–å…ƒç´ æ ‡ç­¾å±æ€§: element.get_attribute("href")
<br>å‘è¾“å…¥æ¡†è¾“å…¥æ•°æ®: element.send_keys(data)
<br><br><br>
<br>æŒæ¡ seleniumå¤„ç†cookieç­‰æ–¹æ³•
<br>æŒæ¡ seleniumä¸­switchçš„ä½¿ç”¨
<br>æŒæ¡seleniumä¸­æ— å¤´æµè§ˆå™¨çš„è®¾ç½®
<br><br>æˆ‘ä»¬å·²ç»åŸºæœ¬äº†è§£äº†seleniumçš„åŸºæœ¬ä½¿ç”¨äº†. ä½†æ˜¯å‘¢, ä¸çŸ¥å„ä½æœ‰æ²¡æœ‰å‘ç°, æ¯æ¬¡æ‰“å¼€æµè§ˆå™¨çš„æ—¶é—´éƒ½æ¯”è¾ƒé•¿. è¿™å°±æ¯”è¾ƒè€—æ—¶äº†. æˆ‘ä»¬å†™çš„æ˜¯çˆ¬è™«ç¨‹åº. ç›®çš„æ˜¯æ•°æ®. å¹¶ä¸æ˜¯æƒ³çœ‹ç½‘é¡µ. é‚£èƒ½ä¸èƒ½è®©æµè§ˆå™¨åœ¨åå°è·‘å‘¢? ç­”æ¡ˆæ˜¯å¯ä»¥çš„<br>Pythonfrom selenium.webdriver import Chrome
from selenium.webdriver.chrome.options import Options

opt = Options()
opt.add_argument("--headless")
opt.add_argument('--disable-gpu')
opt.add_argument("--window-size=4000,1600")  # è®¾ç½®çª—å£å¤§å°

web = Chrome(options=opt)
å¤åˆ¶<br><br>é€šè¿‡driver.get_cookies()èƒ½å¤Ÿè·å–æ‰€æœ‰çš„cookie<br>
<br>
è·å–cookie
PythondictCookies = driver.get_cookies()
å¤åˆ¶

<br>
è®¾ç½®cookie
Pythondriver.add_cookie(dictCookies)
å¤åˆ¶

<br>
åˆ é™¤cookie
Python#åˆ é™¤ä¸€æ¡cookie
driver.delete_cookie("CookieName")
# åˆ é™¤æ‰€æœ‰çš„cookie
driver.delete_all_cookies()
å¤åˆ¶

<br><br>
<br>
ä¸ºä»€ä¹ˆéœ€è¦ç­‰å¾…
å¦‚æœç½‘ç«™é‡‡ç”¨äº†åŠ¨æ€htmlæŠ€æœ¯ï¼Œé‚£ä¹ˆé¡µé¢ä¸Šçš„éƒ¨åˆ†å…ƒç´ å‡ºç°æ—¶é—´ä¾¿ä¸èƒ½ç¡®å®šï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥è®¾ç½®ä¸€ä¸ªç­‰å¾…æ—¶é—´ï¼Œå¼ºåˆ¶ç­‰å¾…æŒ‡å®šæ—¶é—´ï¼Œç­‰å¾…ç»“æŸä¹‹åè¿›è¡Œå…ƒç´ å®šä½ï¼Œå¦‚æœè¿˜æ˜¯æ— æ³•å®šä½åˆ°åˆ™æŠ¥é”™ 

<br>
é¡µé¢ç­‰å¾…çš„ä¸‰ç§æ–¹æ³•

<br>
å¼ºåˆ¶ç­‰å¾…
Pythonimport time
time.sleep(n)      # é˜»å¡ç­‰å¾…è®¾å®šçš„ç§’æ•°ä¹‹åå†ç»§ç»­å¾€ä¸‹æ‰§è¡Œ
å¤åˆ¶

<br>
æ˜¾å¼ç­‰å¾…(è‡ªåŠ¨åŒ–webæµ‹è¯•ä½¿ç”¨ï¼Œçˆ¬è™«åŸºæœ¬ä¸ç”¨)
Pythonfrom selenium.webdriver.common.keys import Keys
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC

WebDriverWait(driver, 10,0.5).until( EC.presence_of_element_located((By.ID, "myDynamicElement"))
# æ˜¾å¼ç­‰å¾…æŒ‡å®šæŸä¸ªæ¡ä»¶ï¼Œç„¶åè®¾ç½®æœ€é•¿ç­‰å¾…æ—¶é—´10ï¼Œåœ¨10ç§’å†…æ¯éš”0.5ç§’ä½¿ç”¨æŒ‡å®šæ¡ä»¶å»å®šä½å…ƒç´ ï¼Œå¦‚æœå®šä½åˆ°å…ƒç´ åˆ™ç›´æ¥ç»“æŸç­‰å¾…ï¼Œå¦‚æœåœ¨10ç§’ç»“æŸä¹‹åä»æœªå®šä½åˆ°å…ƒç´ åˆ™æŠ¥é”™
å¤åˆ¶

<br>
éšå¼ç­‰å¾… éšå¼ç­‰å¾…è®¾ç½®ä¹‹åä»£ç ä¸­çš„æ‰€æœ‰å…ƒç´ å®šä½éƒ½ä¼šåšéšå¼ç­‰å¾…
Pythondriver.implicitly_wait(10)    # åœ¨æŒ‡å®šçš„nç§’å†…æ¯éš”ä¸€æ®µæ—¶é—´å°è¯•å®šä½å…ƒç´ ï¼Œå¦‚æœnç§’ç»“æŸè¿˜æœªè¢«å®šä½å‡ºæ¥åˆ™æŠ¥é”™
å¤åˆ¶



<br>æ³¨æ„ï¼š<br>Seleniumæ˜¾ç¤ºç­‰å¾…å’Œéšå¼ç­‰å¾…çš„åŒºåˆ«
1ã€seleniumçš„æ˜¾ç¤ºç­‰å¾…
åŸç†ï¼šæ˜¾ç¤ºç­‰å¾…ï¼Œå°±æ˜¯æ˜ç¡®è¦ç­‰åˆ°æŸä¸ªå…ƒç´ çš„å‡ºç°æˆ–è€…æ˜¯æŸä¸ªå…ƒç´ çš„å¯ç‚¹å‡»ç­‰æ¡ä»¶ï¼Œç­‰ä¸åˆ°ï¼Œå°±ä¸€ç›´ç­‰ï¼Œé™¤éåœ¨è§„å®šçš„æ—¶é—´ä¹‹å†…éƒ½æ²¡æ‰¾åˆ°ï¼Œå°±ä¼šè·³å‡ºå¼‚å¸¸Exception<br>(ç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯ç›´åˆ°å…ƒç´ å‡ºç°æ‰å»æ“ä½œï¼Œå¦‚æœè¶…æ—¶åˆ™æŠ¥å¼‚å¸¸)<br>2ã€seleniumçš„éšå¼ç­‰å¾…<br>åŸç†ï¼šéšå¼ç­‰å¾…ï¼Œå°±æ˜¯åœ¨åˆ›å»ºdriveræ—¶ï¼Œä¸ºæµè§ˆå™¨å¯¹è±¡åˆ›å»ºä¸€ä¸ªç­‰å¾…æ—¶é—´ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯å¾—ä¸åˆ°æŸä¸ªå…ƒç´ å°±ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œç›´åˆ°æ‹¿åˆ°æŸä¸ªå…ƒç´ ä½ç½®ã€‚
æ³¨æ„ï¼šåœ¨ä½¿ç”¨éšå¼ç­‰å¾…çš„æ—¶å€™ï¼Œå®é™…ä¸Šæµè§ˆå™¨ä¼šåœ¨ä½ è‡ªå·±è®¾å®šçš„æ—¶é—´å†…éƒ¨æ–­çš„åˆ·æ–°é¡µé¢å»å¯»æ‰¾æˆ‘ä»¬éœ€è¦çš„å…ƒç´ <br><br><br>Pythonä¹Ÿå¯ä»¥ä½¿ç”¨ window_handles æ–¹æ³•æ¥è·å–æ¯ä¸ªçª—å£çš„æ“ä½œå¯¹è±¡ã€‚ä¾‹å¦‚ï¼š

# 1. è·å–å½“å‰æ‰€æœ‰çš„çª—å£
current_windows = driver.window_handles

# 2. æ ¹æ®çª—å£ç´¢å¼•è¿›è¡Œåˆ‡æ¢
driver.switch_to.window(current_windows[1])

driver.switch_to.window(web.window_handles[-1])  # è·³è½¬åˆ°æœ€åä¸€ä¸ªçª—å£
driver.switch_to.window(current_windows[0])  # å›åˆ°ç¬¬ä¸€ä¸ªçª—å£
å¤åˆ¶<br><br>Pythondriver.switch_to.frame(name/el/id)     ä¼ å…¥çš„å‚æ•°å¯ä»¥ä½¿iframeå¯¹åº”çš„idå€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯ç”¨å…ƒç´ å®šä½ä¹‹åçš„å…ƒç´ å¯¹è±¡
å¤åˆ¶<br>åŠ¨æ‰‹ï¼šqqé‚®ç®±<br>åœ¨ä½¿ç”¨seleniumç™»å½•qqé‚®ç®±çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼Œæ— æ³•åœ¨é‚®ç®±çš„ç™»å½•inputæ ‡ç­¾ä¸­è¾“å…¥å†…å®¹ï¼Œé€šè¿‡è§‚å¯Ÿæºç å¯ä»¥å‘ç°ï¼Œformè¡¨å•åœ¨ä¸€ä¸ªframeä¸­ï¼Œæ‰€ä»¥éœ€è¦åˆ‡æ¢åˆ°frameä¸­<br><br>Pythonalert = driver.switch_to_alert()
å¤åˆ¶<br><br>Pythondriver.forward()     # å‰è¿›
driver.back()        # åé€€
driver.refresh() 		 # åˆ·æ–°
driver.close()       # å…³é—­å½“å‰çª—å£
å¤åˆ¶<br><br>driver.maximize_window()  #æœ€å¤§åŒ–æµè§ˆå™¨çª—å£
å¤åˆ¶<br><br>
<br>ä¼˜ç‚¹

<br>seleniumèƒ½å¤Ÿæ‰§è¡Œé¡µé¢ä¸Šçš„jsï¼Œå¯¹äºjsæ¸²æŸ“çš„æ•°æ®å’Œæ¨¡æ‹Ÿç™»é™†å¤„ç†èµ·æ¥éå¸¸å®¹æ˜“
<br>ä½¿ç”¨éš¾åº¦ç®€å•
<br>çˆ¬å–é€Ÿåº¦æ…¢ï¼Œçˆ¬å–é¢‘ç‡æ›´åƒäººçš„è¡Œä¸ºï¼Œå¤©ç”Ÿèƒ½å¤Ÿåº”å¯¹ä¸€äº›åçˆ¬æªæ–½


<br>ç¼ºç‚¹

<br>ç”±äºseleniumæ“ä½œæµè§ˆå™¨ï¼Œå› æ­¤ä¼šå°†å‘é€æ‰€æœ‰çš„è¯·æ±‚ï¼Œå› æ­¤å ç”¨ç½‘ç»œå¸¦å®½
<br>ç”±äºæ“ä½œæµè§ˆå™¨ï¼Œå› æ­¤å ç”¨çš„å†…å­˜éå¸¸å¤§(ç›¸æ¯”è¾ƒä¹‹å‰çš„çˆ¬è™«)
<br>é€Ÿåº¦æ…¢ï¼Œå¯¹äºæ•ˆç‡è¦æ±‚é«˜çš„è¯ä¸å»ºè®®ä½¿ç”¨


<br><br>
<br>è·å–cookie: get_cookies()
<br>åˆ é™¤cookie: delete_all_cookies()
<br>åˆ‡æ¢çª—å£:switch_to.window()
<br>åˆ‡æ¢iframe: switch_to.frame()
<br><br><a rel="noopener" class="external-link" href="https://blog.csdn.net/qq_35999017/article/details/123922952" target="_blank">https://blog.csdn.net/qq_35999017/article/details/123922952</a><br><a rel="noopener" class="external-link" href="https://blog.csdn.net/qq_27109535/article/details/125468643" target="_blank">https://blog.csdn.net/qq_27109535/article/details/125468643</a>]]></description><link>çˆ¬è™«\çˆ¬è™«æ–‡æ¡£\selenium.html</link><guid isPermaLink="false">çˆ¬è™«/çˆ¬è™«æ–‡æ¡£/selenium.md</guid><pubDate>Mon, 16 Oct 2023 15:11:55 GMT</pubDate></item><item><title><![CDATA[urllibä¸requests]]></title><description><![CDATA[ 
 <br><br><br><br>äº†è§£urllibçš„åŸºæœ¬ä½¿ç”¨ <br><br><br>é™¤äº†requestsæ¨¡å—å¯ä»¥å‘é€è¯·æ±‚ä¹‹å¤–, urllibæ¨¡å—ä¹Ÿå¯ä»¥å®ç°è¯·æ±‚çš„å‘é€,åªæ˜¯æ“ä½œæ–¹æ³•ç•¥æœ‰ä¸åŒ!<br>urllibåœ¨pythonä¸­åˆ†ä¸ºurllibå’Œurllib2ï¼Œåœ¨python3ä¸­ä¸ºurllib<br>ä¸‹é¢ä»¥python3çš„urllibä¸ºä¾‹è¿›è¡Œè®²è§£<br><br><br>
<br>
æ„é€ ç®€å•è¯·æ±‚
Pythonimport urllib
#æ„é€ è¯·æ±‚
request = urllib.request.Request("http://www.baidu.com")
#å‘é€è¯·æ±‚è·å–å“åº”
response = urllib.request.urlopen(request)
å¤åˆ¶

<br>
ä¼ å…¥headerså‚æ•°
Pythonimport urllib
#æ„é€ headers
headers = {"User-Agent" : "Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0)"} 
#æ„é€ è¯·æ±‚
request = urllib.request.Request(url, headers=headers)
#å‘é€è¯·æ±‚
response = urllib.request.urlopen(request)
å¤åˆ¶

<br>
ä¼ å…¥dataå‚æ•° å®ç°å‘é€postè¯·æ±‚ï¼ˆç¤ºä¾‹ï¼‰
Pythonimport urllib.request
import urllib.parse
import json

url = 'https://ifanyi.iciba.com/index.php?c=trans&amp;m=fy&amp;client=6&amp;auth_user=key_ciba&amp;sign=99730f3bf66b2582'

headers = {
    'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Safari/605.1.15',

}
data = {
    'from': 'zh',
    'to': 'en',
    'q': 'lucky æ˜¯ä¸€ä¸ªå¸…æ°”çš„è€'
}
# ä½¿ç”¨postæ–¹å¼
# éœ€è¦
data = urllib.parse.urlencode(data).encode('utf-8')
req = urllib.request.Request(url, data=data, headers=headers)
res = urllib.request.urlopen(req)
print(res.getcode())
print(res.geturl())
data = json.loads(res.read().decode('utf-8'))
print(data)
å¤åˆ¶

<br><br>è·å–å“åº”çš„htmlå­—ç¬¦ä¸²,bytesç±»å‹<br>Python#å‘é€è¯·æ±‚
response = urllib.request.urlopen("http://www.baidu.com")
#è·å–å“åº”
response.read()
å¤åˆ¶<br><br>Pythonimport urllib
import json

url = 'http://www.baidu.com'
#æ„é€ headers
headers = {"User-Agent" : "Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0)"}
#æ„é€ è¯·æ±‚
request = urllib.request.Request(url, headers = headers)
#å‘é€è¯·æ±‚
response = urllib.request.urlopen(request)
#è·å–htmlå­—ç¬¦ä¸²
html_str = response.read().decode('utf-8')
print(html_str)
å¤åˆ¶<br><br>
<br>urllib.requestä¸­å®ç°äº†æ„é€ è¯·æ±‚å’Œå‘é€è¯·æ±‚çš„æ–¹æ³•
<br>urllib.request.Request(url,headers,data)èƒ½å¤Ÿæ„é€ è¯·æ±‚
<br>urllib.request.urlopenèƒ½å¤Ÿæ¥å—requestè¯·æ±‚æˆ–è€…urlåœ°å€å‘é€è¯·æ±‚ï¼Œè·å–å“åº”
<br>response.read()èƒ½å¤Ÿå®ç°è·å–å“åº”ä¸­çš„byteså­—ç¬¦ä¸²
<br><br><br><br>
<br>äº†è§£ requestsæ¨¡å—çš„ä»‹ç»
<br>æŒæ¡ requestsçš„åŸºæœ¬ä½¿ç”¨
<br>æŒæ¡ responseå¸¸è§çš„å±æ€§
<br>æŒæ¡ requests.textå’Œcontentçš„åŒºåˆ«
<br>æŒæ¡ è§£å†³ç½‘é¡µçš„è§£ç é—®é¢˜
<br>æŒæ¡ requestsæ¨¡å—å‘é€å¸¦headersçš„è¯·æ±‚
<br>æŒæ¡ requestsæ¨¡å—å‘é€å¸¦å‚æ•°çš„getè¯·æ±‚
<br><br><br>
<br>ä¼ä¸šä¸­ç”¨çš„æœ€å¤šçš„å°±æ˜¯requests
<br>requestsçš„åº•å±‚å®ç°å°±æ˜¯urllib
<br>requestsåœ¨python2 å’Œpython3ä¸­é€šç”¨ï¼Œæ–¹æ³•å®Œå…¨ä¸€æ ·
<br>requestsç®€å•æ˜“ç”¨
<br><br>ä½œç”¨ï¼šå‘é€ç½‘ç»œè¯·æ±‚ï¼Œè¿”å›å“åº”æ•°æ®<br>å‘½ä»¤ï¼š pip install requests  <br>requestsæ¨¡å—å‘é€ç®€å•çš„getè¯·æ±‚ã€è·å–å“åº”<br>éœ€æ±‚ï¼šé€šè¿‡requestså‘ç™¾åº¦é¦–é¡µå‘é€è¯·æ±‚ï¼Œè·å–ç™¾åº¦é¦–é¡µçš„æ•°æ®<br>Pythonimport requests

# ç›®æ ‡url
url = 'https://www.baidu.com'

# å‘ç›®æ ‡urlå‘é€getè¯·æ±‚
response = requests.get(url)

# æ‰“å°å“åº”å†…å®¹
print(response.text)
å¤åˆ¶<br>responseçš„å¸¸ç”¨å±æ€§ï¼š<br>
<br>
response.text å“åº”ä½“ strç±»å‹

<br>
response.encoding  ä»HTTPã€€headerä¸­çŒœæµ‹çš„å“åº”å†…å®¹çš„ç¼–ç æ–¹å¼

<br>
respones.content å“åº”ä½“ bytesç±»å‹

<br>
response.status_code å“åº”çŠ¶æ€ç 

<br>
response.request.headers å“åº”å¯¹åº”çš„è¯·æ±‚å¤´

<br>
response.headers å“åº”å¤´

<br>
response.cookies å“åº”çš„cookieï¼ˆç»è¿‡äº†set-cookieåŠ¨ä½œï¼‰

<br>
response.url  è·å–è®¿é—®çš„url

<br>
response.json()  è·å–jsonæ•°æ® å¾—åˆ°å†…å®¹ä¸ºå­—å…¸ (å¦‚æœæ¥å£å“åº”ä½“çš„æ ¼å¼æ˜¯jsonæ ¼å¼æ—¶)

<br>
response.ok 
å¦‚æœstatus_codeå°äºç­‰äº200ï¼Œresponse.okè¿”å›Trueã€‚
å¦‚æœstatus_codeå¤§äº200ï¼Œresponse.okè¿”å›Falseã€‚

<br>æ€è€ƒï¼štextæ˜¯responseçš„å±æ€§è¿˜æ˜¯æ–¹æ³•å‘¢ï¼Ÿ<br>
<br>ä¸€èˆ¬æ¥è¯´åè¯ï¼Œå¾€å¾€éƒ½æ˜¯å¯¹è±¡çš„å±æ€§ï¼Œå¯¹åº”çš„åŠ¨è¯æ˜¯å¯¹è±¡çš„æ–¹æ³•
<br><br>
<br>response.text

<br>ç±»å‹ï¼šstr
<br>è§£ç ç±»å‹ï¼š requestsæ¨¡å—è‡ªåŠ¨æ ¹æ®HTTP å¤´éƒ¨å¯¹å“åº”çš„ç¼–ç ä½œå‡ºæœ‰æ ¹æ®çš„æ¨æµ‹ï¼Œæ¨æµ‹çš„æ–‡æœ¬ç¼–ç 
<br>å¦‚ä½•ä¿®æ”¹ç¼–ç æ–¹å¼ï¼šresponse.encoding="gbk/UTF-8"


<br>response.content

<br>ç±»å‹ï¼šbytes
<br>è§£ç ç±»å‹ï¼š æ²¡æœ‰æŒ‡å®š
<br>å¦‚ä½•ä¿®æ”¹ç¼–ç æ–¹å¼ï¼šresponse.content.deocde("utf8")


<br>è·å–ç½‘é¡µæºç çš„é€šç”¨æ–¹å¼ï¼š<br>
<br>response.content.decode()
<br>response.content.decode("UTF-8")
<br>response.text
<br>ä»¥ä¸Šä¸‰ç§æ–¹æ³•ä»å‰å¾€åå°è¯•ï¼Œèƒ½å¤Ÿ100%çš„è§£å†³æ‰€æœ‰ç½‘é¡µè§£ç çš„é—®é¢˜<br>æ‰€ä»¥ï¼šæ›´æ¨èä½¿ç”¨response.content.deocde()çš„æ–¹å¼è·å–å“åº”çš„htmlé¡µé¢<br><br>
æˆ‘ä»¬æ¥æŠŠwww.baidu.comçš„å›¾ç‰‡ä¿å­˜åˆ°æœ¬åœ°
<br>æ€è€ƒï¼š<br>
<br>ä»¥ä»€ä¹ˆæ–¹å¼æ‰“å¼€æ–‡ä»¶
<br>ä¿å­˜ä»€ä¹ˆæ ¼å¼çš„å†…å®¹
<br>åˆ†æï¼š<br>
<br>å›¾ç‰‡çš„url: <a rel="noopener" class="external-link" href="https://www.baidu.com/img/bd_logo1.png" target="_blank">https://www.baidu.com/img/bd_logo1.png</a>
<br>åˆ©ç”¨requestsæ¨¡å—å‘é€è¯·æ±‚è·å–å“åº”
<br>ä»¥2è¿›åˆ¶å†™å…¥çš„æ–¹å¼æ‰“å¼€æ–‡ä»¶ï¼Œå¹¶å°†responseå“åº”çš„äºŒè¿›åˆ¶å†…å®¹å†™å…¥
<br>Pythonimport requests

# å›¾ç‰‡çš„url
url = 'https://www.baidu.com/img/bd_logo1.png'

# å“åº”æœ¬èº«å°±æ˜¯ä¸€ä¸ªå›¾ç‰‡,å¹¶ä¸”æ˜¯äºŒè¿›åˆ¶ç±»å‹
response = requests.get(url)

# print(response.content)

# ä»¥äºŒè¿›åˆ¶+å†™å…¥çš„æ–¹å¼æ‰“å¼€æ–‡ä»¶
with open('baidu.png', 'wb') as f:
    # å†™å…¥response.content bytesäºŒè¿›åˆ¶ç±»å‹
    f.write(response.content)
å¤åˆ¶<br><br>
æˆ‘ä»¬å…ˆå†™ä¸€ä¸ªè·å–ç™¾åº¦é¦–é¡µçš„ä»£ç 
<br>Pythonimport requests

url = 'https://www.baidu.com'

response = requests.get(url)

print(response.content)

# æ‰“å°å“åº”å¯¹åº”è¯·æ±‚çš„è¯·æ±‚å¤´ä¿¡æ¯
print(response.request.headers)
å¤åˆ¶<br><br>å¯¹æ¯”æµè§ˆå™¨ä¸Šç™¾åº¦é¦–é¡µçš„ç½‘é¡µæºç å’Œä»£ç ä¸­çš„ç™¾åº¦é¦–é¡µçš„æºç ï¼Œæœ‰ä»€ä¹ˆä¸åŒï¼Ÿ<br>ä»£ç ä¸­çš„ç™¾åº¦é¦–é¡µçš„æºç éå¸¸å°‘ï¼Œä¸ºä»€ä¹ˆï¼Ÿ<br><br>æ¨¡æ‹Ÿæµè§ˆå™¨ï¼Œæ¬ºéª—æœåŠ¡å™¨ï¼Œè·å–å’Œæµè§ˆå™¨ä¸€è‡´çš„å†…å®¹<br><br>Pythonheaders = {"User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/54.0.2840.99 Safari/537.36"}
å¤åˆ¶<br><br>Pythonrequests.get(url, headers=headers)
å¤åˆ¶<br><br>Pythonimport requests

url = 'https://www.baidu.com'

headers = {"User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/54.0.2840.99 Safari/537.36"}

# åœ¨è¯·æ±‚å¤´ä¸­å¸¦ä¸ŠUser-Agentï¼Œæ¨¡æ‹Ÿæµè§ˆå™¨å‘é€è¯·æ±‚
response = requests.get(url, headers=headers)

# print(response.content)

# æ‰“å°è¯·æ±‚å¤´ä¿¡æ¯
print(response.request.headers)
å¤åˆ¶<br><br>
æˆ‘ä»¬åœ¨ä½¿ç”¨ç™¾åº¦æœç´¢çš„æ—¶å€™ç»å¸¸å‘ç°urlåœ°å€ä¸­ä¼šæœ‰ä¸€ä¸ª ?ï¼Œé‚£ä¹ˆè¯¥é—®å·åè¾¹çš„å°±æ˜¯è¯·æ±‚å‚æ•°ï¼Œåˆå«åšæŸ¥è¯¢å­—ç¬¦ä¸²
<br><br>ä¾‹1ï¼š <a rel="noopener" class="external-link" href="http://www.webkaka.com/tutorial/server/2015/021013/" target="_blank">http://www.webkaka.com/tutorial/server/2015/021013/</a><br>ä¾‹2ï¼š<a rel="noopener" class="external-link" href="https://www.baidu.com/s?wd=python&amp;a=c" target="_blank">https://www.baidu.com/s?wd=python&amp;a=c</a><br>ä¾‹1ä¸­æ²¡æœ‰è¯·æ±‚å‚æ•°ï¼ä¾‹2ä¸­?åè¾¹çš„å°±æ˜¯è¯·æ±‚å‚æ•°<br><br>Pythonkw = {'wd':'é•¿åŸ'}
å¤åˆ¶<br><br>Pythonrequests.get(url,params=kw)
å¤åˆ¶<br><br>åœ¨urlåœ°å€ä¸­ï¼Œ å¾ˆå¤šå‚æ•°æ˜¯æ²¡æœ‰ç”¨çš„ï¼Œæ¯”å¦‚ç™¾åº¦æœç´¢çš„urlåœ°å€ï¼Œå…¶ä¸­å‚æ•°åªæœ‰ä¸€ä¸ªå­—æ®µæœ‰ç”¨ï¼Œå…¶ä»–çš„éƒ½å¯ä»¥åˆ é™¤ å¦‚ä½•ç¡®å®šé‚£äº›è¯·æ±‚å‚æ•°æœ‰ç”¨æˆ–è€…æ²¡ç”¨ï¼šæŒ¨ä¸ªå°è¯•ï¼ å¯¹åº”çš„,åœ¨åç»­çš„çˆ¬è™«ä¸­ï¼Œè¶Šåˆ°å¾ˆå¤šå‚æ•°çš„urlåœ°å€ï¼Œéƒ½å¯ä»¥å°è¯•åˆ é™¤å‚æ•°<br><br>
<br>
å¯¹https://www.baidu.com/s?wd=pythonå‘èµ·è¯·æ±‚å¯ä»¥ä½¿ç”¨requests.get(url, params=kw)çš„æ–¹å¼
Python# æ–¹å¼ä¸€ï¼šåˆ©ç”¨paramså‚æ•°å‘é€å¸¦å‚æ•°çš„è¯·æ±‚
import requests

headers = {"User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/54.0.2840.99 Safari/537.36"}

# è¿™æ˜¯ç›®æ ‡url
# url = 'https://www.baidu.com/s?wd=python'

# æœ€åæœ‰æ²¡æœ‰é—®å·ç»“æœéƒ½ä¸€æ ·
url = 'https://www.baidu.com/s?'

# è¯·æ±‚å‚æ•°æ˜¯ä¸€ä¸ªå­—å…¸ å³wd=python
kw = {'wd': 'python'}

# å¸¦ä¸Šè¯·æ±‚å‚æ•°å‘èµ·è¯·æ±‚ï¼Œè·å–å“åº”
response = requests.get(url, headers=headers, params=kw)

# å½“æœ‰å¤šä¸ªè¯·æ±‚å‚æ•°æ—¶ï¼Œrequestsæ¥æ”¶çš„paramså‚æ•°ä¸ºå¤šä¸ªé”®å€¼å¯¹çš„å­—å…¸ï¼Œæ¯”å¦‚ '?wd=python&amp;a=c'--&gt;{'wd': 'python', 'a': 'c'}

print(response.content)
å¤åˆ¶

<br>
ä¹Ÿå¯ä»¥ç›´æ¥å¯¹https://www.baidu.com/s?wd=pythonå®Œæ•´çš„urlç›´æ¥å‘é€è¯·æ±‚ï¼Œä¸ä½¿ç”¨paramså‚æ•°
Python# æ–¹å¼äºŒï¼šç›´æ¥å‘é€å¸¦å‚æ•°çš„urlçš„è¯·æ±‚
import requests

headers = {"User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/54.0.2840.99 Safari/537.36"}

url = 'https://www.baidu.com/s?wd=python'

# kw = {'wd': 'python'}

# urlä¸­åŒ…å«äº†è¯·æ±‚å‚æ•°ï¼Œæ‰€ä»¥æ­¤æ—¶æ— éœ€params
response = requests.get(url, headers=headers)
å¤åˆ¶

<br><br>
<br>requestsæ¨¡å—çš„ä»‹ç»ï¼šèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬å‘èµ·è¯·æ±‚è·å–å“åº”
<br>requestsçš„åŸºæœ¬ä½¿ç”¨ï¼šrequests.get(url)
<br>ä»¥åŠresponseå¸¸è§çš„å±æ€§ï¼š

<br>response.text å“åº”ä½“ strç±»å‹
<br>respones.content å“åº”ä½“ bytesç±»å‹
<br>response.status_code å“åº”çŠ¶æ€ç 
<br>response.request.headers å“åº”å¯¹åº”çš„è¯·æ±‚å¤´
<br>response.headers å“åº”å¤´
<br>response.request._cookies å“åº”å¯¹åº”è¯·æ±‚çš„cookie
<br>response.cookies å“åº”çš„cookieï¼ˆç»è¿‡äº†set-cookieåŠ¨ä½œï¼‰


<br>æŒæ¡ requests.textå’Œcontentçš„åŒºåˆ«ï¼štextè¿”å›strç±»å‹ï¼Œcontentè¿”å›bytesç±»å‹
<br>æŒæ¡ è§£å†³ç½‘é¡µçš„è§£ç é—®é¢˜ï¼š

<br>response.content.decode()
<br>response.content.decode("UTF-8")
<br>response.text


<br>æŒæ¡ requestsæ¨¡å—å‘é€å¸¦headersçš„è¯·æ±‚ï¼šrequests.get(url, headers={})
<br>æŒæ¡ requestsæ¨¡å—å‘é€å¸¦å‚æ•°çš„getè¯·æ±‚ï¼šrequests.get(url, params={})
<br><br><br>
<br>èƒ½å¤Ÿåº”ç”¨requestså‘é€postè¯·æ±‚çš„æ–¹æ³•
<br>èƒ½å¤Ÿåº”ç”¨requestsæ¨¡å—ä½¿ç”¨ä»£ç†çš„æ–¹æ³•
<br>äº†è§£ä»£ç†ipçš„åˆ†ç±»
<br><br><br>
æ€è€ƒï¼šå“ªäº›åœ°æ–¹æˆ‘ä»¬ä¼šç”¨åˆ°POSTè¯·æ±‚ï¼Ÿ
<br>
<br>ç™»å½•æ³¨å†Œï¼ˆ POST æ¯” GET æ›´å®‰å…¨ï¼‰
<br>éœ€è¦ä¼ è¾“å¤§æ–‡æœ¬å†…å®¹çš„æ—¶å€™ï¼ˆ POST è¯·æ±‚å¯¹æ•°æ®é•¿åº¦æ²¡æœ‰è¦æ±‚ï¼‰
<br>æ‰€ä»¥åŒæ ·çš„ï¼Œæˆ‘ä»¬çš„çˆ¬è™«ä¹Ÿéœ€è¦åœ¨è¿™ä¸¤ä¸ªåœ°æ–¹å›å»æ¨¡æ‹Ÿæµè§ˆå™¨å‘é€postè¯·æ±‚<br><br>
<br>
ç”¨æ³•ï¼š
Pythonresponse = requests.post("http://www.baidu.com/", data = data, headers=headers)
å¤åˆ¶

<br>
data çš„å½¢å¼ï¼šå­—å…¸

<br><br>ä¸‹é¢é¢æˆ‘ä»¬é€šè¿‡é‡‘å±±ç¿»è¯‘çš„ä¾‹å­çœ‹çœ‹postè¯·æ±‚å¦‚ä½•ä½¿ç”¨ï¼š<br>åœ°å€ï¼š<a rel="noopener" class="external-link" href="https://www.iciba.com/fy" target="_blank">https://www.iciba.com/fy</a><br><br>
<br>
æŠ“åŒ…ç¡®å®šè¯·æ±‚çš„urlåœ°å€
![æˆªå±2022-04-20 ä¸‹åˆ3.22.11](requests1.assets/æˆªå±2022-04-20 ä¸‹åˆ3.22.11.png)

<br>
ç¡®å®šè¯·æ±‚çš„å‚æ•°
![æˆªå±2022-04-20 ä¸‹åˆ3.23.07](requests1.assets/æˆªå±2022-04-20 ä¸‹åˆ3.23.07.png)

<br>
ç¡®å®šè¿”å›æ•°æ®çš„ä½ç½®
â€œrequests1.assets/image-20220420152404175.pngâ€ could not be found.

<br>
æ¨¡æ‹Ÿæµè§ˆå™¨è·å–æ•°æ®
Pythonimport requests
import json

headers = {"User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/54.0.2840.99 Safari/537.36"}

url = 'https://ifanyi.iciba.com/index.php?c=trans&amp;m=fy&amp;client=6&amp;auth_user=key_ciba&amp;sign=99730f3bf66b2582'

data = {
    'from': 'zh',
    'to': 'en',
    'q': 'lucky æ˜¯ä¸€ä¸ªå¸…æ°”çš„è€å¸ˆ'
}

res = requests.post(url, headers=headers, data=data)
# print(res.status_code)

# è¿”å›çš„æ˜¯jsonå­—ç¬¦ä¸² éœ€è¦åœ¨è¿›è¡Œè½¬æ¢ä¸ºå­—å…¸
data = json.loads(res.content.decode('UTF-8'))
# print(type(data))
print(data)
print(data['content']['out'])
å¤åˆ¶

<br><br>åœ¨æ¨¡æ‹Ÿç™»é™†ç­‰åœºæ™¯ï¼Œç»å¸¸éœ€è¦å‘é€postè¯·æ±‚ï¼Œç›´æ¥ä½¿ç”¨requests.post(url,data)å³å¯<br><br><br>
<br>è®©æœåŠ¡å™¨ä»¥ä¸ºä¸æ˜¯åŒä¸€ä¸ªå®¢æˆ·ç«¯åœ¨è¯·æ±‚
<br>é˜²æ­¢æˆ‘ä»¬çš„çœŸå®åœ°å€è¢«æ³„éœ²ï¼Œé˜²æ­¢è¢«è¿½ç©¶
<br><br>â€œrequests1.assets/ä½¿ç”¨ä»£ç†çš„è¿‡ç¨‹.pngâ€ could not be found.<br><br>â€œrequests1.assets/æ­£å‘ä»£ç†å’Œåå‘ä»£ç†çš„åŒºåˆ«.pngâ€ could not be found.<br>é€šè¿‡ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼š<br>
<br>æ­£å‘ä»£ç†ï¼šå¯¹äºæµè§ˆå™¨çŸ¥é“æœåŠ¡å™¨çš„çœŸå®åœ°å€ï¼Œä¾‹å¦‚VPN
<br>åå‘ä»£ç†ï¼šæµè§ˆå™¨ä¸çŸ¥é“æœåŠ¡å™¨çš„çœŸå®åœ°å€ï¼Œä¾‹å¦‚nginx
<br>è¯¦ç»†è®²è§£ï¼š<br>æ­£å‘ä»£ç†æ˜¯å®¢æˆ·ç«¯ä¸æ­£å‘ä»£ç†å®¢æˆ·ç«¯åœ¨åŒä¸€å±€åŸŸç½‘ï¼Œå®¢æˆ·ç«¯å‘å‡ºè¯·æ±‚ï¼Œæ­£å‘ä»£ç† æ›¿ä»£å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘å‡ºè¯·æ±‚ã€‚æœåŠ¡å™¨ä¸çŸ¥é“è°æ˜¯çœŸæ­£çš„å®¢æˆ·ç«¯ï¼Œæ­£å‘ä»£ç†éšè—äº†çœŸå®çš„è¯·æ±‚å®¢æˆ·ç«¯ã€‚
åå‘ä»£ç†ï¼šæœåŠ¡å™¨ä¸åå‘ä»£ç†åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘ï¼Œå®¢æœç«¯å‘å‡ºè¯·æ±‚ï¼Œåå‘ä»£ç†æ¥æ”¶è¯·æ±‚ ï¼Œåå‘ä»£ç†æœåŠ¡å™¨ä¼šæŠŠæˆ‘ä»¬çš„è¯·æ±‚åˆ†è½¬å‘åˆ°çœŸå®æä¾›æœåŠ¡çš„å„å°æœåŠ¡å™¨Nginxå°±æ˜¯æ€§èƒ½éå¸¸å¥½çš„åå‘ä»£ç†æœåŠ¡å™¨ï¼Œç”¨æ¥åšè´Ÿè½½å‡è¡¡<br>â€œrequests1.assets/20190715113403480.pngâ€ could not be found.<br><br>
<br>
ç”¨æ³•ï¼š
Pythonrequests.get("http://www.baidu.com",  proxies = proxies)
å¤åˆ¶

<br>
proxiesçš„å½¢å¼ï¼šå­—å…¸

<br>
ä¾‹å¦‚ï¼š
Json proxies = {
      "http": "http://12.34.56.79:9527",
      "https": "https://12.34.56.79:9527",
}
å¤åˆ¶

<br><br>æ ¹æ®ä»£ç†ipçš„åŒ¿åç¨‹åº¦ï¼Œä»£ç†IPå¯ä»¥åˆ†ä¸ºä¸‹é¢å››ç±»ï¼š<br>
<br>é€æ˜ä»£ç†(Transparent Proxy)ï¼šé€æ˜ä»£ç†çš„æ„æ€æ˜¯å®¢æˆ·ç«¯æ ¹æœ¬ä¸éœ€è¦çŸ¥é“æœ‰ä»£ç†æœåŠ¡å™¨çš„å­˜åœ¨ï¼Œä½†æ˜¯å®ƒä¼ é€çš„ä»ç„¶æ˜¯çœŸå®çš„IPã€‚ä½¿ç”¨é€æ˜ä»£ç†æ—¶ï¼Œå¯¹æ–¹æœåŠ¡å™¨æ˜¯å¯ä»¥çŸ¥é“ä½ ä½¿ç”¨äº†ä»£ç†çš„ï¼Œå¹¶ä¸”ä»–ä»¬ä¹ŸçŸ¥é“ä½ çš„çœŸå®IPã€‚ä½ è¦æƒ³éšè—çš„è¯ï¼Œä¸è¦ç”¨è¿™ä¸ªã€‚é€æ˜ä»£ç†ä¸ºä»€ä¹ˆæ— æ³•éšè—èº«ä»½å‘¢?å› ä¸ºä»–ä»¬å°†ä½ çš„çœŸå®IPå‘é€ç»™äº†å¯¹æ–¹æœåŠ¡å™¨ï¼Œæ‰€ä»¥æ— æ³•è¾¾åˆ°ä¿æŠ¤çœŸå®ä¿¡æ¯ã€‚
<br>åŒ¿åä»£ç†(Anonymous Proxy)ï¼šåŒ¿åä»£ç†éšè—äº†æ‚¨çš„çœŸå®IPï¼Œä½†æ˜¯å‘è®¿é—®å¯¹è±¡å¯ä»¥æ£€æµ‹æ˜¯ä½¿ç”¨ä»£ç†æœåŠ¡å™¨è®¿é—®ä»–ä»¬çš„ã€‚ä¼šæ”¹å˜æˆ‘ä»¬çš„è¯·æ±‚ä¿¡æ¯ï¼ŒæœåŠ¡å™¨ç«¯æœ‰å¯èƒ½ä¼šè®¤ä¸ºæˆ‘ä»¬ä½¿ç”¨äº†ä»£ç†ã€‚ä¸è¿‡ä½¿ç”¨æ­¤ç§ä»£ç†æ—¶ï¼Œè™½ç„¶è¢«è®¿é—®çš„ç½‘ç«™ä¸èƒ½çŸ¥é“ä½ çš„ipåœ°å€ï¼Œä½†ä»ç„¶å¯ä»¥çŸ¥é“ä½ åœ¨ä½¿ç”¨ä»£ç†ï¼Œå½“ç„¶æŸäº›èƒ½å¤Ÿä¾¦æµ‹ipçš„ç½‘é¡µä¹Ÿæ˜¯å¯ä»¥æŸ¥åˆ°ä½ çš„ipã€‚ï¼ˆ<a data-tooltip-position="top" aria-label="https://wenku.baidu.com/view/9bf7b5bd3a3567ec102de2bd960590c69fc3d8cf.html%EF%BC%89" rel="noopener" class="external-link" href="https://wenku.baidu.com/view/9bf7b5bd3a3567ec102de2bd960590c69fc3d8cf.html%EF%BC%89" target="_blank">https://wenku.baidu.com/view/9bf7b5bd3a3567ec102de2bd960590c69fc3d8cf.htmlï¼‰</a>
<br>é«˜åŒ¿ä»£ç†(Elite proxyæˆ–High Anonymity Proxy)ï¼šé«˜åŒ¿åä»£ç†ä¸æ”¹å˜å®¢æˆ·æœºçš„è¯·æ±‚ï¼Œè¿™æ ·åœ¨æœåŠ¡å™¨çœ‹æ¥å°±åƒæœ‰ä¸ªçœŸæ­£çš„å®¢æˆ·æµè§ˆå™¨åœ¨è®¿é—®å®ƒï¼Œè¿™æ—¶å®¢æˆ·çš„çœŸå®IPæ˜¯éšè—çš„ï¼Œå®Œå…¨ç”¨ä»£ç†æœåŠ¡å™¨çš„ä¿¡æ¯æ›¿ä»£äº†æ‚¨çš„æ‰€æœ‰ä¿¡æ¯ï¼Œå°±è±¡æ‚¨å°±æ˜¯å®Œå…¨ä½¿ç”¨é‚£å°ä»£ç†æœåŠ¡å™¨ç›´æ¥è®¿é—®å¯¹è±¡ï¼ŒåŒæ—¶æœåŠ¡å™¨ç«¯ä¸ä¼šè®¤ä¸ºæˆ‘ä»¬ä½¿ç”¨äº†ä»£ç†ã€‚IPDIEAè¦†ç›–å…¨çƒ240ï¼‹å›½å®¶åœ°åŒºipé«˜åŒ¿åä»£ç†ä¸å¿…æ‹…å¿ƒè¢«è¿½è¸ªã€‚
<br>åœ¨ä½¿ç”¨çš„ä½¿ç”¨ï¼Œæ¯«æ— ç–‘é—®ä½¿ç”¨é«˜åŒ¿ä»£ç†æ•ˆæœæœ€å¥½<br>ä»è¯·æ±‚ä½¿ç”¨çš„åè®®å¯ä»¥åˆ†ä¸ºï¼š<br>
<br>httpä»£ç†
<br>httpsä»£ç†
<br>socketä»£ç†ç­‰
<br>ä¸åŒåˆ†ç±»çš„ä»£ç†ï¼Œåœ¨ä½¿ç”¨çš„æ—¶å€™éœ€è¦æ ¹æ®æŠ“å–ç½‘ç«™çš„åè®®æ¥é€‰æ‹©<br><br>
<br>
ååçˆ¬
ä½¿ç”¨ä»£ç†ipæ˜¯éå¸¸å¿…è¦çš„ä¸€ç§ååçˆ¬çš„æ–¹å¼
ä½†æ˜¯å³ä½¿ä½¿ç”¨äº†ä»£ç†ipï¼Œå¯¹æ–¹æœåŠ¡å™¨ä»»ç„¶ä¼šæœ‰å¾ˆå¤šçš„æ–¹å¼æ¥æ£€æµ‹æˆ‘ä»¬æ˜¯å¦æ˜¯ä¸€ä¸ªçˆ¬è™«ï¼Œæ¯”å¦‚ï¼š

<br>
ä¸€æ®µæ—¶é—´å†…ï¼Œæ£€æµ‹IPè®¿é—®çš„é¢‘ç‡ï¼Œè®¿é—®å¤ªå¤šé¢‘ç¹ä¼šå±è”½

<br>
æ£€æŸ¥Cookieï¼ŒUser-Agentï¼ŒRefererç­‰headerå‚æ•°ï¼Œè‹¥æ²¡æœ‰åˆ™å±è”½

<br>
æœåŠ¡æ–¹è´­ä¹°æ‰€æœ‰ä»£ç†æä¾›å•†ï¼ŒåŠ å…¥åˆ°åçˆ¬è™«æ•°æ®åº“é‡Œï¼Œè‹¥æ£€æµ‹æ˜¯ä»£ç†åˆ™å±è”½
æ‰€ä»¥æ›´å¥½çš„æ–¹å¼åœ¨ä½¿ç”¨ä»£ç†ipçš„æ—¶å€™ä½¿ç”¨éšæœºçš„æ–¹å¼è¿›è¡Œé€‰æ‹©ä½¿ç”¨ï¼Œä¸è¦æ¯æ¬¡éƒ½ç”¨ä¸€ä¸ªä»£ç†ip



<br>
ä»£ç†ipæ± çš„æ›´æ–°
è´­ä¹°çš„ä»£ç†ipå¾ˆå¤šæ—¶å€™å¤§éƒ¨åˆ†(è¶…è¿‡60%)å¯èƒ½éƒ½æ²¡åŠæ³•ä½¿ç”¨ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦é€šè¿‡ç¨‹åºå»æ£€æµ‹å“ªäº›å¯ç”¨ï¼ŒæŠŠä¸èƒ½ç”¨çš„åˆ é™¤æ‰ã€‚

<br>
<br>
ä»£ç†æœåŠ¡å™¨å¹³å°çš„ä½¿ç”¨ï¼š
å½“ç„¶è¿˜æœ‰å¾ˆå¤šå…è´¹çš„ï¼Œä½†æ˜¯å¤§å¤šéƒ½ä¸å¯ç”¨éœ€è¦è‡ªå·±å°è¯•

<br><a rel="noopener" class="external-link" href="http://www.66ip.cn" target="_blank">http://www.66ip.cn</a>
<br><a rel="noopener" class="external-link" href="https://ip.jiangxianli.com/?page=1" target="_blank">https://ip.jiangxianli.com/?page=1</a>
<br><a rel="noopener" class="external-link" href="https://www.zdaye.com" target="_blank">https://www.zdaye.com</a>
<br><a rel="noopener" class="external-link" href="https://www.kuaidaili.com/free" target="_blank">https://www.kuaidaili.com/free</a>


<br><br>
<br>
æµè§ˆå™¨é…ç½®ä»£ç†
å³è¾¹ä¸‰ç‚¹==&gt; è®¾ç½®==&gt; é«˜çº§==&gt; ä»£ç†==&gt; å±€åŸŸç½‘è®¾ç½®==&gt; ä¸ºLANä½¿ç”¨ä»£ç†==&gt; è¾“å…¥ipå’Œç«¯å£å·å³å¯
å‚è€ƒç½‘å€ï¼š<a rel="noopener" class="external-link" href="https://jingyan.baidu.com/article/a681b0dece76407a1843468d.html" target="_blank">https://jingyan.baidu.com/article/a681b0dece76407a1843468d.html</a>

<br>
ä»£ç é…ç½®
urllib
Pythonhandler = urllib.request.ProxyHandler({'http': '114.215.95.188:3128'})
opener = urllib.request.build_opener(handler)
# åç»­éƒ½ä½¿ç”¨opener.openæ–¹æ³•å»å‘é€è¯·æ±‚å³å¯
å¤åˆ¶
requests
Python# ç”¨åˆ°çš„åº“
import requests
# å†™å…¥è·å–åˆ°çš„ipåœ°å€åˆ°proxy
# ä¸€ä¸ªipåœ°å€
proxy = {
    'http':'http://221.178.232.130:8080'
}
"""
# å¤šä¸ªipåœ°å€
proxy = [
  {'http':'http://221.178.232.130:8080'},
  {'http':'http://221.178.232.130:8080'}
]
import random
proxy = random.choice(proxy)
"""

# ä½¿ç”¨ä»£ç†
proxy = {
    'http': 'http://58.20.184.187:9091'
}

result = requests.get("http://httpbin.org/ip", proxies=proxy)

print(result.text)
å¤åˆ¶

<br><br>
<br>requestså‘é€postè¯·æ±‚ä½¿ç”¨requests.postæ–¹æ³•ï¼Œå¸¦ä¸Šè¯·æ±‚ä½“ï¼Œå…¶ä¸­è¯·æ±‚ä½“éœ€è¦æ—¶å­—å…¸çš„å½¢å¼ï¼Œä¼ é€’ç»™dataå‚æ•°æ¥æ”¶
<br>åœ¨requestsä¸­ä½¿ç”¨ä»£ç†ï¼Œéœ€è¦å‡†å¤‡å­—å…¸å½¢å¼çš„ä»£ç†ï¼Œä¼ é€’ç»™proxieså‚æ•°æ¥æ”¶
<br>ä¸åŒåè®®çš„urlåœ°å€ï¼Œéœ€è¦ä½¿ç”¨ä¸åŒçš„ä»£ç†å»è¯·æ±‚
]]></description><link>çˆ¬è™«\çˆ¬è™«æ–‡æ¡£\urllibä¸requests1.html</link><guid isPermaLink="false">çˆ¬è™«/çˆ¬è™«æ–‡æ¡£/urllibä¸requests1.md</guid><pubDate>Fri, 15 Sep 2023 11:26:21 GMT</pubDate></item><item><title><![CDATA[urllibä¸requests2]]></title><description><![CDATA[ 
 <br><br>å­¦ä¹ ç›®æ ‡<br>æŒæ¡requestså¤„ç†cookieçš„ä¸‰ç§æ–¹æ³•<br><br>
ä¸ºäº†èƒ½å¤Ÿé€šè¿‡çˆ¬è™«è·å–åˆ°ç™»å½•åçš„é¡µé¢ï¼Œæˆ–è€…æ˜¯è§£å†³é€šè¿‡cookieçš„åæ‰’ï¼Œéœ€è¦ä½¿ç”¨requestæ¥å¤„ç†cookieç›¸å…³çš„è¯·æ±‚
<br><br>
<br>å¸¦ä¸Šcookieçš„å¥½å¤„

<br>èƒ½å¤Ÿè®¿é—®ç™»å½•åçš„é¡µé¢
<br>èƒ½å¤Ÿå®ç°éƒ¨åˆ†ååçˆ¬


<br>å¸¦ä¸Šcookieçš„åå¤„

<br>ä¸€å¥—cookieå¾€å¾€å¯¹åº”çš„æ˜¯ä¸€ä¸ªç”¨æˆ·çš„ä¿¡æ¯ï¼Œè¯·æ±‚å¤ªé¢‘ç¹æœ‰æ›´å¤§çš„å¯èƒ½æ€§è¢«å¯¹æ–¹è¯†åˆ«ä¸ºçˆ¬è™«
<br>é‚£ä¹ˆä¸Šé¢çš„é—®é¢˜å¦‚ä½•è§£å†³ ?ä½¿ç”¨å¤šä¸ªè´¦å·


<br><br>ä½¿ç”¨requestså¤„ç†cookieæœ‰ä¸‰ç§æ–¹æ³•ï¼š<br>
<br>cookieå­—ç¬¦ä¸²æ”¾åœ¨headersä¸­
<br>æŠŠcookieå­—å…¸æ”¾ä¼ ç»™è¯·æ±‚æ–¹æ³•çš„cookieså‚æ•°æ¥æ”¶
<br>ä½¿ç”¨requestsæä¾›çš„sessionæ¨¡å—
<br><br><br>â€œrequests.assets/headersä¸­çš„cookie.pngâ€ could not be found.<br>
<br>headersä¸­çš„cookieï¼š

<br>ä½¿ç”¨åˆ†å·(;)éš”å¼€
<br>åˆ†å·ä¸¤è¾¹çš„ç±»ä¼¼a=bå½¢å¼çš„è¡¨ç¤ºä¸€æ¡cookie
<br>a=bä¸­ï¼Œaè¡¨ç¤ºé”®ï¼ˆnameï¼‰ï¼Œbè¡¨ç¤ºå€¼ï¼ˆvalueï¼‰
<br>åœ¨headersä¸­ä»…ä»…ä½¿ç”¨äº†cookieçš„nameå’Œvalue


<br><br>â€œrequests.assets/cookieçš„å…·ä½“å­—æ®µ.pngâ€ could not be found.<br>ç”±äºheadersä¸­å¯¹cookieä»…ä»…ä½¿ç”¨å®ƒçš„nameå’Œvalueï¼Œæ‰€ä»¥åœ¨ä»£ç ä¸­æˆ‘ä»¬ä»…ä»…éœ€è¦cookieçš„nameå’Œvalueå³å¯<br><br>å¤åˆ¶æµè§ˆå™¨ä¸­çš„cookieåˆ°ä»£ç ä¸­ä½¿ç”¨<br>Pythonheaders = {
"User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/65.0.3325.181 Safari/537.36",
"Cookie":" Pycharm-26c2d973=dbb9b300-2483-478f-9f5a-16ca4580177e; Hm_lvt_98b9d8c2fd6608d564bf2ac2ae642948=1512607763; Pycharm-26c2d974=f645329f-338e-486c-82c2-29e2a0205c74; _xsrf=2|d1a3d8ea|c5b07851cbce048bd5453846445de19d|1522379036"}

requests.get(url,headers=headers)
å¤åˆ¶<br><br>cookieæœ‰è¿‡æœŸæ—¶é—´ ï¼Œæ‰€ä»¥ç›´æ¥å¤åˆ¶æµè§ˆå™¨ä¸­çš„cookieå¯èƒ½æ„å‘³ç€ä¸‹ä¸€ç¨‹åºç»§ç»­è¿è¡Œçš„æ—¶å€™éœ€è¦æ›¿æ¢ä»£ç ä¸­çš„cookieï¼Œå¯¹åº”çš„æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ä¸€ä¸ªç¨‹åºä¸“é—¨æ¥è·å–cookieä¾›å…¶ä»–ç¨‹åºä½¿ç”¨ï¼›å½“ç„¶ä¹Ÿæœ‰å¾ˆå¤šç½‘ç«™çš„cookieè¿‡æœŸæ—¶é—´å¾ˆé•¿ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œç›´æ¥å¤åˆ¶cookieæ¥ä½¿ç”¨æ›´åŠ ç®€å•<br><br>
<br>cookiesçš„å½¢å¼ï¼šå­—å…¸
<br>Jsoncookies = {"cookieçš„name":"cookieçš„value"}
å¤åˆ¶<br>
<br>ä½¿ç”¨æ–¹æ³•ï¼š
<br>Pythonrequests.get(url,headers=headers,cookies=cookie_dict)
å¤åˆ¶<br>
<br>
å®ä¾‹ï¼ˆçˆ¬å–é›ªçƒç½‘ï¼‰
åœ¨ç½‘ç»œä¸­æ‰¾åˆ°å½“å‰è¯·æ±‚çš„ç½‘å€ ç‚¹å‡»cookies å°†å½“å‰çš„k,valueå¤åˆ¶åˆ°ä»£ç ä¸­
â€œrequests.assets/image-20220420190426741.pngâ€ could not be found.
Pythoncookie_dict = {
    'u': '1990923459',
    'bid': '1f110dfd43538f4b8362dfcd21ffbb64_l27g4lfl',
    'xq_is_login': '1',
    'xq_r_token': '5dcbe83944f0b75325f91246061d4a2a01999367'
}
å¤åˆ¶
å®Œæ•´ä»£ç 
Pythonimport requests

# æºå¸¦cookieç™»å½•é›ªçƒç½‘  æŠ“å–å®Œå–„ä¸ªäººèµ„æ–™é¡µé¢
headers = {
    'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.127 Safari/537.36',
    'Referer': 'https://xueqiu.com/u/1990923459',
    'Host': 'xueqiu.com',
}
url = 'https://xueqiu.com/users/connectnew?redirect=/setting/user'

cookie_dict = {
    'u': '1990923459',
    'bid': '1f110dfd43538f4b8362dfcd21ffbb64_l27g4lfl',
    'xq_is_login': '1',
    'xq_r_token': '5dcbe83944f0b75325f91246061d4a2a01999367'
}
res = requests.get(url, headers=headers, cookies=cookie_dict)
with open('é›ªçƒç½‘.html', 'w') as f:
    f.write(res.content.decode('UTF-8'))
    print(res.content.decode('UTF-8'))
å¤åˆ¶
æˆæœ
â€œrequests.assets/image-20220420190612671.pngâ€ could not be found.

<br><br>
å‰é¢ä½¿ç”¨æ‰‹åŠ¨çš„æ–¹å¼ä½¿ç”¨cookieï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰æ›´å¥½çš„æ–¹æ³•åœ¨requetsä¸­å¤„ç†cookieå‘¢ï¼Ÿ
<br>requests æä¾›äº†ä¸€ä¸ªå«åšsessionç±»ï¼Œæ¥å®ç°å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„ä¼šè¯ä¿æŒ<br>ä¼šè¯ä¿æŒæœ‰ä¸¤ä¸ªå†…æ¶µï¼š<br>
<br>ä¿å­˜cookieï¼Œä¸‹ä¸€æ¬¡è¯·æ±‚ä¼šå¸¦ä¸Šå‰ä¸€æ¬¡çš„cookie
<br>å®ç°å’ŒæœåŠ¡ç«¯çš„é•¿è¿æ¥ï¼ŒåŠ å¿«è¯·æ±‚é€Ÿåº¦
<br><br>Pythonsession = requests.session()
response = session.get(url,headers)
å¤åˆ¶<br>sessionå®ä¾‹åœ¨è¯·æ±‚äº†ä¸€ä¸ªç½‘ç«™åï¼Œå¯¹æ–¹æœåŠ¡å™¨è®¾ç½®åœ¨æœ¬åœ°çš„cookieä¼šä¿å­˜åœ¨sessionä¸­ï¼Œä¸‹ä¸€æ¬¡å†ä½¿ç”¨sessionè¯·æ±‚å¯¹æ–¹æœåŠ¡å™¨çš„æ—¶å€™ï¼Œä¼šå¸¦ä¸Šå‰ä¸€æ¬¡çš„cookie<br><br>
<br>
17kå°è¯´ç½‘    <a rel="noopener" class="external-link" href="https://passport.17k.com/" target="_blank">https://passport.17k.com/</a>

<br>
å¤è¯—æ–‡ï¼š<a rel="noopener" class="external-link" href="https://so.gushiwen.cn" target="_blank">https://so.gushiwen.cn</a>

<br>
æ‰“ç å¹³å°  
å›¾é‰´   <a rel="noopener" class="external-link" href="http://www.ttshitu.com/" target="_blank">http://www.ttshitu.com/</a>

<br><br>
<br>å‡†å¤‡urlåœ°å€å’Œè¯·æ±‚å‚æ•°
<br>æ„é€ sessionå‘é€postè¯·æ±‚
<br>ä½¿ç”¨sessionè¯·æ±‚ä¸ªäººä¸»é¡µï¼Œè§‚å¯Ÿæ˜¯å¦è¯·æ±‚æˆåŠŸ
<br><br>
<br>cookieå­—ç¬¦ä¸²å¯ä»¥æ”¾åœ¨headerså­—å…¸ä¸­ï¼Œé”®ä¸ºCookieï¼Œå€¼ä¸ºcookieå­—ç¬¦ä¸²
<br>å¯ä»¥æŠŠcookieå­—ç¬¦ä¸²è½¬åŒ–ä¸ºå­—å…¸ï¼Œä½¿ç”¨è¯·æ±‚æ–¹æ³•çš„cookieså‚æ•°æ¥æ”¶
<br>ä½¿ç”¨requestsæä¾›çš„sessionæ¨¡å—ï¼Œèƒ½å¤Ÿè‡ªåŠ¨å®ç°cookieçš„å¤„ç†ï¼ŒåŒ…æ‹¬è¯·æ±‚çš„æ—¶å€™æºå¸¦cookieï¼Œè·å–å“åº”çš„æ—¶å€™ä¿å­˜cookie
<br><br><br>
<br>æŒæ¡requestsä¸­cookirJarçš„å¤„ç†æ–¹æ³•
<br>æŒæ¡requestsè§£å†³httpsè¯ä¹¦é”™è¯¯çš„é—®é¢˜
<br>æŒæ¡requestsä¸­è¶…æ—¶å‚æ•°çš„ä½¿ç”¨
<br><br>
ä½¿ç”¨requestè·å–çš„resposneå¯¹è±¡ï¼Œå…·æœ‰cookieså±æ€§ï¼Œèƒ½å¤Ÿè·å–å¯¹æ–¹æœåŠ¡å™¨è®¾ç½®åœ¨æœ¬åœ°çš„cookieï¼Œä½†æ˜¯å¦‚ä½•ä½¿ç”¨è¿™äº›cookieå‘¢ï¼Ÿ
<br><br>
<br>response.cookiesæ˜¯CookieJarç±»å‹
<br>ä½¿ç”¨requests.utils.dict_from_cookiejarï¼Œèƒ½å¤Ÿå®ç°æŠŠcookiejarå¯¹è±¡è½¬åŒ–ä¸ºå­—å…¸
<br><br>Pythonimport requests

url = "http://www.baidu.com"
#å‘é€è¯·æ±‚ï¼Œè·å–resposne
response = requests.get(url)
print(type(response.cookies))

#ä½¿ç”¨æ–¹æ³•ä»cookiejarä¸­æå–æ•°æ®  ç­‰åŒäº  dict(response.cookies)
cookies = requests.utils.dict_from_cookiejar(response.cookies)
print(cookies)
å¤åˆ¶<br>è¾“å‡ºä¸º:<br>Python&lt;class 'requests.cookies.RequestsCookieJar'&gt;
{'BDORZ': '27315'}
å¤åˆ¶<br><br>åœ¨å‰é¢çš„requestsçš„sessionç±»ä¸­ï¼Œæˆ‘ä»¬ä¸éœ€è¦å¤„ç†cookieçš„ä»»ä½•ç»†èŠ‚ï¼Œå¦‚æœæœ‰éœ€è¦ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸Šè¿°æ–¹æ³•æ¥è§£å†³<br><br>
ç»å¸¸æˆ‘ä»¬åœ¨ç½‘ä¸Šå†²æµªæ—¶ï¼Œç»å¸¸èƒ½å¤Ÿçœ‹åˆ°ä¸‹é¢çš„æç¤ºï¼š
<br>â€œrequests.assets/12306sslé”™è¯¯.pngâ€ could not be found.<br>å‡ºç°è¿™ä¸ªé—®é¢˜çš„åŸå› æ˜¯ï¼šsslçš„è¯ä¹¦ä¸å®‰å…¨å¯¼è‡´<br><br>é‚£ä¹ˆå¦‚æœåœ¨ä»£ç ä¸­è¯·æ±‚ä¼šæ€ä¹ˆæ ·å‘¢ï¼Ÿ<br>Pythonimport requests

url = "https://www.12306.cn/mormhweb/"
response = requests.get(url)
å¤åˆ¶<br>è¿”å›è¯ä¹¦é”™è¯¯ï¼Œå¦‚ä¸‹ï¼š<br>ssl.CertificateError ...
å¤åˆ¶<br><br>ä¸ºäº†åœ¨ä»£ç ä¸­èƒ½å¤Ÿæ­£å¸¸çš„è¯·æ±‚ï¼Œæˆ‘ä»¬ä¿®æ”¹æ·»åŠ ä¸€ä¸ªå‚æ•°<br>Pythonimport requests

url = "https://www.12306.cn/mormhweb/"
response = requests.get(url, verify=False)
å¤åˆ¶<br><br>
åœ¨å¹³æ—¶ç½‘ä¸Šå†²æµªçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°ç½‘ç»œæ³¢åŠ¨ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œä¸€ä¸ªè¯·æ±‚ç­‰äº†å¾ˆä¹…å¯èƒ½ä»»ç„¶æ²¡æœ‰ç»“æœ
åœ¨çˆ¬è™«ä¸­ï¼Œä¸€ä¸ªè¯·æ±‚å¾ˆä¹…æ²¡æœ‰ç»“æœï¼Œå°±ä¼šè®©æ•´ä¸ªé¡¹ç›®çš„æ•ˆç‡å˜å¾—éå¸¸ä½ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±éœ€è¦å¯¹è¯·æ±‚è¿›è¡Œå¼ºåˆ¶è¦æ±‚ï¼Œè®©ä»–å¿…é¡»åœ¨ç‰¹å®šçš„æ—¶é—´å†…è¿”å›ç»“æœï¼Œå¦åˆ™å°±æŠ¥é”™
<br><br>Pythonresponse = requests.get(url,timeout=3)
å¤åˆ¶<br>é€šè¿‡æ·»åŠ timeoutå‚æ•°ï¼Œèƒ½å¤Ÿä¿è¯åœ¨3ç§’é’Ÿå†…è¿”å›å“åº”ï¼Œå¦åˆ™ä¼šæŠ¥é”™<br><br>è¿™ä¸ªæ–¹æ³•è¿˜èƒ½å¤Ÿæ‹¿æ¥æ£€æµ‹ä»£ç†ipçš„è´¨é‡ï¼Œå¦‚æœä¸€ä¸ªä»£ç†ipåœ¨å¾ˆé•¿æ—¶é—´æ²¡æœ‰å“åº”ï¼Œé‚£ä¹ˆæ·»åŠ è¶…æ—¶ä¹‹åä¹Ÿä¼šæŠ¥é”™ï¼Œå¯¹åº”çš„è¿™ä¸ªipå°±å¯ä»¥ä»ä»£ç†ipæ± ä¸­åˆ é™¤]]></description><link>çˆ¬è™«\çˆ¬è™«æ–‡æ¡£\urllibä¸requests2.html</link><guid isPermaLink="false">çˆ¬è™«/çˆ¬è™«æ–‡æ¡£/urllibä¸requests2.md</guid><pubDate>Sat, 16 Sep 2023 08:25:47 GMT</pubDate></item><item><title><![CDATA[xpath]]></title><description><![CDATA[<a class="tag" href="?query=tag:xpath" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#xpath</a> 
 <br><br><a href=".?query=tag:xpath" class="tag" target="_blank" rel="noopener">#xpath</a> <br><br>å®‰è£…<br>
<br>
å®‰è£…lxmlåº“
pip install lxml -i pipæº

<br><br>è§£ææµç¨‹<br>
<br>å®ä¾‹åŒ–ä¸€ä¸ªetreeçš„å¯¹è±¡ï¼ŒæŠŠå³å°†è¢«è§£æçš„é¡µé¢æºç åŠ è½½åˆ°è¯¥å¯¹è±¡
<br>è°ƒç”¨è¯¥å¯¹è±¡çš„xpathæ–¹æ³•ç»“åˆç€ä¸åŒå½¢å¼çš„xpathè¡¨è¾¾è¿›è¡Œæ ‡ç­¾å®šä½å’Œæ•°æ®æå–
<br>ä½¿ç”¨<br>
<br>
å¯¼å…¥lxml.etree
from lxml import etree

<br>
etree.parse()
è§£ææœ¬åœ°htmlæ–‡ä»¶
html_tree = etree.parse('XX.html')

<br>
etree.HTML()(å»ºè®®)
è§£æç½‘ç»œçš„htmlå­—ç¬¦ä¸²
html_tree = etree.HTML(htmlå­—ç¬¦ä¸²)

<br>
html_tree.xpath()
ä½¿ç”¨xpathè·¯å¾„æŸ¥è¯¢ä¿¡æ¯ï¼Œè¿”å›ä¸€ä¸ªåˆ—è¡¨

<br>æ³¨æ„ï¼šå¦‚æœlxmlè§£ææœ¬åœ°HTMLæ–‡ä»¶æŠ¥é”™å¯ä»¥æŒ‰ç…§å¦‚ä¸‹æ·»åŠ å‚æ•°<br>Pythonparser = etree.HTMLParser(encoding="utf-8")
selector = etree.parse('./lol_1.html',parser=parser)
result=etree.tostring(selector)
å¤åˆ¶<br><br>XPath æ˜¯ä¸€é—¨åœ¨ XML æ–‡æ¡£ä¸­æŸ¥æ‰¾ä¿¡æ¯çš„è¯­è¨€ã€‚XPath ç”¨äºåœ¨ XML æ–‡æ¡£ä¸­é€šè¿‡å…ƒç´ å’Œå±æ€§è¿›è¡Œå¯¼èˆªã€‚<br>
<br>
è·¯å¾„è¡¨è¾¾å¼

å®ä¾‹
åœ¨ä¸‹é¢çš„è¡¨æ ¼ä¸­ï¼Œæˆ‘ä»¬å·²åˆ—å‡ºäº†ä¸€äº›è·¯å¾„è¡¨è¾¾å¼ä»¥åŠè¡¨è¾¾å¼çš„ç»“æœï¼š


<br>
è°“è¯­ï¼ˆPredicatesï¼‰
è°“è¯­ç”¨æ¥æŸ¥æ‰¾æŸä¸ªç‰¹å®šçš„èŠ‚ç‚¹æˆ–è€…åŒ…å«æŸä¸ªæŒ‡å®šçš„å€¼çš„èŠ‚ç‚¹ã€‚
è°“è¯­è¢«åµŒåœ¨æ–¹æ‹¬å·ä¸­ã€‚
å®ä¾‹
åœ¨ä¸‹é¢çš„è¡¨æ ¼ä¸­ï¼Œæˆ‘ä»¬åˆ—å‡ºäº†å¸¦æœ‰è°“è¯­çš„ä¸€äº›è·¯å¾„è¡¨è¾¾å¼ï¼Œä»¥åŠè¡¨è¾¾å¼çš„ç»“æœï¼š


<br>
é€‰å–æœªçŸ¥èŠ‚ç‚¹
XPath é€šé…ç¬¦å¯ç”¨æ¥é€‰å–æœªçŸ¥çš„ XML å…ƒç´ ã€‚

å®ä¾‹
åœ¨ä¸‹é¢çš„è¡¨æ ¼ä¸­ï¼Œæˆ‘ä»¬åˆ—å‡ºäº†ä¸€äº›è·¯å¾„è¡¨è¾¾å¼ï¼Œä»¥åŠè¿™äº›è¡¨è¾¾å¼çš„ç»“æœï¼š

é€‰å–è‹¥å¹²è·¯å¾„
é€šè¿‡åœ¨è·¯å¾„è¡¨è¾¾å¼ä¸­ä½¿ç”¨â€œ|â€è¿ç®—ç¬¦ï¼Œæ‚¨å¯ä»¥é€‰å–è‹¥å¹²ä¸ªè·¯å¾„ã€‚
å®ä¾‹
åœ¨ä¸‹é¢çš„è¡¨æ ¼ä¸­ï¼Œæˆ‘ä»¬åˆ—å‡ºäº†ä¸€äº›è·¯å¾„è¡¨è¾¾å¼ï¼Œä»¥åŠè¿™äº›è¡¨è¾¾å¼çš„ç»“æœï¼š


<br>
é€»è¾‘è¿ç®—

<br>
æŸ¥æ‰¾æ‰€æœ‰idå±æ€§ç­‰äºheadå¹¶ä¸”classå±æ€§ç­‰äºs_downçš„divæ ‡ç­¾
Python//div[@id="head" and @class="s_down"]
å¤åˆ¶

<br>
é€‰å–æ–‡æ¡£ä¸­çš„æ‰€æœ‰ title å’Œ price å…ƒç´ ã€‚
//title | //price
å¤åˆ¶
æ³¨æ„: â€œ|â€ä¸¤è¾¹å¿…é¡»æ˜¯å®Œæ•´çš„xpathè·¯å¾„



<br>
å±æ€§æŸ¥è¯¢

<br>
æŸ¥æ‰¾æ‰€æœ‰åŒ…å«idå±æ€§çš„divèŠ‚ç‚¹
//div[@id]
å¤åˆ¶

<br>
æŸ¥æ‰¾æ‰€æœ‰idå±æ€§ç­‰äºmaincontentçš„divæ ‡ç­¾
//div[@id="maincontent"]
å¤åˆ¶

<br>
æŸ¥æ‰¾æ‰€æœ‰çš„classå±æ€§
//@class
å¤åˆ¶

<br>
//@attrName
//li[@name="xx"]//text()  # è·å–liæ ‡ç­¾nameä¸ºxxçš„é‡Œé¢çš„æ–‡æœ¬å†…å®¹
å¤åˆ¶



<br>
è·å–ç¬¬å‡ ä¸ªæ ‡ç­¾  ç´¢å¼•ä»1å¼€å§‹
tree.xpath('//li[1]/a/text()')  # è·å–ç¬¬ä¸€ä¸ª
tree.xpath('//li[last()]/a/text()')  # è·å–æœ€åä¸€ä¸ª
tree.xpath('//li[last()-1]/a/text()')  # è·å–å€’æ•°ç¬¬äºŒä¸ª
å¤åˆ¶

<br>
å†…å®¹æŸ¥è¯¢
æŸ¥æ‰¾æ‰€æœ‰divæ ‡ç­¾ä¸‹çš„ç›´æ¥å­èŠ‚ç‚¹h1çš„å†…å®¹
//div/h1/text()
å¤åˆ¶

<br>
å±æ€§å€¼è·å–
//div/a/@href   è·å–aé‡Œé¢çš„hrefå±æ€§å€¼
å¤åˆ¶

<br>
è·å–æ‰€æœ‰
//*  #è·å–æ‰€æœ‰
//*[@class="xx"]  #è·å–æ‰€æœ‰classä¸ºxxçš„æ ‡ç­¾
å¤åˆ¶

<br>
è·å–èŠ‚ç‚¹å†…å®¹è½¬æ¢æˆå­—ç¬¦ä¸²
c = tree.xpath('//li/a')[0]
result=etree.tostring(c, encoding='utf-8')
print(result.decode('UTF-8'))
å¤åˆ¶

<br>ç»ƒä¹ <br>æŠ“å–è±†ç“£çš„æ ‡é¢˜ï¼Œå°é¢å›¾ç‰‡æ ‡ç­¾ï¼Œå›¾ç‰‡çš„srcï¼Œç®€ä»‹ï¼Œè¯„åˆ†<br>å½“å‰åŒ…å«è™šæ„ç±»å’Œéè™šæ„ç±»]]></description><link>çˆ¬è™«\çˆ¬è™«æ–‡æ¡£\xpath.html</link><guid isPermaLink="false">çˆ¬è™«/çˆ¬è™«æ–‡æ¡£/xpath.md</guid><pubDate>Mon, 16 Oct 2023 15:13:05 GMT</pubDate></item><item><title><![CDATA[Scrapyæ¡†æ¶å­¦ä¹ ]]></title><description><![CDATA[<a class="tag" href="?query=tag:scrapy" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#scrapy</a> <a class="tag" href="?query=tag:æ¡†æ¶" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#æ¡†æ¶</a> 
 <br><br><a href=".?query=tag:scrapy" class="tag" target="_blank" rel="noopener">#scrapy</a> <a href=".?query=tag:æ¡†æ¶" class="tag" target="_blank" rel="noopener">#æ¡†æ¶</a><br><br><br>Pythonpip install scrapy
å¤åˆ¶<br><br>Pythonscrapy startproject: åˆ›å»ºæ–°çš„çˆ¬è™«é¡¹ç›®ã€‚

scrapy genspider: åˆ›å»ºæ–°çš„çˆ¬è™«ã€‚

scrapy crawl: è¿è¡Œçˆ¬è™«ã€‚

scrapy shell: å¯åŠ¨ Scrapy shellï¼Œå¯ä»¥åœ¨äº¤äº’å¼å‘½ä»¤è¡Œä¸­æµ‹è¯•çˆ¬è™«ä»£ç ã€‚

scrapy view: æ‰“å¼€ç»™å®š URL çš„é¡µé¢ï¼Œæ–¹ä¾¿è°ƒè¯•ã€‚

scrapy fetch: ä½¿ç”¨ Scrapy çš„ä¸‹è½½å™¨ä¸‹è½½ç»™å®š URL çš„é¡µé¢ã€‚
#é…ç½®æ—¥å¿—æ‰“å°çº§åˆ« settings.py
L0G_LEVEL='ERROR' #å½“æœ‰æŠ¥é”™ERRORäº†ä¼šæ‰§è¡Œæ‰“å°
æˆ–è€…ç”¨ä»¥ä¸‹å‘½ä»¤å¯åŠ¨
scrapy crawl dzx -s LOG_LEVEL=ERROR 
å¤åˆ¶<br>
pipelines.py  â€”â€”&gt;ç®¡é“ï¼Œä¿å­˜æ•°æ®
settings.py    â€”â€”&gt;è®¾ç½®æ–‡ä»¶ï¼ŒUA,å¯åŠ¨ç®¡é“
spiders          â€”â€”&gt;è‡ªå·±å®šä¹‰çš„spiderçš„æ–‡ä»¶å¤¹
<br><br>
<br>
ROBOTSTXT_OBEY = False
robotsæ˜¯ä¸€ç§åçˆ¬åè®®ã€‚åœ¨åè®®ä¸­è§„å®šäº†å“ªäº›èº«ä»½çš„çˆ¬è™«æ— æ³•çˆ¬å–çš„èµ„æºæœ‰å“ªäº›ã€‚
åœ¨é…ç½®æ–‡ä»¶ä¸­settingï¼Œå–æ¶ˆrobotsçš„ç›‘æµ‹ï¼š

<br>
åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®å…¨å±€çš„UAï¼šUSER_AGENT='xxxx'

<br>
åœ¨é…ç½®æ–‡ä»¶ä¸­åŠ å…¥æ—¥å¿—ç­‰çº§ï¼šLOG_LEVEL = 'ERROR'  åªè¾“å‡ºé”™è¯¯ä¿¡æ¯
å…¶å®ƒæ—¥å¿—çº§åˆ«

<br>CRITICAL  ä¸¥é‡é”™è¯¯
<br>ERROR  é”™è¯¯
<br>WARNING  è­¦å‘Š
<br>INFO  æ¶ˆæ¯
<br>DEBUG   è°ƒè¯•


<br><img alt="image-20230919204633965" src="http://typora-yxh.oss-cn-chengdu.aliyuncs.com/img/image-20230919204633965.png" referrerpolicy="no-referrer"><br><br><br>é¦–å…ˆåœ¨ç›®æ ‡æ–‡ä»¶å¤¹ä¸‹æ‰“å¼€cmdæˆ–è€…ç»ˆç«¯<br>Pythonscrapy startproject duanzhi(é¡¹ç›®åå­—è‡ªå®šä¹‰)
cd duanzhi
scrapy genspider dzx duanzixing.com 
å¤åˆ¶<br><img alt="image-20230919204329743" src="http://typora-yxh.oss-cn-chengdu.aliyuncs.com/img/image-20230919204329743.png" referrerpolicy="no-referrer"><br><img alt="image-20230919204358812" src="http://typora-yxh.oss-cn-chengdu.aliyuncs.com/img/image-20230919204358812.png" referrerpolicy="no-referrer"><br>è®¾ç½®ä¸€ä¸‹è¾“å‡ºæ—¥å¿—  å½“æœ‰æŠ¥é”™ERRORäº†ä¼šæ‰§è¡Œæ‰“å°<br><img alt="image-20230919204716206" src="http://typora-yxh.oss-cn-chengdu.aliyuncs.com/img/image-20230919204716206.png" referrerpolicy="no-referrer"><br>å†™ä¸€éƒ¨åˆ†ä»£ç æ¥è§‚å¯Ÿ<br>Pythonclass DzxSpider(scrapy.Spider):
    name = "dzx"
    # allowed_domains = ["duanzixing.com"]
    start_urls = ["https://duanzixing.com"]

    def parse(self, response, **kwargs):
        print(response)
        # è·å–å“åº”çš„å†…å®¹
        # print(response.text)
        # å½“å‰å“åº”çš„url
        print('response.url:', response.url)
        # å½“å‰å“åº”å¯¹åº”çš„è¯·æ±‚çš„url
        print('response.request.url:', response.request.url)
        # å“åº”å¤´
        print('response.headers:', response.headers)
        # å“åº”çš„è¯·æ±‚å¤´
        print('response.request.headers:', response.request.headers)
        # å“åº”ä½“
        print('response.body:', response.body)
        # è¿”å›å“åº”çš„å†…å®¹
        print('response.text:', response.text)
        # å“åº”çš„çŠ¶æ€ç 
        print('response.status:', response.status)
        # è·å–å“åº”çš„jsonæ•°æ® å¦‚æœå“åº”çš„å†…å®¹ä¸æ˜¯jsonæ ¼å¼çš„æ•°æ®ï¼Œä¼šæŠ¥é”™
        # print('response.json():', response.json())
        
å¤åˆ¶<br><br><img alt="image-20230919211800212" src="http://typora-yxh.oss-cn-chengdu.aliyuncs.com/img/image-20230919211800212.png" referrerpolicy="no-referrer"><br><img alt="image-20230919211843983" src="http://typora-yxh.oss-cn-chengdu.aliyuncs.com/img/image-20230919211843983.png" referrerpolicy="no-referrer"><br>å¯ä»¥å¾—åˆ°<br>æ ‡é¢˜å’Œæ­£æ–‡<br><br>Pythonimport requests
from lxml import etree

url = "https://duanzixing.com/"
headers = {
    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36',
}

res = requests.get(url, headers=headers)

html = etree.HTML(res.text)

# è·å–æ‰€æœ‰çš„æ®µå­
excerpt_list = html.xpath('/html/body/section/div/div/article')
# print(len(excerpt_list))
for tree in excerpt_list:
    title = tree.xpath('./header/h2/a/text()')
    text = tree.xpath('./p[@class="note"]/text()')
    print(title)
    print(text)
å¤åˆ¶<br><img alt="image-20230919212233825" src="http://typora-yxh.oss-cn-chengdu.aliyuncs.com/img/image-20230919212233825.png" referrerpolicy="no-referrer"><br><br>Python    def parse(self, response, **kwargs):
        excerpt_list=response.xpath('/html/body/section/div/div/article')
        data={}
        for tree in excerpt_list:
            title = tree.xpath('./header/h2/a/text()').extract()
            text = tree.xpath('./p[@class="note"]/text()').extract()
            print(title)
            print(text)
å¤åˆ¶<br><img alt="image-20230919212454370" src="http://typora-yxh.oss-cn-chengdu.aliyuncs.com/img/image-20230919212454370.png" referrerpolicy="no-referrer"><br>Urlå¤åˆ¶<br><br><br>åœ¨é…ç½®æ–‡ä»¶ä¸­å­˜æ”¾ä¸€äº›å…¬å…±å˜é‡ï¼Œåœ¨åç»­çš„é¡¹ç›®ä¸­æ–¹ä¾¿ä¿®æ”¹ï¼Œå¦‚ï¼šæœ¬åœ°æµ‹è¯•æ•°æ®åº“å’Œéƒ¨ç½²æœåŠ¡å™¨çš„æ•°æ®åº“ä¸ä¸€è‡´<br><br>
<br>å˜é‡åä¸€èˆ¬å…¨éƒ¨å¤§å†™
<br>å¯¼å…¥å³å¯ä½¿ç”¨
<br><br>
<br>
USER_AGENT è®¾ç½®ua

<br>
ROBOTSTXT_OBEY æ˜¯å¦éµå®ˆrobotsåè®®ï¼Œé»˜è®¤æ˜¯éµå®ˆ

<br>
CONCURRENT_REQUESTS è®¾ç½®å¹¶å‘è¯·æ±‚çš„æ•°é‡ï¼Œé»˜è®¤æ˜¯16ä¸ª

<br>
DOWNLOAD_DELAY ä¸‹è½½å»¶è¿Ÿï¼Œé»˜è®¤æ— å»¶è¿Ÿ ï¼ˆä¸‹è½½å™¨åœ¨ä»åŒä¸€ç½‘ç«™ä¸‹è½½è¿ç»­é¡µé¢ä¹‹å‰åº”ç­‰å¾…çš„æ—¶é—´ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ã€‚è¿™å¯ä»¥ç”¨æ¥é™åˆ¶çˆ¬è¡Œé€Ÿåº¦ï¼Œä»¥é¿å…å¯¹æœåŠ¡å™¨é€ æˆå¤ªå¤§å½±å“ï¼‰

<br>
COOKIES_ENABLED æ˜¯å¦å¼€å¯cookieï¼Œå³æ¯æ¬¡è¯·æ±‚å¸¦ä¸Šå‰ä¸€æ¬¡çš„cookieï¼Œé»˜è®¤æ˜¯å¼€å¯çš„

<br>
DEFAULT_REQUEST_HEADERS è®¾ç½®é»˜è®¤è¯·æ±‚å¤´ï¼Œè¿™é‡ŒåŠ å…¥äº†USER_AGENTå°†ä¸èµ·ä½œç”¨

<br>
SPIDER_MIDDLEWARES çˆ¬è™«ä¸­é—´ä»¶ï¼Œè®¾ç½®è¿‡ç¨‹å’Œç®¡é“ç›¸åŒ

<br>
DOWNLOADER_MIDDLEWARES ä¸‹è½½ä¸­é—´ä»¶

<br>
LOG_LEVEL æ§åˆ¶ç»ˆç«¯è¾“å‡ºä¿¡æ¯çš„logçº§åˆ«ï¼Œç»ˆç«¯é»˜è®¤æ˜¾ç¤ºçš„æ˜¯debugçº§åˆ«çš„logä¿¡æ¯

<br>LOG_LEVEL = "WARNING"

<br>CRITICAL  ä¸¥é‡
<br>ERROR  é”™è¯¯
<br>WARNING  è­¦å‘Š
<br>INFO  æ¶ˆæ¯
<br>DEBUG   è°ƒè¯•




<br>
LOG_FILE è®¾ç½®logæ—¥å¿—æ–‡ä»¶çš„ä¿å­˜è·¯å¾„ï¼Œå¦‚æœè®¾ç½®è¯¥å‚æ•°ï¼Œç»ˆç«¯å°†ä¸å†æ˜¾ç¤ºä¿¡æ¯
LOG_FILE = "./test.log"

<br>
å…¶ä»–è®¾ç½®å‚è€ƒï¼š<a rel="noopener" class="external-link" href="https://www.jianshu.com/p/df9c0d1e9087" target="_blank">https://www.jianshu.com/p/df9c0d1e9087</a>

<br><br><br>Pythonclass ITSpider(scrapy.Spider):
    name = 'ITSpider'
    # allowed_domains = ['www.xxx.com']
    start_urls = ['https://duanzixing.com/page/1/']

    # é€šè¿‡ç»ˆç«¯å†™å…¥æ–‡ä»¶çš„æ–¹å¼
    def parse(self, response):
        article_list = response.xpath('/html/body/section/div/div/article')
        # åˆ›å»ºåˆ—è¡¨ï¼Œ å­˜å‚¨æ•°æ®
        all_data = []
        for article in article_list:
            title = article.xpath('./header/h2/a/text()').extract_first()
            con = article.xpath('./p[2]/text()').extract_first()
            dic = {
                'title': title,
                'con': con
            }
            all_data.append(dic)
        return all_data
å¤åˆ¶<br>
<br>
ç»ˆç«¯å‘½ä»¤
scrapy crawl çˆ¬è™«åç§°-o æ–‡ä»¶å.csv  
scrapy crawl ITSpider -o ITSpider.csv  
å°†æ–‡ä»¶å­˜å‚¨åˆ°ITSpider.csv  æ–‡ä»¶ä¸­

<br><br>pipelineä¸­å¸¸ç”¨çš„æ–¹æ³•ï¼š<br>
<br>process_item(self,item,spider):å®ç°å¯¹itemæ•°æ®çš„å¤„ç†
<br>open_spider(self, spider): åœ¨çˆ¬è™«å¼€å¯çš„æ—¶å€™ä»…æ‰§è¡Œä¸€æ¬¡
<br>close_spider(self, spider): åœ¨çˆ¬è™«å…³é—­çš„æ—¶å€™ä»…æ‰§è¡Œä¸€æ¬¡
<br><br>Pythonclass DuanzhiPipeline:

    # åœ¨çˆ¬è™«å¼€å¯çš„æ—¶å€™ä»…æ‰§è¡Œä¸€æ¬¡
    def open_spider(self, item):
        print("çˆ¬è™«å¼€å§‹äº†")
        # è¿›è¡Œæ–‡ä»¶çš„æ‰“å¼€
        self.f = open('duanzhi.txt', 'w', encoding='utf-8')

    # å®ç°å¯¹itemæ•°æ®çš„å¤„ç†
    def process_item(self, item, spider):
        self.f.write(item['title'] + '\n')
        self.f.write(item['text'] + '\n')
        return item

    # åœ¨çˆ¬è™«å…³é—­çš„æ—¶å€™ä»…æ‰§è¡Œä¸€æ¬¡
    def close_spider(self, item):
        print("çˆ¬è™«ç»“æŸäº†")
        self.f.close()
å¤åˆ¶<br><br><br>Python    def parse(self, response, **kwargs):
        item = DuanzhiItem()
        excerpt_list = response.xpath('/html/body/section/div/div/article')
        for tree in excerpt_list:
            title = tree.xpath('./header/h2/a/text()').extract()
            text = tree.xpath('./p[@class="note"]/text()').extract()
            item['title'] = title
            item['text'] = text
            yield item
å¤åˆ¶<br><br>Pythonclass DuanzhiItem(scrapy.Item):
    # define the fields for your item here like:
    # name = scrapy.Field()
    title = scrapy.Field()
    text = scrapy.Field()
å¤åˆ¶<br><br>Pythonclass DuanzhiPipeline:

    # åœ¨çˆ¬è™«å¼€å¯çš„æ—¶å€™ä»…æ‰§è¡Œä¸€æ¬¡
    def open_spider(self, item):
        print("çˆ¬è™«å¼€å§‹äº†")
        # è¿›è¡Œæ–‡ä»¶çš„æ‰“å¼€
        self.f = open('duanzhi.txt', 'w', encoding='utf-8')

    # å®ç°å¯¹itemæ•°æ®çš„å¤„ç†
    def process_item(self, item, spider):
        if item['title'] and item['text']:
            self.f.write(item['title'][0] + '\n')
            self.f.write(item['text'][0] + '\n')
        return item

    # åœ¨çˆ¬è™«å…³é—­çš„æ—¶å€™ä»…æ‰§è¡Œä¸€æ¬¡
    def close_spider(self, item):
        print("çˆ¬è™«ç»“æŸäº†")
        self.f.close()
å¤åˆ¶<br><br><img alt="image-20230919221631883" src="http://typora-yxh.oss-cn-chengdu.aliyuncs.com/img/image-20230919221631883.png" referrerpolicy="no-referrer"><br><img alt="image-20230919221653448" src="http://typora-yxh.oss-cn-chengdu.aliyuncs.com/img/image-20230919221653448.png" referrerpolicy="no-referrer"><br>æ²¡æœ‰æ–‡ä»¶äº§ç”Ÿåˆ«æ–‡ä»¶settings.py æ‰“å¼€ç®¡é“<br><img alt="image-20230919223320970" src="http://typora-yxh.oss-cn-chengdu.aliyuncs.com/img/image-20230919223320970.png" referrerpolicy="no-referrer"><br><br><br><img alt="image-20230919224632808" src="http://typora-yxh.oss-cn-chengdu.aliyuncs.com/img/image-20230919224632808.png" referrerpolicy="no-referrer"><br><img alt="image-20230919224652855" src="http://typora-yxh.oss-cn-chengdu.aliyuncs.com/img/image-20230919224652855.png" referrerpolicy="no-referrer"><br>å¯ä»¥å¾—çŸ¥æ˜¯post è¯·æ±‚ ä¸”æ•°æ®ä¸ºjsonä¸”å­˜å‚¨åœ¨listä¸‹é¢ <br>æˆ‘ä»¬åªéœ€è·å–ä»¥ä¸‹æ•°æ®ï¼š<br>
prodName: "å¤§ç™½èœ"
avgPrice: "0.53"
unitInfo: "æ–¤"
pubDate: "2023-09-19 00:00:00"
<br>å®æˆ˜å¼€å§‹ï¼š<br><br>Pythonscrapy startproject xingfadi
cd xingdadi
scrapy genspider xfd xinfadi.com.cn
å¤åˆ¶<br><br>è®¾ç½®æ—¥å¿—<br>PythonLOG_LEVEL = "WARNING"
å¤åˆ¶<br>è®¾ç½®robots<br>PythonROBOTSTXT_OBEY =False
å¤åˆ¶<br>æ‰“å¼€ç®¡é“<br>PythonITEM_PIPELINES = {
   "xingfadi.pipelines.XingfadiPipeline": 300,
}
å¤åˆ¶<br><br>Pythonimport scrapy
from xingfadi.items import XingfadiItem


class XfdSpider(scrapy.Spider):
    name = "xfd"
    # allowed_domains = ["xinfadi.com.cn"]
    start_urls = ["http://www.xinfadi.com.cn	/getPriceData.html"]

    def parse(self, response):
        item = XingfadiItem()
        html = response.json()
        all_list = html["list"]
        for i in all_list:
            prodName = i["prodName"]
            avgPrice = i["avgPrice"]
            unitInfo = i["unitInfo"]
            pubDate = i["pubDate"]
            item["prodName"] = prodName
            item["avgPrice"] = avgPrice
            item["unitInfo"] = unitInfo
            item["pubDate"] = pubDate
            yield item
å¤åˆ¶<br><br>Pythonimport scrapy


class XingfadiItem(scrapy.Item):
    # define the fields for your item here like:
    # name = scrapy.Field()
    prodName = scrapy.Field()
    avgPrice = scrapy.Field()
    unitInfo = scrapy.Field()
    pubDate = scrapy.Field()
å¤åˆ¶<br><br>Pythonclass XingfadiPipeline:
    def open_spider(self, spider):
        print("çˆ¬è™«å¼€å§‹äº†")
        self.f = open("æ–°å‘åœ°ä»·æ ¼.txt", "w", encoding="utf-8")

    def process_item(self, item, spider):
        if item["prodName"] and item["avgPrice"] and item["unitInfo"] and item["pubDate"]:
            self.f.write(
                item["prodName"] + ":    " + item["avgPrice"] + item["unitInfo"] + "     æ—¶é—´:" + item["pubDate"] + "\n")

        return item

    def close_spider(self, spider):
        print("çˆ¬è™«ç»“æŸäº†")
        self.f.close()
å¤åˆ¶<br><br><img alt="image-20230919225532926" src="http://typora-yxh.oss-cn-chengdu.aliyuncs.com/img/image-20230919225532926.png" referrerpolicy="no-referrer"><br><br>
1.åˆ›å»ºå¥½é¡¹ç›®ä»¥åå…ˆè¦é…ç½®settingé‡Œé¢çš„å†…å®¹
2.æ— è®ºæ˜¯postè¿˜æ˜¯getè¯·æ±‚éƒ½å¯ä»¥ç›´æ¥å†™
3.ä»¥å‰éœ€è¦å¯¼å…¥çš„åŒ…å·²ç»è‡ªåŠ¨å¯¼å…¥ä¸éœ€è¦å†æ¬¡å¯¼å…¥
4.items.py çš„å±æ€§è¦å’Œ çˆ¬è™«.py é‡Œé¢çš„å±æ€§ä¸€ä¸€å¯¹åº”å¦åˆ™ä¼šæŠ¥é”™
5.pipelines.pt  ä¸€å®šè¦if åœ¨è¿›è¡Œå†™å…¥å¦åˆ™ä¸ä¼šæˆåŠŸ æˆ‘ä¹Ÿä¸çŸ¥é“ä¸ºä»€ä¹ˆ:smile:
ä¹±å†™:ok_hand:
<br><br><br><br>Mysqlcreate database spider;
use spider;
CREATE TABLE dzx (
    title VARCHAR(255),
    text TEXT
);
å¤åˆ¶<br><br>åŸºäºç¬¬ä¸€ä¸ªæ¡ˆä¾‹çš„dzxæ¥è¯´è¿›è¡Œä¸€ä¸ªæŠŠæ•°æ®å­˜å‚¨åˆ°æ•°æ®åº“ä¸­<br>Pythonimport pymysql


class DuanzhiPipeline:
    def open_spider(self, spider):
        # åœ¨çˆ¬è™«å¼€å¯çš„æ—¶å€™ä»…æ‰§è¡Œä¸€æ¬¡
        print("çˆ¬è™«å¼€å§‹äº†")
        self.db = pymysql.connect(host='localhost', user='root', password='1234',
                                  port=3306, db='spider', charset='utf8')
        self.cursor = self.db.cursor()

    def process_item(self, item, spider):
        # å®ç°å¯¹itemæ•°æ®çš„å¤„ç†
        try:
            title = item['title']
            text = item['text']
            # æ„å»ºSQLè¯­å¥
            sql = "INSERT INTO dzx (title, text) VALUES (%s, %s)"
            # æ‰§è¡ŒSQLè¯­å¥ï¼Œå¹¶ä¼ é€’å‚æ•°
            self.cursor.execute(sql, (title, text))
            # æäº¤äº‹åŠ¡
            self.db.commit()
        except Exception as e:
            # å¤„ç†æ•°æ®åº“å‡ºé”™çš„æƒ…å†µ
            print("æ•°æ®åº“å‡ºé”™ï¼š" + str(e))
            # å›æ»šäº‹åŠ¡
            self.db.rollback()
        return item

    def close_spider(self, spider):
        # åœ¨çˆ¬è™«å…³é—­çš„æ—¶å€™ä»…æ‰§è¡Œä¸€æ¬¡
        print("çˆ¬è™«ç»“æŸäº†")
        self.cursor.close()
        self.db.close()
å¤åˆ¶<br><br><img alt="image-20230920180314611" src="http://typora-yxh.oss-cn-chengdu.aliyuncs.com/img/image-20230920180314611.png" referrerpolicy="no-referrer"><br><img alt="image-20230920180339626" src="http://typora-yxh.oss-cn-chengdu.aliyuncs.com/img/image-20230920180339626.png" referrerpolicy="no-referrer"><br><br>
sql è¯­å¥è¦æ­£ç¡® å°¤å…¶æ˜¯å¯¹æ·»åŠ å†…å®¹çš„æ—¶å€™
<br><br><br>ç”¨ä¸Šé¢çš„æ–°å‘åœ°çš„æ¡ˆä¾‹è¿›è¡Œä¿®æ”¹<br>Pythonfrom pymongo import MongoClient

class XingfadiPipeline:
    def open_spider(self, spider):
        print("çˆ¬è™«å¼€å§‹äº†")
        # è¿æ¥æ•°æ®åº“
        self.con = MongoClient(host='127.0.0.1', port=27017)
        # åˆ›å»ºåº“
        self.db = self.con['spider']
        # åˆ›å»ºé›†åˆ
        self.myset = self.db['xfd']


    def process_item(self, item, spider):
        # æŠŠitemè½¬æ¢æˆå­—å…¸
        result = self.myset.insert_one(dict(item))
        print(result.inserted_id)
        return item

    def close_spider(self, spider):
        print("çˆ¬è™«ç»“æŸäº†")
        self.con.close()
å¤åˆ¶<br><img alt="image-20230920182823849" src="http://typora-yxh.oss-cn-chengdu.aliyuncs.com/img/image-20230920182823849.png" referrerpolicy="no-referrer"><br>å¯¹äºMongoDBæ¥è¯´ æ— éœ€æå‰è¿›è¡Œå¯¹æ•°æ®åº“çš„åˆ›å»º <br>ä½†æœ‰å¿…è¦è¿›è¡Œä¸€æ¬¡æµ‹è¯•è¿æ¥<br>Pythonfrom pymongo import MongoClient

# è¿æ¥æ•°æ®åº“
client = MongoClient(host='127.0.0.1', port=27017)

# æµ‹è¯•è¿æ¥
try:
    client.admin.command('ping')
    print("æˆåŠŸè¿æ¥åˆ°MongoDBï¼")
except Exception as e:
    print("è¿æ¥å¤±è´¥:", e)

# å…³é—­è¿æ¥
client.close()
å¤åˆ¶<br><br>å¯¹äºpycharmæ¥è¯´ åˆ·æ–°çœ‹ä¸€ä¸‹æˆ–è€…æ‰“å¼€å‹¾é€‰é€‰æ‹©æ•°æ®åº“<br><img alt="image-20230920183025807" src="http://typora-yxh.oss-cn-chengdu.aliyuncs.com/img/image-20230920183025807.png" referrerpolicy="no-referrer"><br><br><br>PythonITEM_PIPELINES = {
    "desk.pipelines.DeskPipeline": 300,
    "desk.pipelines.ImgPipeline": 400, # å›¾ç‰‡ä¸‹è½½
}

IMAGES_STORE = "./img" # å›¾ç‰‡å­˜å‚¨è·¯å¾„
å¤åˆ¶<br>
1.è¦æ‰“å¼€å¯¹åº”çš„ä¸‹è½½å›¾ç‰‡çš„ç®¡é“
2.è¦è®¾ç½®ä¸€ä¸ªä¸‹è½½å›¾ç‰‡çš„å­˜å‚¨åœ°å€
<br><br>Pythonimport scrapy
from urllib.parse import urljoin


class ImgSpider(scrapy.Spider):
    name = 'img'
    # allowed_domains = ['desk.zol.com.cn/dongman']
    start_urls = ['http://desk.zol.com.cn/dongman/']

    def parse(self, resp, **kwargs):
        # å…ˆæŠ“å–åˆ°æ¯ä¸ªå›¾ç‰‡è¯¦æƒ…çš„url
        url_list = resp.xpath('//ul[@class="pic-list2  clearfix"]/li/a/@href').extract()
        # è·å–åˆ°urlåˆ—è¡¨å è¿›è¡Œå¾ªç¯è¿›è¡Œæ¯ä¸€ä¸ªurlè¯¦æƒ…é¡µçš„è¯·æ±‚
        for url in url_list:
            # å› ä¸ºæŠ“å–åˆ°çš„urlå¹¶ä¸å®Œæ•´ï¼Œéœ€è¦è¿›è¡Œæ‰‹åŠ¨æ‹¼æ¥
            # urljoin('https://desk.zol.com.cn/dongman/', '/bizhi/8301_103027_2.html')
            url = urljoin('https://desk.zol.com.cn/dongman/', url)
            # æ‹¼å‡‘å®Œå‘ç°å½“å‰urlä¸­æœ‰ä¸‹è½½exeçš„urlï¼Œå°†å…¶å»é™¤
            if url.find('exe') != -1:
                continue
            yield scrapy.Request(url, callback=self.parse_detail)

    # å¯¹è¯¦æƒ…é¡µè¿›è¡Œè§£æ
    def parse_detail(self, resp):
        # è·å–å½“å‰è¯¦æƒ…é¡µä¸­æœ€å¤§å°ºå¯¸å›¾ç‰‡çš„url
        max_img_url = resp.xpath('//dd[@id="tagfbl"]/a/@href').extract()
        # åˆ¤æ–­å½“å‰æœ€å¤§å›¾ç‰‡çš„urlåœ°å€ï¼Œä¸ºå€’æ•°ç¬¬äºŒä¸ªï¼Œå¦‚æœå½“å‰å›¾ç‰‡åˆ—è¡¨urlé•¿åº¦å°äº2 åˆ™å½“å‰è¯æ˜ä¸æ˜¯å›¾ç‰‡çš„url
        if len(max_img_url) &gt; 2:
            max_img_url = urljoin('https://desk.zol.com.cn/', max_img_url[0])
            # å¯¹urlé¡µé¢è¿›è¡Œè¯·æ±‚ è·å–æœ€ç»ˆå¤§å›¾çš„é¡µé¢
            yield scrapy.Request(max_img_url, callback=self.parse_img_detail)

    def parse_img_detail(self, resp):
        # è§£æå‡ºå¤§å›¾çš„url
        img_src = resp.xpath("//img[1]/@src").extract_first()
        return {'img_src': img_src}
å¤åˆ¶<br>img_srcæ˜¯å›ºå®šçš„åç§° æˆ–è€…å¯ä»¥è‡ªå®šä¹‰ä¿®æ”¹ ï¼Œè¦pipelines.pyå’Œimg.py ä¼ é€’çš„å‚æ•°è¦ä¸€ä¸€å¯¹åº”<br><br>Pythonfrom itemadapter import ItemAdapter
from scrapy.pipelines.images import ImagesPipeline
import scrapy

class DeskPipeline:
    def process_item(self, item, spider):
        return item
class Imgspipline(ImagesPipeline):
    # 1. å‘é€è¯·æ±‚(ä¸‹è½½å›¾ç‰‡, æ–‡ä»¶, è§†é¢‘,xxx)
    def get_media_requests(self, item, info):
      	# è·å–åˆ°å›¾ç‰‡çš„url
        url = item['img_src']
        # è¿›è¡Œè¯·æ±‚
        yield scrapy.Request(url=url, meta={"url": url})  # ç›´æ¥è¿”å›ä¸€ä¸ªè¯·æ±‚å¯¹è±¡å³å¯

    # 2. å›¾ç‰‡å­˜å‚¨è·¯å¾„
    def file_path(self, request, response=None, info=None, *, item=None):
        # å½“å‰è·å–è¯·æ±‚çš„urlçš„æ–¹å¼æœ‰2ç§
        # è·å–åˆ°å½“å‰çš„url ç”¨äºå¤„ç†ä¸‹è½½å›¾ç‰‡çš„åç§°
        file_name = item['img_src'].split("/")[-1]  # ç”¨itemæ‹¿åˆ°url
        # file_name = request.meta['url'].split("/")[-1]  # ç”¨metaä¼ å‚è·å–
        return file_name

    # 3. å¯èƒ½éœ€è¦å¯¹itemè¿›è¡Œæ›´æ–°
    def item_completed(self, results, item, info):
        # print('results', results)
        for r in results:
            # è·å–æ¯ä¸ªå›¾ç‰‡çš„è·¯å¾„
            print(r[1]['path'])
        return item  # ä¸€å®šè¦return item æŠŠæ•°æ®ä¼ é€’ç»™ä¸‹ä¸€ä¸ªç®¡é“
å¤åˆ¶<br><br>Pythonimport scrapy
from urllib.parse import urljoin


class ImgSpider(scrapy.Spider):
    name = 'img'
    # allowed_domains = ['desk.zol.com.cn/dongman']
    start_urls = ['http://desk.zol.com.cn/dongman/']

    def parse(self, resp, **kwargs):
        # å…ˆæŠ“å–åˆ°æ¯ä¸ªå›¾ç‰‡è¯¦æƒ…çš„url
        url_list = resp.xpath('//ul[@class="pic-list2  clearfix"]/li/a/@href').extract()
        # è·å–åˆ°urlåˆ—è¡¨å è¿›è¡Œå¾ªç¯è¿›è¡Œæ¯ä¸€ä¸ªurlè¯¦æƒ…é¡µçš„è¯·æ±‚
        for url in url_list:
            # å› ä¸ºæŠ“å–åˆ°çš„urlå¹¶ä¸å®Œæ•´ï¼Œéœ€è¦è¿›è¡Œæ‰‹åŠ¨æ‹¼æ¥
            # urljoin('https://desk.zol.com.cn/dongman/', '/bizhi/8301_103027_2.html')
            url = urljoin('https://desk.zol.com.cn/dongman/', url)
            # æ‹¼å‡‘å®Œå‘ç°å½“å‰urlä¸­æœ‰ä¸‹è½½exeçš„urlï¼Œå°†å…¶å»é™¤
            if url.find('exe') != -1:
                continue
            yield scrapy.Request(url, callback=self.parse_detail)

    # å¯¹è¯¦æƒ…é¡µè¿›è¡Œè§£æ
    def parse_detail(self, resp):
        # è·å–å½“å‰è¯¦æƒ…é¡µä¸­æœ€å¤§å°ºå¯¸å›¾ç‰‡çš„url
        max_img_url = resp.xpath('//dd[@id="tagfbl"]/a/@href').extract()
        # åˆ¤æ–­å½“å‰æœ€å¤§å›¾ç‰‡çš„urlåœ°å€ï¼Œä¸ºå€’æ•°ç¬¬äºŒä¸ªï¼Œå¦‚æœå½“å‰å›¾ç‰‡åˆ—è¡¨urlé•¿åº¦å°äº2 åˆ™å½“å‰è¯æ˜ä¸æ˜¯å›¾ç‰‡çš„url
        if len(max_img_url) &gt; 2:
            max_img_url = urljoin('https://desk.zol.com.cn/', max_img_url[0])
            # å¯¹urlé¡µé¢è¿›è¡Œè¯·æ±‚ è·å–æœ€ç»ˆå¤§å›¾çš„é¡µé¢
            yield scrapy.Request(max_img_url, callback=self.parse_img_detail)

    def parse_img_detail(self, resp):
        # è§£æå‡ºå¤§å›¾çš„url
        img_src = resp.xpath("//img[1]/@src").extract_first()
        return {'img_src': img_src}
å¤åˆ¶<br><br>
1.å¯¹åº”æœ€åçš„ä¼ å‚ä¸€ç‚¹è¦å¯¹åº”å¥½ç›¸å¯¹çš„å…ƒç´ 
2.è®°å¾—è¦è®¾ç½®å¥½å­˜å‚¨å›¾ç‰‡çš„è·¯å¾„ä»¥åŠæ‰“å¼€å¯¹åº”çš„ç®¡é“
3.æŠ¥é”™å¤šé—®Gå“¥
<br><br><br><br>
<br>ç›´æ¥æºå¸¦cookiesè¯·æ±‚é¡µé¢
<br>æ‰¾urlåœ°å€ï¼Œå‘é€postè¯·æ±‚å­˜å‚¨cookie
<br><br>
<br>æ‰¾åˆ°å¯¹åº”çš„inputæ ‡ç­¾ï¼Œè¾“å…¥æ–‡æœ¬ç‚¹å‡»ç™»é™†
<br><br>
<br>ç›´æ¥æºå¸¦cookies
<br>æ‰¾urlåœ°å€ï¼Œå‘é€postè¯·æ±‚å­˜å‚¨cookie
<br>æ‰¾åˆ°å¯¹åº”çš„formè¡¨å•ï¼Œè‡ªåŠ¨è§£æinputæ ‡ç­¾ï¼Œè‡ªåŠ¨è§£æpostè¯·æ±‚çš„urlåœ°å€ï¼Œè‡ªåŠ¨å¸¦ä¸Šæ•°æ®ï¼Œè‡ªåŠ¨å‘é€è¯·æ±‚
<br><br>17kå°è¯´ç½‘<br>https://user.17k.com/
å¤åˆ¶<br><br>
<br>cookieè¿‡æœŸæ—¶é—´å¾ˆé•¿ï¼Œå¸¸è§äºä¸€äº›ä¸è§„èŒƒçš„ç½‘ç«™
<br>èƒ½åœ¨cookieè¿‡æœŸä¹‹å‰æŠŠæœæœ‰çš„æ•°æ®æ‹¿åˆ°
<br>é…åˆå…¶ä»–ç¨‹åºä½¿ç”¨ï¼Œæ¯”å¦‚å…¶ä½¿ç”¨seleniumæŠŠç™»é™†ä¹‹åçš„cookieè·å–åˆ°ä¿å­˜åˆ°æœ¬åœ°ï¼Œscrapyå‘é€è¯·æ±‚ä¹‹å‰å…ˆè¯»å–æœ¬åœ°cookie
<br><br>settings.py<br>PythonDEFAULT_REQUEST_HEADERS = {
  'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
  'Accept-Language': 'en',
  'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36',
  'Cookie': 'ASP.NET_SessionId=n4lwamv5eohaqcorfi3dvzcv; xiaohua_visitfunny=103174; xiaohua_web_userid=120326; xiaohua_web_userkey=r2sYazfFMt/rxUn8LJDmUYetwR2qsFCHIaNt7+Zpsscpp1p6zicW4w=='
}
å¤åˆ¶<br>æ³¨æ„ï¼šéœ€è¦æ‰“å¼€COOKIES_ENABLEDï¼Œå¦åˆ™ä¸Šé¢è®¾å®šçš„cookieå°†ä¸èµ·ä½œç”¨<br>Python# Disable cookies (enabled by default)
COOKIES_ENABLED = False
å¤åˆ¶<br>xiaoshuo.py<br>Pythonimport scrapy


class DengluSpider(scrapy.Spider):
    name = 'denglu'
    allowed_domains = ['17k.com']
    start_urls = ['https://user.17k.com/ck/user/mine/readList?page=1&amp;appKey=2406394919']

    def parse(self, res):
        print(res.text)
å¤åˆ¶<br>å±€é™æ€§ï¼š<br>å½“å‰è®¾å®šæ–¹å¼è™½ç„¶å¯ä»¥å®ç°æºå¸¦cookieä¿æŒç™»å½•ï¼Œä½†æ˜¯æ— æ³•è·å–åˆ°æ–°cookieï¼Œä¹Ÿå°±æ˜¯å½“å‰cookieä¸€ç›´æ˜¯å›ºå®šçš„<br>å¦‚æœcookieæ˜¯ç»å¸¸æ€§å˜åŒ–ï¼Œé‚£ä¹ˆå½“å‰ä¸é€‚ç”¨<br><br>scrapyä¸­start_urlæ˜¯é€šè¿‡start_requestsæ¥è¿›è¡Œå¤„ç†çš„ï¼Œå…¶å®ç°ä»£ç å¦‚ä¸‹<br>Pythondef start_requests(self):
    cls = self.__class__
    if method_is_overridden(cls, Spider, 'make_requests_from_url'):
        warnings.warn(
            "Spider.make_requests_from_url method is deprecated; it "
            "won't be called in future Scrapy releases. Please "
            "override Spider.start_requests method instead (see %s.%s)." % (
                cls.__module__, cls.__name__
            ),
        )
        for url in self.start_urls:
            yield self.make_requests_from_url(url)
    else:
        for url in self.start_urls:
            yield Request(url, dont_filter=True)
å¤åˆ¶<br>æ‰€ä»¥å¯¹åº”çš„ï¼Œå¦‚æœstart_urlåœ°å€ä¸­çš„urlæ˜¯éœ€è¦ç™»å½•åæ‰èƒ½è®¿é—®çš„urlåœ°å€ï¼Œåˆ™éœ€è¦é‡å†™start_requestæ–¹æ³•å¹¶åœ¨å…¶ä¸­æ‰‹åŠ¨æ·»åŠ ä¸Šcookie<br>settings.py<br>Pythonimport scrapy


class DengluSpider(scrapy.Spider):
    name = 'denglu'
    # allowed_domains = ['https://user.17k.com/ck/user/mine/readList?page=1']
    start_urls = ['https://user.17k.com/ck/user/mine/readList?page=1&amp;appKey=2406394919']

    def start_requests(self):
        cookies = 'GUID=796e4a09-ba11-4ecb-9cf6-aad19169267d; Hm_lvt_9793f42b498361373512340937deb2a0=1660545196; c_channel=0; c_csc=web; accessToken=avatarUrl%3Dhttps%253A%252F%252Fcdn.static.17k.com%252Fuser%252Favatar%252F18%252F98%252F90%252F96139098.jpg-88x88%253Fv%253D1650527904000%26id%3D96139098%26nickname%3D%25E4%25B9%25A6%25E5%258F%258BqYx51ZhI1%26e%3D1677033668%26s%3D8e116a403df502ab; sensorsdata2015jssdkcross=%7B%22distinct_id%22%3A%2296139098%22%2C%22%24device_id%22%3A%22181d13acb2c3bd-011f19b55b75a8-1c525635-1296000-181d13acb2d5fb%22%2C%22props%22%3A%7B%22%24latest_traffic_source_type%22%3A%22%E7%9B%B4%E6%8E%A5%E6%B5%81%E9%87%8F%22%2C%22%24latest_referrer%22%3A%22%22%2C%22%24latest_referrer_host%22%3A%22%22%2C%22%24latest_search_keyword%22%3A%22%E6%9C%AA%E5%8F%96%E5%88%B0%E5%80%BC_%E7%9B%B4%E6%8E%A5%E6%89%93%E5%BC%80%22%7D%2C%22first_id%22%3A%22796e4a09-ba11-4ecb-9cf6-aad19169267d%22%7D; Hm_lpvt_9793f42b498361373512340937deb2a0=1661483362'
        cookie_dic = {}
        for i in cookies.split(';'):
            v = i.split('=')
            cookie_dic[v[0]] = v[1]
        # {i.split('=')[0]:i.split('=')[1] for i in cookies_str.split('; ')}   # ç®€å†™
        for url in self.start_urls:
            yield scrapy.Request(url, cookies=cookie_dic)


    def parse(self, response):
        print(response.text)
å¤åˆ¶<br><br>
<br>scrapyä¸­cookieä¸èƒ½å¤Ÿæ”¾åœ¨headersä¸­ï¼Œåœ¨æ„é€ è¯·æ±‚çš„æ—¶å€™æœ‰ä¸“é—¨çš„cookieså‚æ•°ï¼Œèƒ½å¤Ÿæ¥å—å­—å…¸å½¢å¼çš„coookie
<br>åœ¨settingä¸­è®¾ç½®ROBOTSåè®®ã€USER_AGENT
<br><br>
æˆ‘ä»¬çŸ¥é“å¯ä»¥é€šè¿‡scrapy.Request()æŒ‡å®šmethodã€bodyå‚æ•°æ¥å‘é€postè¯·æ±‚ï¼›é‚£ä¹ˆä¹Ÿå¯ä»¥ä½¿ç”¨scrapy.FormRequest()æ¥å‘é€postè¯·æ±‚
<br><br>é€šè¿‡scrapy.FormRequestèƒ½å¤Ÿå‘é€postè¯·æ±‚ï¼ŒåŒæ—¶éœ€è¦æ·»åŠ fromdataå‚æ•°ä½œä¸ºè¯·æ±‚ä½“ï¼Œä»¥åŠcallback<br>Pythonlogin_url = 'https://passport.17k.com/ck/user/login'      
yield scrapy.FormRequest(
            url=login_url, 
            formdata={'loginName': '17346570232', 'password': 'xlg17346570232'}, 
            callback=self.do_login
)
å¤åˆ¶<br><br><br>
<br>æ‰¾åˆ°postçš„urlåœ°å€ï¼šç‚¹å‡»ç™»å½•æŒ‰é’®è¿›è¡ŒæŠ“åŒ…ï¼Œç„¶åå®šä½urlåœ°å€ä¸º<a rel="noopener" class="external-link" href="https://www.xiaohua.com/Handler/Login.ashx" target="_blank">https://www.xiaohua.com/Handler/Login.ashx</a>
<br>æ‰¾åˆ°è¯·æ±‚ä½“çš„è§„å¾‹ï¼šåˆ†æpostè¯·æ±‚çš„è¯·æ±‚ä½“ï¼Œå…¶ä¸­åŒ…å«çš„å‚æ•°å‡åœ¨å‰ä¸€æ¬¡çš„å“åº”ä¸­
<br>å¦ç™»å½•æˆåŠŸï¼šé€šè¿‡è¯·æ±‚ä¸ªäººä¸»é¡µï¼Œè§‚å¯Ÿæ˜¯å¦åŒ…å«ç”¨æˆ·å
<br><br>Pythonimport scrapy


class DlSpider(scrapy.Spider):
    name = "dl"
    allowed_domains = ["17k.com"]
    start_urls = ["https://user.17k.com/ck/user/myInfo/96139098?appKey=2406394919"]

    # åœ¨è¯·æ±‚start_urLsä¹‹å‰å…ˆç™»é™†ç™»é™†ä»¥åå°±æœ‰äº†ç™»å½•åçš„cookieæ­¤åˆ»cookieæ˜¯è‡ªåŠ¨æŠ“å–çš„
    def start_requests(self):
        # å…ˆåœ¨è¦åœ¨è¿™é‡Œå¤„ç†ç™»é™†çš„åŠŸèƒ½å› ä¸ºscrapyä¸€æ‰§è¡Œè‡ªåŠ¨è°ƒç”¨å½“å‰æ–¹æ³•
        # for url in self.start_urls:
        #     yield scrapy.Request(url=url)
        login_url = 'https://passport.17k.com/ck/user/login'
        # yield scrapy.Request(login_url, method='POST',
        #                      body='loginName=17346570232&amp;password=xlg17346570232',
        #                      callback=self.do_start_requests)

        # FormRequest æ˜¯Scrapyå‘é€POSTè¯·æ±‚çš„æ–¹æ³•
        yield scrapy.FormRequest(login_url,
                                 formdata={
                                     'loginName': '17346570232',
                                     'password': 'xlg17346570232'
                                 },
                                 callback=self.do_start_requests)

    # ç™»å½•æˆåŠŸåå†å»è¯·æ±‚start_urls
    def do_start_requests(self, response, **kwargs):
        for url in self.start_urls:
            yield scrapy.Request(url=url)

    def parse(self, response, **kwargs):
        print(response.text)
å¤åˆ¶<br><br><br>
é€šè¿‡çˆ¬å–æ®µå­é¡µé¢çš„ä¿¡æ¯,å­¦ä¹ å¦‚ä½•å®ç°ç¿»é¡µè¯·æ±‚
åœ°å€ï¼š<a rel="noopener" class="external-link" href="https://duanzixing.com/" target="_blank">https://duanzixing.com/</a>
<br><br>
<br>è·å–é¦–é¡µçš„æ•°æ®
<br>å¯»æ‰¾ä¸‹ä¸€é¡µçš„åœ°å€ï¼Œè¿›è¡Œç¿»é¡µï¼Œè·å–æ•°æ®
<br><br>
<br>
å¯ä»¥åœ¨settingsä¸­è®¾ç½®ROBOTSåè®®
Python# Falseè¡¨ç¤ºå¿½ç•¥ç½‘ç«™çš„robots.txtåè®®ï¼Œé»˜è®¤ä¸ºTrue
ROBOTSTXT_OBEY = False
å¤åˆ¶

<br>
å¯ä»¥åœ¨settingsä¸­è®¾ç½®User-Agentï¼š
Python# scrapyå‘é€çš„æ¯ä¸€ä¸ªè¯·æ±‚çš„é»˜è®¤UAéƒ½æ˜¯è®¾ç½®çš„è¿™ä¸ªUser-Agent
USER_AGENT = 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.115 Safari/537.36'
å¤åˆ¶

<br><br>Pythonimport scrapy


class DzSpider(scrapy.Spider):
    name = "dz"
    allowed_domains = ["duanzixing.com"]
    start_urls = ["https://duanzixing.com/"]

    def parse(self, response, **kwargs):
        url = 'https://duanzixing.com/page/%d/'
        for i in range(1, 11):
            new_url = url % i
            # print(new_url)
            yield scrapy.Request(new_url, callback=self.parse_page, meta={
                'url': new_url})

    def parse_page(self, response, **kwargs):
        url = response.meta['url']
        article_list = response.xpath('//article[@class="excerpt"]')
        for article in article_list:
            data = {}
            title = article.xpath('./header/h2/a/text()').extract_first()
            con = article.xpath('./p[@class="note"]/text()').extract_first()
            data['title'] = title
            data['con'] = con
            print(data, url)
            yield data
å¤åˆ¶<br><br><br>
<br>ä¸­æ‹¬å·ä¸­çš„å‚æ•°ä¸ºå¯é€‰å‚æ•°
<br>callbackï¼šè¡¨ç¤ºå½“å‰çš„urlçš„å“åº”äº¤ç»™å“ªä¸ªå‡½æ•°å»å¤„ç†
<br>metaï¼šå®ç°æ•°æ®åœ¨ä¸åŒçš„è§£æå‡½æ•°ä¸­ä¼ é€’ï¼Œmetaé»˜è®¤å¸¦æœ‰éƒ¨åˆ†æ•°æ®ï¼Œæ¯”å¦‚ä¸‹è½½å»¶è¿Ÿï¼Œè¯·æ±‚æ·±åº¦ç­‰
<br>dont_filter:é»˜è®¤ä¸ºFalseï¼Œä¼šè¿‡æ»¤è¯·æ±‚çš„urlåœ°å€ï¼Œå³è¯·æ±‚è¿‡çš„urlåœ°å€ä¸ä¼šç»§ç»­è¢«è¯·æ±‚ï¼Œå¯¹éœ€è¦é‡å¤è¯·æ±‚çš„urlåœ°å€å¯ä»¥æŠŠå®ƒè®¾ç½®ä¸ºTureï¼Œæ¯”å¦‚è´´å§çš„ç¿»é¡µè¯·æ±‚ï¼Œé¡µé¢çš„æ•°æ®æ€»æ˜¯åœ¨å˜åŒ–;start_urlsä¸­çš„åœ°å€ä¼šè¢«åå¤è¯·æ±‚ï¼Œå¦åˆ™ç¨‹åºä¸ä¼šå¯åŠ¨
<br>methodï¼šæŒ‡å®šPOSTæˆ–GETè¯·æ±‚
<br>headersï¼šæ¥æ”¶ä¸€ä¸ªå­—å…¸ï¼Œå…¶ä¸­ä¸åŒ…æ‹¬cookies
<br>cookiesï¼šæ¥æ”¶ä¸€ä¸ªå­—å…¸ï¼Œä¸“é—¨æ”¾ç½®cookies
<br>bodyï¼šæ¥æ”¶ä¸€ä¸ªå­—å…¸ï¼Œä¸ºPOSTçš„æ•°æ®
<br><br><br><br>åœ¨çˆ¬è™«æ–‡ä»¶çš„parseæ–¹æ³•ä¸­ï¼Œæå–è¯¦æƒ…é¡µå¢åŠ ä¹‹å‰callbackæŒ‡å®šçš„parse_detailå‡½æ•°ï¼š<br>Pythondef parse(self,response):
    ...
    yield scrapy.Request(detail_url, callback=self.parse_detail,meta={"item":item})
...

def parse_detail(self,response):
    #è·å–ä¹‹å‰ä¼ å…¥çš„item
    item = resposne.meta["item"]
å¤åˆ¶<br><br>
<br>metaå‚æ•°æ˜¯ä¸€ä¸ªå­—å…¸
<br>metaå­—å…¸ä¸­æœ‰ä¸€ä¸ªå›ºå®šçš„é”®proxy
]]></description><link>çˆ¬è™«\Scrapy.html</link><guid isPermaLink="false">çˆ¬è™«/Scrapy.md</guid><pubDate>Mon, 16 Oct 2023 15:12:48 GMT</pubDate><enclosure url="http://typora-yxh.oss-cn-chengdu.aliyuncs.com/img/image-20230919204633965.png" length="0" type="image/png"/><content:encoded>&lt;figure&gt;&lt;img src=&quot;http://typora-yxh.oss-cn-chengdu.aliyuncs.com/img/image-20230919204633965.png&quot;&gt;&lt;/figure&gt;</content:encoded></item><item><title><![CDATA[Mysql]]></title><description><![CDATA[<a class="tag" href="?query=tag:scrapy" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#scrapy</a> 
 <br><br><a href=".?query=tag:scrapy" class="tag" target="_blank" rel="noopener">#scrapy</a>
pythonè¿æ¥mysqlå¯ä»¥ç”¨pymysqlæ¨¡å—<br>Pythonpip install pymysql
å¤åˆ¶<br><br>Pythonimport pymysql

# é“¾æ¥æ•°æ®åº“
conn = pymysql.connect(
    host='localhost',
    port=3306,
    user='root',
    password='test123456',
    database='spider_back'
)
# åˆ›å»ºæ¸¸æ ‡
cursor = conn.cursor()
# æ¥ä¸‹æ¥å°±å¯ä»¥ç”¨æ¸¸æ ‡å»æ‰§è¡Œå„ç§æ“ä½œäº†
å¤åˆ¶<br><br><br>Pythontry:
    cursor = conn.cursor()
    result = cursor.execute("insert into stu(sname, address, gender) values ('æå˜‰è¯š', 'å…«å®å±±', 1)")
    print(cursor.lastrowid)  # è·å–è‡ªå¢çš„IDå€¼
    print(result)  # resultæ˜¯è¯¥sqlä¼šå½±å“å¤šå°‘æ¡æ•°æ®
    conn.commit()  # æäº¤
except:
    conn.rollback()  # å›æ»š
å¤åˆ¶<br><br>Pythontry:
    cursor = conn.cursor()
    result = cursor.execute("update stu set gender = 2 where sid = 12")
    print(result)  # resultæ˜¯è¯¥sqlä¼šå½±å“å¤šå°‘æ¡æ•°æ®
    conn.commit()  # æäº¤
except:
    conn.rollback()  # å›æ»š
å¤åˆ¶<br><br>Pythontry:
    cursor = conn.cursor()
    result = cursor.execute("delete from stu where sid = 12")
    print(result)  # resultæ˜¯è¯¥sqlä¼šå½±å“å¤šå°‘æ¡æ•°æ®
    conn.commit()  # æäº¤
except:
    conn.rollback()  # å›æ»š
å¤åˆ¶<br><br>Python# æŸ¥è¯¢
from pymysql.cursors import DictCursor
# cursor = conn.cursor(DictCursor)  # ä½¿ç”¨å­—å…¸æ¸¸æ ‡. æŸ¥è¯¢å‡ºçš„ç»“æœè‡ªåŠ¨ä¿å­˜åœ¨å­—å…¸ä¸­
cursor = conn.cursor()  # é»˜è®¤æ¸¸æ ‡. æŸ¥è¯¢å‡ºçš„ç»“æœè‡ªåŠ¨ä¿å­˜åœ¨å…ƒç»„ä¸­

sql = """
    select * from stu
"""
ret_num = cursor.execute(sql)
# result = cursor.fetchall()  # è·å–å…¨éƒ¨ç»“æœ
# result = cursor.fetchmany(5)  # è·å–éƒ¨åˆ†ç»“æœ
result = cursor.fetchone()  # è·å–å•ä¸ªç»“æœ
print(result)
result = cursor.fetchone()  # è·å–å•ä¸ªç»“æœ, å¯ä»¥è¿ç»­è·å–
print(result)
å¤åˆ¶<br>æ³¨æ„, ä¸€ä¸ªæ¸¸æ ‡å¦‚æœè¢«æ‹¿ç©ºäº†. åˆ™ä¸èƒ½å†æ¬¡è·å–å†…å®¹. ]]></description><link>çˆ¬è™«\spider-mysql.html</link><guid isPermaLink="false">çˆ¬è™«/spider-mysql.md</guid><pubDate>Mon, 16 Oct 2023 14:19:44 GMT</pubDate></item><item><title><![CDATA[2023-10-14]]></title><description><![CDATA[ 
 <br><br>
<br>ğŸ˜† 
<br>ğŸ˜­
<br>ğŸ¥°
<br>å½“å‰æ¸©åº¦ï¼š18â„ƒ  å¤©æ°”ï¼šé˜´ æ¸©åº¦èŒƒå›´ï¼š14 ~ 18â„ƒ
æ¹¿åº¦ï¼š65% é£å‘ï¼šä¸œåŒ—é£ 1çº§ ç´«å¤–çº¿ï¼šæ— 
ç©ºæ°”è´¨é‡ï¼šä¼˜ PM: 12 æ—¥å‡º: 06:51 æ—¥è½: 18:27<br>ä¸€è¨€
 è¿™ä¸ªä¸–ç•Œå¾ˆå¤§ï¼Œå‘Šåˆ«çš„æ–¹å¼æœ‰å¤šå°‘ç§ï¼Œäººç”Ÿçš„æ­£ç¡®ç­”æ¡ˆå°±æœ‰å¤šå°‘ä¸ªã€‚  â€”â€” ã€Šå—å”é—²äººã€‹ Â· ä½šå
<br><br><br><br><br>&lt;&lt; <a data-href="2023-10-13" href="\2023-10-13" class="internal-link" target="_self" rel="noopener">2023-10-13</a> | <a data-href="2023-10-15" href="\æ—¥è®°\2023-10-15.html" class="internal-link" target="_self" rel="noopener">2023-10-15</a> &gt;&gt;]]></description><link>æ—¥è®°\2023-10-14.html</link><guid isPermaLink="false">æ—¥è®°/2023-10-14.md</guid><pubDate>Sat, 14 Oct 2023 12:18:40 GMT</pubDate></item><item><title><![CDATA[2023-10-15]]></title><description><![CDATA[<a class="tag" href="?query=tag:scala" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#scala</a> <a class="tag" href="?query=tag:hive" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#hive</a> <a class="tag" href="?query=tag:æ•°æ®åº“" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#æ•°æ®åº“</a> 
 <br><br>
<br>ğŸ˜† 
<br>ğŸ˜­
<br>ğŸ¥°
<br>å½“å‰æ¸©åº¦ï¼š21â„ƒ  å¤©æ°”ï¼šæ™´ æ¸©åº¦èŒƒå›´ï¼š13 ~ 21â„ƒ
æ¹¿åº¦ï¼š49% é£å‘ï¼šè¥¿å—é£ 1çº§ ç´«å¤–çº¿ï¼šå¼º
ç©ºæ°”è´¨é‡ï¼šè‰¯ PM: 14 æ—¥å‡º: 06:52 æ—¥è½: 18:26<br>ä¸€è¨€
 è¢«é…’è«æƒŠæ˜¥ç¡é‡ï¼ŒèµŒä¹¦æ¶ˆå¾—æ³¼èŒ¶é¦™ï¼Œå½“æ—¶åªé“æ˜¯å¯»å¸¸ã€‚  â€”â€” ã€Šæµ£æºªæ²™Â·è°å¿µè¥¿é£ç‹¬è‡ªå‡‰ã€‹ Â· çº³å…°æ€§å¾·
<br><br><br>æ—©ä¸Šï¼š ç»ƒè½¦è½¦
ä¸‹åˆï¼š
å­¦ä¹  scala    {å…ˆå­¦äº†åŸºç¡€çš„è¯­æ³•09ï¼Œåé¢çš„æœ‰æ—¶é—´æ…¢æ…¢çœ‹}
å­¦ä¹ hive<br><br>è®°å½•æ—¶é—´: 2023/10/15/2:42 PM å½“å‰å¤©æ°”: æ™´ ğŸ”† â€¢ å½“å‰æ¸©åº¦: 25Â°C â€¢ ä½“æ„Ÿæ¸©åº¦: 24Â°C
å¤ªâ„¢æ— èŠäº†ï¼Œä¸€ç»ƒè½¦å°±â„¢å¤§å¤ªé˜³ï¼Œä¸å»å°±ä¸‹é›¨<br><a href=".?query=tag:scala" class="tag" target="_blank" rel="noopener">#scala</a>
è®°å½•æ—¶é—´: 2023/10/15/3:16 PM å½“å‰å¤©æ°”: æ™´ ğŸ”† â€¢ å½“å‰æ¸©åº¦: 25Â°C â€¢ ä½“æ„Ÿæ¸©åº¦: 24Â°C<br><br>é‡ç‚¹
å®šä¹‰çš„å˜é‡å¿…é¡»èµ‹å€¼
ä¾‹å¦‚ ï¼š val  name = "Scala"
åœ¨scalaä¸­æ‰€æœ‰çš„å±æ€§é»˜è®¤éƒ½æ˜¯ç§æœ‰çš„
privateä¸éœ€è¦è‡ªå·±å¡«å†™.å½“æˆ‘ä»¬æ‰‹åŠ¨å¡«å†™privateå,å­—æ®µå’Œget,setæ–¹æ³•éƒ½å˜æˆäº†ç§æœ‰çš„.
åœ¨scalaä¸­get,setæ–¹æ³•éƒ½æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„.
å¦‚æœé»˜è®¤å€¼æ˜¯null,å¿…é¡»æ˜¾ç¤ºçš„æŒ‡å®šç±»å‹
var name1:String = null
<br>Scalapackage scala03

//å•ä¾‹å¯¹è±¡/å®ä¾‹å¯¹è±¡/ä¼´ç”Ÿå¯¹è±¡
object Class05 extends App {
  val p = new Person()
  //ageæ˜¯å¸¸é‡
//  p.age = 10
  p.name = "chen"  //é»˜è®¤è°ƒç”¨çš„setæ–¹æ³•
  //heightå¯¹åº”çš„setæ–¹æ³•æ˜¯ç§æœ‰çš„,æ‰€ä»¥ä¸èƒ½ç›´æ¥è°ƒç”¨
  //p.height = 10
}

//ä¼´ç”Ÿç±»
class  Class05{

}

class Person{
  //
//  private String name;
  //åœ¨scalaä¸­æ‰€æœ‰çš„å±æ€§é»˜è®¤éƒ½æ˜¯ç§æœ‰çš„,privateä¸éœ€è¦è‡ªå·±å¡«å†™.å½“æˆ‘ä»¬æ‰‹åŠ¨å¡«å†™privateå,å­—æ®µå’Œget,setæ–¹æ³•éƒ½å˜æˆäº†ç§æœ‰çš„.
  //åœ¨scalaä¸­get,setæ–¹æ³•éƒ½æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„.
  //ç›´æ¥ç»™nameå±æ€§èµ‹å€¼bing,å¦‚æœä¸æŒ‡å®šç±»å‹,é»˜è®¤è¿›è¡Œç±»å‹æ¨æ–­
  var name = "bing"
  //å¦‚æœé»˜è®¤å€¼æ˜¯null,å¿…é¡»æ˜¾ç¤ºçš„æŒ‡å®šç±»å‹
  var name1:String = null
  //_è¡¨ç¤ºå ä½ç¬¦,ä»£è¡¨å¯¹åº”çš„å€¼,å¿…é¡»æ˜¾ç¤ºçš„æŒ‡å®šç±»å‹
  var name2:String = _
  /*
  åŒºåˆ«var/val
  1.varçš„å˜é‡ä¼šè‡ªåŠ¨ç”Ÿæˆgetter,setteræ–¹æ³•
  2.valçš„å˜é‡åªèƒ½ç”Ÿæˆgetter
  3.valç±»å‹çš„å­—æ®µä¸èƒ½ä½¿ç”¨å ä½ç¬¦_
   */
  val age = 10
  //val age1:Int = _
  //å½“æˆ‘ä»¬æ‰‹åŠ¨å¡«å†™privateå,å­—æ®µå’Œget,setæ–¹æ³•éƒ½å˜æˆäº†ç§æœ‰çš„.ä½†æ˜¯åœ¨åŠç”Ÿå¯¹è±¡ä¸­å¯ä»¥ä½¿ç”¨
  private var height = 10

  //å­—æ®µæ˜¯ç§æœ‰çš„,å¹¶ä¸”Personç±»çš„æ–¹æ³•åªèƒ½è®¿é—®å½“å‰å¯¹è±¡çš„å­—æ®µ
  private [this] var weight = 100

  def testPrivate(p:Person)={
    //p.weight = 10
    this.weight = 10
  }
}

object Person{
  val p1 = new Person
  p1.height = 10
}

å¤åˆ¶<br>Scalapackage scala03

import scala.beans.BeanProperty

/*
//é‡è¦æç¤ºï¼šè‡ªå·±æ‰‹åŠ¨åˆ›å»ºå˜é‡çš„getterå’Œsetteræ–¹æ³•éœ€è¦éµå¾ªä»¥ä¸‹åŸåˆ™ï¼š
//0) å°†æˆå‘˜å˜é‡å®šä¹‰ä¸ºç§æœ‰
//1) å­—æ®µå±æ€§åä»¥â€œ_â€ä½œä¸ºå‰ç¼€ï¼Œå¦‚å®šä¹‰ï¼š_x
//2) getteræ–¹æ³•å®šä¹‰ä¸ºï¼šdef x = _x
//3) setteræ–¹æ³•å®šä¹‰æ—¶ï¼Œæ–¹æ³•åä¸ºå±æ€§åå»æ‰å‰ç¼€ï¼Œå¹¶åŠ ä¸Šåç¼€ï¼Œåç¼€æ˜¯ï¼šâ€œx_=â€ï¼Œå¦‚ä¾‹å­æ‰€ç¤º
 */
class  Point{
  //éœ€è¦ä½¿ç”¨scalaè‡ªå¸¦çš„get,set
  private var _x = 0
  private var _y = 0
  //ç”±@BeanPropertyè‡ªåŠ¨ç”Ÿæˆäº†å››ä¸ªæ–¹æ³•ï¼šjavaçš„get,setå’Œscalaçš„get,set
  @BeanProperty var name = "bing"

  def x = _x
  def x_= (newValue:Int):Unit={ _x = newValue}
  def y = _y
  def y_= (newVale:Int)={_y = newVale}
}
object Class06 extends App {
//  val p = new Point
//  p.x = 10
//  println(p.x)
//  p.name = "chen"
//  println(p.getName)
}

object Point{
  def main(args: Array[String]): Unit = {
    val p = new Point
    p.x = 10
    println(p.x)
    p.name = "chen"
    println(p.getName)
  }
}

å¤åˆ¶<br>Scalapackage scala03

object Class07  {
  def main(args: Array[String]): Unit = {
    val d = new Dog("labuladuo",10)
    d.name = "bing"
    //ageè¢«privateä¿®é¥°,æ‰€ä»¥è®¿é—®æƒé™åªæœ‰å½“å‰çš„ç±»æˆ–è€…ä¼´ç”Ÿå¯¹è±¡
    //d.age = 10
    val d1 = new Dog1("é‡‘æ¯›",20)
    //å¦‚æœä¸»æ„é€ å™¨ä¸­çš„å±æ€§æ²¡æœ‰ä½¿ç”¨var,valä¿®é¥°,å°±ä¸ä¼šè‡ªåŠ¨ä¿å­˜æˆå­—æ®µ,å½“å¯¹è±¡åˆ›å»ºå®Œ,ç›´æ¥æ¶ˆå¤±.
    //å¦‚æœåœ¨ç±»ä¸­ä»»ä½•ä¸€ä¸ªæ–¹æ³•ä¸­è°ƒç”¨è¿‡ä¸€æ¬¡,è¿™ä¸ªå±æ€§ä¹Ÿä¼šè‡ªåŠ¨å˜æˆå­—æ®µ,ä¸è¿‡è¿™ä¸ªå­—æ®µæ˜¯ç§æœ‰çš„
    //ç›¸å½“äº private [this] var name
//    d1.name = "haha"
    d1.test(3)
   // d1 = "ha"

    //é€šè¿‡è¾…åŠ©æ„é€ å™¨åˆ›å»ºå¯¹è±¡
    val d2 = new Dog2("lala",20,20)
    println(d2.name)
    println(d2.age)
  }
}

//ä¸»æ„é€ å™¨  æ”¾åœ¨ç±»åçš„åé¢
/*
ç‰¹ç‚¹:
1.ä¼šæ‰§è¡Œç±»é‡Œé¢çš„æ‰€æœ‰è¯­å¥
2.å¦‚æœä¸»æ„é€ å™¨ä¸­çš„å±æ€§æ²¡æœ‰ä½¿ç”¨var,valä¿®é¥°,å°±ä¸ä¼šè‡ªåŠ¨ä¿å­˜æˆå­—æ®µ,å½“å¯¹è±¡åˆ›å»ºå®Œ,ç›´æ¥æ¶ˆå¤±.
   //å¦‚æœåœ¨ç±»ä¸­ä»»ä½•ä¸€ä¸ªæ–¹æ³•ä¸­è°ƒç”¨è¿‡ä¸€æ¬¡,è¿™ä¸ªå±æ€§ä¹Ÿä¼šè‡ªåŠ¨å˜æˆå­—æ®µ,ä¸è¿‡è¿™ä¸ªå­—æ®µæ˜¯ç§æœ‰çš„
    //ç›¸å½“äº private [this] var name
3.//private var name: String
//ç§æœ‰å­—æ®µï¼Œç§æœ‰çš„getterå’Œsetteræ–¹æ³•
//var name: String
//ç§æœ‰å­—æ®µï¼Œå…¬æœ‰çš„getterå’Œsetteræ–¹æ³•
//private val name: String
//ç§æœ‰å­—æ®µï¼Œç§æœ‰çš„getteræ–¹æ³•
//val name: String
//ç§æœ‰å­—æ®µï¼Œå…¬æœ‰çš„getteræ–¹æ³•

å½“æˆ‘ä»¬å°†ä¸»æ„é€ å™¨ç§æœ‰åŒ–å,ä¸èƒ½å†é€šè¿‡ä¸»æ„é€ å™¨åˆ›å»ºå¯¹è±¡,åªèƒ½å€ŸåŠ©äºè¾…åŠ©æ„é€ å™¨ç»§ç»­åˆ›å»ºå¯¹è±¡
//ç§æœ‰çš„ä¸»æ„é€ å™¨,ä¸èƒ½è¢«å¤–ç•Œç›´æ¥è°ƒç”¨.ç›¸å½“äºæ·»åŠ äº†å¯¹åº”çš„å±æ€§
 */
class Dog(var name:String,private var age:Int){
//  var name:String = _
  //  var age = 10

  println("haha")
}

class Dog1(name:String,age:Int){
  def test(a:Int)={
    val str = name
  }
}

//ç§æœ‰çš„ä¸»æ„é€ å™¨,ä¸èƒ½è¢«å¤–ç•Œç›´æ¥è°ƒç”¨.ç›¸å½“äºæ·»åŠ äº†ä¸¤ä¸ªå±æ€§ :nameå’Œage
class Dog2 private (var name:String,var age:Int){
  self=&gt;  //self ç­‰ä»·ä¸  this ,ä½†æ˜¯å¿…é¡»æ”¾åœ¨ç±»çš„ç¬¬ä¸€è¡Œ,ä¸èƒ½æ›¿ä»£thisä½œä¸ºæ–¹æ³•
  //  var name:String = _
  //  var age = 10
  var color = "è“è‰²"

  /*
  è¾…åŠ©æ„é€ å™¨
  å½“å­—æ®µå·²ç»åœ¨ä¸»æ„é€ å™¨ä¸­å®šä¹‰å®Œæˆ,è¾…åŠ©æ„é€ å™¨ä¸­ä¸èƒ½åŠ var
  è¾…åŠ©æ„é€ å™¨çš„å£°æ˜ä¸èƒ½å’Œä¸»æ„é€ å™¨çš„å£°æ˜ä¸€è‡´,ä¼šå‘ç”Ÿé”™è¯¯(å³æ„é€ å™¨åé‡å¤)
  è¾…åŠ©æ„é€ å™¨çš„ç¬¬ä¸€è¡Œå¿…é¡»æ˜¯ä»¥ä¸»æ„é€ å™¨æˆ–è€…å¦ä¸€ä¸ªè¾…åŠ©æ„é€ å™¨çš„è°ƒç”¨å¼€å§‹
   */
  def this(name:String,age:Int,weight:Int){
    this(name,age)
  }

  def this(height:Int,weight:Int,name:String,age:Int){
    this(name,age)
  }

  def test={
    this.color = "ç»¿è‰²"
    self.color = "çº¢è‰²"
  }

  println("haha")
}

å¤åˆ¶<br><br>Scala ä¸­æ‰€æœ‰çš„ç±»éƒ½ç»§æ‰¿è‡ªä¸€ä¸ªçˆ¶ç±»ã€‚åƒå‰ä¸€èŠ‚çš„&nbsp;Complex&nbsp;è¿™ç§æ²¡æœ‰æŒ‡å®šçš„ä¾‹å­ï¼ŒScala ä¼šé»˜è®¤ä½¿ç”¨&nbsp;scala.AnyRefã€‚<br>Scala ä¸­å¯ä»¥é‡å†™ç»§æ‰¿è‡ªçˆ¶ç±»çš„å‡½æ•°ã€‚ä½†æ˜¯ä¸ºäº†é¿å…æ„å¤–é‡å†™ï¼Œå¿…é¡»åŠ ä¸Š&nbsp;override&nbsp;ä¿®é¥°å­—æ¥æ˜ç¡®è¡¨ç¤ºè¦é‡å†™å‡½æ•°ã€‚æˆ‘ä»¬ä»¥é‡å†™&nbsp;Complex&nbsp;ç±»ä¸­æ¥è‡ª&nbsp;Object&nbsp;çš„&nbsp;toString&nbsp;ä½œä¸ºç¤ºä¾‹ã€‚<br>Scalaclass Complex(real: Double, imaginary: Double) { 
def re = real 
def im = imaginary 
override def toString() = "" + re + (if (im &lt; 0) "" else "+") + im + "i" }
å¤åˆ¶<br><a href=".?query=tag:hive" class="tag" target="_blank" rel="noopener">#hive</a> <a href=".?query=tag:æ•°æ®åº“" class="tag" target="_blank" rel="noopener">#æ•°æ®åº“</a> <br><br><img alt="image.png" src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310151704151.png" referrerpolicy="no-referrer"><br><br>å¼€å§‹çš„æ—¶å€™è¦å…ˆå¯åŠ¨ åœ¨hiveæ–‡ä»¶å†…<br>Linuxnohup bin/hive --service hiveserver2 &gt;&gt; logs/hiveserver2.log 2&gt;&amp;1 &amp;
å¤åˆ¶<br><img alt="image.png" src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310151738929.png" referrerpolicy="no-referrer">
<img alt="image.png" src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310151737844.png" referrerpolicy="no-referrer"><br>Hiveæ•°æ®åº“çš„åŸºæœ¬æ“ä½œå’ŒMYSQLå·®ä¸å¤š<br>å†…éƒ¨è¡¨å’Œå¤–éƒ¨è¡¨åœ¨åˆ›å»ºæ—¶çš„å·®åˆ«<br>
<br>å†…éƒ¨è¡¨
<br>SqlCRAATE TABLE T_INNER(ID INT);
å¤åˆ¶<br>
<br>å¤–éƒ¨è¡¨
<br>SqlCREATE EXTERNAL TABLE T_OUTER(ID INT) LOCATION 'HDFS:///AA/BB/XX';
å¤åˆ¶<br>Hiveè¡¨åˆ›å»ºæ—¶è¦åšçš„ä¸¤ä»¶äº‹ï¼š
1.åœ¨HDFSä¸‹åˆ›å»ºè¡¨ç›®å½•
2.åœ¨å…ƒæ•°æ®åº“MySq|åˆ›å»ºç›¸åº”è¡¨çš„æè¿°æ•°æ®ï¼ˆå…ƒæ•°æ®ï¼‰<br>dropæ—¶æœ‰ä¸åŒçš„ç‰¹æ€§ï¼š
1.dropæ—¶ï¼Œå…ƒæ•°æ®éƒ½ä¼šè¢«æ¸…é™¤
2.dropæ—¶ï¼Œå†…éƒ¨è¡¨çš„è¡¨ç›®å½•ä¼šè¢«åˆ é™¤ï¼Œä½†æ˜¯å¤–éƒ¨è¡¨çš„è¡¨ç›®å½•ä¸ä¼šè¢«åˆ é™¤ã€‚<br>ä½¿ç”¨åœºæ™¯<br>1.å†…éƒ¨è¡¨ï¼šå¹³æ—¶ç”¨æ¥æµ‹è¯•æˆ–è€…å°‘é‡æ•°æ®ï¼Œå¹¶ä¸”è‡ªå·±å¯ä»¥éšæ—¶ä¿®æ”¹åˆ é™¤æ•°æ®.<br>2.å¤–éƒ¨è¡¨ï¼šä½¿ç”¨åæ•°æ®ä¸æƒ³è¢«åˆ é™¤çš„æƒ…å†µä½¿ç”¨å¤–éƒ¨è¡¨ï¼ˆæ¨èä½¿ç”¨ï¼‰æ‰€ä»¥ï¼Œæ•´ä¸ªæ•°æ®ä»“åº“çš„æœ€åº•å±‚çš„è¡¨ä½¿ç”¨å¤–éƒ¨<br><br><img alt="image.png" src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310151749621.png" referrerpolicy="no-referrer"><br><br>&lt;&lt; <a data-href="2023-10-14" href="\æ—¥è®°\2023-10-14.html" class="internal-link" target="_self" rel="noopener">2023-10-14</a> | <a data-href="2023-10-16" href="\æ—¥è®°\2023-10-16.html" class="internal-link" target="_self" rel="noopener">2023-10-16</a> &gt;&gt;]]></description><link>æ—¥è®°\2023-10-15.html</link><guid isPermaLink="false">æ—¥è®°/2023-10-15.md</guid><pubDate>Mon, 16 Oct 2023 15:09:35 GMT</pubDate><enclosure url="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310151704151.png" length="0" type="image/png"/><content:encoded>&lt;figure&gt;&lt;img src=&quot;https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310151704151.png&quot;&gt;&lt;/figure&gt;</content:encoded></item><item><title><![CDATA[2023-10-16]]></title><description><![CDATA[<a class="tag" href="?query=tag:hive" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#hive</a> <a class="tag" href="?query=tag:æ•°æ®åº“" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#æ•°æ®åº“</a> <a class="tag" href="?query=tag:sql" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#sql</a> 
 <br><br>
<br>ğŸ¥³
<br>ğŸ˜­
<br>ğŸ¥°
<br>ğŸ˜
<br>ğŸ¥±
<br>å½“å‰æ¸©åº¦ï¼š21â„ƒ  å¤©æ°”ï¼šæ™´ æ¸©åº¦èŒƒå›´ï¼š11 ~ 23â„ƒ
æ¹¿åº¦ï¼š47% é£å‘ï¼šä¸œå—é£ 2çº§ ç´«å¤–çº¿ï¼šå¼º
ç©ºæ°”è´¨é‡ï¼šä¼˜ PM: 7 æ—¥å‡º: 06:52 æ—¥è½: 18:25<br>ä¸€è¨€
 å›é¦–æ± å¡˜é’æ¬²éï¼Œç»ä¼¼æ¢¦ä¸­èŠ³è‰ã€‚  â€”â€” ã€Šå—æµ¦Â·æ˜¥æ°´ã€‹ Â· å¼ ç‚
<br><br><br>å¤´æ˜éš¾é¡¶
ä¸‹åˆå­¦ä¹  hiveåŸºç¡€
æ™šä¸Šå­¦ä¹  åˆ†æ¡¶è¡¨<br><br>è®°å½•æ—¶é—´: 2023/10/16/1:24 PM å½“å‰å¤©æ°”: æ™´ ğŸ”† â€¢ å½“å‰æ¸©åº¦: 20Â°C â€¢ ä½“æ„Ÿæ¸©åº¦: 17Â°C
<a href=".?query=tag:hive" class="tag" target="_blank" rel="noopener">#hive</a> <br><br>Hiveå°±æ˜¯å¯¹æŸä¸ªå…·ä½“çš„è·¯å¾„è¿›è¡Œç»Ÿä¸€çš„ç®¡ç†<br>HiveåŠ è½½ä¸€èˆ¬åˆ†ä¸ºä¸¤ç§ï¼š<br>
<br>ä¸€ç§æ˜¯ä»æœ¬åœ°Linuxä¸ŠåŠ è½½åˆ°Hiveä¸­
(æ³¨æ„ï¼šå¦‚æœä½¿ç”¨çš„å®¢æˆ·ç«¯beelineæˆ–è€…ldeaæ“ä½œï¼Œå¿…é¡»ä¿è¯æ•°æ®è·¯å¾„ä¸HiveæœåŠ¡å™¨hiveserver2åœ¨åŒä¸€å°ä¸»æœºï¼‰
<br>å¦å¤–ä¸€ç§æ˜¯ä»HDFSåŠ è½½åˆ°Hiveä¸­
<br>ä¸Šä¼ æ–¹å¼ï¼š<br>
<br>æœ¬åœ°ä¸Šä¼ 
<br>Sqlload data local inpath '/è·¯å¾„/æ–‡ä»¶å' into table æ•°æ®åº“.è¡¨å
å¤åˆ¶<br>
<br>hdfs 
<br>Linuxhdfs dfs - put 'æ–‡ä»¶å' /user/hive/warehouse/test
å¤åˆ¶<br>åŠ è½½æ•°æ®çš„æœ¬è´¨ï¼š
1.å¦‚æœæ•°æ®åœ¨æœ¬åœ°ï¼ŒåŠ è½½æ•°æ®çš„æœ¬è´¨å°±æ˜¯å°†æ•°æ®copyåˆ°HDFSä¸Šçš„è¡¨ç›®å½•ä¸‹ã€‚
2.å¦‚æœæ•°æ®åœ¨HDFSä¸Šï¼ŒåŠ è½½æ•°æ®çš„æœ¬è´¨æ˜¯å°†æ•°æ®ç§»åŠ¨åˆ°HDFSçš„è¡¨ç›®å½•ä¸‹ã€‚<br>é‡ç‚¹
æ³¨æ„ä¸Šä¼ æ•°æ®è¦ä¿è¯æ•°æ®æ ¼å¼æ˜¯æ­£ç¡®çš„å¦åˆ™ä¼šNULL
ä¸€å®šè¦æ£€æŸ¥æ•°æ®çš„ åˆ†éš”ç¬¦
æ³¨æ„ï¼šHiveä½¿ç”¨çš„æ˜¯ä¸¥æ ¼çš„è¯»æ—¶æ¨¡å¼ï¼šåŠ è½½æ•°æ®æ—¶ä¸æ£€æŸ¥æ•°æ®çš„å®Œæ•´æ€§ï¼Œè¯»æ—¶å‘ç°æ•°æ®ä¸å¯¹åˆ™ä½¿ç”¨NULLæ¥ä»£æ›¿ã€‚
è€ŒMySq|ä½¿ç”¨çš„æ˜¯å†™æ—¶æ¨¡å¼ï¼šåœ¨å†™å…¥æ•°æ®æ—¶å°±è¿›è¡Œæ£€æŸ¥
<br><br><a href=".?query=tag:æ•°æ®åº“" class="tag" target="_blank" rel="noopener">#æ•°æ®åº“</a> <br><br>å…ˆåˆ›å»ºä¸€ä¸ªå’Œæ—§è¡¨ç»“æ„ä¸€æ ·çš„è¡¨ï¼š
ä¾‹å¦‚ test1(old) å’Œ test2(new)
å¼€å§‹ï¼š<br>Sqlinsert into test2
select * from  test1 (åœ¨è¿™é‡Œå¯ä»¥æ·»åŠ æ¡ä»¶)
å¤åˆ¶<br>ä¸€å®šè¦è®°ä½æ•°æ®éƒ½å­˜åœ¨hdfsç³»ç»Ÿé‡Œé¢<br><br>ä»test1 å…‹éš†åˆ° test2 <br>Sqlcreate table if not exists test1 like test2;
å¤åˆ¶<br><br>å¦‚æœå½“å‰æ•°æ®åº“æ˜¯testé‚£ä¹ˆåœ¨ä¸‹é¢warehouseåè¦åŠ ä¸Šå½“å‰æ•°æ®åº“çš„åå­— test.db
ä¸åŸæ¥çš„æ•°æ®åº“ä½¿ç”¨ç›¸åŒçš„åŸæ¥çš„æ•°æ®ä¿å­˜è·¯å¾„<br>Sqlcreate table if not exists test2 like test1 location '/user/hive/warehouse/test';
å¤åˆ¶<br>æ³¨æ„locationåé¢æ¥çš„ä¸€å®šæ˜¯HDFSä¸­çš„ç›®å½•ï¼Œä¸æ˜¯æ–‡ä»¶<br><br>ç”¨asæ˜¯æ›´çµæ´»çš„æ–¹å¼ï¼Œè·Ÿåˆ›å»ºè¡¨çš„æ–¹å¼ä¸€æ ·ï¼Œå…ƒæ•°æ®å’Œç›®å½•éƒ½ä¼šåˆ›å»ºæ–°çš„ã€‚<br>Sqlcreate table test2
as 
select * from test1;

--æŸ¥çœ‹åº“æè¿°ï¼š
 desc/describe database [extended] class11;
 
--æŸ¥çœ‹è¡¨æè¿°ï¼š
 desc/describe [extended] test2;
 
--æŸ¥çœ‹è¡¨ç»“æ„ä¿¡æ¯
 desc formatted test2;
 
--æŸ¥çœ‹è¡¨åˆ›å»ºè¯­å¥ï¼Œæ¯”è¾ƒå…¨
show create table test2;
å¤åˆ¶<br><br>å¯åŠ¨ï¼š<br>Sqlnohup bin/hive --service metastore &gt;&gt; logs/metastore.log 2&gt;&amp;1 &amp;
nohup bin/hive --service hiveserver2 &gt;&gt; logs/hiveserver2.log 2&gt;&amp;1 &amp;

å¤åˆ¶<br>æ–‡ä»¶ï¼š
 log1.txt
åˆ›å»ºæ•°æ®åº“ï¼š<br>Sqlcreat database db1;
å¤åˆ¶<br>åˆ›å»ºè¡¨ï¼š<br>SqlCREATE TABLE logtest(
id string COMMENT'this is id column',
phonenumber bigint,
mac string,
ip string,
url string,
status1 string,
status2 string,
upflow int,
downflow int ,
status3 string,
dt string
)
COMMENT 'this is log table'
ROW FORMAT DELIMITED FIELDS TERMINATED BY ' '
LINES TERMINATED BY '\n'
stored as textfile;
å¤åˆ¶<br>è§£é‡Šï¼š

<br>ROW FORMAT DELIMITED FIELDS TERMINATED BY ' ': è¿™ä¸€è¡ŒæŒ‡å®šäº†è¡¨çš„è¡Œæ ¼å¼ï¼Œå®ƒå‘Šè¯‰æ•°æ®åº“å¦‚ä½•è§£ææ–‡æœ¬æ–‡ä»¶ä¸­çš„æ¯ä¸€è¡Œã€‚åœ¨è¿™é‡Œï¼ŒFIELDS TERMINATED BY ' 'è¡¨ç¤ºæ¯ä¸€è¡Œçš„å­—æ®µæ˜¯ç”±ç©ºæ ¼å­—ç¬¦åˆ†éš”çš„ã€‚
<br>LINES TERMINATED BY '\n': è¿™ä¸€è¡ŒæŒ‡å®šäº†æ–‡æœ¬æ–‡ä»¶ä¸­è¡Œçš„ç»ˆæ­¢ç¬¦ã€‚åœ¨è¿™é‡Œï¼Œ'\n'è¡¨ç¤ºè¡Œä»¥æ¢è¡Œç¬¦ï¼ˆnewlineï¼‰ç»“æŸã€‚
<br>stored as textfile;: è¿™ä¸€è¡ŒæŒ‡å®šäº†æ•°æ®å­˜å‚¨æ ¼å¼ã€‚åœ¨è¿™é‡Œï¼Œæ•°æ®å°†ä»¥æ–‡æœ¬æ–‡ä»¶çš„å½¢å¼å­˜å‚¨ã€‚è¿™æ„å‘³ç€è¡¨ä¸­çš„æ•°æ®å°†è¢«å­˜å‚¨åœ¨æ–‡æœ¬æ–‡ä»¶ä¸­ï¼Œæ¯ä¸€è¡Œéƒ½åŒ…å«è¡¨çš„ä¸€ä¸ªè®°å½•ï¼Œå¹¶ä¸”å­—æ®µä¹‹é—´ç”±ç©ºæ ¼åˆ†éš”ã€‚

<br>å¯¼å…¥æ•°æ®ï¼š<br>Sql--æœ¬åœ°ä¸Šä¼ 
load dara local inpath '/export/test/log1.txt' into table db1.logtest;
å¤åˆ¶<br><br><br>Sqlselect 1.phonenumber,
round(sum(1.upflow + 1.downflow) / 1024.0,2)as total
from logtest 1
group by 1 . phonenumber ;
å¤åˆ¶<br><br>Sqlselect 1 . url url ,
count(1.url)as urlcount
from log1 1
group by 1.url
order by urlcount desc
limit 3;
å¤åˆ¶<br><br><a href=".?query=tag:sql" class="tag" target="_blank" rel="noopener">#sql</a> <br><br>rename to<br>Sql alter table t7 rename to al;
å¤åˆ¶<br><br>change column<br>Sqlalter table al change column name namel string;
å¤åˆ¶<br><br>change column<br>Sqlalter table log1 change column ip ip string after status1;
alter table log1 change column mac mac string first;
å¤åˆ¶<br><br>change column<br>Sqlalter table al change column namel name string;
å¤åˆ¶<br><br>add columns<br>Sqlalter table al add columns (sex int);
å¤åˆ¶<br><br>replace columns<br>Sqlalter table al replace columns(
id int,
name string,
size int,
pic string
ou
);
å¤åˆ¶<br><br>Sqlalter table al set tblproperties('EXTERNAL'='TRUE');##å†…éƒ¨è¡¨è½¬å¤–éƒ¨è¡¨ï¼Œtrueä¸€å®šè¦å¤§å†™ï¼›
alter table al set tblproperties('EXTERNAL'='false');##falseå¤§å°å†™éƒ½æ²¡æœ‰å…³ç³»
å¤åˆ¶<br><br>éšç€ç³»ç»Ÿè¿è¡Œæ—¶é—´çš„å¢åŠ ï¼Œè¡¨çš„æ•°æ®é‡ä¼šè¶Šæ¥è¶Šå¤§ï¼Œè€ŒHiveæŸ¥è¯¢æ•°æ®çš„æ•°æ®çš„æ—¶å€™é€šå¸¸ä½¿ç”¨çš„æ˜¯ã€Œå…¨è¡¨æ‰«æã€ï¼Œè¿™æ ·å°†ä¼šå¯¼è‡´å¤§é‡ä¸å¿…è¦çš„æ•°æ®è¿›è¡Œæ‰«æï¼Œä»è€ŒæŸ¥è¯¢æ•ˆç‡ä¼šå¤§å¤§çš„é™ä½ã€‚ ä»è€ŒHiveå¼•è¿›äº†åˆ†åŒºæŠ€æœ¯ï¼Œä½¿ç”¨åˆ†åŒºæŠ€æœ¯ï¼Œã€Œé¿å…Hiveå…¨è¡¨æ‰«æï¼Œæå‡æŸ¥è¯¢æ•ˆç‡ã€
åˆ†åŒºæ˜¯:
å°†æ•´ä¸ªè¡¨çš„æ•°æ®åœ¨å­˜å‚¨æ—¶åˆ’åˆ†æˆå¤šä¸ªå­ç›®å½•æ¥å­˜å‚¨(å­ç›®å½•å°±æ˜¯ä»¥åˆ†åŒºåæ¥åç§°)
è§„åˆ™ï¼š
æ ¹æ®ä¸šåŠ¡æ¥ï¼Œé€šå¸¸å°±æ˜¯ä½¿ç”¨ å¹´ï¼Œæœˆï¼Œæ—¥ï¼Œåœ°åŒºç­‰<br><br>Sqlpartitioned by(åˆ†åŒºå æ•°æ®ç±»å‹)
å¤åˆ¶<br>Hiveçš„åˆ†åŒºç§ç±»:<br>é‡ç‚¹

<br>é™æ€åˆ†åŒºï¼šã€ŒåŠ è½½æ•°æ®ã€çš„æ—¶å€™æŒ‡å®šåˆ†åŒºçš„å€¼
<br>åŠ¨æ€åˆ†åŒºï¼šæ•°æ®æœªçŸ¥,æ ¹æ®åˆ†åŒºçš„å€¼ç¡®å®šå»ºç«‹åˆ†åŒº
<br>æ··åˆåˆ†åŒºï¼šé™æ€+åŠ¨æ€

<br><br>Sqlcreate table if not exists part1
 (
     uid int,
     uname string,
     uage int
 )
 partitioned by(country string) //ç”¨äºåˆ†åŒºçš„å­—æ®µï¼Œå¹¶ä¸ä¼šå‡ºç°åœ¨è¡¨ä¸­
 row format delimited fields terminated by '\t';
å¤åˆ¶<br>Sql //åœ¨åŠ è½½çš„è¿‡ç¨‹ä¸­ï¼ŒæŒ‡å®šåŠ è½½åˆ°chinaåˆ†åŒºï¼Œè¿™æ˜¯é™æ€åˆ†åŒºçš„ç‰¹ç‚¹
 load data local inpath '/root/user_china.txt' into table part1 partition(country='china');
 load data local inpath '/root/user_japan.txt' into table part1 partition(country='japan');
å¤åˆ¶<br>åˆ†åŒºæŸ¥è¯¢:<br>Sql select * from è¡¨å where åˆ†åŒºå˜é‡å=å®é™…åˆ†åŒºçš„åå­—;
å¤åˆ¶<br>æˆ‘ä»¬åˆ›å»ºçš„åˆ†åŒºä¼šåœ¨å¯¹åº”çš„HDFSä¸Šç”Ÿæˆä¸€ä¸ªç›®å½•ï¼Œç›®å½•å=å®é™…åˆ†åŒºå<br><br>Sqlcreate table if not exists part2
 (
     uid int,
     uname string,
     uage int
 )
 partitioned by(year string, month string)
 row format delimited fields terminated by '\t';
 load data local inpath '/root/2017-08.txt' into table part2 partition(year='2017', month='08');
 select * from part2 where year='2017';
 select * from part2 where month='06';
 select * from part2 where year='2018' and month='10';
å¤åˆ¶<br>æ˜¾ç¤ºåˆ†åŒº<br>Sql show partitions è¡¨å;
å¤åˆ¶<br>å¢åŠ å•ä¸ªåˆ†åŒºï¼ˆå¢åŠ åŒçº§åˆ†åŒºï¼‰<br>Sql alter table è¡¨å add partition(åˆ†åŒºå­—æ®µåç§°=å®é™…çš„åˆ†åŒºå€¼)
 alter table part1 add partition(country='UK');
å¤åˆ¶<br>å¢åŠ å¤šä¸ªåˆ†åŒº<br>Sql alter table è¡¨å add partition(åˆ†åŒºå­—æ®µåç§°=å®é™…çš„åˆ†åŒºå€¼),partition(åˆ†åŒºå­—æ®µåç§°=å®é™…çš„åˆ†åŒºå€¼)
 alter table part1 add partition(country='UK') partition(country='UN');
å¤åˆ¶<br>å¢åŠ åˆ†åŒºçš„åŒæ—¶æ·»åŠ æ•°æ®<br>Sql alter table è¡¨å add partition(åˆ†åŒºå­—æ®µåç§°=å®é™…åˆ†åŒºçš„å€¼) location 'HDFSè·¯å¾„'
 ps:locationåé¢éœ€è¦æ˜¯ä¸€ä¸ªå­˜å‚¨æ•°æ®çš„è·¯å¾„æ–‡ä»¶å¤¹è€Œä¸æ˜¯åˆ°æ–‡ä»¶ 
 alter table part1 add partition(country='MS') location '/user/hive/warehouse/bd1814.db/part1/country=china';
å¤åˆ¶<br>åˆ é™¤å•ä¸ªåˆ†åŒº<br>Sql alter table è¡¨å drop partition(åˆ†åŒºå­—æ®µå=å®é™…åˆ†åŒºå);
 alter table part1 drop partition(country='UK');
å¤åˆ¶<br>åˆ é™¤å¤šåˆ†åŒº<br>Sql alter table è¡¨å drop partition(åˆ†åŒºå­—æ®µå=å®é™…åˆ†åŒºå),partition(åˆ†åŒºå­—æ®µå=å®é™…åˆ†åŒºå)
å¤åˆ¶<br>ä»¥ä¸Šæ˜¯é™æ€åˆ†åŒº
ç³»ç»Ÿæ¨èé™æ€åˆ†åŒº<br><br>ä»¥ä¸‹æ˜¯åŠ¨æ€åˆ†åŒº<br>hive-site.xmlå…³é”®é…ç½®<br>Xml&lt;property&gt;
     &lt;name&gt;hive.exec.dynamic.partition&lt;/name&gt;
     &lt;value&gt;true&lt;/value&gt;
     &lt;description&gt;Whether or not to allow dynamic partitions in DML/DDL.&lt;/description&gt;
 &lt;/property&gt;
 â€‹
  &lt;property&gt;
     &lt;name&gt;hive.exec.dynamic.partition.mode&lt;/name&gt;
     &lt;value&gt;strict&lt;/value&gt;
     &lt;description&gt;
       In strict mode, the user must specify at least one static partition
       in case the user accidentally overwrites all partitions.
       In nonstrict mode all partitions are allowed to be dynamic.
     &lt;/description&gt;
 &lt;/property&gt;
 &lt;property&gt;
     &lt;name&gt;hive.exec.max.dynamic.partitions&lt;/name&gt;
     &lt;value&gt;1000&lt;/value&gt;
     &lt;description&gt;Maximum number of dynamic partitions allowed to be created in total.&lt;/description&gt;
 &lt;/property&gt;
 &lt;property&gt;
     &lt;name&gt;hive.exec.max.dynamic.partitions.pernode&lt;/name&gt;
     &lt;value&gt;100&lt;/value&gt;
     &lt;description&gt;Maximum number of dynamic partitions allowed to be created in each mapper/reducer node.&lt;/description&gt;
 &lt;/property&gt;
å¤åˆ¶<br>å¯ä»¥çœ‹å‡ºï¼ŒHiveçš„åŠ¨æ€åˆ†åŒºé»˜è®¤æ˜¯å¼€å¯çš„ï¼Œä½†æ˜¯è¿˜æœ‰ä¸€ä¸ªhive.exec.dynamic.partition.mode å±æ€§æ¥æ§åˆ¶åŠ¨æ€åˆ†åŒºçš„ç±»å‹ï¼Œå¦‚æœä¸º strict åˆ™è¦æ±‚åœ¨åˆ›å»ºåŠ¨æ€åˆ†åŒºä¹‹å‰å¿…é¡»å…ˆåˆ›å»ºä¸€ä¸ªé™æ€åˆ†åŒºï¼Œè¿™ä¸ªå…¶å®å°±æ˜¯åé¢æˆ‘ä»¬æ‰€è¯´çš„æ··åˆåˆ†åŒºï¼Œæ‰€ä»¥ï¼Œå¦‚æœä½ æƒ³è¦åˆ›å»ºåŠ¨æ€åˆ†åŒºï¼Œå°±è®¾ç½®ä¸º nostrict
åŠ¨æ€åˆ†åŒºå±æ€§è®¾ç½® <br>SqlåŠ¨æ€åˆ†åŒºçš„å±æ€§ï¼š
hive.exec.dynamic.partition = true
hive.exec.dynamic.partition.mode=nonstrict
hive.exec.max.dynamic.partitions=1000
hive.exec.max.dynamic.partitions.pernode = 100
å¤åˆ¶<br>å»ºè¡¨ï¼š<br>Sqlcreate table dy_part1(
id int ,
name string
)
partitioned by (dt string)
row format delimited fields terminated by ',';
å¤åˆ¶<br>åŠ¨æ€åˆ†åŒºåŠ è½½æ•°æ®ä¸èƒ½ä½¿ç”¨loadæ–¹å¼åŠ è½½
åŠ¨æ€åˆ†åŒºä½¿ç”¨insert intoçš„æ–¹å¼åŠ è½½æ•°æ®<br>å…ˆå»ºç«‹ä¸´æ—¶è¡¨ï¼š<br>Sqlcreate table temp_part(
id int ,
name string,
dt string
)
row format delimited fields terminated by ',';
å¤åˆ¶<br>å¯¼å…¥æ•°æ®åˆ°ä¸´æ—¶è¡¨ï¼ˆtemp_partï¼‰:<br>Sqlload data local inpath '/export/test/student.txt' into table temp_part;
å¤åˆ¶<br>å¯¼å…¥æ•°æ®åˆ°åŠ¨æ€è¡¨<br>Sqlinsert into dy_part1 partition(dt)
select id, name, dt from temp_part;
å¤åˆ¶<br>è®¾ç½®Hiveä»»åŠ¡æ‰§è¡Œé€‰æ‹©æœ¬åœ°æ¨¡å¼(local mode)ã€‚å½“Hiveçš„è¾“å…¥æ•°æ®é‡éå¸¸å°çš„æ—¶å€™ï¼Œåˆ†å¸ƒå¼è®¡ç®—çš„æ—¶é—´æ¶ˆè€—å¯èƒ½ä¼šæ¯”å®é™…ä½œä¸šçš„æ‰§è¡Œæ—¶é—´è¦å¤šçš„å¤šã€‚å¯¹äºå¤§å¤šæ•°è¿™ç§æƒ…å†µï¼ŒHiveå¯ä»¥é€šè¿‡æœ¬åœ°æ¨¡å¼åœ¨å•å°æœºå™¨ä¸Šå¤„ç†æ‰€æœ‰çš„ä»»åŠ¡ã€‚å¯¹äºå°æ•°æ®é›†ï¼Œæ‰§è¡Œæ—¶é—´ä¼šæ˜æ˜¾è¢«ç¼©çŸ­ã€‚<br>Xml&lt;property&gt;
     &lt;name&gt;hive.exec.mode.local.auto&lt;/name&gt;
     &lt;value&gt;false&lt;/value&gt;
     &lt;description&gt;Let Hive determine whether to run in local mode automatically&lt;/description&gt;
 &lt;/property&gt;
å¤åˆ¶<br>åŠ¨æ€åˆ†åŒºå’Œé™æ€åˆ†åŒºçš„åŒºåˆ«<br>
<br>åŠ è½½æ•°æ®çš„æ–¹å¼ï¼šé™æ€åˆ†åŒºå¯ä»¥é€šè¿‡loadå‘½ä»¤ï¼Œå‘ä¸åŒçš„åˆ†åŒºåŠ è½½æ•°æ®ï¼ŒåŠ è½½æ•°æ®æ—¶è¦æŒ‡å®šåˆ†åŒºçš„å€¼ï¼›é™æ€åˆ†åŒºåªèƒ½é€šè¿‡selectåŠ è½½æ•°æ®ï¼Œå¹¶ä¸”ä¸éœ€è¦æŒ‡å®šåˆ†åŒºçš„åå­—ï¼Œè€Œæ˜¯æ ¹æ®ä¼ªåˆ—çš„å€¼ï¼ŒåŠ¨æ€çš„ç¡®å®šåˆ†åŒºå€¼
<br>ç¡®å®šåˆ†åŒºå€¼çš„æ–¹å¼ï¼šä¸¤è€…åœ¨åˆ›å»ºè¡¨çš„æ—¶å€™å‘½ä»¤å®Œå…¨ä¸€è‡´ï¼Œåªæ˜¯åœ¨ç¡®å®šåˆ†åŒºå€¼çš„æ—¶å€™ä¸åŒï¼Œé™æ€åˆ†åŒºéœ€è¦æ‰‹åŠ¨æŒ‡å®šåˆ†åŒºå€¼ï¼Œè€ŒåŠ¨æ€åˆ†åŒºä¼šè‡ªåŠ¨è¯†åˆ«ä¼ªåˆ—çš„å±æ€§ï¼ŒåŠ¨æ€ç”Ÿæˆåˆ†åŒºå€¼
<br><br>&lt;&lt; <a data-href="2023-10-15" href="\æ—¥è®°\2023-10-15.html" class="internal-link" target="_self" rel="noopener">2023-10-15</a> | <a data-href="2023-10-17" href="\æ—¥è®°\2023-10-17.html" class="internal-link" target="_self" rel="noopener">2023-10-17</a> &gt;&gt;]]></description><link>æ—¥è®°\2023-10-16.html</link><guid isPermaLink="false">æ—¥è®°/2023-10-16.md</guid><pubDate>Tue, 17 Oct 2023 12:45:41 GMT</pubDate></item><item><title><![CDATA[2023-10-17]]></title><description><![CDATA[<a class="tag" href="?query=tag:hive" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#hive</a> <a class="tag" href="?query=tag:åˆ†æ¡¶è¡¨" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#åˆ†æ¡¶è¡¨</a> <a class="tag" href="?query=tag:hive" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#hive</a> <a class="tag" href="?query=tag:åˆ†æ¡¶è¡¨" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#åˆ†æ¡¶è¡¨</a> <a class="tag" href="?query=tag:sql" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#sql</a> <a class="tag" href="?query=tag:hive" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#hive</a> <a class="tag" href="?query=tag:sql" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#sql</a> 
 <br><br>
<br>ğŸ¥³
<br>ğŸ˜­
<br>ğŸ¥°
<br>ğŸ˜
<br>ğŸ¥±
<br>å½“å‰æ¸©åº¦ï¼š24â„ƒ  å¤©æ°”ï¼šæ™´ æ¸©åº¦èŒƒå›´ï¼š12 ~ 25â„ƒ
æ¹¿åº¦ï¼š46% é£å‘ï¼šå—é£ 3çº§ ç´«å¤–çº¿ï¼šæ— 
ç©ºæ°”è´¨é‡ï¼šä¼˜ PM: 9 æ—¥å‡º: 06:53 æ—¥è½: 18:24<br>ä¸€è¨€
 æ´ªè’ä¸‡å¹´ï¼Œç‹¬å¯¹ç©¹è‹ç­ç»ï¼Œè°“ä¹‹å¤§å¯‚å¯å¯ä¹Ÿã€‚  â€”â€” ã€Šç›®é€ã€‹ Â· é¾™åº”å°
<br><br><br>æ—©ä¸Š ï¼š å­¦åˆ†åŒº
ä¸‹åˆ ï¼š ç»ƒè½¦
æ™šä¸Š ï¼š å­¦åˆ†æ¡¶<br><br>è®°å½•æ—¶é—´: 2023/10/17/9:56 AM å½“å‰å¤©æ°”: æ™´ ğŸ”† â€¢ å½“å‰æ¸©åº¦: 23Â°C â€¢ ä½“æ„Ÿæ¸©åº¦: 22Â°C
<a href=".?query=tag:hive" class="tag" target="_blank" rel="noopener">#hive</a> <br><br>åˆ›å»ºä¸€ä¸ªæ··åˆè¡¨<br>Sqlcreate table dy_part2(
id int,
name string
)
partitioned by (year string,month string,day string)
row format delimited fields terminated by ',' ;
å¤åˆ¶<br>åˆ›å»ºä¸´æ—¶è¡¨<br>Sqlcreate table temp_part2(
id int,
name string,
year string,
month string,
day string
)
row format delimited fields terminated by ',' ;

-- åŠ è½½æ•°æ®
load data loacl inpath '/export/test/student.txt' into table temp_part2;
å¤åˆ¶<br>å¯¼æ•°æ•°æ®åˆ°åˆ†åŒºè¡¨<br>Sqlé”™è¯¯ç”¨æ³•ï¼š
insert into dy_part2 partition (year='2018', month, day)
select * from temp_part2;
æ­£ç¡®ç”¨æ³•ï¼š
insert into dy_part2 partition (year='2018', month, day)
select id, name, month, day from tEmp_part2;
å¤åˆ¶<br>å› ä¸ºæŒ‡å®šäº†yearæ·±æ¸Šä¸èƒ½ç”¨*<br>æ³¨æ„äº‹é¡¹
1.Hiveçš„åˆ†åŒºä½¿ç”¨çš„æ˜¯è¡¨å¤–å­—æ®µï¼Œåˆ†åŒºå­—æ®µæ˜¯ä¸€ä¸ªä¼ªåˆ—ï¼Œä½†æ˜¯åˆ†åŒºå­—æ®µæ˜¯å¯ä»¥åšæŸ¥è¯¢è¿‡æ»¤ã€‚
2.åˆ†åŒºå­—æ®µä¸å»ºè®®ä½¿ç”¨ä¸­æ–‡
3.ä¸€èˆ¬ä¸å»ºè®®ä½¿ç”¨åŠ¨æ€åˆ†åŒºï¼Œå› ä¸ºåŠ¨æ€åˆ†åŒºä¼šä½¿ç”¨MapReduceæ¥è¿›è¡ŒæŸ¥è¯¢æ•°æ®ï¼Œå¦‚æœåˆ†åŒºæ•°æ®è¿‡å¤šï¼Œå¯¼è‡´
NameNodeå’ŒResourceManagerçš„æ€§èƒ½ç“¶é¢ˆã€‚æ‰€ä»¥å»ºè®®åœ¨ä½¿ç”¨åŠ¨æ€åˆ†åŒºå‰å°½å¯èƒ½é¢„çŸ¥åˆ†åŒºæ•°é‡ã€‚
4.åˆ†åŒºå±æ€§çš„ä¿®æ”¹éƒ½å¯ä»¥ä½¿ç”¨ä¿®æ”¹å…ƒæ•°æ®å’ŒHDFSæ•°æ®å†…å®¹ã€‚
Hiveåˆ†åŒºå’ŒMySqlåˆ†åŒºçš„åŒºåˆ«
<br><br>æœ‰ä¸€ä¸ªç”¨æˆ·u.txt<br>01#bingbing#23
02#liying#20
03#mali#24
04#xiaoli#18
05#wangli#20
06#mumu#23<br>è¦æ±‚ï¼š
1.å°†æ•°æ®å­˜å…¥æ•°æ®ä»“åº“users.myuser(id,name,age),éœ€è¦å°†æ•°æ®æ”¾åœ¨hdfsçš„/dataä¸‹é¢
H
2.æŸ¥æ‰¾å¹´é¾„æœ€å¤§çš„ä¸‰ä¸ªäººï¼Œå¹´é¾„ç›¸åŒå†æŒ‰ç…§å§“åæ’åº<br>å»ºè¡¨<br>Sqlcreate external table if not exists myuser (
     id string,
     name string,
     age int
     )
     row format delimited fields terminated by ',' 
     location '/data/myuser';

load data local inpath '/export/test/u.txt' into table myuser ;
å¤åˆ¶<br><img alt="image.png" src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310171037725.png" referrerpolicy="no-referrer"><br>Sqlselect * from myuser order by age desc,name desc limit 3;
å¤åˆ¶<br>è®°å½•æ—¶é—´: 2023/10/17/11:07 AM å½“å‰å¤©æ°”: æ™´ ğŸ”† â€¢ å½“å‰æ¸©åº¦: 24Â°C â€¢ ä½“æ„Ÿæ¸©åº¦: 24Â°C<br><br><a href=".?query=tag:åˆ†æ¡¶è¡¨" class="tag" target="_blank" rel="noopener">#åˆ†æ¡¶è¡¨</a> <a href=".?query=tag:hive" class="tag" target="_blank" rel="noopener">#hive</a>
<img alt="image.png" src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310162023083.png" referrerpolicy="no-referrer"><br>å½“å•ä¸ªçš„åˆ†åŒºæˆ–è€…è¡¨çš„æ•°æ®é‡è¿‡å¤§ï¼Œåˆ†åŒºä¸èƒ½æ›´ç»†ç²’åº¦çš„åˆ’åˆ†æ•°æ®ï¼Œå°±éœ€è¦ä½¿ç”¨åˆ†æ¡¶æŠ€æœ¯å°†æ•°æ®åˆ’åˆ†æˆæ›´ç»†çš„ç²’åº¦<br><br>Sql[CLUSTERED BY (COLUMNNAME COLUMNTYPE [COMMENT 'COLUMN COMMENT'],...) 
[SORTED BY (COLUMNNAME [ASC|DESC])...] INTO NUM_BUCKETS BUCKETS]
å¤åˆ¶<br><br>bucket
åˆ†æ¡¶çš„åŸç†:è·ŸMRä¸­çš„HashPartitioneråŸç†ä¸€æ ·:éƒ½æ˜¯keyçš„hashå€¼å–æ¨¡reduceçš„æ•°é‡ <br>
<br>MRä¸­ï¼šæŒ‰ç…§keyçš„hashå€¼é™¤ä»¥reductTaskå–ä½™ 
<br>Hiveä¸­ï¼šæŒ‰ç…§åˆ†æ¡¶å­—æ®µçš„hashå€¼å»æ¨¡é™¤ä»¥åˆ†æ¡¶çš„ä¸ªæ•°
<br><br>Note
ä¸ºäº†ä¿å­˜åˆ†æ¡¶æŸ¥è¯¢çš„åˆ†æ¡¶ç»“æ„ï¼ˆæ•°æ®æŒ‰ç…§åˆ†æ¡¶å­—æ®µè¿›è¡Œä¿å­˜hashæ•£åˆ—ï¼‰
åˆ†æ¡¶è¡¨çš„æ•°æ®è¿›è¡ŒæŠ½æ ·å’ŒJOINæ—¶å¯ä»¥æé«˜æŸ¥è¯¢æ•ˆç‡,ä¸€èˆ¬æ˜¯ç”¨æ¥æŠ½æ ·æŸ¥è¯¢
<br><br>åˆ†æ¡¶è¡¨åˆ›å»ºæµç¨‹<br>é‡ç‚¹

<br>é¦–å…ˆè¦åˆ›å»ºå¸¦åˆ†æ¡¶å®šä¹‰çš„è¡¨ï¼ˆåˆ†æ¡¶è¡¨ï¼‰ 
<br>ç„¶ååˆ›å»ºä¸€ä¸ªä¸´æ—¶è¡¨ï¼ˆæ™®é€šè¡¨ï¼‰ 
<br>ä»ä¸´æ—¶è¡¨ä¸­ä½¿ç”¨åˆ†æ¡¶æŸ¥è¯¢å°†æŸ¥è¯¢åˆ°çš„æ•°æ®æ’å…¥åˆ°åˆ†æ¡¶è¡¨ä¸­

<br><br>Sqlcreate table if not exists buc1( 
id int, 
name string, 
age int 
) 
clustered by (id) into 4 buckets
row format delimited fields terminated by ','; 

æ•°æ®ï¼šä»(/export/test/buc1.txtåŠ è½½å¦‚ä¸‹æ ¼å¼æ•°æ®) 
id,name,age
å¤åˆ¶<br><br>Sqlcreate table if not exists temp_buc1( 
id int, 
name string, 
age int 
)
row format delimited fields terminated by ',';
å¤åˆ¶<br><br>Sqlload data local inpath '/export/test/buc1.csv' into table buc1;
å¤åˆ¶<br><img alt="image.png" src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310171101353.png" referrerpolicy="no-referrer"><br>åˆ©ç”¨å–ä½™è¿›è¡Œäº†åˆ†æ¡¶<br><br>Sqlload data local inpath '/export/test/buc1.csv' into table temp_buc1;
å¤åˆ¶<br><br>Sqlinsert overwrite table buc1 
select id,name,age from temp_buc1 
cluster by (id);
å¤åˆ¶<br><img alt="image.png" src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310171106886.png" referrerpolicy="no-referrer"><br>è¿™é‡Œè¿˜æ˜¯æ— æ³•åˆ†æ¡¶,éœ€è¦è¿›è¡Œä¸‹é¢çš„å¼ºåˆ¶è®¾ç½®<br><br>Sql&lt;!-- å¦‚æœè¦åˆ†æ¡¶,å°±è¦æ‰“å¼€åˆ†æ¡¶çš„å¼ºåˆ¶æ¨¡å¼ --&gt; 
set hive.enforce.bucketing=false/true &lt;name&gt;hive.enforce.bucketing&lt;/name&gt;
&lt;value&gt;false&lt;/value&gt;
&lt;description&gt;
Whether bucketing is enforced. If true, while inserting into the table, bucketing is enforced.
&lt;/description&gt; 

æœ€å¥½æŠŠå¼ºåˆ¶æ’åºä¹Ÿæ‰“å¼€ 
set hive.enforce.sorting=true;
å¤åˆ¶<br><br>ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼<br>Sqlset mapreduce.job.reduces=-1 #-1è¡¨ç¤ºå¯ä»¥æ ¹æ®å®é™…éœ€è¦æ¥å®šåˆ¶reducesçš„æ•°é‡
å¤åˆ¶<br>åˆ†æ¡¶çš„ä¸ªæ•°å°±æ˜¯reducesçš„ä¸ªæ•°
cluster by (id);
è¿™ä¸ªæ ¹æ®idåˆ†æ¡¶å’Œæ’åº<br>åˆ›å»ºæŒ‡å®šæ’åºå­—æ®µçš„åˆ†æ¡¶è¡¨<br>Sqlcreate table if not exists buc3(
id int, 
name string, 
age int 
) 
clustered by (id) 
sorted by (id desc) into 4 buckets
row format delimited fields terminated by ',';
å¤åˆ¶<br>å¯¼å…¥æ•° æ®<br>Sqlinsert overwrite table buc3 
select id,name,age from temp_buc1 
distribute by (id) sort by (name asc); 
å’Œä¸‹é¢çš„è¯­å¥æ•ˆæœä¸€æ · 
insert overwrite table buc3 
select id,name,age from temp_buc1 
cluster by (id);
æ³¨æ„:å®šä¹‰å’Œå¯¼æ•°æ®æ—¶åŒæ—¶è®¾ç½®äº†åˆ†æ¡¶å’Œæ’åº,ä»¥å¯¼å…¥æ•°æ®æ—¶ä¼˜å…ˆ
å¤åˆ¶<br><img alt="image.png" src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310171123087.png" referrerpolicy="no-referrer"><br><br>Sql---é»˜è®¤
select * from buc3;
--æŸ¥ç¬¬å››æ¡¶
select * from buc3 tablesample(bucket 1 out of 4 on id);
å¤åˆ¶<br>Sql--è¯­æ³•è§£é‡Š: 
tablesample(bucket x out of y on id) 
x:ä»£è¡¨ä»ç¬¬å‡ æ¡¶å¼€å§‹æŸ¥è¯¢ 
y:å¯ä»¥æ˜¯æ€»æ¡¶æ•°,æ€»æ¡¶æ•°çš„å€æ•°æˆ–è€…æ˜¯å› å­ã€‚xä¸èƒ½å¤§äºyã€‚
yå¦‚æœæ˜¯4 ,å·²ç»æœ‰çš„æ€»æ¡¶æ•°æ˜¯4 é‚£ä¹ˆè¦å–çš„æ•°æ® 4/4= 1ä¸ªæ¡¶ 
yå¦‚æœæ˜¯2 ,å·²ç»æœ‰çš„æ€»æ¡¶æ•°æ˜¯4,é‚£ä¹ˆè¦å–çš„æ•°æ®4/y 4/2=2ä¸ªæ¡¶ 
onåé¢è·Ÿçš„æ˜¯åˆ†æ¡¶çš„å­—æ®µ 

--hiveæ ¹æ®yçš„å¤§å°ï¼Œå†³å®šæŠ½æ ·çš„æ¯”ä¾‹ã€‚
   ä¾‹å¦‚ï¼Œtableæ€»å…±åˆ†äº†64ä»½ï¼Œå½“y=32æ—¶ï¼ŒæŠ½å–(64/32=)2ä¸ªbucketçš„æ•° æ®ï¼Œå½“y=128æ—¶ï¼ŒæŠ½å–(64/128=)1/2ä¸ªbucketçš„æ•°æ®ã€‚
   xè¡¨ç¤ºä»å“ªä¸ªbucketå¼€å§‹æŠ½å–ã€‚ä¾‹å¦‚ï¼Œtableæ€»bucketæ•°ä¸º32ï¼Œtablesample(bucket 3 out of 16)ï¼Œè¡¨ç¤ºæ€» å…±æŠ½å–ï¼ˆ32/16=ï¼‰2ä¸ªbucketçš„--æ•°æ®ï¼Œåˆ†åˆ«ä¸ºç¬¬3ä¸ªbucketå’Œç¬¬ï¼ˆ3+16=ï¼‰ç¬¬19ä¸ªbucketçš„æ•°æ®ã€‚
æ¡ˆä¾‹åˆ†æ: 
--ä¸€å…±4æ¡¶,å–å¾—ç¬¬ä¸€æ¡¶çš„æ•°æ® 
select * from buc3 tablesample(bucket 1 out of 4 on id); 
å–å¾—ç¬¬äºŒæ¡¶çš„æ•°æ® 
--yå¦‚æœæ˜¯2 ,å·²ç»æœ‰çš„æ€»æ¡¶æ•°æ˜¯4,é‚£ä¹ˆè¦å–çš„æ•°æ®4/y 4/2=2ä¸ªæ¡¶ 
select * from buc3 tablesample(bucket 2 out of 2 on id);
--ä»xå¼€å§‹å–,å–çš„æ•°é‡æ˜¯ (4/2)=2,å½“x==1æ—¶ä»£è¡¨å–çš„æ˜¯1,3æ¡¶ 
select * from buc3 tablesample(bucket 1 out of 2 on id); 
-- 4/y=1/2,ä»£è¡¨æ¯ä¸€æ¡¶è¢«åˆ†æˆ2ä»½,å½“x=1å’Œ5æ—¶è¡¨ç¤ºç¬¬ä¸€æ¡¶,x=1è¡¨ç¤ºå–çš„æ˜¯ç¬¬ä¸€æ¡¶çš„å‰åŠéƒ¨åˆ†. 
--å°æŠ€å·§:åŒºåˆ†idæ˜¯é‚£ä¸€éƒ¨åˆ†çš„æ–¹æ³•:id/yå€¼,ä¾‹å¦‚å½“å‰çš„æ¡ˆä¾‹:id=8,y=8,id/y=0,å› ä¸ºå•†+1=1=x,æ¡¶ä¸­çš„éƒ¨åˆ†å°±æ˜¯ å‰åŠéƒ¨åˆ†,æ¯”å¦‚:id=12,y=8,id/y=4,å•†+1=5=x,æ‰€ä»¥æ˜¯æ¡¶çš„ååŠéƒ¨åˆ† 
select * from buc3 tablesample(bucket 1 out of 8 on id);

å¤åˆ¶<br><br>Sql1.å®šä¹‰
  clustered by (id) ---æŒ‡å®šåˆ†æ¡¶çš„å­—æ®µ 
  sorted by (id asc|desc) ---æŒ‡å®šæ•°æ®çš„æ’åºè§„åˆ™ï¼Œè¡¨ç¤ºå’±ä»¬é¢„æœŸçš„æ•°æ®æ˜¯ä»¥è¿™ç§è§„åˆ™è¿›è¡Œçš„æ’åº 
2.å¯¼å…¥æ•°æ®*
  cluster by (id) ---æŒ‡å®šgetPartitionä»¥å“ªä¸ªå­—æ®µæ¥è¿›è¡Œhashï¼Œå¹¶ä¸”æ’åºå­—æ®µä¹Ÿæ˜¯æŒ‡å®šçš„å­—æ®µï¼Œæ’åºæ˜¯ ä»¥ascæ’åˆ— 
  distribute by (id) ---- æŒ‡å®šgetPartitionä»¥å“ªä¸ªå­—æ®µæ¥è¿›è¡Œhash
  sort by (name asc | desc) ---æŒ‡å®šæ’åºå­—æ®µ 
  order by --- å…¨åŸŸæ’åº(åªèƒ½æœ‰ä¸€ä¸ªreduce)
  åŒºåˆ«ï¼šcluster by è¿™ç§æ–¹å¼å¯ä»¥åˆ†åˆ«æŒ‡å®šgetPartitionå’Œsortçš„å­—æ®µ 
  å¯¼æ•°æ®æ—¶ï¼š insert overwrite table buc3 
  select id,name,age from temp_buc1 
  distribute by (id) sort by (id asc); 
  å’Œä¸‹é¢çš„è¯­å¥æ•ˆæœä¸€æ · 
  insert overwrite table buc4 
  select id,name,age from temp_buc1 
  cluster by (id) ;
å¤åˆ¶<br>æ³¨æ„

<br>åˆ†åŒºä½¿ç”¨çš„æ˜¯è¡¨å¤–å­—æ®µï¼Œåˆ†æ¡¶ä½¿ç”¨çš„æ˜¯è¡¨å†…å­—æ®µ 
<br>åˆ†æ¡¶æ›´åŠ ç”¨äºç»†ç²’åº¦çš„ç®¡ç†æ•°æ®ï¼Œæ›´å¤šçš„æ˜¯ä½¿ç”¨æ¥åšæŠ½æ ·ã€join

<br><br>è®°å½•æ—¶é—´: 2023/10/17/7:28 PM å½“å‰å¤©æ°”: æ™´ ğŸ”† â€¢ å½“å‰æ¸©åº¦: 17Â°C â€¢ ä½“æ„Ÿæ¸©åº¦: 17Â°C
è¿˜æ˜¯å­¦ä¹ åˆ†æ¡¶
<a href=".?query=tag:åˆ†æ¡¶è¡¨" class="tag" target="_blank" rel="noopener">#åˆ†æ¡¶è¡¨</a>
å¯åŠ¨å¯åŠ¨å¯åŠ¨ï¼ï¼ï¼<br>Linuxstart-all.sh
nohup bin/hive --service metastore &gt;&gt; logs/metastore.log 2&gt;&amp;1 &amp;
nohup bin/hive --service hiveserver2 &gt;&gt; logs/hiveserver2.log 2&gt;&amp;1 &amp;
mapred --daemon start historyserver
å¤åˆ¶<br><br>ç†Ÿæ‚‰Selectå„ç§æŸ¥è¯¢
éœ€æ±‚ï¼šæŒ‰ç…§æ€§åˆ«åˆ†åŒºï¼ˆ1ç”·2å¥³ï¼‰ï¼Œåœ¨åˆ†åŒºä¸­æŒ‰ç…§idçš„å¥‡å¶è¿›è¡Œåˆ†æ¡¶ï¼š
id,name,sex
åˆ†ä¸¤æ¡¶
å»ºç«‹è¡¨<br>Sqlcreate table if not exists stu(
     id  int ,
     name string
     )
     partitioned by (sex string)
     clustered by (id) into 2 buckets
     row format delimited fields terminated by ',';

å¤åˆ¶<br>æŸ¥çœ‹å»ºè¡¨æƒ…å†µå†…å®¹<br>Sqldesc formatted è¡¨åï¼›
å¤åˆ¶<br>åˆ›å»ºä¸´æ—¶è¡¨<br>Sql create table temp_stu(
     id  int ,
     name string,
     sex string
     )
          row format delimited fields terminated by ',';
å¤åˆ¶<br> æ·»åŠ æ•°æ®<br>Sqlload data local inpath '/export/test/user.txt' into table temp_stu; 
å¤åˆ¶<br>å…³é—­ä¸¥æ ¼æ¨¡å¼<br>Sqlhive&gt; set hive.exec.dynamic.partition.mode=nonstrict; 
å¤åˆ¶<br> å¯¼å…¥æ•°æ®<br>Sql insert overwrite table stu partition(sex) 
    select * from temp_stu cluster by id;
å¤åˆ¶<br>å…ˆåˆ†åŒºååˆ†æ¡¶
sexä¸ºåŒº idä¸ºæ¡¶
<img alt="image.png" src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310172031517.png" referrerpolicy="no-referrer"><br>æŸ¥è¯¢æ€§åˆ«ä¸ºå¥³ï¼Œå­¦å·ä¸ºå¥‡æ•°çš„å­¦ç”Ÿ<br>Sqlselect * from stu tablesample(bucket 2 out of 2 on id) where sex = '2';
å¤åˆ¶<br><img alt="image.png" src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310172037186.png" referrerpolicy="no-referrer"><br>Sqlselect * from stu where id % 2=1 and sex = '2';

å¤åˆ¶<br><img src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310172037024.png" referrerpolicy="no-referrer">
è®°å½•æ—¶é—´: 2023/10/17/8:38 PM å½“å‰å¤©æ°”: æ™´ ğŸ”† â€¢ å½“å‰æ¸©åº¦: 16Â°C â€¢ ä½“æ„Ÿæ¸©åº¦: 16Â°C<br><br><a href=".?query=tag:sql" class="tag" target="_blank" rel="noopener">#sql</a> <br>Sqlselect selection_list  æŸ¥è¯¢çš„åˆ—
from table             è¦æŸ¥è¯¢çš„è¡¨
join on                è¿æ¥çš„è¡¨
where                  æŸ¥è¯¢æ¡ä»¶
group by               åˆ†ç»„æŸ¥è¯¢
having                 åˆ†ç»„æ¡ä»¶è¿‡æ»¤
order by               å­—æ®µæ’åº
sort by                ç»“æœæ’åº
limit                  é™åˆ¶ç»“æœæ•°
union/union all        åˆå¹¶è¡¨
å¤åˆ¶<br><br>SqlFROM
&lt;left_table&gt;
ON
&lt;join_condition&gt;
&lt;join_type&gt;
JOIN
&lt;right_table&gt;
WHERE
&lt;where_condition&gt;
GROUP BY
&lt;group_by_list&gt;
HAVING
&lt;having_condition&gt;
SELECT
DISTINCT
&lt;select_list&gt;
ORDER BY
&lt;order_by_condition&gt;
LIMIT
&lt;limit_number&gt;
å¤åˆ¶<br><br>Sqlå°½é‡ä¸è¦ä½¿ç”¨å­æŸ¥è¯¢ã€å°½é‡ä¸è¦ä½¿ç”¨in not in
select * from aa1
where id in ( select id from bb ) ;
æŸ¥è¯¢å°½é‡é¿å…joinè¿æ¥æŸ¥è¯¢ï¼Œä½†æ˜¯è¿™ç§æ“ä½œå’±ä»¬æ˜¯æ°¸è¿œé¿å…ä¸äº†çš„ã€‚
æŸ¥è¯¢æ°¸è¿œæ˜¯å°è¡¨é©±åŠ¨å¤§è¡¨ï¼ˆæ°¸è¿œæ˜¯å°ç»“æœé›†é©±åŠ¨å¤§ç»“æœé›†ï¼‰
å¤åˆ¶<br><br>é”™ç»¼å¤æ‚çš„æ•°æ®ï¼Œéœ€è¦å»ºç«‹æ¨¡å‹ï¼Œæ‰èƒ½å‚¨å­˜åœ¨æ•°æ®åº“ã€‚æ‰€è°“"æ¨¡å‹"å°±æ˜¯ä¸¤æ ·ä¸œè¥¿ï¼šå®ä½“ï¼ˆentityï¼‰+ å…³ç³» ï¼ˆrelationshipï¼‰ERå›¾ã€‚å®ä½“æŒ‡çš„æ˜¯é‚£äº›å®é™…çš„å¯¹è±¡ï¼Œå¸¦æœ‰è‡ªå·±çš„å±æ€§ï¼Œå¯ä»¥ç†è§£æˆä¸€ç»„ç›¸å…³å±æ€§çš„å®¹å™¨ã€‚å…³ç³»å°± æ˜¯å®ä½“ä¹‹é—´çš„è”ç³»ï¼Œé€šå¸¸å¯ä»¥åˆ†æˆ"ä¸€å¯¹ä¸€"ã€"ä¸€å¯¹å¤š"å’Œ"å¤šå¯¹å¤š"ç­‰ç±»å‹ã€‚<br><img alt="image.png" src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310171944738.png" referrerpolicy="no-referrer"><br>Sqlè¡¨çš„è¿æ¥åˆ†æˆå¥½å‡ ç§ç±»å‹ã€‚
å†…è¿æ¥ï¼ˆinner join)
å¤–è¿æ¥ï¼ˆouter join)
å·¦è¿æ¥ï¼ˆleft join)
å³è¿æ¥ï¼ˆright join)
å…¨è¿æ¥ï¼ˆfull join)
å¤åˆ¶<br>æ‰€è°“â€œè¿æ¥â€ï¼Œå°±æ˜¯ä¸¤å¼ è¡¨æ ¹æ®å…³è”å­—æ®µï¼Œç»„åˆæˆä¸€ä¸ªæ•°æ®é›†ã€‚é—®é¢˜æ˜¯ï¼Œä¸¤å¼ è¡¨çš„å…³è”å­—æ®µçš„å€¼å¾€å¾€æ˜¯ä¸ä¸€è‡´çš„ï¼Œå¦‚
æœå…³è”å­—æ®µä¸åŒ¹é…ï¼Œæ€ä¹ˆå¤„ç†ï¼Ÿæ¯”å¦‚ï¼Œè¡¨AåŒ…å«å¼ ä¸‰å’Œæå››ï¼Œè¡¨BåŒ…å«æå››å’Œç‹äº”ï¼ŒåŒ¹é…çš„åªæœ‰æå››è¿™ä¸€æ¡è®°
å½•ã€‚
å¾ˆå®¹æ˜“çœ‹å‡ºï¼Œä¸€å…±æœ‰å››ç§å¤„ç†æ–¹æ³•ã€‚
åªè¿”å›ä¸¤å¼ è¡¨åŒ¹é…çš„è®°å½•ï¼Œè¿™å«å†…è¿æ¥ï¼ˆinner join)ã€‚
è¿”å›åŒ¹é…çš„è®°å½•ï¼Œä»¥åŠè¡¨Aå¤šä½™çš„è®°å½•ï¼Œè¿™å«å·¦è¿æ¥ï¼ˆleft join)ã€‚
è¿”å›åŒ¹é…çš„è®°å½•ï¼Œä»¥åŠè¡¨Bå¤šä½™çš„è®°å½•ï¼Œè¿™å«å³è¿æ¥ï¼ˆright join)ã€‚
è¿”å›åŒ¹é…çš„è®°å½•ï¼Œä»¥åŠè¡¨Aå’Œè¡¨Bå„è‡ªçš„å¤šä½™è®°å½•ï¼Œè¿™å«å…¨è¿æ¥ï¼ˆfull join)ã€‚
å¤åˆ¶<br><img alt="image.png" src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310172050319.png" referrerpolicy="no-referrer"><br><img alt="image.png" src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310172050052.png" referrerpolicy="no-referrer"><br><br><a href=".?query=tag:hive" class="tag" target="_blank" rel="noopener">#hive</a>   <a href=".?query=tag:sql" class="tag" target="_blank" rel="noopener">#sql</a> <br>é‡ç‚¹
åœ¨Hiveä¸­ï¼Œæœ‰ä¸€ç§ä¸“æœ‰çš„joinæ“ä½œ,left semi join,æˆ‘ä»¬ç§°ä¹‹ä¸ºåŠå¼€è¿æ¥ã€‚å®ƒæ˜¯left joinçš„ä¸€ç§ä¼˜åŒ–å½¢å¼ï¼Œåªèƒ½æŸ¥è¯¢å·¦ è¡¨çš„ä¿¡æ¯ï¼Œä¸»è¦ç”¨äºè§£å†³Hiveä¸­å·¦è¡¨çš„æ•°æ®æ˜¯å¦å­˜åœ¨çš„é—®é¢˜ã€‚ç›¸å½“äºexistså…³é”®å­—çš„ç”¨æ³•ã€‚
<br>å»ºè¡¨u1 u2<br>Sqlcreate table if not exists u1(
id int, 
name string 
) 
row format delimited fields terminated by ',';

create table if not exists u2(
id int, 
name string 
) 
row format delimited fields terminated by ',';
å¤åˆ¶<br>å¯¼å…¥æ•°æ®<br>Sqlload data local inpath '/export/test/u1.txt' into table u1;
load data local inpath '/export/test/u2.txt' into table u2;
å¤åˆ¶<br>æŸ¥è¯¢<br>Sql select * 
    from u1
    left semi join u2 on u1.id=u2.id;
å¤åˆ¶<br><img alt="image.png" src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310172058774.png" referrerpolicy="no-referrer">
æŸ¥è¯¢æ‹¥æœ‰ç›¸åŒçš„<br>Sqlhive&gt; select u1.* from u1 where exists (select 1 from u2 where u2.id = u1.id);
å¤åˆ¶<br>ä¸Šé¢ä¸¤ä¸ªç»“æœæ˜¯ä¸€æ ·çš„<br>æ‰€æœ‰joinè¿æ¥ï¼Œåªæ”¯æŒç­‰å€¼è¿æ¥(= å’Œ and )ã€‚ä¸æ”¯æŒ != ã€ &lt; ã€&gt; ã€ &lt;&gt; ã€&gt;=ã€ &lt;= ã€or<br><a data-tooltip-position="top" aria-label="Hive02.pdf > page=16&amp;selection=0,7,0,21" data-href="Hive02.pdf#page=16&amp;selection=0,7,0,21" href="\å¤§æ•°æ®\PDF\Hive02.pdf#page=16&amp;selection=0,7,0,21" class="internal-link" target="_self" rel="noopener">Hive02, page 16</a>
éšä¾¿çœ‹çœ‹å°±è¡Œ<br>
æŸ¥è¯¢å­å¥
<a data-tooltip-position="top" aria-label="Hive02.pdf > page=17&amp;selection=19,0,19,4" data-href="Hive02.pdf#page=17&amp;selection=19,0,19,4" href="\å¤§æ•°æ®\PDF\Hive02.pdf#page=17&amp;selection=19,0,19,4" class="internal-link" target="_self" rel="noopener">Hive02, page 17</a>
<br>è®°å½•æ—¶é—´: 2023/10/17/8:54 PM å½“å‰å¤©æ°”: æ™´ ğŸ”† â€¢ å½“å‰æ¸©åº¦: 16Â°C â€¢ ä½“æ„Ÿæ¸©åº¦: 16Â°C<br><br>&lt;&lt; <a data-href="2023-10-16" href="\æ—¥è®°\2023-10-16.html" class="internal-link" target="_self" rel="noopener">2023-10-16</a> | <a data-href="2023-10-18" href="\æ—¥è®°\2023-10-18.html" class="internal-link" target="_self" rel="noopener">2023-10-18</a> &gt;&gt;]]></description><link>æ—¥è®°\2023-10-17.html</link><guid isPermaLink="false">æ—¥è®°/2023-10-17.md</guid><pubDate>Tue, 17 Oct 2023 13:12:32 GMT</pubDate><enclosure url="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310171037725.png" length="0" type="image/png"/><content:encoded>&lt;figure&gt;&lt;img src=&quot;https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310171037725.png&quot;&gt;&lt;/figure&gt;</content:encoded></item><item><title><![CDATA[2023-10-18]]></title><description><![CDATA[<a class="tag" href="?query=tag:sql" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#sql</a> <a class="tag" href="?query=tag:hive" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#hive</a> 
 <br><br>
<br>ğŸ¥³
<br>ğŸ˜­
<br>ğŸ¥°
<br>ğŸ˜
<br>ğŸ¥±
<br>å½“å‰æ¸©åº¦ï¼š18â„ƒ  å¤©æ°”ï¼šæ™´ æ¸©åº¦èŒƒå›´ï¼š17 ~ 23â„ƒ
æ¹¿åº¦ï¼š76% é£å‘ï¼šä¸œå—é£ 2çº§ ç´«å¤–çº¿ï¼šä¸­ç­‰
ç©ºæ°”è´¨é‡ï¼šè‰¯ PM: 17 æ—¥å‡º: 06:53 æ—¥è½: 18:23<br>ä¸€è¨€
 ä¸€è¾ˆå­ï¼Œèƒ½åšæŒåšå¥½ä¸€ä»¶äº‹å°±å¾ˆä¼Ÿå¤§äº†ï¼  â€”â€” ã€Šç½‘æ˜“äº‘éŸ³ä¹ã€‹ Â· æŸ¯é’Š
<br><br><br>æ—©ä¸Š ï¼š è°ƒæ•´obç•Œé¢å’Œä¸Šè¯¾
ä¸‹åˆ ï¼š hive sqlå­¦ä¹ <br><br>è®°å½•æ—¶é—´: 2023/10/18/2:07 PM å½“å‰å¤©æ°”: æ™´ ğŸ”† â€¢ å½“å‰æ¸©åº¦: 26Â°C â€¢ ä½“æ„Ÿæ¸©åº¦: 26Â°C
<a href=".?query=tag:sql" class="tag" target="_blank" rel="noopener">#sql</a> <a href=".?query=tag:hive" class="tag" target="_blank" rel="noopener">#hive</a> <br><br>
<br>union ï¼šå°†å¤šä¸ªç»“æœé›†åˆå¹¶ï¼Œå»é‡ï¼Œæ’åº 
<br>union all ï¼šå°†å¤šä¸ªç»“æœé›†åˆå¹¶ï¼Œä¸å»é‡ï¼Œä¸æ’åº
<br>-- å•ä¸ªunion è¯­å¥ä¸æ”¯æŒï¼šorderByã€clusterByã€distributeByã€sortByã€limit
-- å•ä¸ªunionè¯­å¥å­—æ®µçš„ä¸ªæ•°è¦æ±‚ç›¸åŒï¼Œå­—æ®µçš„é¡ºåºè¦æ±‚ç›¸åŒã€‚
å¦‚æœæƒ³å»é‡æŸ¥è¯¢ä¸­çš„æŸåˆ—æ•°æ®,å¯ä»¥ä½¿ç”¨ distinctå…³é”®å­—<br><br>ä»¥ä¸‹æ˜¯å¤æ‚åŸºæœ¬ç±»å‹:<br><br>ç‰¹æ®ŠåŸºæœ¬ç±»å‹
Javaä¸­æœ‰çš„è€ŒHiveä¸­æ²¡æœ‰çš„ï¼š<br>
<br>long 
<br>char 
<br>short 
<br>byte
<br><br>å¤æ‚ç±»å‹åˆ†ä¸ºä¸‰ç§,åˆ†åˆ«æ˜¯æ•°ç»„array,é”®å€¼å¯¹map,å’Œç»“æ„ä½“struc<br>Sqlarray : col array&lt;åŸºæœ¬ç±»å‹&gt; ,ä¸‹æ ‡ä»0å¼€å§‹ï¼Œè¶Šç•Œä¸æŠ¥é”™ï¼Œä»¥NULLä»£æ›¿ 
map : column map&lt;string,string&gt; 
struct: col struct
å¤åˆ¶<br><a data-tooltip-position="top" aria-label="Hive02.pdf > page=21&amp;selection=2,0,2,7" data-href="Hive02.pdf#page=21&amp;selection=2,0,2,7" href="\å¤§æ•°æ®\PDF\Hive02.pdf#page=21&amp;selection=2,0,2,7" class="internal-link" target="_self" rel="noopener">Hive02, page 21</a><br>è®°å½•æ—¶é—´: 2023/10/18/2:34 PM å½“å‰å¤©æ°”: æ™´ ğŸ”† â€¢ å½“å‰æ¸©åº¦: 27Â°C â€¢ ä½“æ„Ÿæ¸©åº¦: 27Â°C<br><br>Sql--è®¾ç½®æœ¬åœ°hive
set hive.exec.mode.local.auto=true;

å¤åˆ¶<br>åˆ›å»ºè¡¨<br>Sqlcreate table if not exists t_order(
name string,
orderdate string,
cost int
)
row format delimited fields terminated by ',';
å¤åˆ¶<br>å¯¼å…¥æ•°æ®<br>Sqlload data local inpath '/export/test/order.txt' into table t_order;
å¤åˆ¶<br>
<br>çª—å£å‡½æ•°åˆåå¼€çª—å‡½æ•°ï¼Œå±äºåˆ†æå‡½æ•°çš„ä¸€ç§ã€‚ç”¨äºè§£å†³å¤æ‚æŠ¥è¡¨ç»Ÿè®¡éœ€æ±‚çš„åŠŸèƒ½å¼ºå¤§çš„å‡½æ•°ã€‚çª—å£å‡½æ•°ç”¨äºè®¡ç®—åŸºäºç»„çš„æŸç§èšåˆå€¼ä¸€å®ƒå’Œèšåˆå‡½æ•°çš„ä¸åŒä¹‹å¤„æ˜¯ï¼šå¯¹äºæ¯ä¸ªç»„è¿”å›å¤šè¡Œï¼Œè€Œèšåˆå‡½æ•°å¯¹äºæ¯ä¸ªç»„åªè¿”å›ä¸€è¡Œã€‚
<br>å¼€çª—å‡½æ•°æŒ‡å®šäº†åˆ†æå‡½æ•°å·¥ä½œçš„æ•°æ®çª—å£å¤§å°ï¼Œè¿™ä¸ªæ•°æ®çª—å£å¤§å°å¯èƒ½ä¼šéšç€è¡Œçš„å˜åŒ–è€Œå˜åŒ–ã€‚
<br><br>ä½¿ç”¨çª—å£å‡½æ•°ä¹‹å‰ä¸€èˆ¬è¦é€šè¿‡over()è¿›è¡Œå¼€çª—ï¼Œç®€å•å¯ä»¥å†™æˆå‡½æ•°+overç®€å•çš„å†™æ³•å¦‚ä¸‹ï¼š<br>Sql--1.ä¸ä½¿ç”¨çª—å£å‡½æ•°
--æŸ¥è¯¢æ‰€æœ‰æ˜ç»†
select * from t order ;
#æŸ¥è¯¢æ€»é‡
select count ( * ) from t order :
--2.ä½¿ç”¨çª—å£å‡½æ•°
select * , count ( * ) over ( ) from t order ;
å¤åˆ¶<br>æ³¨æ„ï¼š
çª—å£å‡½æ•°æ˜¯é’ˆå¯¹æ¯ä¸€è¡Œæ•°æ®çš„.
å¦‚æœoverä¸­æ²¡æœ‰å‚æ•°ï¼Œé»˜è®¤çš„æ˜¯å…¨éƒ¨ç»“æœé›†
<br><br>Sqlselect *
from t_order
where substring(orderdate,1,7)='2018-1';

å¤åˆ¶<br><img alt="image.png" src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310181501218.png" referrerpolicy="no-referrer"><br>Sqlselect *,count(*) over()
 from t_order
 where substring(orderdate,1,7) = '2018-1';
å¤åˆ¶<br><img alt="image.png" src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310181509077.png" referrerpolicy="no-referrer"><br><br><br>Sqlselect * ,sum(cost) over(partition by month(orderdate)) from t_order;
å¤åˆ¶<br><img alt="image.png" src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310181517706.png" referrerpolicy="no-referrer"><br><br>Sqlselect * ,sum(cost) over(partition by month(orderdate) order by orderdate) from t_order;
å¤åˆ¶<br><img alt="image.png" src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310181520658.png" referrerpolicy="no-referrer"><br><br>
<br>PRECEDING:å¾€å‰
<br>FOLLOWING:å¾€å
<br>CURRENT ROW:å½“å‰è¡Œ
<br>UNBOUNDED:èµ·ç‚¹ï¼ŒPNBOUNDED PRECEDINGè¡¨ç¤ºä»å‰é¢çš„èµ·ç‚¹ï¼ŒUNBOUNDED FOLLOWING:è¡¨ç¤ºåˆ°åé¢çš„ç»ˆç‚¹
<br><img alt="image.png" src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310181520501.png" referrerpolicy="no-referrer"><br>ä¸€èˆ¬windowå­å¥éƒ½æ˜¯rowså¼€å¤´<br>ä¾‹å­ï¼š
<img alt="image.png" src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310181521120.png" referrerpolicy="no-referrer"><br>è®°å½•æ—¶é—´: 2023/10/18/3:22 PM å½“å‰å¤©æ°”: æ™´ ğŸ”† â€¢ å½“å‰æ¸©åº¦: 27Â°C â€¢ ä½“æ„Ÿæ¸©åº¦: 27Â°C<br><br>&lt;&lt; <a data-href="2023-10-17" href="\æ—¥è®°\2023-10-17.html" class="internal-link" target="_self" rel="noopener">2023-10-17</a> | <a data-href="2023-10-19" href="\æ—¥è®°\2023-10-19.html" class="internal-link" target="_self" rel="noopener">2023-10-19</a> &gt;&gt;]]></description><link>æ—¥è®°\2023-10-18.html</link><guid isPermaLink="false">æ—¥è®°/2023-10-18.md</guid><pubDate>Wed, 18 Oct 2023 07:33:19 GMT</pubDate><enclosure url="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310181501218.png" length="0" type="image/png"/><content:encoded>&lt;figure&gt;&lt;img src=&quot;https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310181501218.png&quot;&gt;&lt;/figure&gt;</content:encoded></item><item><title><![CDATA[2023-10-19]]></title><description><![CDATA[<a class="tag" href="?query=tag:java" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#java</a> 
 <br><br>
<br>ğŸ¥³
<br>ğŸ˜­
<br>ğŸ¥°
<br>ğŸ˜
<br>ğŸ¥±
<br>å½“å‰æ¸©åº¦ï¼š24â„ƒ  å¤©æ°”ï¼šé˜´ æ¸©åº¦èŒƒå›´ï¼š13 ~ 24â„ƒ
æ¹¿åº¦ï¼š61% é£å‘ï¼šåŒ—é£ 1çº§ ç´«å¤–çº¿ï¼šå¾ˆå¼±
ç©ºæ°”è´¨é‡ï¼šè‰¯ PM: 14 æ—¥å‡º: 06:54 æ—¥è½: 18:22<br>ä¸€è¨€
 å‘ï¼Œåšäººå‘¢ï¼Œæœ€é‡è¦çš„æ˜¯å¼€å¿ƒï¼Œä½ é¥¿ä¸é¥¿ï¼Œæˆ‘ç…®ç¢—é¢ç»™ä½ åƒå•Šã€‚  â€”â€” ã€Šå¤§å†…å¯†æ¢é›¶é›¶å‘ã€‹ Â· å‘¨æ˜Ÿé©°
<br><br><br>æ—©ä¸Šä¸Šè¯¾ï¼š
ä¸‹åˆçœ‹ç‚¹è§†é¢‘
è®°å½•æ—¶é—´: 2023/10/19/2:23 PM å½“å‰å¤©æ°”: å¤šäº‘ ğŸŒ¥ï¸ â€¢ å½“å‰æ¸©åº¦: 28Â°C â€¢ ä½“æ„Ÿæ¸©åº¦: 28Â°C
æˆ‘å¥½æƒ³ä½ <br><br><br><a href=".?query=tag:java" class="tag" target="_blank" rel="noopener">#java</a>
<a data-tooltip-position="top" aria-label="https://www.bilibili.com/video/BV15H4y1f78A/?spm_id_from=333.1007.tianma.1-1-1.click&amp;vd_source=43e56318cc2b14ddb96ad55ad99d99df" rel="noopener" class="external-link" href="https://www.bilibili.com/video/BV15H4y1f78A/?spm_id_from=333.1007.tianma.1-1-1.click&amp;vd_source=43e56318cc2b14ddb96ad55ad99d99df" target="_blank">ä¸€å°æ—¶å­¦å®ŒJavaè®¾è®¡æ¨¡å¼_å“”å“©å“”å“©_bilibili</a>
<a data-tooltip-position="top" aria-label="é‡å­¦Javaè®¾è®¡æ¨¡å¼.pdf > page=7&amp;selection=0,0,0,3" data-href="é‡å­¦Javaè®¾è®¡æ¨¡å¼.pdf#page=7&amp;selection=0,0,0,3" href="\Java\PDF\é‡å­¦Javaè®¾è®¡æ¨¡å¼.pdf#page=7&amp;selection=0,0,0,3" class="internal-link" target="_self" rel="noopener">é‡å­¦Javaè®¾è®¡æ¨¡å¼, page 7</a><br>ä»Šå¤©æ˜å¤©å°±ä¼‘æ¯ä¸€ä¸‹<br><br>&lt;&lt; <a data-href="2023-10-18" href="\æ—¥è®°\2023-10-18.html" class="internal-link" target="_self" rel="noopener">2023-10-18</a> | <a data-href="2023-10-20" href="\2023-10-20" class="internal-link" target="_self" rel="noopener">2023-10-20</a> &gt;&gt;]]></description><link>æ—¥è®°\2023-10-19.html</link><guid isPermaLink="false">æ—¥è®°/2023-10-19.md</guid><pubDate>Sat, 21 Oct 2023 06:55:11 GMT</pubDate></item><item><title><![CDATA[2023-10-21]]></title><description><![CDATA[<a class="tag" href="?query=tag:java" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#java</a> 
 <br><br>
<br>ğŸ¥³
<br>ğŸ˜­
<br>ğŸ¥°
<br>ğŸ˜
<br>ğŸ¥±
<br>å½“å‰æ¸©åº¦ï¼š20â„ƒ  å¤©æ°”ï¼šæ™´ æ¸©åº¦èŒƒå›´ï¼š10 ~ 21â„ƒ
æ¹¿åº¦ï¼š35% é£å‘ï¼šè¥¿åŒ—é£ 2çº§ ç´«å¤–çº¿ï¼šå¼º
ç©ºæ°”è´¨é‡ï¼šä¼˜ PM: 7 æ—¥å‡º: 06:55 æ—¥è½: 18:20<br>ä¸€è¨€
 å˜å¥½çš„è¿‡ç¨‹éƒ½ä¸å¤ªèˆ’æœï¼Œè¯•è¯•å†åŠªåŠ›ç‚¹ã€‚  â€”â€” ã€Šç½‘æ˜“äº‘éŸ³ä¹ã€‹ Â· pony
<br><br><br>æ—©ä¸Š ï¼š è®¡ç®—æœºç½‘ç»œ
ä¸‹åˆ ï¼š å¼€å§‹ <a href=".?query=tag:java" class="tag" target="_blank" rel="noopener">#java</a> å­¦ä¹ <br><br><br>Servletå®šä¹‰ï¼šServletæ˜¯åŸºäºJavaæŠ€æœ¯çš„Webç»„ä»¶ï¼Œç”±å®¹å™¨ç®¡ç†å¹¶äº§ç”ŸåŠ¨æ€çš„å†…å®¹ã€‚Servletä¸å®¢æˆ·ç«¯é€šè¿‡Servlet
å®¹å™¨å®ç°çš„è¯·æ±‚/å“åº”æ¨¡å‹è¿›è¡Œäº¤äº’ã€‚<br><br>Ajaxå³Asynchronous Javascript And XML(å¼‚æ­¥JavaScriptå’ŒXML)åœ¨2005å¹´è¢«Jesse James Garrettæå‡ºçš„æ–°æœ¯è¯­ï¼Œç”¨æ¥æè¿°ä¸€ç§ä½¿ç”¨ç°æœ‰æŠ€æœ¯é›†åˆçš„æ–°æ–¹æ³•ï¼ŒåŒ…æ‹¬ï¼šHTMLæˆ–XHTML,CSS,JavaScript,DOM,XML,
XSLT,ä»¥åŠæœ€é‡è¦çš„XMLHttpRequestã€‚ä½¿ç”¨AjaxæŠ€æœ¯ç½‘é¡µåº”ç”¨èƒ½å¤Ÿå¿«é€Ÿåœ°å°†å¢é‡æ›´æ–°å‘ˆç°åœ¨ç”¨æˆ·ç•Œé¢ä¸Šï¼Œè€Œä¸éœ€è¦é‡è½½ï¼ˆåˆ·æ–°ï¼‰æ•´ä¸ªé¡µé¢ï¼Œè¿™ä½¿å¾—ç¨‹åºèƒ½å¤Ÿæ›´å¿«åœ°å›åº”ç”¨æˆ·çš„æ“ä½œã€‚<br><br>è®°å½•æ—¶é—´: 2023/10/21/4:41 PM å½“å‰å¤©æ°”: æ™´ ğŸ”† â€¢ å½“å‰æ¸©åº¦: 17Â°C â€¢ ä½“æ„Ÿæ¸©åº¦: 17Â°C
å®˜ç½‘<a data-tooltip-position="top" aria-label="https://mybatis.org/mybatis-3/zh/getting-started.html" rel="noopener" class="external-link" href="https://mybatis.org/mybatis-3/zh/getting-started.html" target="_blank">mybatis â€“ MyBatis 3 | å…¥é—¨</a><br>å¯¹äºideaæ¥è¯´åˆ›å»ºä¸€ä¸ªmybatiså·¥ç¨‹ è¦å…ˆå¯¼åŒ…<br>Xml&lt;dependency&gt;  
  &lt;groupId&gt;org.mybatis&lt;/groupId&gt;  
  &lt;artifactId&gt;mybatis&lt;/artifactId&gt;  
  &lt;version&gt;3.5.3&lt;/version&gt;  
&lt;/dependency&gt;  
&lt;dependency&gt;  
  &lt;groupId&gt;mysql&lt;/groupId&gt;  
  &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;  
  &lt;version&gt;8.0.30&lt;/version&gt;  
&lt;/dependency&gt;
å¤åˆ¶<br>æ•°æ®åº“çš„åŒ…é€‰æ‹©å¯¹åº”ç‰ˆæœ¬å°±è¡Œ
é¡¹ç›®ç»“æœå›¾ï¼š
<img alt="image.png" src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310211644578.png" referrerpolicy="no-referrer"><br><br>ä¸»è¦å­—æ®µ<br>Sqlid int 
name string
age int
å¤åˆ¶<br><br>è¦ä½¿ç”¨mybatiså°±è¦å…ˆåˆ›å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶ åœ¨å®˜ç½‘è¿›è¡Œå¤åˆ¶<br>Xml&lt;?xml version="1.0" encoding="UTF-8" ?&gt;  
&lt;!DOCTYPE configuration  
        PUBLIC "-//mybatis.org//DTD Config 3.0//EN"  
        "https://mybatis.org/dtd/mybatis-3-config.dtd"&gt;  
&lt;configuration&gt;  
    &lt;environments default="development"&gt;  
        &lt;environment id="development"&gt;  
            &lt;transactionManager type="JDBC"/&gt;  
            &lt;dataSource type="POOLED"&gt;  
                &lt;property name="driver" value="com.mysql.jdbc.Driver"/&gt;  
                &lt;property name="url" value="jdbc:mysql://127.0.0.1:3306/java_2023?serverTimezone=GMT%2B8"/&gt;  
                &lt;property name="username" value="root"/&gt;  
                &lt;property name="password" value="1234"/&gt;  
            &lt;/dataSource&gt;  
        &lt;/environment&gt;  
    &lt;/environments&gt;  
    &lt;mappers&gt;  
        &lt;mapper resource="mapper/userMapper.xml"/&gt;  
    &lt;/mappers&gt;  
&lt;/configuration&gt;
å¤åˆ¶<br><br>Javapackage com.lfl.entity;  
  
/**  
 * @author å¶æ˜Ÿç—•  
 * @data 2023/10/21 16:19  
 * æ–‡ä»¶å : UserEntity  
 * æè¿° :  
 */public class UserEntity {  
private int id;  
private String name;  
private Integer age;  
  
    public void setId(int id) {  
        this.id = id;  
    }  
  
    @Override  
    public String toString() {  
        return "UserEntity{" +  
                "id=" + id +  
                ", name='" + name + '\'' +  
                ", age=" + age +  
                '}';  
    }  
  
    public void setName(String name) {  
        this.name = name;  
    }  
  
    public void setAge(Integer age) {  
        this.age = age;  
    }  
  
    public int getId() {  
        return id;  
    }  
  
    public String getName() {  
        return name;  
    }  
  
    public Integer getAge() {  
        return age;  
    }  
}
å¤åˆ¶<br><br>å¯¹äºæˆ‘ä»¬è¦æ“ä½œè¿›è¡Œmybatis è¦è¿›è¡Œmapperæ–‡ä»¶è¿›è¡Œé…ç½® éƒ½å¯ä»¥åœ¨å®˜ç½‘å¤åˆ¶<br>Xml&lt;?xml version="1.0" encoding="UTF-8" ?&gt;  
&lt;!DOCTYPE mapper  
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;  
&lt;mapper namespace="FirstTest"&gt;  
    &lt;select id="getByUsersAll" resultType="com.lfl.entity.UserEntity"&gt;  
        select * from java_2023.test_users  
    &lt;/select&gt;  
&lt;/mapper&gt;
å¤åˆ¶<br>æœ€åæµ‹è¯•ç±»çš„åˆ›å»º<br>Javaimport com.lfl.entity.UserEntity;  
import org.apache.ibatis.io.Resources;  
import org.apache.ibatis.session.SqlSessionFactory;  
import org.apache.ibatis.session.SqlSessionFactoryBuilder;  
  
import java.io.IOException;  
import java.io.InputStream;  
import java.util.List;  
  
/**  
 * @author å¶æ˜Ÿç—•  
 * @data 2023/10/21 16:24  
 * æ–‡ä»¶å : Test01  
 * æè¿° :æµ‹è¯•mybatis-config.xmlæ˜¯å¦èƒ½å¤Ÿè¢«è¯»å–  
 */  
public class Test01 {  
    public static void main(String[] args) throws IOException {  
        // mybatis-config.xml ç›®å½•ä½ç½®  
        String resource = "mybatis-config.xml";  
        //1.è§£æmybatis-config.xm2å¾—åˆ°æ•°æ®åº“ç›¸å…³çš„é…ç½®ä¿¡æ¯  
        InputStream inputStream = Resources.getResourceAsStream(resource);  
        //2.åˆ›å»ºå¾—åˆ°ä¸€ä¸ªsqLSessionFactory  
        SqlSessionFactory sql = new SqlSessionFactoryBuilder().build(inputStream);  
        //æŸ¥è¯¢æ•°æ®åº“çš„æ•°æ®  
        List&lt;UserEntity&gt; users = sql.openSession().selectList("getByUsersAll","com.lfl.entity.UserEntity");  
        //æ‰“å°æŸ¥è¯¢ç»“æœ  
        System.out.println(users);  
    }  
}
å¤åˆ¶<br>åœ¨ä»£ç ç¼–å†™çš„è¿‡ç¨‹ä¸­ç»™çš„ç±»æœ€å¥½æ˜¯ å®Œæ•´è·¯å¾„ çš„åç§°
ä¾‹å¦‚<br>Javacom.lfl.entity.UserEntity
å¤åˆ¶<br>ç»“æœï¼š
<img alt="image.png" src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310211650367.png" referrerpolicy="no-referrer"><br><br>æ–¹å¼1ï¼š
é€šè¿‡ as è¿›è¡Œåå‘æ³¨è§£  <br>æ–¹å¼2ï¼š
resultMap
å®šä¹‰æ•°æ®åº“è¡¨ä¸­å­—æ®µåç§°ä¸ç±»ä¸­æˆå‘˜å±æ€§åç§°å…³è”æ˜ å°„
æ•°æ®åº“å­—æ®µï¼šflight_id---ç±»ä¸­æˆå‘˜åç§°flightld
å®šä¹‰æ•°æ®åº“ä¸­å­—æ®µåç§°ä¸æˆ‘ä»¬ç±»ä¸­æˆå‘˜å±æ€§å€¼å…³è”æ˜ å°„<br><br>namespace+id
å…¨å±€å”¯ä¸€<br><br>Sqlcreate table test_student_complex  
(  
    student_id   int auto_increment  
        primary key,  
    student_name varchar(20) not null,  
    student_age  int         not null  
);
å¤åˆ¶<br><br>Sqlpackage com.lfl.entity;  
  
/**  
 * @author å¶æ˜Ÿç—•  
 * @data 2023/10/21 17:41  
 * æ–‡ä»¶å : StudentEntity  
 * æè¿° :  
 */public class StudentEntity {  
    private Integer studentId;  
  
    @Override  
    public String toString() {  
        return "StudentEntity{" +  
                "studentId=" + studentId +  
                ", studentName='" + studentName + '\'' +  
                ", studentAge=" + studentAge +  
                '}';  
    }  
  
    public Integer getStudentId() {  
        return studentId;  
    }  
  
    public void setStudentId(Integer studentId) {  
        this.studentId = studentId;  
    }  
  
    public String getStudentName() {  
        return studentName;  
    }  
  
    public void setStudentName(String studentName) {  
        this.studentName = studentName;  
    }  
  
    public Integer getStudentAge() {  
        return studentAge;  
    }  
  
    public void setStudentAge(Integer studentAge) {  
        this.studentAge = studentAge;  
    }  
  
    private String studentName;  
    private Integer studentAge;  
}
å¤åˆ¶<br><br>Javapackage com.lfl.mapper;  
  
import com.lfl.entity.StudentEntity;  
  
import java.util.List;  
  
public interface StudentMapper {  
    List&lt;StudentEntity&gt; SelectALL();  
}
å¤åˆ¶<br><br>Javapackage com.lfl.service;  
  
import com.lfl.entity.StudentEntity;  
import com.lfl.mapper.StudentMapper;  
import org.apache.ibatis.io.Resources;  
import org.apache.ibatis.session.SqlSessionFactory;  
import org.apache.ibatis.session.SqlSessionFactoryBuilder;  
  
import java.io.IOException;  
import java.io.InputStream;  
import java.util.List;  
  
/**  
 * @author å¶æ˜Ÿç—•  
 * @data 2023/10/21 17:54  
 * æ–‡ä»¶å : StudentService  
 * æè¿° :  
 */public class StudentService {  
    private StudentMapper studentmapper;  
    public StudentService() throws IOException {  
        // mybatis-config.xml ç›®å½•ä½ç½®  
        String resource = "mybatis-config.xml";  
        //1.è§£æmybatis-config.xm2å¾—åˆ°æ•°æ®åº“ç›¸å…³çš„é…ç½®ä¿¡æ¯  
        InputStream inputStream = Resources.getResourceAsStream(resource);  
        //2.åˆ›å»ºå¾—åˆ°ä¸€ä¸ªsqLSessionFactory  
        SqlSessionFactory sql = new SqlSessionFactoryBuilder().build(inputStream);  
        //3.è·å–åˆ°sqLSession  
        studentmapper = sql.openSession().getMapper(StudentMapper.class);  
    }  
    public List&lt;StudentEntity&gt; SelectALL(){  
        return studentmapper.SelectALL();  
    }  
}
å¤åˆ¶<br><br>Xml&lt;?xml version="1.0" encoding="UTF-8" ?&gt;  
&lt;!DOCTYPE mapper  
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;  
&lt;mapper namespace="com.lfl.mapper.StudentMapper"&gt;  
  
    &lt;resultMap id="studentMap" type="com.lfl.entity.StudentEntity"&gt;  
        &lt;id column="student_id" property="studentId"/&gt;  
        &lt;result column="student_name" property="studentName"/&gt;  
        &lt;result column="student_age" property="studentAge"/&gt;  
    &lt;/resultMap&gt;  
  
    &lt;select id="SelectALL" resultMap="studentMap"&gt;  
        select * from java_2023.test_student_complex  
    &lt;/select&gt;  
  
&lt;/mapper&gt;
å¤åˆ¶<br><br>Javaimport com.lfl.entity.StudentEntity;  
import com.lfl.service.StudentService;  
  
import java.io.IOException;  
import java.util.List;  
  
/**  
 * @author å¶æ˜Ÿç—•  
 * @data 2023/10/21 18:01  
 * æ–‡ä»¶å : TestStudent  
 * æè¿° :  
 */public class TestStudent {  
    public static void main(String[] args) throws IOException {  
        StudentService studentService = new StudentService();  
        List&lt;StudentEntity&gt; students = studentService.SelectALL();  
        for (StudentEntity student : students) {  
            System.out.println(student);  
        }  
    }  
}
å¤åˆ¶<br><img alt="image.png" src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310211811039.png" referrerpolicy="no-referrer"><br><br>select:            æ˜ å°„æŸ¥è¯¢è¯­å¥
insert:            æ˜ å°„æ’å…¥è¯­å¥
update:          æ˜ å°„æ›´æ–°è¯­å¥
delete:           æ˜ å°„åˆ é™¤è¯­å¥
sql:                å¯ä»¥é‡ç”¨çš„sqlä»£ç å—
resultMap:    æœ€å¤æ‚ï¼Œæœ€æœ‰åŠ›é‡çš„å…ƒç´ ï¼Œç”¨æ¥æè¿°å¦‚ä½•ä»æ•°æ®åº“ç»“æœé›†ä¸­åŠ è½½ä½ çš„å¯¹è±¡
cache:           é…ç½®ç»™å®šå‘½åç©ºé—´çš„ç¼“å­˜
cache-ref:     ä»å…¶ä»–å‘½åç©ºé—´å¼•ç”¨ç¼“å­˜é…ç½®<br><br>ç¬¬ä¸€ç§æ–¹æ³•:ä¼ é€’mapå‹ï¼›
ç¬¬ä¸€ç§æ–¹æ³•ï¼šå¤šä¸ªå‚æ•°å¦‚æœä¸å°è£…æˆMapå‚æ•°å€¼éœ€è¦é€šè¿‡ï¼Œå¤šä¸ªå‚æ•°çš„æ—¶å€™è¦ä½¿ç”¨@Paramç»™æŒ‡å®šå‚æ•°ï¼Œå¦åˆ™ä¼šå‡ºç°æ‰¾ä¸åˆ°å‚æ•°çš„é”™è¯¯
ç¬¬ä¸‰ç§æ–¹æ³•ï¼šä¼ é€’pojo;<br><br><br>Javapackage com.lfl.entity;  
  
/**  
 * @author å¶æ˜Ÿç—•  
 * @data 2023/10/21 17:41  
 * æ–‡ä»¶å : StudentEntity  
 * æè¿° :  
 */public class StudentEntity {  
    private Integer studentId;  
    private String studentName;  
    private Integer studentAge;  
  
    @Override  
    public String toString() {  
        return "StudentEntity{" +  
                "studentId=" + studentId +  
                ", studentName='" + studentName + '\'' +  
                ", studentAge=" + studentAge +  
                '}';  
    }  
  
    public Integer getStudentId() {  
        return studentId;  
    }  
  
    public StudentEntity() {  
    }  
    public StudentEntity(String studentName, Integer studentAge) {  
        this.studentName = studentName;  
        this.studentAge = studentAge;  
    }  
  
    public void setStudentId(Integer studentId) {  
        this.studentId = studentId;  
    }  
  
    public String getStudentName() {  
        return studentName;  
    }  
  
    public void setStudentName(String studentName) {  
        this.studentName = studentName;  
    }  
  
    public Integer getStudentAge() {  
        return studentAge;  
    }  
  
    public void setStudentAge(Integer studentAge) {  
        this.studentAge = studentAge;  
    }  

}
å¤åˆ¶<br><br>Javapackage com.lfl.mapper;  
  
import com.lfl.entity.StudentEntity;  
import org.apache.ibatis.annotations.Mapper;  
import org.apache.ibatis.annotations.Param;  
  
import java.util.List;  
import java.util.Map;  
  
public interface StudentMapper {  
    List&lt;StudentEntity&gt; selectALL();  
    StudentEntity selectById(Integer id);  
  
    int insertStudent(StudentEntity student);  
  
    int deleteStudent(Integer id);  
  
    int updateStudent(StudentEntity student);  
  
    List&lt;StudentEntity&gt; selectMore(@Param("studentName") String studentName, @Param("studentAge") Integer studentAge);  
  
    List&lt;StudentEntity&gt; selectMorePoJo(StudentEntity student);  
  
    List&lt;StudentEntity&gt; dynamicQuery(StudentEntity student);  
}
å¤åˆ¶<br><br>Javapackage com.lfl.service;  
  
import com.lfl.entity.StudentEntity;  
import com.lfl.mapper.StudentMapper;  
import org.apache.ibatis.annotations.Param;  
import org.apache.ibatis.io.Resources;  
import org.apache.ibatis.session.SqlSession;  
import org.apache.ibatis.session.SqlSessionFactory;  
import org.apache.ibatis.session.SqlSessionFactoryBuilder;  
  
import java.io.IOException;  
import java.io.InputStream;  
import java.util.List;  
import java.util.Map;  
  
/**  
 * @author å¶æ˜Ÿç—•  
 * @data 2023/10/21 17:54  
 * æ–‡ä»¶å : StudentService  
 * æè¿° :  
 */public class StudentService {  
    private StudentMapper studentmapper;  
    private SqlSession sqlSession;  
    public StudentService() throws IOException {  
        // mybatis-config.xml ç›®å½•ä½ç½®  
        String resource = "mybatis-config.xml";  
        //1.è§£æmybatis-config.xm2å¾—åˆ°æ•°æ®åº“ç›¸å…³çš„é…ç½®ä¿¡æ¯  
        InputStream inputStream = Resources.getResourceAsStream(resource);  
        //2.åˆ›å»ºå¾—åˆ°ä¸€ä¸ªsqLSessionFactory  
        SqlSessionFactory sql = new SqlSessionFactoryBuilder().build(inputStream);  
        //3.è·å–åˆ°sqLSession  
        sqlSession = sql.openSession();  
        studentmapper = sqlSession.getMapper(StudentMapper.class);  
    }  
    public List&lt;StudentEntity&gt; selectALL(){  
        return studentmapper.selectALL();  
    }  
  
    public StudentEntity selectById(Integer id){  
        return studentmapper.selectById(id);  
    }  
  
    public int insertStudent(StudentEntity student){  
        int result = studentmapper.insertStudent(student);  
        sqlSession.commit(); //æäº¤äº‹åŠ¡  
        return result;  
    }  
  
    public int deleteStudent(Integer id){  
        int result = studentmapper.deleteStudent(id);  
        sqlSession.commit(); //æäº¤äº‹åŠ¡  
        return result;  
    }  
  
    public int updateStudent(StudentEntity student){  
        int result = studentmapper.updateStudent(student);  
        sqlSession.commit(); //æäº¤äº‹åŠ¡  
        return result;  
    }  
  
    public List&lt;StudentEntity&gt; selectMore(@Param("studentName") String studentName, @Param("studentAge") Integer studentAge) {  
        return studentmapper.selectMore(studentName,studentAge);  
    }  
  
    public List&lt;StudentEntity&gt; selectMorePoJo(StudentEntity student) {  
        return studentmapper.selectMorePoJo(student);  
    }  
  
    public List&lt;StudentEntity&gt; dynamicQuery(StudentEntity student) {  
        return studentmapper.dynamicQuery(student);  
    }  
}
å¤åˆ¶<br><br>Xml&lt;?xml version="1.0" encoding="UTF-8" ?&gt;  
&lt;!DOCTYPE mapper  
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;  
&lt;mapper namespace="com.lfl.mapper.StudentMapper"&gt;  
  
    &lt;resultMap id="studentMap" type="com.lfl.entity.StudentEntity"&gt;  
        &lt;id column="student_id" property="studentId"/&gt;  
        &lt;result column="student_name" property="studentName"/&gt;  
        &lt;result column="student_age" property="studentAge"/&gt;  
    &lt;/resultMap&gt;  
  
    &lt;select id="selectALL" resultMap="studentMap"&gt;  
        select * from java_2023.test_student_complex  
    &lt;/select&gt;  
  
    &lt;select id="selectById"  parameterType="int" resultMap="studentMap"&gt;  
        select * from java_2023.test_student_complex where student_id = #{studentId}  
    &lt;/select&gt;  
  
    &lt;insert id="insertStudent" parameterType="com.lfl.entity.StudentEntity"&gt;  
        insert into java_2023.test_student_complex(student_name,student_age)  
        values(#{studentName},#{studentAge})  
    &lt;/insert&gt;  
  
    &lt;delete id="deleteStudent" parameterType="int"&gt;  
        delete from java_2023.test_student_complex where student_id = #{studentId}  
    &lt;/delete&gt;  
  
    &lt;delete id="updateStudent" parameterType="com.lfl.entity.StudentEntity"&gt;  
        update java_2023.test_student_complex  
        set student_name = #{studentName},student_age = #{studentAge}  
        where student_id = #{studentId}  
    &lt;/delete&gt;  
  
    &lt;select id="selectMore" resultMap="studentMap"&gt;  
        select * from java_2023.test_student_complex  
        where student_name=#{studentName} and student_age=#{studentAge}    &lt;/select&gt;  
  
    &lt;select id="selectMorePoJo" parameterType="com.lfl.entity.StudentEntity" resultMap="studentMap"&gt;  
        select * from java_2023.test_student_complex  
        where student_name like concat('%',#{studentName},'%') and student_age=#{studentAge}    &lt;/select&gt;  
  
&lt;!--    dynamicQuery--&gt;  
    &lt;select id="dynamicQuery" parameterType="com.lfl.entity.StudentEntity" resultMap="studentMap"&gt;  
        select * from java_2023.test_student_complex  
        &lt;where&gt;  
            &lt;if test="studentName != null and studentName != ''"&gt;  
                and student_name like concat('%',#{studentName},'%')  
            &lt;/if&gt;  
            &lt;if test="studentAge != null and studentAge != ''"&gt;  
                and student_age = #{studentAge}  
            &lt;/if&gt;  
        &lt;/where&gt;  
    &lt;/select&gt;  
&lt;/mapper&gt;
å¤åˆ¶<br><br>Javaimport com.lfl.entity.StudentEntity;  
import com.lfl.service.StudentService;  
import org.junit.Test;  
  
import java.io.IOException;  
import java.util.HashMap;  
import java.util.List;  
import java.util.Map;  
  
/**  
 * @author å¶æ˜Ÿç—•  
 * @data 2023/10/21 18:01  
 * æ–‡ä»¶å : TestStudent  
 * æè¿° :  
 */public class TestStudent {  
  
    @Test//æµ‹è¯•æŸ¥è¯¢æ‰€æœ‰  
    public void test1() throws IOException {  
        StudentService studentService = new StudentService();  
        List&lt;StudentEntity&gt; students = studentService.selectALL();  
        for (StudentEntity student : students) {  
            System.out.println(student);  
        }  
    }  
  
    @Test//æµ‹è¯•æ ¹æ®idæŸ¥è¯¢  
    public void  test2() throws IOException {  
        StudentService studentService = new StudentService();  
        StudentEntity student = studentService.selectById(3);  
        System.out.println(student);  
    }  
  
    @Test//æµ‹è¯•æ’å…¥  
    public void test3() throws IOException {  
        StudentService studentService = new StudentService();  
        StudentEntity student = new StudentEntity();  
        student.setStudentName("æœ±æ©è´¢");  
        student.setStudentAge(20);  
        int i = studentService.insertStudent(student);  
        if (i&gt;0){  
            System.out.println("æ’å…¥æˆåŠŸ");  
        }else {  
            System.out.println("æ’å…¥å¤±è´¥");  
        }  
    }  
  
    @Test//æµ‹è¯•åˆ é™¤  
    public void test4() throws IOException {  
        StudentService studentService = new StudentService();  
        int i = studentService.deleteStudent(14);  
        if (i&gt;0){  
            System.out.println("åˆ é™¤æˆåŠŸ");  
        }else {  
            System.out.println("åˆ é™¤å¤±è´¥");  
        }  
    }  
  
    @Test//æµ‹è¯•ä¿®æ”¹  
    public void test5() throws IOException {  
        StudentService studentService = new StudentService();  
        StudentEntity student = new StudentEntity();  
        student.setStudentId(1);  
        student.setStudentName("æœ±æ©è´¢");  
        student.setStudentAge(20);  
        int i = studentService.updateStudent(student);  
        if (i&gt;0){  
            System.out.println("ä¿®æ”¹æˆåŠŸ");  
        }else {  
            System.out.println("ä¿®æ”¹å¤±è´¥");  
        }  
    }  
  
    @Test//æµ‹è¯•å¤šæ¡ä»¶æŸ¥è¯¢  
    public void test6() throws IOException {  
        StudentService studentService = new StudentService();  
        List&lt;StudentEntity&gt; student = studentService.selectMore("æœ±æ©è´¢", 20);  
        for (StudentEntity studentEntity : student) {  
            System.out.println(studentEntity);  
        }  
    }  
  
    @Test//æµ‹è¯•å¤šæ¡ä»¶æŸ¥è¯¢  
    public void test7() throws IOException {  
        StudentService studentService = new StudentService();  
        StudentEntity student = new StudentEntity();  
        student.setStudentName("æœ±æ©è´¢");  
        student.setStudentAge(20);  
        List&lt;StudentEntity&gt; studentEntities = studentService.selectMorePoJo(student);  
        for (StudentEntity studentEntity : studentEntities) {  
            System.out.println(studentEntity);  
        }  
    }  
  
    @Test//æµ‹è¯•åŠ¨æ€æŸ¥è¯¢  
    public void test8() throws IOException {  
        StudentService studentService = new StudentService();  
        StudentEntity student = new StudentEntity();  
        student.setStudentName("æœ±æ©è´¢");  
        List&lt;StudentEntity&gt; studentEntities = studentService.dynamicQuery(student);  
        for (StudentEntity studentEntity : studentEntities) {  
            System.out.println(studentEntity);  
        }  
    }  
}
å¤åˆ¶<br><br>å¤šçœ‹å¤šæŠ¥é”™å°±å›äº†ï¼Œå°¤å…¶æ˜¯è®°å¾—è¦å†™ç±»å‹çš„å‚æ•°<br><br>&lt;&lt; <a data-href="2023-10-20" href="\2023-10-20" class="internal-link" target="_self" rel="noopener">2023-10-20</a> | <a data-href="2023-10-22" href="\æ—¥è®°\2023-10-22.html" class="internal-link" target="_self" rel="noopener">2023-10-22</a> &gt;&gt;]]></description><link>æ—¥è®°\2023-10-21.html</link><guid isPermaLink="false">æ—¥è®°/2023-10-21.md</guid><pubDate>Sat, 21 Oct 2023 13:24:51 GMT</pubDate><enclosure url="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310211644578.png" length="0" type="image/png"/><content:encoded>&lt;figure&gt;&lt;img src=&quot;https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310211644578.png&quot;&gt;&lt;/figure&gt;</content:encoded></item><item><title><![CDATA[2023-10-22]]></title><description><![CDATA[ 
 <br><br>
<br>ğŸ¥³
<br>ğŸ˜­
<br>ğŸ¥°
<br>ğŸ˜
<br>ğŸ¥±
<br>å½“å‰æ¸©åº¦ï¼š19â„ƒ  å¤©æ°”ï¼šæ™´ æ¸©åº¦èŒƒå›´ï¼š8 ~ 22â„ƒ
æ¹¿åº¦ï¼š52% é£å‘ï¼šå—é£ 1çº§ ç´«å¤–çº¿ï¼šæ— 
ç©ºæ°”è´¨é‡ï¼šè‰¯ PM: 19 æ—¥å‡º: 06:56 æ—¥è½: 18:19<br>ä¸€è¨€
 æ— èŠçš„å¹¶ä¸æ˜¯æ—¶é—´ï¼Œè€Œæ˜¯å¹³åº¸æ— å¥‡çš„æˆ‘ã€‚  â€”â€” ã€Šæ¨±èŠ±åº„çš„å® ç‰©å¥³å­©ã€‹ Â· æ¨±èŠ±åº„çš„å® ç‰©å¥³å­©â€‹
<br><br><br>ç»ƒè½¦è·‘å…¨ç¨‹<br><br><br>&lt;&lt; <a data-href="2023-10-21" href="\æ—¥è®°\2023-10-21.html" class="internal-link" target="_self" rel="noopener">2023-10-21</a> | <a data-href="2023-10-23" href="\æ—¥è®°\2023-10-23.html" class="internal-link" target="_self" rel="noopener">2023-10-23</a> &gt;&gt;]]></description><link>æ—¥è®°\2023-10-22.html</link><guid isPermaLink="false">æ—¥è®°/2023-10-22.md</guid><pubDate>Sun, 22 Oct 2023 12:53:52 GMT</pubDate></item><item><title><![CDATA[2023-10-23]]></title><description><![CDATA[<a class="tag" href="?query=tag:java" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#java</a> 
 <br><br>
<br>ğŸ¥³
<br>ğŸ˜­
<br>ğŸ¥°
<br>ğŸ˜
<br>ğŸ¥±
<br>å½“å‰æ¸©åº¦ï¼š15â„ƒ  å¤©æ°”ï¼šæ™´ æ¸©åº¦èŒƒå›´ï¼š12 ~ 25â„ƒ
æ¹¿åº¦ï¼š73% é£å‘ï¼šå—é£ 2çº§ ç´«å¤–çº¿ï¼šå¾ˆå¼±
ç©ºæ°”è´¨é‡ï¼šè‰¯ PM: 22 æ—¥å‡º: 06:56 æ—¥è½: 18:18<br>ä¸€è¨€
 äººé—´å¿½æ™šï¼Œå±±æ²³å·²ç§‹ã€‚  â€”â€” ã€Šäººé—´å¿½æ™šã€‹ Â· äº¦æ²«ä¸åƒé±¼
<br><br><br><a href=".?query=tag:java" class="tag" target="_blank" rel="noopener">#java</a><br><br>è®°å½•æ—¶é—´: 2023/10/23/9:36 AM å½“å‰å¤©æ°”: æ™´ ğŸ”† â€¢ å½“å‰æ¸©åº¦: 22Â°C â€¢ ä½“æ„Ÿæ¸©åº¦: 22Â°C
å­¦ä¹ springå’Œè¡¥å‰é¢çš„æŸ¥ç¼ºè¡¥æ¼<br>è®°å½•æ—¶é—´: 2023/10/23/1:36 PM å½“å‰å¤©æ°”: æ™´ ğŸ”† â€¢ å½“å‰æ¸©åº¦: 25Â°C â€¢ ä½“æ„Ÿæ¸©åº¦: 25Â°C<br><br><img src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310231337239.png" referrerpolicy="no-referrer">
<img alt="image.png" src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310231415424.png" referrerpolicy="no-referrer"><br><br>Javapackage com.lfl.Dynamic_Proxy;  
  
public interface Star {  
    //æˆ‘ä»¬å¯ä»¥æŠŠæ‰€æœ‰æƒ³è¦è¢«ä»£ç†çš„æ–¹æ³•å®šä¹‰åœ¨æ¥å£å½“ä¸­  
    public abstract String sing(String name);  
  
    public abstract String dance(String name) ;  
  
    public abstract String rap(String name);  
  
    public abstract String basketball(String name) ;  
}
å¤åˆ¶<br>Javapackage com.lfl.Dynamic_Proxy;  
  
/**  
 * @author å¶æ˜Ÿç—•  
 * @data 2023/10/23 13:38  
 * æ–‡ä»¶å : KunKun  
 * æè¿° :  
 */public class BigStar implements Star {  
    private String name;  
  
    public BigStar() {  
    }  
  
    public BigStar(String name) {  
        this.name = name;  
    }  
  
    @Override  
    public String sing(String name) {  
        System.out.println(this.name + "æ­£åœ¨å”±æ­Œ" + "æ­Œåæ˜¯ï¼š" + name);  
        return "å”±å®Œäº†";  
    }  
  
    @Override  
  
    public String dance(String name) {  
        System.out.println(this.name + "æ­£åœ¨è·³èˆ" + "èˆè¹ˆåæ˜¯ï¼š" + name);  
        return "è·³å®Œäº†";  
    }  
  
    @Override  
  
    public String rap(String name) {  
        System.out.println(this.name + "æ­£åœ¨rap"  + "rapåæ˜¯ï¼š" + name);  
        return "rapå®Œäº†";  
    }  
  
    @Override  
  
    public String basketball(String name) {  
        System.out.println(this.name + "æ­£åœ¨æ‰“ç¯®çƒ" + "ç¯®çƒåæ˜¯ï¼š" + name);  
        return "æ‰“å®Œäº†";  
    }  
  
    /**  
     * è·å–  
     *  
     * @return name  
     */    public String getName() {  
        return name;  
    }  
  
    /**  
     * è®¾ç½®  
     *  
     * @param name  
     */    public void setName(String name) {  
        this.name = name;  
    }  
  
    public String toString() {  
        return "BigStar{name = " + name + "}";  
    }  
}
å¤åˆ¶<br>Javapackage com.lfl.Dynamic_Proxy;  
  
import java.lang.reflect.InvocationHandler;  
import java.lang.reflect.Method;  
import java.lang.reflect.Proxy;  
  
/**  
 * @author å¶æ˜Ÿç—•  
 * @data 2023/10/23 13:50  
 * æ–‡ä»¶å : ProxyUtil  
 * æè¿° :åˆ›å»ºä¸€ä¸ªä»£ç†  
 */  
public class ProxyUtil {  
    //æ–¹æ³•çš„ä½œç”¨ï¼š  
    //ç»™ä¸€ä¸ªæ˜æ˜Ÿçš„å¯¹è±¡ï¼Œåˆ›å»ºä¸€ä¸ªä»£ç†  
    //å½¢å‚ï¼š  
    //è¢«ä»£ç†çš„æ˜æ˜Ÿå¯¹è±¡  
    //è¿”å›å€¼ï¼š  
    //ç»™æ˜æ˜Ÿåˆ›å»ºçš„ä»£ç†  
    public static Star createProxy(final BigStar bigStar) {  
        //public static object newProxyInstance(ClassLoader loader, Class&lt;?&gt;[] interfaces, InvocationHandler h)  
        //å‚æ•°ä¸€ï¼šç”¨äºæŒ‡å®šç”¨å“ªä¸ªç±»åŠ è½½å™¨ï¼Œå»åŠ è½½ç”Ÿæˆçš„ä»£ç†ç±»  
        //å‚æ•°äºŒï¼šæŒ‡å®šæ¥å£ï¼Œè¿™äº›æ¥å£ç”¨äºæŒ‡å®šç”Ÿæˆçš„ä»£ç†é•¿ä»€ä¹ˆï¼Œä¹Ÿå°±æ˜¯æœ‰å“ªäº›æ–¹æ³•  
        //å‚æ•°ä¸‰ï¼šç”¨æ¥æŒ‡å®šç”Ÿæˆçš„ä»£ç†å¯¹è±¡è¦å¹²ä»€ä¹ˆäº‹æƒ…*/  
        Star star = (Star) Proxy.newProxyInstance(  
                ProxyUtil.class.getClassLoader(),//æ‰¾åˆ°æ˜¯å“ªä¸€ä¸ªç±»è¿›è¡ŒåŠ è½½  
                new Class[]{Star.class},//èƒ½ä»£ç†é‚£äº›æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•éƒ½åœ¨å“ªä¸ªæ¥å£å½“ä¸­ï¼Œéƒ½å¯ä»¥å†™åœ¨è¿™é‡Œ  
                new InvocationHandler() {//ä»£ç†éƒ½è¦åšä»€ä¹ˆäº‹æƒ…  
                    @Override  
                    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {  
                        //å‚æ•°ä¸€ï¼šä»£ç†çš„å¯¹è±¡  
                        //å‚æ•°äºŒï¼šè¦è¿è¡Œçš„æ–¹æ³•sing  
                        //å‚æ•°ä¸‰ï¼šè°ƒç”¨singæ–¹æ³•æ—¶ï¼Œä¼ é€’çš„å®å‚  
                        if ("sing".equals(method.getName())) {  
                            System.out.println("å‡†å¤‡è¯ç­’ï¼Œæˆ‘è¦æ”¶é’±");  
                        } else if ("dance".equals(method.getName())) {  
                            System.out.println("å‡†å¤‡èˆå°ï¼Œæˆ‘è¦æ”¶é’±");  
                        } else if ("rap".equals(method.getName())) {  
                            System.out.println("å‡†å¤‡éº¦å…‹é£ï¼Œæˆ‘è¦æ”¶é’±");  
                        } else if ("basketball".equals(method.getName())) {  
                            System.out.println("å‡†å¤‡çƒåœºï¼Œæˆ‘è¦æ”¶é’±");  
                        }  
                        //å»æ‰¾å¤§æ˜æ˜Ÿå¼€å§‹å”±æ­Œæˆ–è€…è·³èˆ  
                        //ä»£ç çš„è¡¨ç°å½¢å¼ï¼šè°ƒç”¨å¤§æ˜æ˜Ÿé‡Œé¢å”±æ­Œæˆ–è€…è·³èˆçš„æ–¹æ³•  
                        return method.invoke(bigStar, args);  
                    }  
                }  
        );  
  
        return star;  
    }  
}
å¤åˆ¶<br><br>Javapackage com.lfl.Dynamic_Proxy;  
  
import org.junit.Test;  
  
/**  
 * @author å¶æ˜Ÿç—•  
 * @data 2023/10/23 13:59  
 * æ–‡ä»¶å : Test01  
 * æè¿° :  
 */public class Test01 {  
    @Test  
    public void test1() {  
        BigStar KunKun = new BigStar("KunKun");  
        Star proxy = ProxyUtil.createProxy(KunKun);  
        String result = proxy.sing("åªå› ä½ å¤ªç¾");  
        System.out.println(result);  
    }  
  
}
å¤åˆ¶<br><br>åŠ¨æ€ä»£ç†
ç±»ï¼š  å®ä½“ ä»£ç†æ¥å£ ä»£ç†å·¥å…·

<br>é¦–å…ˆå®ä½“å’Œä»£ç†æ¥å£è¦æœ‰ä¸€æ ·çš„æ–¹æ³•åï¼Œä½†æ¥å£æ˜¯æŠ½è±¡æ–¹æ³•ï¼Œè€Œå®ä½“å¯ä»¥å°†æ–¹æ³•å…·ç°åŒ–ã€‚
<br>å…¶æ¬¡å®ä½“è¦ç»§æ‰¿ä»£ç†æ¥å£çš„æ–¹æ³• ä¸”é‡å†™æ–¹æ³•ï¼ï¼ï¼
<br>è€Œå¯¹è±¡çš„åˆ›å»ºéœ€è¦æˆ‘ä»¬é€šè¿‡ä»£ç†æ¥è¿›è¡Œåˆ›å»º
<br>éœ€è¦æ‰©å±•çš„æ–¹æ³•ä¹Ÿæ˜¯åœ¨invokeé‡Œé¢è¿›è¡Œæ‰©å±•è€Œä¸æ˜¯åœ¨å®ä½“é‡Œé¢æ‰©å±•ï¼Œé™ä½äº†ä»£ç è€¦åˆåº¦

<br><br><a data-href="åå°„&amp;åŠ¨æ€ä»£ç†" href="\Java\åå°„&amp;åŠ¨æ€ä»£ç†.html" class="internal-link" target="_self" rel="noopener">åå°„&amp;åŠ¨æ€ä»£ç†</a>
è®°å½•æ—¶é—´: 2023/10/23/5:04 PM å½“å‰å¤©æ°”: æ™´ ğŸ”† â€¢ å½“å‰æ¸©åº¦: 22Â°C â€¢ ä½“æ„Ÿæ¸©åº¦: 22Â°C<br><br>Javapackage com.lfl.myreflect.demo1;  
  
/**  
 * @author å¶æ˜Ÿç—•  
 * @data 2023/10/23 17:00  
 * æ–‡ä»¶å : MyReflectDemo1  
 * æè¿° :  
 */public class MyReflectDemo1 {  
    public static void main(String[] args) throws Exception{  
        //ç¬¬ä¸€ç§è·å–åå°„å¯¹è±¡çš„æ–¹å¼  
        Class&lt;?&gt; clazz1 = Class.forName("com.lfl.myreflect.demo1.Student");  
        //ç¬¬äºŒç§è·å–åå°„å¯¹è±¡çš„æ–¹å¼  
        Class&lt;Student&gt; clazz2 = Student.class;  
        //ç¬¬ä¸‰ç§è·å–åå°„å¯¹è±¡çš„æ–¹å¼  
        Student student = new Student();  
        Class&lt;? extends Student&gt; clazz3 = student.getClass();  
  
  
    }  
}
å¤åˆ¶<br>é‡ç‚¹
Class.forNameï¼ˆï¼‰æ˜¯æœ€å¸¸ç”¨çš„è·å–æ–¹å¼
<br><br>Constructor&lt;?&gt;[]getConstructors():è¿”å›æ‰€æœ‰å…¬å…±æ„é€ æ–¹æ³•å¯¹è±¡çš„æ•°ç»„
Constructor&lt;?&gt;[]getDeclaredConstructors():è¿”å›æ‰€æœ‰æ„é€ æ–¹æ³•å¯¹è±¡çš„æ•°ç»„
Constructor&lt;T&gt;getConstructor(Class&lt;?&gt;..parameterTypes):è¿”å›å•ä¸ªå…¬å…±æ„é€ æ–¹æ³•å¯¹è±¡
ConstructorgetDeclaredConstructor(Class&lt;?&gt;...parameterTypes):è¿”å›å•ä¸ªæ„é€ æ–¹æ³•å¯¹è±¡
Constructorç±»ä¸­ç”¨äºåˆ›å»ºå¯¹è±¡çš„æ–¹æ³•
T newlnstance(Object...initargs):æ ¹æ®æŒ‡å®šçš„æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡
setAccessible(boolean flag):è®¾ç½®ä¸ºtrue,è¡¨ç¤ºå–æ¶ˆè®¿é—®æ£€æŸ¥<br><br>Javapackage com.lfl.myreflect.demo2;  
  
/**  
 * @author å¶æ˜Ÿç—•  
 * @data 2023/10/23 14:34  
 * æ–‡ä»¶å : Student  
 * æè¿° :  
 */public class Student {  
    private String name;  
    private int age;  
  
    public Student() {  
    }  
  
    private Student(String name, int age) {  
        this.name = name;  
        this.age = age;  
    }  
  
    protected Student(int age) {  
        this.age = age;  
    }  
  
    public Student(String name) {  
        this.name = name;  
    }  
  
    /**  
     * è·å–  
     *  
     * @return name  
     */    public String getName() {  
        return name;  
    }  
  
    /**  
     * è®¾ç½®  
     *  
     * @param name  
     */    public void setName(String name) {  
        this.name = name;  
    }  
  
    /**  
     * è·å–  
     *  
     * @return age  
     */    public int getAge() {  
        return age;  
    }  
  
    /**  
     * è®¾ç½®  
     *  
     * @param age  
     */    public void setAge(int age) {  
        this.age = age;  
    }  
  
    public String toString() {  
        return "Student{name = " + name + ", age = " + age + "}";  
    }  
}
å¤åˆ¶<br>Javapackage com.lfl.myreflect.demo2;  
  
import java.lang.reflect.Constructor;  
  
/**  
 * @author å¶æ˜Ÿç—•  
 * @data 2023/10/23 14:34  
 * æ–‡ä»¶å : MyReflectDemo1  
 * æè¿° :  
 */public class MyReflectDemo2 {  
    /*  
   classç±»ä¸­ç”¨äºè·å–æ„é€ æ–¹æ³•çš„æ–¹æ³•  
   Constructor&lt;?&gt;[] getConstructors()   Constructor&lt;?&gt;[] getDeclaredConstructors()   Constructor&lt;T&gt; getConstructor(Class&lt;?&gt;... parameterTypes)   Constructor&lt;T&gt; getDeclaredConstructor(Class&lt;?&gt;... parameterTypes)   Constructorç±»ä¸­ç”¨äºåˆ›å»ºå¯¹è±¡çš„æ–¹æ³•  
   T newInstance(Object...initargs)   setAccessible(boolean flag)   */    public static void main(String[] args) throws Exception {  
        // è·å–å­—èŠ‚ç æ–‡ä»¶å¯¹è±¡  
        Class&lt;?&gt; clazz = Class.forName("com.lfl.myreflect.demo2.Student");  
        // è·å–æ‰€æœ‰å…¬å…±æ„é€ æ–¹æ³•  
//        Constructor&lt;?&gt;[] cons = clazz.getConstructors();  
//        for (Constructor&lt;?&gt; con : cons) {  
//            System.out.println(con);  
//        }  
  
//        // è·å–æ‰€æœ‰æ„é€ æ–¹æ³•  
//        Constructor&lt;?&gt;[] cons = clazz.getDeclaredConstructors();  
//        for (Constructor&lt;?&gt; con : cons) {  
//            System.out.println(con);  
//        }  
  
        // è·å–å•ä¸ªå…¬å…±æ„é€ æ–¹æ³•  
        // è·å–ç©ºå‚  
        Constructor&lt;?&gt; con1 = clazz.getConstructor();  
        System.out.println(con1);  
  
        // è·å–å•ä¸ªæœ‰å‚  
        Constructor&lt;?&gt; con2 = clazz.getConstructor(String.class);  
        System.out.println(con2);  
  
        // è·å–å¤šä¸ªæœ‰å‚  
        Constructor&lt;?&gt; con3 = clazz.getDeclaredConstructor(String.class, int.class);  
        System.out.println(con3);  
  
        // è·å–å¸¸é‡å­—æ®µå€¼  
        int modifiers = con3.getModifiers();  
        System.out.println(modifiers);  
  
        //æ›´å…·åå°„è·å–å¯¹è±¡  æš´åŠ›åå°„  
        con3.setAccessible(true);  
        Student student = (Student) con3.newInstance("å¼ ä¸‰", 11);  
        System.out.println(student);  
  
  
  
  
    }  
}
å¤åˆ¶<br><br>Classç±»ä¸­ç”¨äºè·å–æˆå‘˜å˜é‡çš„æ–¹æ³•
Field[]getFields():è¿”å›æ‰€æœ‰å…¬å…±æˆå‘˜å˜é‡å¯¹è±¡çš„æ•°ç»„
Field[]getDeclaredFields():è¿”å›æ‰€æœ‰æˆå‘˜å˜é‡å¯¹è±¡çš„æ•°ç»„
Field getField(String name):è¿”å›å•ä¸ªå…¬å…±æˆå‘˜å˜é‡å¯¹è±¡
Field getDeclaredField(String name):è¿”å›å•ä¸ªæˆå‘˜å˜é‡å¯¹è±¡
Fieldç±»ä¸­ç”¨äºåˆ›å»ºå¯¹è±¡çš„æ–¹æ³•
void set(Object obj,Object value):èµ‹å€¼
Object get(Object obj)è·å–å€¼ã€‚<br><br>Javapackage com.lfl.myreflect.demo3;  
  
/**  
 * @author å¶æ˜Ÿç—•  
 * @data 2023/10/23 14:34  
 * æ–‡ä»¶å : Student  
 * æè¿° :  
 */public class Student {  
    private String name;  
    private int age;  
    public String gender;  
  
    public Student() {  
    }  
    public Student(String name, int age, String gender) {  
        this.name = name;  
        this.age = age;  
        this.gender = gender;  
    }  
  
    /**  
     * è·å–  
     * @return name  
     */    public String getName() {  
        return name;  
    }  
  
    /**  
     * è®¾ç½®  
     * @param name  
     */    public void setName(String name) {  
        this.name = name;  
    }  
  
    /**  
     * è·å–  
     * @return age  
     */    public int getAge() {  
        return age;  
    }  
  
    /**  
     * è®¾ç½®  
     * @param age  
     */    public void setAge(int age) {  
        this.age = age;  
    }  
  
    /**  
     * è·å–  
     * @return gender  
     */    public String getGender() {  
        return gender;  
    }  
  
    /**  
     * è®¾ç½®  
     * @param gender  
     */    public void setGender(String gender) {  
        this.gender = gender;  
    }  
  
    public String toString() {  
        return "Student{name = " + name + ", age = " + age + ", gender = " + gender + "}";  
    }  
}
å¤åˆ¶<br>Javapackage com.lfl.myreflect.demo3;  
  
import java.lang.reflect.Field;  
  
/**  
 * @author å¶æ˜Ÿç—•  
 * @data 2023/10/23 14:34  
 * æ–‡ä»¶å : MyReflectDemo1  
 * æè¿° :  
 */public class MyReflectDemo3 {  
    /*  
Classç±»ä¸­ç”¨äºè·å–æˆå‘˜å˜é‡çš„æ–¹æ³•  
Field[] getFields():  
è¿”å›æ‰€æœ‰å…¬å…±æˆå‘˜å˜é‡å¯¹è±¡çš„æ•°  
Field[] getDeclaredFields():  
è¿”å›æ‰€æœ‰æˆå‘˜å˜é‡å¯¹è±¡çš„æ•°ç»„  
Field getField(String name):  
è¿”å›å•ä¸ªå…¬å…±æˆå‘˜å˜é‡å¯¹è±¡  
Field getDeclaredField(String name):è¿”å›å•ä¸ªæˆå‘˜å˜é‡å¯¹è±¡  
Fieldç±»ä¸­ç”¨äºåˆ›å»ºå¯¹è±¡çš„æ–¹æ³•  
void set(Object obj, Object value):èµ‹å€¼  
Object get(Object obj)  
è·å–å€¼  
*/  
    public static void main(String[] args) throws Exception {  
        Class&lt;?&gt; clazz = Class.forName("com.lfl.myreflect.demo3.Student");  
        //è·å–æ‰€æœ‰æˆå‘˜å˜é‡  
//        Field[] fields = clazz.getDeclaredFields();  
//        for (Field field : fields) {  
//            System.out.println(field);  
//        }  
  
        //è·å–å•ä¸ªæˆå‘˜å˜é‡  
//        Field field = clazz.getDeclaredField("name");  
//        System.out.println(field);  
  
//        è·å–æƒé™ä¿®é¥°ç¬¦  
        Field field = clazz.getDeclaredField("name");  
        int modifiers = field.getModifiers();  
        System.out.println("æƒé™ä¿®é¥°ç¬¦:" + modifiers);  
        Class&lt;?&gt; type = field.getType();  
        System.out.println("æ•°æ®ç±»å‹:" + type);  
  
//        è·å–æˆå‘˜å˜é‡è®°å½•çš„å€¼  
        Student student = new Student("å¼ ä¸‰", 23, "ç”·");  
        field.setAccessible(true);  
        Object value = field.get(student);  
        System.out.println("æˆå‘˜å˜é‡è®°å½•çš„å€¼:" + value);  
  
        //ä¿®æ”¹å¯¹è±¡é‡Œé¢è®°å½•çš„å€¼  
        field.set(student, "æå››");  
        System.out.println("ä¿®æ”¹åçš„å€¼:" + student);  
    }  
}
å¤åˆ¶<br><br>Classç±»ä¸­ç”¨äºè·å–æˆå‘˜æ–¹æ³•çš„æ–¹æ³•
Method[]getMethods():è¿”å›æ‰€æœ‰å…¬å…±æˆå‘˜æ–¹æ³•å¯¹è±¡çš„æ•°ç»„ï¼ŒåŒ…æ‹¬ç»§æ‰¿çš„
Method[]getDeclaredMethods():è¿”å›æ‰€æœ‰æˆå‘˜æ–¹æ³•å¯¹è±¡çš„æ•°ç»„ï¼Œä¸åŒ…æ‹¬ç»§æ‰¿çš„
Method getMethod(String name,Class&lt;?&gt;..parameterTypes):è¿”å›å•ä¸ªå…¬å…±æˆå‘˜æ–¹æ³•å¯¹è±¡
Method getDeclaredMethod(String name,Class&lt;?&gt;â€¦parameterTypes):è¿”å›å•ä¸ªæˆå‘˜æ–¹æ³•å¯¹è±¡
Methodç±»ä¸­ç”¨äºåˆ›å»ºå¯¹è±¡çš„æ–¹æ³•
Object invoke(Object obj,Object...args):è¿è¡Œæ–¹æ³•
å‚æ•°ä¸€ï¼šç”¨objå¯¹è±¡è°ƒç”¨è¯¥æ–¹æ³•
å‚æ•°äºŒï¼šè°ƒç”¨æ–¹æ³•çš„ä¼ é€’çš„å‚æ•°ï¼ˆå¦‚æœæ²¡æœ‰å°±ä¸å†™ï¼‰
è¿”å›å€¼ï¼šæ–¹æ³•çš„è¿”å›å€¼ï¼ˆå¦‚æœæ²¡æœ‰å°±ä¸å†™ï¼‰<br><br>Javapackage com.lfl.myreflect.demo4;  
  
/**  
 * @author å¶æ˜Ÿç—•  
 * @data 2023/10/23 15:17  
 * æ–‡ä»¶å : Student  
 * æè¿° :  
 */public class Student {  
    private String name;  
    private int age;  
  
    public Student() {  
    }  
    public Student(String name, int age) {  
        this.name = name;  
        this.age = age;  
    }  
  
    /**  
     * è·å–  
     * @return name  
     */    public String getName() {  
        return name;  
    }  
  
    /**  
     * è®¾ç½®  
     * @param name  
     */  
    public void setName(String name) {  
        this.name = name;  
    }  
  
    /**  
     * è·å–  
     * @return age  
     */    public int getAge() {  
        return age;  
    }  
  
    /**  
     * è®¾ç½®  
     * @param age  
     */  
    public void setAge(int age) {  
        this.age = age;  
    }  
  
    public String toString() {  
        return "Student{name = " + name + ", age = " + age + "}";  
    }  
  
    public void sleep() {  
        System.out.println("åœ¨ç¡è§‰");  
    }  
  
    private void eat(String something) {  
        System.out.println("åœ¨åƒ" + something);  
    }  
}
å¤åˆ¶<br>Javapackage com.lfl.myreflect.demo4;  
  
import java.lang.reflect.Method;  
  
/**  
 * @author å¶æ˜Ÿç—•  
 * @data 2023/10/23 14:34  
 * æ–‡ä»¶å : MyReflectDemo1  
 * æè¿° :  
 */public class MyReflectDemo4 {  
    /*  
    åˆ©ç”¨åå°„è·å–æˆå‘˜æ–¹æ³•  
            Classç±»ä¸­ç”¨äºè·å–æˆå‘˜æ–¹æ³•çš„æ–¹æ³•  
    Method[]getMethods():è¿”å›æ‰€æœ‰å…¬å…±æˆå‘˜æ–¹æ³•å¯¹è±¡çš„æ•°ç»„ï¼ŒåŒ…æ‹¬ç»§æ‰¿çš„  
    Method[]getDeclaredMethods():è¿”å›æ‰€æœ‰æˆå‘˜æ–¹æ³•å¯¹è±¡çš„æ•°ç»„ï¼Œä¸åŒ…æ‹¬ç»§æ‰¿çš„  
    Method getMethod(String name,Class&lt;?&gt;..parameterTypes):è¿”å›å•ä¸ªå…¬å…±æˆå‘˜æ–¹æ³•å¯¹è±¡  
    Method getDeclaredMethod(String name,Class&lt;?&gt;â€¦parameterTypes):è¿”å›å•ä¸ªæˆå‘˜æ–¹æ³•å¯¹è±¡  
            Methodç±»ä¸­ç”¨äºåˆ›å»ºå¯¹è±¡çš„æ–¹æ³•  
    Object invoke(Object obj,Object...args):è¿è¡Œæ–¹æ³•  
    å‚æ•°ä¸€ï¼šç”¨objå¯¹è±¡è°ƒç”¨è¯¥æ–¹æ³•  
    å‚æ•°äºŒï¼šè°ƒç”¨æ–¹æ³•çš„ä¼ é€’çš„å‚æ•°ï¼ˆå¦‚æœæ²¡æœ‰å°±ä¸å†™ï¼‰    è¿”å›å€¼ï¼šæ–¹æ³•çš„è¿”å›å€¼ï¼ˆå¦‚æœæ²¡æœ‰å°±ä¸å†™ï¼‰  
    */    public static void main(String[] args) throws Exception {  
        Class&lt;?&gt; clazz = Class.forName("com.lfl.myreflect.demo4.Student");  
  
//        è·å–é‡Œé¢æ‰€æœ‰çš„æ–¹æ³•å¯¹è±¡ åŒ…å«çˆ¶ç±»ä¸­æ‰€æœ‰çš„å…¬å…±æ–¹æ³•  
//        Method[] methods = clazz.getMethods();  
//        for (Method method : methods) {  
//            System.out.println(method);  
//        }  
  
        //è·å–é‡Œé¢æ‰€æœ‰çš„æ–¹æ³•å¯¹è±¡ ä¸åŒ…å«çˆ¶ç±»ä¸­æ‰€æœ‰çš„å…¬å…±æ–¹æ³•  
//        Method[] declaredMethods = clazz.getDeclaredMethods();  
//        for (Method declaredMethod : declaredMethods) {  
//            System.out.println(declaredMethod);  
//        }  
  
        //è·å–å•ä¸ªæ–¹æ³•å¯¹è±¡  
        Method eat = clazz.getDeclaredMethod("eat", String.class);  
        System.out.println(eat);  
        System.out.println("=====================================");  
        //è·å–æ–¹æ³•çš„ä¿®é¥°ç¬¦  
        //è·å–æ–¹æ³•çš„åå­—  
        //è·å–æ–¹æ³•çš„å½¢å‚  
        //è·å–æ–¹æ³•çš„è¿”å›å€¼  
        //è·å–æ–¹æ³•çš„æŠ›å‡ºçš„å¼‚å¸¸  
        int modifiers = eat.getModifiers();  
        System.out.println("ä¿®é¥°ç¬¦:" + modifiers);  
  
  
        String name = eat.getName();  
        System.out.println("æ–¹æ³•å:" + name);  
  
  
        Class&lt;?&gt;[] parameterTypes = eat.getParameterTypes();  
        for (Class&lt;?&gt; parameterType : parameterTypes) {  
            System.out.println("å½¢å‚:" + parameterType);  
        }  
  
  
        Class&lt;?&gt;[] exceptionTypes = eat.getExceptionTypes();  
        for (Class&lt;?&gt; exceptionType : exceptionTypes) {  
            System.out.println("å¼‚å¸¸:" + exceptionType);  
        }  
  
        //æ–¹æ³•è¿è¡Œ  
        /*Methodç±»ä¸­ç”¨äºåˆ›å»ºå¯¹è±¡çš„æ–¹æ³•  
        Object invoke(Object obj, object...args):è¿è¡Œæ–¹æ³•  
        å‚æ•°ä¸€ï¼šç”¨objå¯¹è±¡è°ƒç”¨è¯¥æ–¹æ³•  
        å‚æ•°äºŒï¼šè°ƒç”¨æ–¹æ³•çš„ä¼ é€’çš„å‚æ•°ï¼ˆå¦‚æœæ²¡æœ‰å°±ä¸å†™ï¼‰        è¿”å›å€¼ï¼šæ–¹æ³•çš„è¿”å›å€¼ï¼ˆå¦‚æœæ²¡æœ‰å°±ä¸å†™ï¼‰*/  
        Student student = new Student();  
        eat.setAccessible(true);  
        eat.invoke(student, "è‹¹æœ");  
  
        Class&lt;?&gt; returnType = eat.getReturnType();  
        System.out.println("è¿”å›å€¼:" + returnType);  
  
    }  
  
}
å¤åˆ¶<br>æ€»ç»“
å¤šå†™ä»£ç åœ¨åç»­å¾ˆéœ€è¦
<br>è®°å½•æ—¶é—´: 2023/10/23/10:40 PM å½“å‰å¤©æ°”: æ™´ ğŸ”† â€¢ å½“å‰æ¸©åº¦: 17Â°C â€¢ ä½“æ„Ÿæ¸©åº¦: 18Â°C
å­¦å®Œäº†IOC
è¿˜æœ‰æˆ‘å¥½æƒ³ä½ ğŸ¥º<br><br>&lt;&lt; <a data-href="2023-10-22" href="\æ—¥è®°\2023-10-22.html" class="internal-link" target="_self" rel="noopener">2023-10-22</a> | <a data-href="2023-10-24" href="\æ—¥è®°\2023-10-24.html" class="internal-link" target="_self" rel="noopener">2023-10-24</a> &gt;&gt;]]></description><link>æ—¥è®°\2023-10-23.html</link><guid isPermaLink="false">æ—¥è®°/2023-10-23.md</guid><pubDate>Mon, 23 Oct 2023 14:40:42 GMT</pubDate><enclosure url="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310231337239.png" length="0" type="image/png"/><content:encoded>&lt;figure&gt;&lt;img src=&quot;https://typora-yxh.oss-cn-chengdu.aliyuncs.com/202310231337239.png&quot;&gt;&lt;/figure&gt;</content:encoded></item><item><title><![CDATA[2023-10-24]]></title><description><![CDATA[<a class="tag" href="?query=tag:java" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#java</a> <a class="tag" href="?query=tag:spring" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#spring</a> <a class="tag" href="?query=tag:åˆ†æ¡¶è¡¨" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#åˆ†æ¡¶è¡¨</a> <a class="tag" href="?query=tag:spring" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#spring</a> 
 <br><br>
<br>ğŸ¥³
<br>ğŸ˜­
<br>ğŸ¥°
<br>ğŸ˜
<br>ğŸ¥±
<br>å½“å‰æ¸©åº¦ï¼š18â„ƒ  å¤©æ°”ï¼šé˜´ æ¸©åº¦èŒƒå›´ï¼š18 ~ 23â„ƒ
æ¹¿åº¦ï¼š83% é£å‘ï¼šå—é£ 2çº§ ç´«å¤–çº¿ï¼šå¾ˆå¼±
ç©ºæ°”è´¨é‡ï¼šä¼˜ PM: 5 æ—¥å‡º: 06:57 æ—¥è½: 18:18<br>ä¸€è¨€
 äººçš†è’é†‰ï¼Œä½†å”±è§‚éŸ³ã€‚  â€”â€” ã€Šå”å¤§å’Œä¸Šä¸œå¾ä¼ ã€‹ Â· æ·¡æµ·ä¸‰
<br><br><br>æ—©ä¸Šï¼š å¤ä¹  IOC å’Œ å­¦ä¹ AOP<br><br>è®°å½•æ—¶é—´: 2023/10/24/9:34 AM å½“å‰å¤©æ°”: æ™´ ğŸ”† â€¢ å½“å‰æ¸©åº¦: 23Â°C â€¢ ä½“æ„Ÿæ¸©åº¦: 24Â°C
<a href=".?query=tag:java" class="tag" target="_blank" rel="noopener">#java</a> <a href=".?query=tag:spring" class="tag" target="_blank" rel="noopener">#spring</a><br><br>é€šè¿‡beanåˆ›å»ºè¿›è¡Œè·å–æˆ‘ä»¬éœ€è¦çš„å¯¹è±¡ <br>Xml&lt;?xml version="1.0" encoding="UTF-8"?&gt;  
&lt;beans xmlns="http://www.springframework.org/schema/beans"  
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"&gt;  
  
    &lt;!--  
    scope:    
    1. singleton (default) æ˜¯å•ä¾‹æ¨¡å¼ï¼Œä¸€ä¸ªå®¹å™¨ä¸­åªæœ‰ä¸€ä¸ªå®ä¾‹  
    2. prototype  æ˜¯å¤šä¾‹æ¨¡å¼ï¼Œæ¯æ¬¡ä»å®¹å™¨ä¸­getBeanéƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„å®ä¾‹  
  
    init-method:    
    1. åœ¨beanåˆ›å»ºå®Œæˆå¹¶ä¸”å±æ€§èµ‹å€¼å®Œæˆåï¼Œæ‰§è¡Œåˆå§‹åŒ–æ–¹æ³•  
    2. å¯ä»¥æŒ‡å®šåˆå§‹åŒ–æ–¹æ³•  
  
    destroy-method:    
    1. åœ¨å®¹å™¨å…³é—­æ—¶ï¼Œæ‰§è¡Œé”€æ¯æ–¹æ³•  
    2. å¯ä»¥æŒ‡å®šé”€æ¯æ–¹æ³•  
  
    depends-on:    
    1. æŒ‡å®šbeançš„ä¾èµ–å…³ç³»ï¼Œå½“ä¾èµ–çš„beanåˆ›å»ºå®Œæˆåï¼Œæ‰ä¼šåˆ›å»ºå½“å‰bean  
    2. å¯ä»¥æŒ‡å®šå¤šä¸ªä¾èµ–çš„bean  
  
    --&gt;    
    &lt;bean id="car" class="study.IOC.bean.Car" /&gt;  
    &lt;bean id="student" class="study.IOC.bean.Student" depends-on="teacher"/&gt;  
    &lt;bean id="teacher" class="study.IOC.bean.Teacher" depends-on="car"/&gt;  
&lt;/beans&gt;
å¤åˆ¶<br><br>Javapackage study.IOC;  
  
import org.junit.Test;  
import org.springframework.context.support.ClassPathXmlApplicationContext;  
import study.IOC.bean.Car;  
import study.IOC.bean.Student;  
import study.IOC.bean.Teacher;  
  
  
/**  
 * @author å¶æ˜Ÿç—•  
 * @data 2023/10/23 21:01  
 * æ–‡ä»¶å : Test01  
 * æè¿° :  
 */public class Test01 {  
    @Test//æµ‹è¯•å•ä¾‹å’Œå¤šä¾‹  
    public void test01() {  
        ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext("study/IOC/springIOC.xml");  
        Student student1 = (Student) context.getBean("student");  
        Student student2 = (Student) context.getBean("student");  
        System.out.println(student1);  
        System.out.println(student2);  
        System.out.println(student1 == student2);  
    }  
  
    @Test//æµ‹è¯•åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•  
    public void test02() {  
        ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext("study/IOC/springIOC.xml");  
        Student student = (Student) context.getBean("student");  
        System.out.println(student);  
        context.close();  
    }  
  
    @Test//é€‰æ‹©è°å…ˆåˆå§‹åŒ–  
    public void test03() {  
        ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext("study/IOC/springIOC.xml");  
        Student student = context.getBean("student", Student.class);  
        Car car = context.getBean("car", Car.class);  
        Teacher teacher = context.getBean("teacher", Teacher.class);  
        System.out.println(student);  
        System.out.println(car);  
        System.out.println(teacher);  
    }  
}
å¤åˆ¶<br>æ€»ç»“
æŒæ¡beançš„åŸºæœ¬æ³¨å…¥ä»¥åŠå¯¹åº”çš„éƒ¨åˆ†å‚æ•°
<br><br><a href=".?query=tag:åˆ†æ¡¶è¡¨" class="tag" target="_blank" rel="noopener">#åˆ†æ¡¶è¡¨</a> <br>Xml&lt;?xml version="1.0" encoding="UTF-8"?&gt;  
&lt;beans xmlns="http://www.springframework.org/schema/beans"  
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"&gt;  
    &lt;!--  
    autowire: è‡ªåŠ¨è£…é…  
    1. byName: æ ¹æ®å±æ€§åç§°è‡ªåŠ¨è£…é…  
    2. byType: æ ¹æ®å±æ€§ç±»å‹è‡ªåŠ¨è£…é…  
    3. constructor: æ ¹æ®æ„é€ å™¨è‡ªåŠ¨è£…é…  
    4. no: ä¸è‡ªåŠ¨è£…é…  
  
    --&gt;  
    &lt;bean id="student" class="study.relyOn.bean.Student" autowire="byType"&gt;  
        &lt;!--  
        property: ç”¨äºæ³¨å…¥å±æ€§ (åŸºæœ¬ç±»å‹å’ŒStringç±»å‹)  
        1. name: æŒ‡å®šæ³¨å…¥å±æ€§çš„åç§°  
        2. value: æŒ‡å®šæ³¨å…¥å±æ€§çš„å€¼  
        3. ref: æŒ‡å®šæ³¨å…¥å±æ€§çš„å¯¹è±¡  
  
        --&gt;  
        &lt;property name="name" value="lfl"/&gt;  
        &lt;property name="age" value="18"/&gt;  
        &lt;property name="list"&gt;  
            &lt;list&gt;  
                &lt;!--  
                  list: ç”¨äºæ³¨å…¥å±æ€§ (é›†åˆç±»å‹)  
                    1. name: æŒ‡å®šæ³¨å…¥å±æ€§çš„åç§°  
                    2. value: æŒ‡å®šæ³¨å…¥å±æ€§çš„å€¼  
                    3. ref: æŒ‡å®šæ³¨å…¥å±æ€§çš„å¯¹è±¡  
                --&gt;  
                &lt;value&gt;aaa&lt;/value&gt;  
                &lt;value&gt;bbb&lt;/value&gt;  
                &lt;value&gt;ccc&lt;/value&gt;  
            &lt;/list&gt;  
        &lt;/property&gt;  
        &lt;property name="score"&gt;  
            &lt;map&gt;  
                &lt;!--  
                  map: ç”¨äºæ³¨å…¥å±æ€§ (é›†åˆç±»å‹)  
                    1. name: æŒ‡å®šæ³¨å…¥å±æ€§çš„åç§°  
                    2. value: æŒ‡å®šæ³¨å…¥å±æ€§çš„å€¼  
                    3. ref: æŒ‡å®šæ³¨å…¥å±æ€§çš„å¯¹è±¡  
                --&gt;  
                &lt;entry key="è¯­æ–‡" value="100"/&gt;  
                &lt;entry key="æ•°å­¦" value="90"/&gt;  
                &lt;entry key="è‹±è¯­" value="80"/&gt;  
            &lt;/map&gt;  
        &lt;/property&gt;  
    &lt;/bean&gt;  
  
    &lt;bean id="car" class="study.relyOn.bean.Car"/&gt;  
  
    &lt;bean id="coder" class="study.relyOn.bean.Coder"&gt;  
        &lt;!--  
        constructor-arg: ç”¨äºæ³¨å…¥å±æ€§ (æ„é€ å™¨) 1.name: æŒ‡å®šæ³¨å…¥å±æ€§çš„åç§° 2.value: æŒ‡å®šæ³¨å…¥å±æ€§çš„å€¼ 3.ref: æŒ‡å®šæ³¨å…¥å±æ€§çš„å¯¹è±¡  
        type: æŒ‡å®šæ³¨å…¥å±æ€§çš„ç±»å‹ index: æŒ‡å®šæ³¨å…¥å±æ€§çš„ç´¢å¼• (ä»0å¼€å§‹)  
        name å’Œ index ä¸èƒ½åŒæ—¶ä½¿ç”¨  
        name index type å°±æ˜¯æŒ‡å®šæ„é€ å™¨çš„å‚æ•°ç±»å‹  
        --&gt;  
        &lt;constructor-arg type="java.lang.String" value="å°æ˜"/&gt;  
        &lt;constructor-arg  value="18" index="1"/&gt;  
    &lt;/bean&gt;  
&lt;/beans&gt;
å¤åˆ¶<br>åœ¨å¯¹æˆ‘ä»¬éœ€è¦çš„å®ä½“ç±»è¿›è¡Œæ³¨å…¥æ—¶å€™ï¼Œä¸€å®šè¦ç»™äºˆSetæ–¹æ³•ï¼Œç”¨lombokçš„å½¢å¼å†™æ³¨è§£<br><br>Javapackage study.relyOn.bean;  
  
import lombok.Setter;  
import lombok.ToString;  
  
import java.util.List;  
import java.util.Map;  
  
/**  
 * @author å¶æ˜Ÿç—•  
 * @data 2023/10/23 21:48  
 * æ–‡ä»¶å : Student  
 * æè¿° :  
 */@ToString  
@Setter  
public class Student {  
    private String name;  
    private int age;  
    Car car;  
    List&lt;String&gt; list;  
    Map&lt;String, Integer&gt; score;  
}
å¤åˆ¶<br>Javapackage study.relyOn.bean;  
  
import lombok.Data;  
  
/**  
 * @author å¶æ˜Ÿç—•  
 * @data 2023/10/23 22:28  
 * æ–‡ä»¶å : Coder  
 * æè¿° :  
 */  
public class Coder {  
    private String name;  
    private int age;  
  
    public Coder() {  
    }  
    public Coder(String name, int age) {  
        this.name = name;  
        this.age = age;  
    }  
  
    public Coder(int age) {  
        this.age = age;  
    }  
  
    public Coder(String name) {  
        this.name = name;  
    }  
  
    /**  
     * è·å–  
     * @return name  
     */    public String getName() {  
        return name;  
    }  
  
    /**  
     * è®¾ç½®  
     * @param name  
     */  
    public void setName(String name) {  
        this.name = name;  
    }  
  
    /**  
     * è·å–  
     * @return age  
     */    public int getAge() {  
        return age;  
    }  
  
    /**  
     * è®¾ç½®  
     * @param age  
     */  
    public void setAge(int age) {  
        this.age = age;  
    }  
  
    public String toString() {  
        return "Coder{name = " + name + ", age = " + age + "}";  
    }  
}
å¤åˆ¶<br><br>Javapackage study.relyOn;  
  
import org.junit.Test;  
import org.springframework.context.support.ClassPathXmlApplicationContext;  
import study.relyOn.bean.Coder;  
import study.relyOn.bean.Student;  
  
/**  
 * @author å¶æ˜Ÿç—•  
 * @data 2023/10/23 21:51  
 * æ–‡ä»¶å : Test01  
 * æè¿° :  
 */public class Test01 {  
    @Test//æµ‹è¯•propertyæ ‡ç­¾ å’Œ æ³¨å…¥é›†åˆ ä»¥åŠè‡ªåŠ¨è£…é…  
    public void test01() {  
        ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext("study/relyOn/springRelyOn.xml");  
        //è¿™é‡Œæ²¡æœ‰åˆ›å»ºcarå¯¹è±¡ï¼Œä½†æ˜¯carå¯¹è±¡å·²ç»è¢«åˆ›å»ºäº†  
        //ä½†è¿˜æ˜¯éœ€è¦åœ¨Studentç±»ä¸­æ·»åŠ Carå±æ€§ï¼Œå¦åˆ™ä¼šæŠ¥é”™ ä»¥åŠé…ç½®æ–‡ä»¶ä¸­æ·»åŠ car beanå±æ€§  
        Student student = context.getBean("student", Student.class);  
        System.out.println(student);  
    }  
  
    @Test//æœ‰å‚æ„é€ æ³¨å…¥  
    public void test02() {  
        ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext("study/relyOn/springRelyOn.xml");  
        Coder coder = context.getBean("coder", Coder.class);  
        System.out.println(coder);  
    }  
  
}
å¤åˆ¶<br>name index type å°±æ˜¯æŒ‡å®šæ„é€ å™¨çš„å‚æ•°ç±»å‹<br><br>è®°å½•æ—¶é—´: 2023/10/24/9:34 AM å½“å‰å¤©æ°”: æ™´ ğŸ”† â€¢ å½“å‰æ¸©åº¦: 23Â°C â€¢ ä½“æ„Ÿæ¸©åº¦: 24Â°C
å¼€å§‹å­¦ä¹ AOP<br><br><a href=".?query=tag:spring" class="tag" target="_blank" rel="noopener">#spring</a>
è®°å½•æ—¶é—´: 2023/10/24/3:01 PM å½“å‰å¤©æ°”: æ™´ ğŸ”† â€¢ å½“å‰æ¸©åº¦: 27Â°C â€¢ ä½“æ„Ÿæ¸©åº¦: 27Â°C<br><br>Javapackage study.aop.bean;  
  
import org.springframework.aop.AfterReturningAdvice;  
import org.springframework.aop.MethodBeforeAdvice;  
  
import java.lang.reflect.Method;  
import java.util.Arrays;  
  
/**  
 * @author å¶æ˜Ÿç—•  
 * @data 2023/10/24 14:44  
 * æ–‡ä»¶å : AopAdvice  
 * æè¿° :  
 */public class AopAdvice implements MethodBeforeAdvice, AfterReturningAdvice {  
    @Override  
    public void before(Method method, Object[] args, Object target) throws Throwable {  
        System.out.println("æ–¹æ³•åç§°ä¸º" + method.getName());  
        System.out.println("æ–¹æ³•å‚æ•°ä¸º" + Arrays.toString(args));  
        System.out.println("æ–¹æ³•æ‰§è¡Œç›®æ ‡å¯¹è±¡ä¸º" + target);  
    }  
  
    @Override  
    public void afterReturning(Object returnValue, Method method, Object[] args, Object target) throws Throwable {  
        System.out.println("æ–¹æ³•åç§°ä¸º" + method.getName());  
        System.out.println("æ–¹æ³•å‚æ•°ä¸º" + Arrays.toString(args));  
        System.out.println("æ–¹æ³•æ‰§è¡Œç›®æ ‡å¯¹è±¡ä¸º" + target);  
        System.out.println("æ–¹æ³•è¿”å›å€¼ä¸º" + returnValue);  
    }  
}
å¤åˆ¶<br>Javapackage study.aop.bean;  
  
import lombok.extern.java.Log;  
import org.aspectj.lang.JoinPoint;  
import org.aspectj.lang.ProceedingJoinPoint;  
  
import java.util.Arrays;  
  
/**  
 * @author å¶æ˜Ÿç—•  
 * @data 2023/10/24 9:54  
 * æ–‡ä»¶å : AopTest  
 * æè¿° :  
 */@Log  
public class AopTest {  
    /*  
    * joinPoint.getArgs() è·å–æ–¹æ³•å‚æ•°  
    * joinPoint.getSignature() è·å–æ–¹æ³•ç­¾å  
    * joinPoint.getTarget() è·å–ç›®æ ‡å¯¹è±¡  
    * joinPoint.getThis() è·å–ä»£ç†å¯¹è±¡  
    * joinPoint.getKind() è·å–è¿æ¥ç‚¹ç±»å‹  
    * joinPoint.getStaticPart() è·å–è¿æ¥ç‚¹æ–¹æ³•  
    * joinPoint.getSourceLocation() è·å–è¿æ¥ç‚¹ä½ç½®  
    * */    public void before(JoinPoint joinPoint) {  
        System.out.print(Arrays.toString(joinPoint.getArgs()));  
        log.info("æˆ‘æ˜¯å‰ç½®æ–¹æ³•æ‰§è¡Œåçš„æ—¥å¿—");  
    }  
  
    public void after(JoinPoint joinPoint) {  
        System.out.println(joinPoint.getThis());  
        log.info("æˆ‘æ˜¯åç½®æ–¹æ³•æ‰§è¡Œåçš„æ—¥å¿—");  
    }  
  
    public void around(ProceedingJoinPoint joinPoint) throws Throwable {  
        joinPoint.proceed();  
        log.info("æˆ‘æ˜¯ç¯ç»•æ–¹æ³•æ‰§è¡Œåçš„æ—¥å¿—");  
    }  
}
å¤åˆ¶<br>Javapackage study.aop.bean;  
  
import lombok.Setter;  
import lombok.ToString;  
  
/**  
 * @author å¶æ˜Ÿç—•  
 * @data 2023/10/24 9:46  
 * æ–‡ä»¶å : Student  
 * æè¿° :  
 */  
@ToString  
@Setter  
public class Student {  
    private String name;  
    private int age;  
    public Student() {  
        System.out.println("Studentè¢«åˆ›å»ºäº†");  
    }  
    public void say(String text) {  
        System.out.println("æˆ‘å«" + name + "ï¼Œä»Šå¹´" + age + "å²ï¼Œæˆ‘è¯´ï¼š" + text);  
    }  
  
    @Deprecated  
    public void test() {  
        System.out.println("æˆ‘æ˜¯æ³¨è§£æ–¹æ³•");  
    }  
}
å¤åˆ¶<br><br>Xml&lt;?xml version="1.0" encoding="UTF-8"?&gt;  
&lt;beans xmlns="http://www.springframework.org/schema/beans"  
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
       xmlns:aop="http://www.springframework.org/schema/aop"  
       xsi:schemaLocation="http://www.springframework.org/schema/beans  
                           http://www.springframework.org/schema/beans/spring-beans.xsd                           http://www.springframework.org/schema/aop                           http://www.springframework.org/schema/aop/spring-aop.xsd"&gt;  
    &lt;!--  
    é‚£ä¹ˆï¼Œå¦‚ä½•ä½¿ç”¨AOPå‘¢ï¼Ÿé¦–å…ˆæˆ‘ä»¬è¦æ˜ç¡®ï¼Œè¦å®ç°AOPæ“ä½œï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“è¿™äº›å†…å®¹ï¼š  
1.éœ€è¦åˆ‡å…¥çš„ç±»ï¼Œç±»çš„å“ªä¸ªæ–¹æ³•éœ€è¦è¢«åˆ‡å…¥  
2.åˆ‡å…¥ä¹‹åéœ€è¦æ‰§è¡Œä»€ä¹ˆåŠ¨ä½œ  
3.æ˜¯åœ¨æ–¹æ³•æ‰§è¡Œå‰åˆ‡å…¥è¿˜æ˜¯åœ¨æ–¹æ³•æ‰§è¡Œååˆ‡å…¥  
4.å¦‚ä½•å‘Šè¯‰Springéœ€è¦è¿›è¡Œåˆ‡å…¥  
    --&gt;  
    &lt;!--    aop:configï¼šé…ç½®AOPçš„é…ç½®ä¿¡æ¯  
    expressionï¼šåˆ‡å…¥ç‚¹è¡¨è¾¾å¼ï¼Œç”¨äºå‘Šè¯‰Springå“ªäº›ç±»çš„å“ªäº›æ–¹æ³•éœ€è¦è¢«åˆ‡å…¥  
    executionï¼šç”¨äºæŒ‡å®šåˆ‡å…¥ç‚¹è¡¨è¾¾å¼çš„å…·ä½“å†…å®¹ æ ¼å¼ï¼šexecution(è¿”å›å€¼ç±»å‹ åŒ…å.ç±»å.æ–¹æ³•å(å‚æ•°åˆ—è¡¨))  
    å‚æ•°åˆ—è¡¨: å‚æ•°åˆ—è¡¨å¯ä»¥ä½¿ç”¨é€šé…ç¬¦ *ï¼Œè¡¨ç¤ºä»»æ„ç±»å‹çš„å‚æ•°  
    --&gt;  
    &lt;aop:config&gt;  
        &lt;!--  
        aspectï¼šåˆ‡é¢ï¼Œç”¨äºå‘Šè¯‰Springåˆ‡å…¥ä¹‹åéœ€è¦æ‰§è¡Œä»€ä¹ˆåŠ¨ä½œ refï¼šåˆ‡é¢çš„id  
        --&gt;        &lt;aop:aspect ref="aopTest" &gt;  
            &lt;aop:pointcut id="test" expression="execution(* study.aop.bean.Student.say(String))"/&gt;  
            &lt;aop:before method="before" pointcut-ref="test"/&gt;  
            &lt;aop:after method="after" pointcut-ref="test"/&gt;  
            &lt;aop:around method="around" pointcut-ref="test"/&gt;  
        &lt;/aop:aspect&gt;  
  
        &lt;!--  
        æ³¨è§£æ–¹å¼  
        --&gt;  
        &lt;aop:aspect ref="aopTest"&gt;  
            &lt;aop:pointcut id="test2" expression="@annotation(Deprecated )"/&gt;  
            &lt;aop:before method="before" pointcut-ref="test2"/&gt;  
            &lt;aop:after method="after" pointcut-ref="test2"/&gt;  
        &lt;/aop:aspect&gt;  
    &lt;/aop:config&gt;  
    &lt;!--  
      é€šè¿‡æ¥å£çš„æ–¹å¼  
      --&gt;  
    &lt;aop:config&gt;  
        &lt;aop:pointcut id="test" expression="execution(* study.aop.bean.Student.say(String))"/&gt;  
        &lt;aop:advisor advice-ref="aopAdvice" pointcut-ref="test"/&gt;  
    &lt;/aop:config&gt;  
  
  
    &lt;bean id="student" class="study.aop.bean.Student"&gt;  
        &lt;property name="name" value="å¼ ä¸‰"/&gt;  
        &lt;property name="age" value="18"/&gt;  
    &lt;/bean&gt;  
    &lt;bean id="aopTest" class="study.aop.bean.AopTest"/&gt;  
    &lt;bean id="aopAdvice" class="study.aop.bean.AopAdvice"/&gt;  
&lt;/beans&gt;  
  
&lt;!--  
æ€»ç»“ï¼šä»ä¸Šåˆ°ä¸‹çš„é¡ºåº  
1.beanè¢«åˆ›å»º  
2.aopå‰ç½®æ–¹æ³•æ‰§è¡Œ  
3.æ¥å£beforeæ‰§è¡Œ  
4.æ–¹æ³•æ‰§è¡Œ  
5.æ¥å£afteræ‰§è¡Œ  
6.aopç¯ç»•æ–¹æ³•æ‰§è¡Œ  
7.aopåç½®æ–¹æ³•æ‰§è¡Œ  
8.beanè¢«é”€æ¯  
  
AOPæœ¯è¯­ï¼š  
- é€šçŸ¥ï¼ˆAdvice):AOPæ¡†æ¶ä¸­çš„å¢å¼ºå¤„ç†ï¼Œé€šçŸ¥æè¿°äº†åˆ‡é¢ä½•æ—¶æ‰§è¡Œä»¥åŠå¦‚ä½•æ‰§è¡Œå¢å¼ºå¤„ç†ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¸Šé¢ç¼–å†™çš„æ–¹æ³•å®ç°ã€‚  
- è¿æ¥ç‚¹ï¼ˆjoin point):è¿æ¥ç‚¹è¡¨ç¤ºåº”ç”¨æ‰§è¡Œè¿‡ç¨‹ä¸­èƒ½å¤Ÿæ’å…¥åˆ‡é¢çš„ä¸€ä¸ªç‚¹ï¼Œè¿™ä¸ªç‚¹å¯ä»¥æ˜¯æ–¹æ³•çš„è°ƒç”¨ã€å¼‚å¸¸çš„æŠ›å‡ºï¼Œå®é™…ä¸Šå°±æ˜¯æˆ‘ä»¬åœ¨æ–¹æ³•æ‰§è¡Œå‰æˆ–æ˜¯æ‰§è¡Œåéœ€è¦åšçš„å†…å®¹ã€‚  
- åˆ‡ç‚¹ï¼ˆPointCut):å¯ä»¥æ’å…¥å¢å¼ºå¤„ç†çš„è¿æ¥ç‚¹ï¼Œå¯ä»¥æ˜¯æ–¹æ³•æ‰§è¡Œä¹‹å‰ä¹Ÿå¯ä»¥æ–¹æ³•æ‰§è¡Œä¹‹åï¼Œè¿˜å¯ä»¥æ˜¯æŠ›å‡ºå¼‚å¸¸ä¹‹ç±»çš„ã€‚  
- åˆ‡é¢ï¼ˆAspect):åˆ‡é¢æ˜¯é€šçŸ¥å’Œåˆ‡ç‚¹çš„ç»“åˆï¼Œæˆ‘ä»¬ä¹‹å‰åœ¨xmlä¸­å®šä¹‰çš„å°±æ˜¯åˆ‡é¢ï¼ŒåŒ…æ‹¬å¾ˆå¤šä¿¡æ¯ã€‚  
- å¼•å…¥ï¼ˆIntroduction):å¼•å…¥å…è®¸æˆ‘ä»¬å‘ç°æœ‰çš„ç±»æ·»åŠ æ–°çš„æ–¹æ³•æˆ–è€…å±æ€§ã€‚  
- ç»‡å…¥ï¼ˆWeaving):å°†å¢å¼ºå¤„ç†æ·»åŠ åˆ°ç›®æ ‡å¯¹è±¡ä¸­ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªè¢«å¢å¼ºçš„å¯¹è±¡ï¼Œæˆ‘ä»¬ä¹‹å‰éƒ½æ˜¯åœ¨å°†æˆ‘ä»¬çš„å¢å¼ºå¤„ç†æ·»åŠ åˆ°ç›®æ ‡å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯ç»‡å…¥ï¼ˆè¿™åå­—æŒºæœ‰æ–‡è‰ºèŒƒçš„ï¼‰  
--&gt;
å¤åˆ¶<br><br>Javapackage study.aop;  
  
import org.junit.Test;  
import org.springframework.context.support.ClassPathXmlApplicationContext;  
import study.aop.bean.Student;  
  
/**  
 * @author å¶æ˜Ÿç—•  
 * @data 2023/10/24 9:48  
 * æ–‡ä»¶å : Test01  
 * æè¿° :  
 */public class Test01 {  
    @Test  
    public void test01() {  
        ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext("study/aop/springAop.xml");  
        Student student = context.getBean("student", Student.class);  
        student.say("hello");  
    }  
  
    @Test// æµ‹è¯•æ³¨è§£  
    public void test02() {  
        ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext("study/aop/springAop.xml");  
        Student student = context.getBean("student", Student.class);  
        student.test();  
    }  
  
    @Test// æµ‹è¯•Advice  
    public void test03() {  
        ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext("study/aop/springAop.xml");  
        Student student = context.getBean("student", Student.class);  
        student.say("hello");  
    }  
}
å¤åˆ¶<br><br><br>
<br>1.beanè¢«åˆ›å»º  
<br>2.aopå‰ç½®æ–¹æ³•æ‰§è¡Œ  
<br>3.æ¥å£beforeæ‰§è¡Œ  
<br>4.æ–¹æ³•æ‰§è¡Œ  
<br>5.æ¥å£afteræ‰§è¡Œ  
<br>6.aopç¯ç»•æ–¹æ³•æ‰§è¡Œ  
<br>7.aopåç½®æ–¹æ³•æ‰§è¡Œ  
<br>8.beanè¢«é”€æ¯  
<br><br>
<br>é€šçŸ¥ï¼ˆAdvice):AOPæ¡†æ¶ä¸­çš„å¢å¼ºå¤„ç†ï¼Œé€šçŸ¥æè¿°äº†åˆ‡é¢ä½•æ—¶æ‰§è¡Œä»¥åŠå¦‚ä½•æ‰§è¡Œå¢å¼ºå¤„ç†ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¸Šé¢ç¼–å†™çš„æ–¹æ³•å®ç°ã€‚  
<br>è¿æ¥ç‚¹ï¼ˆjoin point):è¿æ¥ç‚¹è¡¨ç¤ºåº”ç”¨æ‰§è¡Œè¿‡ç¨‹ä¸­èƒ½å¤Ÿæ’å…¥åˆ‡é¢çš„ä¸€ä¸ªç‚¹ï¼Œè¿™ä¸ªç‚¹å¯ä»¥æ˜¯æ–¹æ³•çš„è°ƒç”¨ã€å¼‚å¸¸çš„æŠ›å‡ºï¼Œå®é™…ä¸Šå°±æ˜¯æˆ‘ä»¬åœ¨æ–¹æ³•æ‰§è¡Œå‰æˆ–æ˜¯æ‰§è¡Œåéœ€è¦åšçš„å†…å®¹ã€‚  
<br>åˆ‡ç‚¹ï¼ˆPointCut):å¯ä»¥æ’å…¥å¢å¼ºå¤„ç†çš„è¿æ¥ç‚¹ï¼Œå¯ä»¥æ˜¯æ–¹æ³•æ‰§è¡Œä¹‹å‰ä¹Ÿå¯ä»¥æ–¹æ³•æ‰§è¡Œä¹‹åï¼Œè¿˜å¯ä»¥æ˜¯æŠ›å‡ºå¼‚å¸¸ä¹‹ç±»çš„ã€‚  
<br>åˆ‡é¢ï¼ˆAspect):åˆ‡é¢æ˜¯é€šçŸ¥å’Œåˆ‡ç‚¹çš„ç»“åˆï¼Œæˆ‘ä»¬ä¹‹å‰åœ¨xmlä¸­å®šä¹‰çš„å°±æ˜¯åˆ‡é¢ï¼ŒåŒ…æ‹¬å¾ˆå¤šä¿¡æ¯ã€‚  
<br>å¼•å…¥ï¼ˆIntroduction):å¼•å…¥å…è®¸æˆ‘ä»¬å‘ç°æœ‰çš„ç±»æ·»åŠ æ–°çš„æ–¹æ³•æˆ–è€…å±æ€§ã€‚  
<br>ç»‡å…¥ï¼ˆWeaving):å°†å¢å¼ºå¤„ç†æ·»åŠ åˆ°ç›®æ ‡å¯¹è±¡ä¸­ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªè¢«å¢å¼ºçš„å¯¹è±¡ï¼Œæˆ‘ä»¬ä¹‹å‰éƒ½æ˜¯åœ¨å°†æˆ‘ä»¬çš„å¢å¼ºå¤„ç†æ·»åŠ åˆ°ç›®æ ‡å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯ç»‡å…¥ï¼ˆè¿™åå­—æŒºæœ‰æ–‡è‰ºèŒƒçš„ï¼‰
<br><br>&lt;&lt; <a data-href="2023-10-23" href="\æ—¥è®°\2023-10-23.html" class="internal-link" target="_self" rel="noopener">2023-10-23</a> | <a data-href="2023-10-25" href="\æ—¥è®°\2023-10-25.html" class="internal-link" target="_self" rel="noopener">2023-10-25</a> &gt;&gt;]]></description><link>æ—¥è®°\2023-10-24.html</link><guid isPermaLink="false">æ—¥è®°/2023-10-24.md</guid><pubDate>Tue, 24 Oct 2023 07:04:27 GMT</pubDate></item><item><title><![CDATA[2023-10-25]]></title><description><![CDATA[<a class="tag" href="?query=tag:java" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#java</a> <a class="tag" href="?query=tag:spring" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#spring</a> 
 <br><br>
<br>ğŸ¥³
<br>ğŸ˜­
<br>ğŸ¥°
<br>ğŸ˜
<br>ğŸ¥±
<br>å½“å‰æ¸©åº¦ï¼š18â„ƒ  å¤©æ°”ï¼šé˜´è½¬å°é›¨ æ¸©åº¦èŒƒå›´ï¼š17 ~ 22â„ƒ
æ¹¿åº¦ï¼š86% é£å‘ï¼šå—é£ 3çº§ ç´«å¤–çº¿ï¼šå¾ˆå¼±
ç©ºæ°”è´¨é‡ï¼šä¼˜ PM: 7 æ—¥å‡º: 06:57 æ—¥è½: 18:17<br>ä¸€è¨€
 æˆ‘å–è¿‡ä½ å–çš„è¥¿åŒ—é£ï¼Œè¿™ç®—ä¸ç®—å¾ˆç©·ã€‚  â€”â€” ã€Šç½‘æ˜“äº‘ã€‹ Â· å¦¤å„¿_moon
<br><br><br>è®°å½•æ—¶é—´: 2023/10/25/9:54 AM å½“å‰å¤©æ°”: é˜´ï¼Œå¤šäº‘ â˜ï¸ â€¢ å½“å‰æ¸©åº¦: 25Â°C â€¢ ä½“æ„Ÿæ¸©åº¦: 25Â°C
AOPæ³¨è§£æ–¹å¼
<a href=".?query=tag:java" class="tag" target="_blank" rel="noopener">#java</a> <a href=".?query=tag:spring" class="tag" target="_blank" rel="noopener">#spring</a> <br><br><br>&lt;&lt; <a data-href="2023-10-24" href="\æ—¥è®°\2023-10-24.html" class="internal-link" target="_self" rel="noopener">2023-10-24</a> | <a data-href="2023-10-26" href="\æ—¥è®°\2023-10-26.html" class="internal-link" target="_self" rel="noopener">2023-10-26</a> &gt;&gt;]]></description><link>æ—¥è®°\2023-10-25.html</link><guid isPermaLink="false">æ—¥è®°/2023-10-25.md</guid><pubDate>Wed, 25 Oct 2023 01:55:39 GMT</pubDate></item><item><title><![CDATA[2023-10-26]]></title><description><![CDATA[ 
 <br><br>
<br>ğŸ¥³
<br>ğŸ˜­
<br>ğŸ¥°
<br>ğŸ˜
<br>ğŸ¥±
<br>å½“å‰æ¸©åº¦ï¼š13â„ƒ  å¤©æ°”ï¼šé›¾è½¬ä¸­é›¨ æ¸©åº¦èŒƒå›´ï¼š13 ~ 17â„ƒ
æ¹¿åº¦ï¼š94% é£å‘ï¼šä¸œåŒ—é£ 2çº§ ç´«å¤–çº¿ï¼šå¾ˆå¼±
ç©ºæ°”è´¨é‡ï¼šè½»åº¦æ±¡æŸ“ PM: 36 æ—¥å‡º: 06:58 æ—¥è½: 18:16<br>ä¸€è¨€
 é“¶çƒ›ç§‹å…‰å†·ç”»å±ï¼Œè½»ç½—å°æ‰‡æ‰‘æµè¤ã€‚  â€”â€” ã€Šç§‹å¤•ã€‹ Â· æœç‰§
<br><br><br>è®°å½•æ—¶é—´: 2023/10/26/9:01 AM å½“å‰å¤©æ°”: é˜´ï¼Œå¤šäº‘ â˜ï¸ â€¢ å½“å‰æ¸©åº¦: 21Â°C â€¢ ä½“æ„Ÿæ¸©åº¦: 22Â°C
ä¸‹é›¨äº†<br><br><br>&lt;&lt; <a data-href="2023-10-25" href="\æ—¥è®°\2023-10-25.html" class="internal-link" target="_self" rel="noopener">2023-10-25</a> | <a data-href="2023-10-27" href="\2023-10-27" class="internal-link" target="_self" rel="noopener">2023-10-27</a> &gt;&gt;]]></description><link>æ—¥è®°\2023-10-26.html</link><guid isPermaLink="false">æ—¥è®°/2023-10-26.md</guid><pubDate>Thu, 26 Oct 2023 01:01:37 GMT</pubDate></item><item><title><![CDATA[2024-01-10]]></title><description><![CDATA[<a class="tag" href="?query=tag:hive" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#hive</a> <a class="tag" href="?query=tag:å…ˆå¯åŠ¨metastoreæœåŠ¡" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#å…ˆå¯åŠ¨metastoreæœåŠ¡</a> 
 <br><br>
<br>ğŸ¥³
<br>ğŸ˜­
<br>ğŸ¥°
<br>ğŸ˜
<br>ğŸ¥±
<br>å½“å‰æ¸©åº¦ï¼š11â„ƒ  å¤©æ°”ï¼šå¤šäº‘ æ¸©åº¦èŒƒå›´ï¼š6 ~ 11â„ƒ
æ¹¿åº¦ï¼š74% é£å‘ï¼šä¸œé£ 2çº§ ç´«å¤–çº¿ï¼šå¾ˆå¼±
ç©ºæ°”è´¨é‡ï¼šè‰¯ PM: 22 æ—¥å‡º: 07:42 æ—¥è½: 18:18<br>ä¸€è¨€
 å¸Œæœ›ä½ å¯ä»¥è®°ä½æˆ‘ï¼Œè®°ä½æˆ‘è¿™æ ·æ´»è¿‡ï¼Œè¿™æ ·åœ¨ä½ èº«è¾¹å‘†è¿‡ã€‚  â€”â€” ã€ŠæŒªå¨çš„æ£®æ—ã€‹ Â· æ‘ä¸Šæ˜¥æ ‘
<br><br><br>å­¦ä¹ Hive
<a href=".?query=tag:hive" class="tag" target="_blank" rel="noopener">#hive</a> <br><br>æˆ‘åªèƒ½è¯´å¥½å®¶ä¼™ï¼Œè§†é¢‘å’Œobç›´æ¥å´©<br><br><br><br><img alt="image-20240110231408175" src="http://typora-yxh.oss-cn-chengdu.aliyuncs.com/img/image-20240110231408175.png" referrerpolicy="no-referrer"><br><br>rpm -qa | grep  mariadb<br>
rpm -e mariadb-libs-5.5.68-1.el7.x86_64 --nodeps<br><img alt="image-20240110160358209" src="http://typora-yxh.oss-cn-chengdu.aliyuncs.com/img/image-20240110160358209.png" referrerpolicy="no-referrer"><br><br><img alt="image-20240111180910473" src="http://typora-yxh.oss-cn-chengdu.aliyuncs.com/img/image-20240111180910473.png" referrerpolicy="no-referrer"><br>cd MySQL<br>
rpm -ivh 01_mysql-community-common-5.7.29-1.el7.x86_64.rpm<br>
rpm -ivh 02_mysql-community-client-plugins-8.0.26-1.el7.x86_64.rpm<br>
rpm -ivh 03_mysql-community-libs-8.0.26-1.el7.x86_64.rpm<br>
rpm -ivh 04_mysql-community-libs-compat-8.0.26-1.el7.x86_64.rpm<br>
rpm -ivh 05_mysql-community-client-8.0.26-1.el7.x86_64.rpm <br><img alt="image-20240110160902103" src="http://typora-yxh.oss-cn-chengdu.aliyuncs.com/img/image-20240110160902103.png" referrerpolicy="no-referrer"><br><img alt="image-20240110161105094" src="http://typora-yxh.oss-cn-chengdu.aliyuncs.com/img/image-20240110161105094.png" referrerpolicy="no-referrer"><br><br>systemctl start mysqld<br>
systemctl enable mysqld<br>
â€‹  <br><br>systemctl status mysqld<br><img alt="image-20240110161510614" src="http://typora-yxh.oss-cn-chengdu.aliyuncs.com/img/image-20240110161510614.png" referrerpolicy="no-referrer"><br><br>grep password /var/log/mysqld.log <br><img alt="image-20240110161808252" src="http://typora-yxh.oss-cn-chengdu.aliyuncs.com/img/image-20240110161808252.png" referrerpolicy="no-referrer"><br><br> mysql -uroot -p<br><img alt="image-20240110161831239" src="http://typora-yxh.oss-cn-chengdu.aliyuncs.com/img/image-20240110161831239.png" referrerpolicy="no-referrer"><br><br>
<br>ä¿®æ”¹MySQLçš„å¯†ç ç­–ç•¥ï¼ˆå®‰å…¨ç­‰çº§ï¼‰  
<br><br>å«â¼¤â¼©å†™å­—âºŸã€æ•°å­—ã€ç‰¹æ®Šå­—ç¬¦ï¼Œä»¥åŠå¯¹ä½æ•°æœ‰è¦æ±‚<br>
show variables like '%validate_password%'; # æŸ¥çœ‹å¯†<br>
ç ç­–ç•¥<br>
set global validate_password.policy=LOW; # ä¿®æ”¹å¯†ç <br>
ç­–ç•¥ç­‰çº§ä¸ºLOW<br>
set global validate_password.length=4; # å¯†ç çš„æœ€<br>
â¼©â»“åº¦<br>
set global validate_password.mixed_case_count=0; # è®¾ç½®<br>
å¯†ç ä¸­â¾„å°‘è¦åŒ…å«0ä¸ªâ¼¤å†™å­—âºŸå’Œâ¼©å†™å­—âºŸ<br>
set global validate_password.number_count=0; # è®¾ç½®å¯†<br>
ç ä¸­â¾„å°‘è¦åŒ…å«0ä¸ªæ•°å­—<br>
set global validate_password.special_char_count=0; #<br>
è®¾ç½®å¯†ç ä¸­â¾„å°‘è¦åŒ…å«0ä¸ªç‰¹æ®Šå­—ç¬¦  <br><br>alter user root@localhost identified by '123456';  <br><br>create user root@'%' identified by '123456';<br>
grant all privileges on . to 'root'@'%' with grant<br>
optionï¼›<br><img alt="image-20240110162502329" src="http://typora-yxh.oss-cn-chengdu.aliyuncs.com/img/image-20240110162502329.png" referrerpolicy="no-referrer"><br><br><img alt="image-20240110162531963" src="http://typora-yxh.oss-cn-chengdu.aliyuncs.com/img/image-20240110162531963.png" referrerpolicy="no-referrer"><br><br>Hadoopçš„core-site.xmlä¸­ï¼Œå¹¶åˆ†å‘åˆ°å…¶å®ƒèŠ‚ç‚¹ï¼Œä¸”é‡å¯HDFSé›†ç¾¤<br><img alt="image-20240110231857467" src="http://typora-yxh.oss-cn-chengdu.aliyuncs.com/img/image-20240110231857467.png" referrerpolicy="no-referrer"><br><br><br>tar -zxvf apache-hive-3.1.2-b<br><br>â€‹<br>
ln -s /export/server/apache-hive-3.1.3-bin /export/server/hive<br>é©±åŠ¨jaråŒ…ï¼Œæ”¾å…¥ï¼šHiveå®‰è£…æ–‡ä»¶å¤¹çš„libç›®å½•å†…<br><img alt="image-20240110231952910" src="http://typora-yxh.oss-cn-chengdu.aliyuncs.com/img/image-20240110231952910.png" referrerpolicy="no-referrer"><br>cd /export/server/MySQL/<br>
cp mysql-connector-java-5.1.48.jar /export/server/hive/lib/<br><br><br>export HADOOP_HOME=/export/server/hadoop<br>
export HIVE_CONF_DIR=/export/server/hive/conf<br>
export HIVE_AUX_JARS_PATH=/export/server/hive/lib<br><img alt="image-20240110232137368" src="http://typora-yxh.oss-cn-chengdu.aliyuncs.com/img/image-20240110232137368.png" referrerpolicy="no-referrer"><br><br><br><br>â€‹<br>
<br>
<br>
javax.jdo.option.ConnectionURL<br>
jdbc:mysql://hadoop1:3306/hive?createDatabaseIfNotExist=true&amp;useSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-8<br>
<br>
â€‹<br>
<br>
javax.jdo.option.ConnectionDriverName<br>
com.mysql.jdbc.Driver<br>
<br>
â€‹<br>
<br>
javax.jdo.option.ConnectionUserName<br>
root<br>
<br>
â€‹<br>
<br>
javax.jdo.option.ConnectionPassword<br>
123456<br>
<br>
â€‹<br>
<br>
hive.server2.thrift.bind.host<br>
hadoop1<br>
<br>
â€‹<br>
<br>
hive.metastore.uris<br>
thrift://hadoop1:9083<br>
<br>
â€‹<br>
<br>
hive.metastore.event.db.notification.api.auth<br>
false<br>
<br>
â€‹<br>
<br>
hive.metastore.warehouse.dir<br>
/user/hive/warehouse<br>
<br>
â€‹<br>
<br>
â€‹<br><img alt="image-20240110232204458" src="http://typora-yxh.oss-cn-chengdu.aliyuncs.com/img/image-20240110232204458.png" referrerpolicy="no-referrer"><br><br>mysqlæ“ä½œ<br> mysql -uroot -p123456<br>
mysql&gt; create database hive;<br>
mysql&gt; quit;<br>hiveæ“ä½œ<br>cd /export/server/hive<br>
bin/schematool -initSchema -dbType mysql -verbos<br><br><a href=".?query=tag:å…ˆå¯åŠ¨metastoreæœåŠ¡" class="tag" target="_blank" rel="noopener">#å…ˆå¯åŠ¨metastoreæœåŠ¡</a> ç„¶åå¯åŠ¨hiveserver2æœåŠ¡â€¢<br>
nohup bin/hive --service metastore &gt;&gt; logs/metastore.log 2&gt;&amp;1 &amp;<br>
nohup bin/hive --service hiveserver2 &gt;&gt; logs/hiveserver2.log 2&gt;&amp;1 &amp;<br><br><br>/export/server/hive/bin/beeline<br>
Beeline version 3.1.2 by Apache Hive<br>
beeline&gt; ! connect jdbc:hive2://hadoop1:10000<br>
Connecting to jdbc:hive2://hadoop1:10000<br>
Enter username for jdbc:hive2://hadoop1:10000: root<br>
Enter password for jdbc:hive2://hadoop1:10000: (å¯ä»¥ä¸å†™)<br>
Connected to: Apache Hive (version 3.1.2)<br>
Driver: Hive JDBC (version 3.1.2)<br>
Transaction isolation: TRANSACTION_REPEATABLE_READ<br>
0: jdbc:hive2://hadoop1:10000&gt; <br><br><img alt="image-20240111131216192" src="http://typora-yxh.oss-cn-chengdu.aliyuncs.com/img/image-20240111131216192.png" referrerpolicy="no-referrer"><br><img alt="image-20240111131447469" src="http://typora-yxh.oss-cn-chengdu.aliyuncs.com/img/image-20240111131447469.png" referrerpolicy="no-referrer"><br><br><br><br>  
 &nbsp; &nbsp;hive.cli.print.header  
 &nbsp; &nbsp;true  
 &nbsp; &nbsp;Whether to print the names of the columns in query output.  
  
  
 &nbsp; &nbsp;hive.cli.print.current.db  
 &nbsp; &nbsp;true  
 &nbsp; &nbsp;Whether to include the current database in the Hive prompt.  
  
â€‹<br><br>cd /export/server/hive/conf<br>
mv hive-log4j2.properties.template hive-log4j2.properties<br>
vim hive-log4j2.properties<br>
/export/server/hive/logs<br><img alt="image-20240111130419540" src="http://typora-yxh.oss-cn-chengdu.aliyuncs.com/img/image-20240111130419540.png" referrerpolicy="no-referrer"><br><br>vim hive-env.sh<br>
export HADOOP_HEAPSIZE=2048<br><img alt="image-20240111130755760" src="http://typora-yxh.oss-cn-chengdu.aliyuncs.com/img/image-20240111130755760.png" referrerpolicy="no-referrer"><br><br>cd /export/server/hadoop/etc/hadoop/<br>
vim yarn-site.xml<br>
â€‹<br>
<br>
yarn.nodemanager.vmem-check-enabled<br>
false<br>
<br>
â€‹<br>
åˆ†å‘<br>
scp yarn-site.xml  hadoop2:pwd<br>
scp yarn-site.xml  hadoop3:pwd<br><br>cd /export/server/hadoop/sbin<br>
vim Start-All.sh<br>#!/bin/bash<br>
â€‹  <br><br>echo "DFSå¯åŠ¨"<br>
start-dfs.sh<br>
sleep 15<br>
â€‹  <br><br>echo "YARNå¯åŠ¨"<br>
start-yarn.sh<br>
sleep 15<br>
â€‹  <br><br><br>echo "Metastoreå¯åŠ¨"<br>
hive --service metastore &amp;<br>
sleep 1<br>
â€‹  <br><br>echo "HiveServer2å¯åŠ¨"<br>
hive --service hiveserver2 &amp;<br>
sleep 1<br>
â€‹  <br><br><br>hadoop fs -chmod -R 777 /<br>
echo "HdfsWebç«¯æƒé™èµ‹äºˆå®Œæˆ"<br>
â€‹  <br><br>echo "hadoop1ZooKeeperå¯åŠ¨"<br>
zkServer.sh start<br>
sleep 10<br>
â€‹  <br><br>echo "hadoop2ä¸Šçš„ZooKeeperå¯åŠ¨"<br>
â€‹<br>
ssh hadoop2 "zkServer.sh start"<br>
echo "hadoop3ä¸Šçš„ZooKeeperå¯åŠ¨"<br>
ssh hadoop3 "zkServer.sh start"<br>
â€‹<br>
â€‹<br>
echo "æ‰€æœ‰æœåŠ¡å·²å¯åŠ¨å®Œæˆã€‚"<br>
jps<br>chmod +x Start-All.sh<br><br>cd /export/server/hadoop/sbin<br>
vim Stop-All.sh<br>#!/bin/bash<br>
â€‹<br>
echo "å¼€å§‹å…³é—­hive"  <br><br>runjar_pids=runjar_pids" ]; then<br>
echo "æ²¡æœ‰å‘ç°RunJarè¿›ç¨‹åœ¨è¿è¡Œã€‚"<br>
else<br>
for pid in pid"<br>
kill -15 $pid &nbsp;# å…ˆå°è¯•ä¼˜é›…åœ°ç»ˆæ­¢è¿›ç¨‹<br>
sleep 1 &nbsp; &nbsp; &nbsp; # ç­‰å¾…å‡ ç§’ï¼Œç»™è¿›ç¨‹æ—¶é—´å“åº”<br>
kill -9 $pid &nbsp;# å¦‚æœè¿›ç¨‹ä»ç„¶è¿è¡Œï¼Œå¼ºåˆ¶ç»ˆæ­¢<br>
done<br>
fi<br>
â€‹<br>
sleep 5<br>
â€‹<br>
echo "å…³é—­å…¨éƒ¨zk"  <br><br>zkServer.sh stop<br>
ssh hadoop2 "zkServer.sh stop"<br>
ssh hadoop3 "zkServer.sh stop"<br>
â€‹<br>
sleep 5<br>
â€‹<br>
echo "å…³é—­hdfs"  <br><br>stop-all.sh<br>
â€‹<br>
echo "æ‰€æœ‰æœåŠ¡å…¨éƒ¨å…³é—­"<br>
jps<br>chmod +x Stop-All.sh<br><br>&lt;&lt; <a data-href="2024-01-09" href="\2024-01-09" class="internal-link" target="_self" rel="noopener">2024-01-09</a> | <a data-href="2024-01-11" href="\æ—¥è®°\2024-01-11.html" class="internal-link" target="_self" rel="noopener">2024-01-11</a> &gt;&gt;]]></description><link>æ—¥è®°\2024-01-10.html</link><guid isPermaLink="false">æ—¥è®°/2024-01-10.md</guid><pubDate>Thu, 11 Jan 2024 10:25:35 GMT</pubDate><enclosure url="http://typora-yxh.oss-cn-chengdu.aliyuncs.com/img/image-20240110231408175.png" length="0" type="image/png"/><content:encoded>&lt;figure&gt;&lt;img src=&quot;http://typora-yxh.oss-cn-chengdu.aliyuncs.com/img/image-20240110231408175.png&quot;&gt;&lt;/figure&gt;</content:encoded></item><item><title><![CDATA[2024-01-11]]></title><description><![CDATA[<a class="tag" href="?query=tag:hive" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#hive</a> 
 <br><br>
<br>ğŸ¥³
<br>ğŸ˜­
<br>ğŸ¥°
<br>ğŸ˜
<br>ğŸ¥±
<br>å½“å‰æ¸©åº¦ï¼š9â„ƒ  å¤©æ°”ï¼šå¤šäº‘ æ¸©åº¦èŒƒå›´ï¼š7 ~ 10â„ƒ
æ¹¿åº¦ï¼š89% é£å‘ï¼šä¸œå—é£ 1çº§ ç´«å¤–çº¿ï¼šæ— 
ç©ºæ°”è´¨é‡ï¼šè‰¯ PM: 29 æ—¥å‡º: 07:42 æ—¥è½: 18:19<br>ä¸€è¨€
 æ•°äººä¸–ç›¸é€¢ï¼Œç™¾å¹´æ¬¢ç¬‘ï¼Œèƒ½å¾—å‡ å›åˆã€‚  â€”â€” ã€Šæ‘¸é±¼å„¿Â·è®°å¹´æ—¶äººäººä½•å¤„ã€‹ Â· ä½•æ¢¦æ¡‚
<br><br><br><a href=".?query=tag:hive" class="tag" target="_blank" rel="noopener">#hive</a> <br><br><br>Sqlcreate database if not exists test2 comment "Just For Test" location "/abc"  
    with dbproperties ('aaa' = 'abc');  
  
desc database extended test2;  
  
use test2;  
  
create table student  
(  
    id int  
);  
  
alter database test2 set dbproperties ('aaa' = 'xyz');--æ•°æ®åº“åªèƒ½ä¿®æ”¹è¿™ä¸€å±æ€§  
desc database extended test2;  
  
drop database test2 cascade;--åˆ åº“å¿…é¡»åŠ cascade  
  
use test2;  
  
-- å†…éƒ¨è¡¨  
create table student  
(  
    id   int comment "id",  
    name string comment "åå­—"  
) comment "å­¦ç”Ÿ"  
    row format delimited fields terminated by '\t'  
        collection items terminated by '_'  
        map keys terminated by ','  
        lines terminated by '\n'  
    location "/stuxxxx"  
    tblproperties ('aaa' = 'cccxxx');  
  
show tables;  
  
desc test2.student;  
desc formatted test2.student;  
  
-- å¤–éƒ¨è¡¨  
create external table student2  
(  
    id   int comment "id",  
    name string comment "åå­—"  
) comment "å­¦ç”Ÿ"  
    row format delimited fields terminated by '\t'  
        collection items terminated by '_'  
        map keys terminated by ','  
        lines terminated by '\n'  
    location "/stu2"  
    tblproperties ('aaa' = 'cccxxx');  
  
desc formatted test2.student2;  
  
drop table student;  
drop table student2;  
  
-- å†…éƒ¨è¡¨çš„å¤–éƒ¨è¡¨çš„åŒºåˆ«ï¼š  
-- å¤–éƒ¨è¡¨è¢«åˆ é™¤hdfsçš„æ•°æ®ä¸ä¼šè¢«åˆ é™¤  
-- å†…éƒ¨è¡¨è¢«åˆ é™¤hdfsçš„æ•°æ®ä¼šè¢«åˆ é™¤  
  
-- å°†å†…éƒ¨è¡¨è½¬æ¢ä¸ºå¤–éƒ¨è¡¨  
alter table student  
    set tblproperties ('EXTERNAL' = 'TRUE');  
-- EXTERNAL true:å¤–éƒ¨è¡¨  FALSE:å†…éƒ¨è¡¨  
desc formatted test2.student;  
desc formatted test2.student2;  
  
--ä¿®æ”¹è¡¨å  
alter table student2 rename to student;  
  
--ä¿®æ”¹è¡¨çš„å±æ€§ id ä¸º idxxx stringç±»å‹ æ³¨è§£â€œidxxx"  
alter table student change column id idxxx string comment 'idxxx';  
  
--å¢åŠ   
alter table student add columns (gender string comment 'æ€§åˆ«');  
  
--ä»£æ›¿åŸæ¥çš„å±æ€§  
alter table student replace columns (id string,name string);
å¤åˆ¶<br><br>é‡ç‚¹
1.æ•°æ®åº“åªèƒ½ä¿®æ”¹dbpropertieså±æ€§ 
2.æ•°æ®åº“å¯ä»¥é€šè¿‡location æŒ‡å®šç›®å½•,ä½†ä¸èƒ½æ˜¯ æ ¹ç›®å½•   -&gt; "/"
3.åœ¨æ—¥å¸¸æµ‹è¯•ä¸­æœ€å¥½åˆ›å»ºå¤–éƒ¨è¡¨ ( external )
4.å¯¹ä¸è¡¨çš„ä¿®æ”¹ å¢åˆ æ”¹æŸ¥ éƒ½éœ€è¦å…³é”®çš„ column è¿›è¡Œæ”¯æ’‘
<br>è®°å½•æ—¶é—´: 2024/01/11/6:34 PM å½“å‰å¤©æ°”: æ™´ ğŸ”† â€¢ å½“å‰æ¸©åº¦: 9Â°C â€¢ ä½“æ„Ÿæ¸©åº¦: 9Â°C<br><br>Sqlcreate table student(id int,name string)  
row format delimited fields terminated by '\t';  
  
  
-- æœ¬åœ°æ–‡ä»¶å¯¼å…¥  
load data local inpath '/export/testall/03_data/student.txt' into table test.student;  
  
-- è¿™æ˜¯æ¸…æ¥šè¡¨æ•°æ®çš„è¯­å¥  
truncate table test.student;  
  
-- hdfsæ–‡ä»¶å¯¼å…¥ overwriteè¡¨ç¤ºè¦†ç›– è¿™ä¸ªæ•°æ®æ˜¯ä¼šè¢«ç§»åŠ¨çš„è€Œä¸æ˜¯å¤åˆ¶  
load data inpath '/xyz/student.txt' overwrite into table test.student;  
  
create table stu2  
(  
    id   int,  
    name string  
)  
    row format delimited fields terminated by '\t';  
  
-- æ•°æ®çš„æ’å…¥  
  
insert into table stu2 values (1001,'zhangsan'),(1002,'lisi');  
  
-- ä»å¦å¤–ä¸€ä¸ªè¡¨ä¸­æ’å…¥æ•°æ®  
insert into stu2 select id,name from test.student s where id&lt;1010;  
  
-- ä»å¦å¤–ä¸€ä¸ªè¡¨ä¸­è¦†ç›–æ•°æ®  
insert overwrite table stu2 select id,name from test.student s where id&gt;1010;  
  
-- åˆ›å»ºè¡¨çš„æ—¶å€™æ’å…¥æ•°æ®  
create table stu3 as select id,name from test.student s where id&gt;1010;  
  
  
-- åˆ›å»ºè¡¨çš„æ—¶å€™å¤åˆ¶è¡¨ç»“æ„  
create table stu4 like test.student;  
  
  
-- å¯¼å‡ºæ•°æ®åˆ°hdfsæ–‡ä»¶(æœªåˆ›å»º)  
export table test.student to '/student_export';
å¤åˆ¶<br>ç‰¹æ®Š

<br>å¯¼å…¥æ•°æ®å¸¸ç”¨load å’Œ insert
<br>loadï¼š
<br>1. æœ¬åœ°å¯¼å…¥ï¼šload data local inpath
<br>2. hdfså¯¼å…¥ï¼šload data inpath
<br>æœ€å¥½ä¸è¦ä»HdfsWebç«¯è¿›è¡Œä¸Šä¼ æ•°æ®ï¼Œç»•è¿‡äº†Hiveå¯¼è‡´HiveæŸ¥è¯¢ä¸äº†

<br><br>&lt;&lt; <a data-href="2024-01-10" href="\æ—¥è®°\2024-01-10.html" class="internal-link" target="_self" rel="noopener">2024-01-10</a> | <a data-href="2024-01-12" href="\æ—¥è®°\2024-01-12.html" class="internal-link" target="_self" rel="noopener">2024-01-12</a> &gt;&gt;]]></description><link>æ—¥è®°\2024-01-11.html</link><guid isPermaLink="false">æ—¥è®°/2024-01-11.md</guid><pubDate>Thu, 11 Jan 2024 14:29:20 GMT</pubDate></item><item><title><![CDATA[2024-01-12]]></title><description><![CDATA[<a class="tag" href="?query=tag:hive" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#hive</a> 
 <br><br>
<br>ğŸ¥³
<br>ğŸ˜­
<br>ğŸ¥°
<br>ğŸ˜
<br>ğŸ¥±
<br>å½“å‰æ¸©åº¦ï¼š14â„ƒ  å¤©æ°”ï¼šå¤šäº‘ æ¸©åº¦èŒƒå›´ï¼š8 ~ 15â„ƒ
æ¹¿åº¦ï¼š67% é£å‘ï¼šä¸œå—é£ 2çº§ ç´«å¤–çº¿ï¼šå¾ˆå¼±
ç©ºæ°”è´¨é‡ï¼šè‰¯ PM: 41 æ—¥å‡º: 07:39 æ—¥è½: 18:15<br>ä¸€è¨€
 æˆ‘æ²¡æœ‰æ¢¦æƒ³ï¼Œä½†æˆ‘å¯ä»¥å®ˆæŠ¤åˆ«äººçš„æ¢¦æƒ³ï¼  â€”â€” ã€Šå‡é¢éª‘å£«faizã€‹ Â· ä¹¾å·§
<br><br><br><a href=".?query=tag:hive" class="tag" target="_blank" rel="noopener">#hive</a>
å†™sqlçš„ä¸€å¤©<br><br>è®°å½•æ—¶é—´: 2024/01/12/5:39 AM å½“å‰å¤©æ°”: æ™´ ğŸ”† â€¢ å½“å‰æ¸©åº¦: 12Â°C â€¢ ä½“æ„Ÿæ¸©åº¦: 11Â°C<br><br>Sql-- select [All | distinct] select_expr ,...;  
-- FROM table_reference           ---ä»ä»€ä¹ˆè¡¨æŸ¥  
-- [JOIN table_reference on]  xxxx  ---  
-- [where where_condition]          ---è¿‡æ»¤  
-- [group by col_list]              ---åˆ†ç»„æŸ¥è¯¢  
-- [having col_list]               ---åˆ†ç»„åè¿‡æ»¤  
-- [order by col_list]              ---æ’åºç»Ÿç§°ä¸ºhiveä¸­4ä¸ªby  
-- [cluster by col_list            ---  
--   |  [DISTRIBUTE by col_list]  [sort by col_list]  
-- ]  
-- [limit number]                   ---é™åˆ¶è¾“å‡ºçš„è¡Œæ•°  
-- [union all]  
  
create table if not exists dept  
(  
    deptno int,  
    dname  string,  
    loc    int  
) row format delimited fields terminated by '\t';  
  
create table if not exists emp  
(  
    empno  int,  
    ename  string,  
    job    string,  
    sal    double,  
    deptno int  
) row format delimited fields terminated by '\t';  
  
load data local inpath '/export/testall/03_data/emp.txt' into table emp;  
load data local inpath '/export/testall/03_data/dept.txt' into table dept;  
  
  
-- æŸ¥è¯¢æ‰€æœ‰å‘˜å·¥çš„å§“åå’Œå·¥èµ„  
select ename as name, sal as gonzi  
from emp;  
  
--  limit 5æ„æ€æ˜¯åªæ˜¾ç¤º5æ¡æ•°æ®  
select *  
from emp  
limit 5;  
  
--  limit 2,3æ„æ€æ˜¯ä»ç¬¬2æ¡å¼€å§‹æ˜¾ç¤º3æ¡æ•°æ®  
select *  
from emp  
limit 2,3;  
  
-- æŸ¥è¯¢3000åˆ°5000ä¹‹é—´çš„å‘˜å·¥  
select *  
from emp  
where sal between 3000 and 5000;  
  
-- in ç”¨æ³• æŸ¥è¯¢å·¥èµ„ä¸º800æˆ–è€…5000çš„å‘˜å·¥  
select *  
from emp  
where sal in (800, 5000);  
  
-- not in ç”¨æ³• æŸ¥è¯¢å·¥èµ„ä¸ä¸º800æˆ–è€…5000çš„å‘˜å·¥  
select *  
from emp  
where sal not in (800, 5000);  
  
-- like ç”¨æ³• æŸ¥è¯¢å§“åä»¥ å° å¼€å¤´çš„å‘˜å·¥  
select *  
from emp  
where ename like "å°%";  
  
-- rlike ç”¨æ³• æŸ¥è¯¢å§“åä»¥ å° å¼€å¤´çš„å‘˜å·¥ rlikeæ­£åˆ™è¡¨è¾¾å¼ ^å°.*  ^è¡¨ç¤ºä»¥ä»€ä¹ˆå¼€å¤´ .*è¡¨ç¤ºä»»æ„å­—ç¬¦1åˆ°å¤šä¸ª  
select *  
from emp  
where ename rlike "^å°.*";  
  
-- is null ç”¨æ³• æŸ¥è¯¢æ²¡æœ‰å·¥èµ„çš„å‘˜å·¥  
select *  
from emp  
where sal is null;  
  
-- is not null ç”¨æ³• æŸ¥è¯¢æœ‰å·¥èµ„çš„å‘˜å·¥  
select *  
from emp  
where sal is not null;  
  
-- èšåˆå‡½æ•°  
-- count(*) ç”¨æ³• æŸ¥è¯¢å‘˜å·¥çš„æ€»æ•°  
select count(*)  
from emp;  
  
-- count(x) æŸ¥è¯¢å‘˜å·¥å·¥èµ„çš„æ€»æ•°  
select count(sal)  
from emp;  
  
-- sum(x) æŸ¥è¯¢å‘˜å·¥çš„å·¥èµ„æ€»å’Œ  
select sum(sal)  
from emp;  
  
-- avg(x) æŸ¥è¯¢å‘˜å·¥çš„å¹³å‡å·¥èµ„  
select avg(sal)  
from emp;  
  
-- max(x) æŸ¥è¯¢å‘˜å·¥çš„æœ€å¤§å·¥èµ„  
select max(sal)  
from emp;  
  
-- min(x) æŸ¥è¯¢å‘˜å·¥çš„æœ€å°å·¥èµ„  
select min(sal)  
from emp;  
  
select count(*), count(job), sum(sal), avg(sal), max(sal), min(sal)  
from emp  
group by deptno;  
  
-- group by ç”¨æ³• æŸ¥è¯¢æ¯ä¸ªéƒ¨é—¨çš„å‘˜å·¥çš„æ€»æ•°  
select deptno, count(*)  
from emp  
group by deptno;  
  
-- group by ç”¨æ³• æŸ¥è¯¢æ¯ä¸ªéƒ¨é—¨çš„å‘˜å·¥çš„æ€»æ•°,å¹¶ä¸”æŒ‰ç…§éƒ¨é—¨å·æ’åº  
select deptno, count(*)  
from emp  
group by deptno  
order by deptno;  
  
-- group by ç”¨æ³• æŸ¥è¯¢æ¯ä¸ªéƒ¨é—¨çš„å‘˜å·¥çš„æ€»æ•°,å¹¶ä¸”æŒ‰ç…§éƒ¨é—¨å·æ’åº,å¹¶ä¸”æŒ‰ç…§æ€»æ•°æ’åº  
select deptno, count(*)  
from emp  
group by deptno  
order by deptno, count(*) desc;  
  
-- group by ç”¨æ³• æŸ¥è¯¢æ¯ä¸ªéƒ¨é—¨çš„å‘˜å·¥çš„æ€»æ•°,å¹¶ä¸”æŒ‰ç…§éƒ¨é—¨å·æ’åº,å¹¶ä¸”æŒ‰ç…§æ€»æ•°æ’åº,å¹¶ä¸”åªæ˜¾ç¤ºå‰3æ¡  
select deptno, count(*)  
from emp  
group by deptno  
order by deptno, count(*) desc  
limit 3;  
  
-- group by ç”¨æ³• æŸ¥è¯¢æ¯ä¸ªéƒ¨é—¨çš„å‘˜å·¥çš„æ€»æ•°,å¹¶ä¸”æŒ‰ç…§éƒ¨é—¨å·æ’åº,å¹¶ä¸”æŒ‰ç…§æ€»æ•°æ’åº,å¹¶ä¸”åªæ˜¾ç¤ºå‰3æ¡,å¹¶ä¸”åªæ˜¾ç¤ºéƒ¨é—¨å·å’Œæ€»æ•°  
select deptno, count(*)  
from emp  
group by deptno  
order by deptno, count(*) desc  
limit 3;  
  
-- group by ç”¨æ³• æŸ¥è¯¢æ¯ä¸ªéƒ¨é—¨çš„å‘˜å·¥çš„æ€»æ•°,å¹¶ä¸”æŒ‰ç…§éƒ¨é—¨å·æ’åº,å¹¶ä¸”æŒ‰ç…§æ€»æ•°æ’åº,å¹¶ä¸”åªæ˜¾ç¤ºå‰3æ¡,å¹¶ä¸”åªæ˜¾ç¤ºéƒ¨é—¨å·å’Œæ€»æ•°,å¹¶ä¸”éƒ¨é—¨å·ä¸ºdeptno  
select deptno, count(*) as num  
from emp  
group by deptno  
order by deptno, count(*) desc  
limit 3;  
  
-- having ç”¨æ³• æŸ¥è¯¢æ¯ä¸ªéƒ¨é—¨çš„å‘˜å·¥çš„å¹³å‡å·¥èµ„å¤§äº2000çš„éƒ¨é—¨å·  
select deptno  
from emp  
group by deptno  
having avg(sal) &gt; 2000;  
  
-- having ç”¨æ³• æŸ¥è¯¢æ¯ä¸ªéƒ¨é—¨çš„å‘˜å·¥çš„å¹³å‡å·¥èµ„å¤§äº2000çš„éƒ¨é—¨å·,å¹¶ä¸”æŒ‰ç…§éƒ¨é—¨å·æ’åº  
select deptno  
from emp  
group by deptno  
having avg(sal) &gt; 2000  
order by deptno;  
  
-- join ç”¨æ³• æŸ¥è¯¢æ¯ä¸ªå‘˜å·¥çš„å§“åå’Œéƒ¨é—¨å·  
select e.ename, d.deptno  
from emp e  
         join dept d on e.deptno = d.deptno;  
  
-- join ç”¨æ³• æŸ¥è¯¢æ¯ä¸ªå‘˜å·¥çš„å§“åå’Œéƒ¨é—¨å·,å¹¶ä¸”æŒ‰ç…§éƒ¨é—¨å·æ’åº  
select e.ename, d.deptno  
from emp e  
         join dept d on e.deptno = d.deptno  
order by d.deptno;  
  
select e.*, d.*  
from emp e  
         join dept d on e.deptno = d.deptno;  
  
-- å†…è¿æ¥ å†…è¿æ¥ï¼šåªæœ‰è¿›è¡Œè¿æ¥çš„ä¸¤ä¸ªè¡¨ä¸­éƒ½å­˜åœ¨ä¸è¿æ¥æ¡ä»¶ç›¸åŒ¹é…çš„æ•°æ®æ‰ä¼šè¢«ä¿ç•™ä¸‹æ¥ã€‚  
select e.empno,  
       e.ename,  
       d.deptno  
from emp e  
         join dept d  
              on e.deptno = d.deptno;  
  
-- å·¦å¤–è¿æ¥ å·¦å¤–è¿æ¥ï¼šjoinæ“ä½œç¬¦å·¦è¾¹è¡¨ä¸­ç¬¦åˆwhereå­å¥çš„æ‰€æœ‰è®°å½•å°†ä¼šè¢«è¿”å›ã€‚  
select e.empno,  
       e.ename,  
       d.deptno  
from emp e  
         left join dept d  
                   on e.deptno = d.deptno;  
  
-- å³å¤–è¿æ¥ å³å¤–è¿æ¥ï¼šjoinæ“ä½œç¬¦å³è¾¹è¡¨ä¸­ç¬¦åˆwhereå­å¥çš„æ‰€æœ‰è®°å½•å°†ä¼šè¢«è¿”å›ã€‚  
select e.empno,  
       e.ename,  
       d.deptno  
from emp e  
         right join dept d  
                    on e.deptno = d.deptno;  
  
-- æ»¡å¤–è¿æ¥ æ»¡å¤–è¿æ¥ï¼šå°†ä¼šè¿”å›æ‰€æœ‰è¡¨ä¸­ç¬¦åˆwhereè¯­å¥æ¡ä»¶çš„æ‰€æœ‰è®°å½•ã€‚å¦‚æœä»»ä¸€è¡¨çš„æŒ‡å®šå­—æ®µæ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„å€¼çš„è¯ï¼Œé‚£ä¹ˆå°±ä½¿ç”¨nullå€¼æ›¿ä»£ã€‚  
select e.empno,  
       e.ename,  
       d.deptno  
from emp e  
         full join dept d  
                   on e.deptno = d.deptno;  
  
  
-- å¤šè¡¨è¿æ¥  
  
create table if not exists location  
(  
    loc      int,   -- éƒ¨é—¨ä½ç½®id  
    loc_name string -- éƒ¨é—¨ä½ç½®  
)  
    row format delimited fields terminated by '\t';  
  
load data local inpath '/export/testall/03_data/location.txt' into table location;  
  
select e.ename,  
       d.dname,  
       l.loc_name  
from emp e  
         join dept d  
              on d.deptno = e.deptno  
         join location l  
              on d.loc = l.loc;  
  
-- ç¬›å¡å°”é›†  ä¸¤ä¸ªè¡¨çš„æ‰€æœ‰æ•°æ®éƒ½ä¼šæ˜¾ç¤ºå‡ºæ¥  
select empno,  
       dname  
from emp,  
     dept;  
  
--å°†å‘˜å·¥è¡¨30éƒ¨é—¨çš„å‘˜å·¥ä¿¡æ¯å’Œ40éƒ¨é—¨çš„å‘˜å·¥ä¿¡æ¯ï¼Œåˆ©ç”¨unionè¿›è¡Œæ‹¼æ¥æ˜¾ç¤ºã€‚  
select *  
from emp  
where deptno = 30  
union  
select *  
from emp  
where deptno = 40  
order by deptno;  
  
-- Sort By  æ ¹æ®éƒ¨é—¨ç¼–å·é™åºæŸ¥çœ‹å‘˜å·¥ä¿¡æ¯  
select  
    *  
from emp  
sort by deptno desc;  
  
-- å°†æŸ¥è¯¢ç»“æœå¯¼å…¥åˆ°æ–‡ä»¶ä¸­ï¼ˆæŒ‰ç…§éƒ¨é—¨ç¼–å·é™åºæ’åºï¼‰  
insert overwrite local directory '/export/testall/03_data/sortby-result'  
 select * from emp sort by deptno desc;
å¤åˆ¶<br><br>Sqlset mapreduce.framework.name;  
set mapreduce.framework.name=yarn;  
set hive.stats.column.autogather=false;  
set mapreduce.input.fileinputformat.split.maxsize=10240000;  
  
create database study;  
use study;  
create table if not exists student_info  
(  
    stu_id   string COMMENT 'å­¦ç”Ÿid',  
    stu_name string COMMENT 'å­¦ç”Ÿå§“å',  
    birthday string COMMENT 'å‡ºç”Ÿæ—¥æœŸ',  
    sex      string COMMENT 'æ€§åˆ«'  
)  
    row format delimited fields terminated by ','  
    stored as textfile;  
create table if not exists course_info  
(  
    course_id   string COMMENT 'è¯¾ç¨‹id',  
    course_name string COMMENT 'è¯¾ç¨‹å',  
    tea_id      string COMMENT 'ä»»è¯¾è€å¸ˆid'  
)  
    row format delimited fields terminated by ','  
    stored as textfile;  
create table if not exists teacher_info  
(  
    tea_id   string COMMENT 'è€å¸ˆid',  
    tea_name string COMMENT 'å­¦ç”Ÿå§“å'  
)  
    row format delimited fields terminated by ','  
    stored as textfile;  
create table if not exists score_info  
(  
    stu_id    string COMMENT 'å­¦ç”Ÿid',  
    course_id string COMMENT 'è¯¾ç¨‹id',  
    score     int COMMENT 'æˆç»©'  
)  
    row format delimited fields terminated by ','  
    stored as textfile;  
  
  
load data local inpath '/export/testall/datas/practice/student_info.txt' into table student_info;  
  
load data local inpath '/export/testall/datas/practice/course_info.txt' into table course_info;  
  
load data local inpath '/export/testall/datas/practice/teacher_info.txt' into table teacher_info;  
  
load data local inpath '/export/testall/datas/practice/score_info.txt' into table score_info;  
select *  
from student_info  
limit 5;  
select *  
from course_info  
limit 5;  
select *  
from teacher_info  
limit 5;  
select *  
from score_info  
limit 5;  
  
  
--  æŸ¥è¯¢å§“åä¸­å¸¦â€œå†°â€çš„å­¦ç”Ÿåå•  
select stu_name  
from student_info  
where stu_name like "%å†°%";  
  
  
--  æŸ¥è¯¢å§“â€œç‹â€è€å¸ˆçš„ä¸ªæ•°  
select count(tea_name) wang_count --åˆ«å  
from teacher_info  
where tea_name like "ç‹%";  
  
  
--  æ£€ç´¢è¯¾ç¨‹ç¼–å·ä¸ºâ€œ04â€ä¸”åˆ†æ•°å°äº60çš„å­¦ç”Ÿçš„è¯¾ç¨‹ä¿¡æ¯ï¼Œç»“æœæŒ‰åˆ†æ•°é™åºæ’åˆ—  
select stu_id, course_id, score  
from score_info  
where course_id = '04'  
  and score &lt; 60  
order by score desc;  
  
--  æŸ¥è¯¢æ•°å­¦æˆç»©ä¸åŠæ ¼çš„å­¦ç”Ÿå’Œå…¶å¯¹åº”çš„æˆç»©ï¼ŒæŒ‰ç…§å­¦å·å‡åºæ’åº  
select s.stu_id,  
       s.stu_name,  
       t1.score  
from student_info s  
         join (select *  
               from score_info  
               where course_id = (select course_id from course_info where course_name = 'æ•°å­¦')  
                 and score &lt; 60) t1 on s.stu_id = t1.stu_id  
order by s.stu_id;  
  
--  æŸ¥è¯¢ç¼–å·ä¸ºâ€œ02â€çš„è¯¾ç¨‹çš„æ€»æˆç»©  
select course_id, sum(score) sum_score  
from score_info  
where course_id = '02'  
group by course_id;  
  
--  æŸ¥è¯¢å‚åŠ è€ƒè¯•çš„å­¦ç”Ÿä¸ªæ•°  
select count(distinct stu_id) stu_num  
from score_info;  
  
  
select count(distinct stu_name)  
from student_info;  
  
  
--  æŸ¥è¯¢å„ç§‘æˆç»©æœ€é«˜å’Œæœ€ä½çš„åˆ†ï¼Œä»¥å¦‚ä¸‹çš„å½¢å¼æ˜¾ç¤ºï¼šè¯¾ç¨‹å·ï¼Œæœ€é«˜åˆ†ï¼Œæœ€ä½åˆ†  
select course_id, max(score), min(score)  
from score_info  
group by course_id;  
  
--  æŸ¥è¯¢æ¯é—¨è¯¾ç¨‹æœ‰å¤šå°‘å­¦ç”Ÿå‚åŠ äº†è€ƒè¯•ï¼ˆæœ‰è€ƒè¯•æˆç»©ï¼‰  
select course_id,  
       count(stu_id)  
from score_info  
group by course_id;  
  
--  æŸ¥è¯¢ç”·ç”Ÿã€å¥³ç”Ÿäººæ•°  
select sex,  
       count(stu_id)  
from student_info  
group by sex;  
  
--  æŸ¥è¯¢å¹³å‡æˆç»©å¤§äº60åˆ†çš„å­¦ç”Ÿçš„å­¦å·å’Œå¹³å‡æˆç»©  
select stu_id, avg(score) score_avg  
from score_info  
group by stu_id  
having score_avg &gt; 60;  
  
--  æŸ¥è¯¢è‡³å°‘é€‰ä¿®å››é—¨è¯¾ç¨‹çš„å­¦ç”Ÿå­¦å·  
select stu_id, count(course_id) course_count  
from score_info  
group by stu_id  
having course_count &gt;= 4;  
  
  
--  æŸ¥è¯¢åŒå§“ï¼ˆå‡è®¾æ¯ä¸ªå­¦ç”Ÿå§“åçš„ç¬¬ä¸€ä¸ªå­—ä¸ºå§“ï¼‰çš„å­¦ç”Ÿåå•å¹¶ç»Ÿè®¡åŒå§“äººæ•°å¤§äº2çš„å§“  
select t1.first_name,  
       count(*) count_first_name  
from (select stu_id,  
             stu_name,  
             substr(stu_name, 0, 1) first_name  
      from student_info) t1  
group by t1.first_name  
having count_first_name &gt;= 2;  
  
  
--  æŸ¥è¯¢æ¯é—¨è¯¾ç¨‹çš„å¹³å‡æˆç»©ï¼Œç»“æœæŒ‰å¹³å‡æˆç»©å‡åºæ’åºï¼Œå¹³å‡æˆç»©ç›¸åŒæ—¶ï¼ŒæŒ‰è¯¾ç¨‹å·é™åºæ’åˆ—  
select course_id, avg(score) avg_score  
from score_info  
group by course_id  
order by avg_score, course_id;  
  
--  ç»Ÿè®¡å‚åŠ è€ƒè¯•äººæ•°å¤§äºç­‰äº15çš„å­¦ç§‘  
select course_id, count(stu_id) count_stu  
from score_info  
group by course_id  
having course_id &gt; 15;  
  
--  æŸ¥è¯¢å­¦ç”Ÿçš„æ€»æˆç»©å¹¶æŒ‰ç…§æ€»æˆç»©é™åºæ’åº  
select stu_id,sum(score) sum_score from score_info group by stu_id order by sum_score desc ;  
  
--  æŒ‰ç…§å¦‚ä¸‹æ ¼å¼æ˜¾ç¤ºå­¦ç”Ÿçš„è¯­æ–‡ã€æ•°å­¦ã€è‹±è¯­ä¸‰ç§‘æˆç»©ï¼Œæ²¡æœ‰æˆç»©çš„è¾“å‡ºä¸º0ï¼ŒæŒ‰ç…§å­¦ç”Ÿçš„æœ‰æ•ˆå¹³å‡æˆç»©é™åºæ˜¾ç¤º  
select  
  si.stu_id,  
  sum(if(ci.course_name='è¯­æ–‡',score,0))  `è¯­æ–‡`,  
  sum(if(ci.course_name='æ•°å­¦',score,0))  `æ•°å­¦`,  
  sum(if(ci.course_name='è‹±è¯­',score,0))  `è‹±è¯­`,  
  count(*)  `æœ‰æ•ˆè¯¾ç¨‹æ•°`,  
  avg(si.score)  `å¹³å‡æˆç»©`  
from  
  score_info si  
join  
  course_info ci  
on  
  si.course_id=ci.course_id  
group by  
  si.stu_id  
order by  
  `å¹³å‡æˆç»©` desc;  
  
  
--  æŸ¥è¯¢ä¸€å…±å‚åŠ ä¸‰é—¨è¯¾ç¨‹ä¸”å…¶ä¸­ä¸€é—¨ä¸ºè¯­æ–‡è¯¾ç¨‹çš„å­¦ç”Ÿçš„idå’Œå§“å  
select  
    t2.stu_id,  
    s.stu_name  
from (  
         select t1.stu_id  
         from (  
                  select stu_id,  
                         course_id  
                  from score_info  
                  where stu_id in (  
                      select stu_id  
                      from score_info  
                      where course_id = "01"  
                  )  
              ) t1  
         group by t1.stu_id  
         having count(t1.course_id) = 3  
     ) t2  
join student_info s on t2.stu_id = s.stu_id;  
  
  
--  æŸ¥è¯¢æ‰€æœ‰è¯¾ç¨‹æˆç»©å‡å°äº60åˆ†çš„å­¦ç”Ÿçš„å­¦å·ã€å§“å  
select s.stu_id,  
       s.stu_name  
from (  
         select stu_id,  
                sum(if(score &gt;= 60, 1, 0)) flag  
         from score_info  
         group by stu_id  
         having flag = 0  
     ) t1  
         join student_info s on s.stu_id = t1.stu_id;  
  
  
--  æŸ¥è¯¢æ²¡æœ‰å­¦å…¨æ‰€æœ‰è¯¾çš„å­¦ç”Ÿçš„å­¦å·ã€å§“å  
select  
    s.stu_id,  
    s.stu_name  
from student_info s  
left join score_info sc on s.stu_id = sc.stu_id  
group by s.stu_id, s.stu_name  
having count(course_id) &lt; (select count(course_id) from course_info);  
  
  
--  æŸ¥è¯¢å‡ºåªé€‰ä¿®äº†ä¸‰é—¨è¯¾ç¨‹çš„å…¨éƒ¨å­¦ç”Ÿçš„å­¦å·å’Œå§“å  
select  
    s.stu_id,  
    s.stu_name  
from student_info s  
join (  
    select  
        stu_id,  
        count(course_id) course_count  
    from score_info  
    group by stu_id  
    having course_count =3  
    ) t1  
on s.stu_id = t1.stu_id;  
  
  
--  æŸ¥è¯¢æœ‰ä¸¤é—¨ä»¥ä¸Šçš„è¯¾ç¨‹ä¸åŠæ ¼çš„åŒå­¦çš„å­¦å·åŠå…¶å¹³å‡æˆç»©  
select  
    t1.stu_id,  
    t2.avg_score  
from (  
         select  
             stu_id,  
             sum(if(score &lt; 60,1,0)) flage  
         from score_info  
         group by stu_id  
         having flage &gt;= 2  
) t1  
join (  
    select  
        stu_id,  
        avg(score) avg_score  
    from score_info  
    group by stu_id  
) t2 on t1.stu_id = t2.stu_id;  
  
  
--  æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿçš„å­¦å·ã€å§“åã€é€‰è¯¾æ•°ã€æ€»æˆç»©  
select  
    s.stu_id,  
    s.stu_name,  
    count(sc.course_id) count_course,  
    sum(sc.score) sum_score  
from student_info s  
left join score_info sc on s.stu_id = sc.stu_id  
group by s.stu_id,s.stu_name;  
  
  
--  æŸ¥è¯¢å¹³å‡æˆç»©å¤§äº85çš„æ‰€æœ‰å­¦ç”Ÿçš„å­¦å·ã€å§“åå’Œå¹³å‡æˆç»©  
select s.stu_id,  
       s.stu_name,  
       avg(sc.score) avg_score  
from score_info sc  
left join student_info s on s.stu_id = sc.stu_id  
group by s.stu_id, s.stu_name  
having avg_score &gt; 85;  
  
  
--  æŸ¥è¯¢å­¦ç”Ÿçš„é€‰è¯¾æƒ…å†µï¼šå­¦å·ï¼Œå§“åï¼Œè¯¾ç¨‹å·ï¼Œè¯¾ç¨‹åç§°  
select  
    s.stu_id,  
    s.stu_name,  
    c.course_id,  
    c.course_name  
from score_info sc  
join course_info c on sc.course_id = c.course_id  
join student_info s on sc.stu_id = s.stu_id;  
  
  
--  æŸ¥è¯¢å‡ºæ¯é—¨è¯¾ç¨‹çš„åŠæ ¼äººæ•°å’Œä¸åŠæ ¼äººæ•°  
select  
    c.course_id,  
    c.course_name,  
    t1.`åŠæ ¼äººæ•°`,  
    t1.`ä¸åŠæ ¼äººæ•°`  
from course_info c  
join (  
    select  
        course_id,  
        sum(if(score &gt;= 60,1,0)) as `åŠæ ¼äººæ•°`,  
        sum(if(score &lt; 60,1,0)) as `ä¸åŠæ ¼äººæ•°`  
    from score_info  
    group by course_id  
    ) t1 on c.course_id = t1.course_id;  
  
  
--  æŸ¥è¯¢è¯¾ç¨‹ç¼–å·ä¸º03ä¸”è¯¾ç¨‹æˆç»©åœ¨80åˆ†ä»¥ä¸Šçš„å­¦ç”Ÿçš„å­¦å·å’Œå§“ååŠè¯¾ç¨‹ä¿¡æ¯  
select  
    s.stu_id,  
    s.stu_name,  
    t1.score,  
    t1.course_id,  
    c.course_name  
from student_info s  
join (  
    select  
        stu_id,  
        score,  
        course_id  
    from score_info  
    where score &gt; 80 and course_id = '03'  
    ) t1  
on s.stu_id = t1.stu_id  
join course_info c on c.course_id = t1.course_id;  
  
  
--  è¯¾ç¨‹ç¼–å·ä¸º"01"ä¸”è¯¾ç¨‹åˆ†æ•°å°äº60ï¼ŒæŒ‰åˆ†æ•°é™åºæ’åˆ—çš„å­¦ç”Ÿä¿¡æ¯  
select  
    s.stu_id,  
    s.stu_name,  
    s.birthday,  
    s.sex,  
    t1.score  
from student_info s  
join (  
    select  
        stu_id,  
        course_id,  
        score  
    from score_info  
    where score &lt; 60 and course_id = '01'  
    ) t1  
on s.stu_id=t1.stu_id  
order by t1.score desc;  
  
  
--  æŸ¥è¯¢æ‰€æœ‰è¯¾ç¨‹æˆç»©åœ¨70åˆ†ä»¥ä¸Šçš„å­¦ç”Ÿçš„å§“åã€è¯¾ç¨‹åç§°å’Œåˆ†æ•°ï¼ŒæŒ‰åˆ†æ•°å‡åºæ’åˆ—  
select  
    s.stu_id,  
    s.stu_name,  
    c.course_name,  
    s2.score  
from student_info s  
join (  
    select  
        stu_id,  
        sum(if(score &gt;= 70,0,1)) flage  
    from score_info  
    group by stu_id  
    having flage =0  
    ) t1  
on s.stu_id = t1.stu_id  
left join score_info s2 on s.stu_id = s2.stu_id  
left join course_info c on s2.course_id = c.course_id;  
  
  
--  æŸ¥è¯¢è¯¥å­¦ç”Ÿä¸åŒè¯¾ç¨‹çš„æˆç»©ç›¸åŒçš„å­¦ç”Ÿç¼–å·ã€è¯¾ç¨‹ç¼–å·ã€å­¦ç”Ÿæˆç»©  
select  
    sc1.stu_id,  
    sc1.course_id,  
    sc1.score  
from score_info sc1  
join score_info sc2 on sc1.stu_id = sc2.stu_id  
and sc1.course_id &lt;&gt; sc2.course_id  
and sc1.score = sc2.score;  
  
  
--  æŸ¥è¯¢è¯¾ç¨‹ç¼–å·ä¸ºâ€œ01â€çš„è¯¾ç¨‹æ¯”â€œ02â€çš„è¯¾ç¨‹æˆç»©é«˜çš„æ‰€æœ‰å­¦ç”Ÿçš„å­¦å·  
select  
    s1.stu_id  
from  
(  
    select  
        sc1.stu_id,  
        sc1.course_id,  
        sc1.score  
    from  score_info sc1  
    where sc1.course_id ='01'  
) s1  
join  
(  
    select  
        sc2.stu_id,  
        sc2.course_id,  
        score  
    from score_info sc2  
    where sc2.course_id ="02"  
)s2  
on s1.stu_id=s2.stu_id  
where s1.score &gt; s2.score;  
  
  
--  æŸ¥è¯¢å­¦è¿‡ç¼–å·ä¸ºâ€œ01â€çš„è¯¾ç¨‹å¹¶ä¸”ä¹Ÿå­¦è¿‡ç¼–å·ä¸ºâ€œ02â€çš„è¯¾ç¨‹çš„å­¦ç”Ÿçš„å­¦å·ã€å§“å  
select  
    t1.stu_id as `å­¦å·`,  
    s.stu_name as `å§“å`  
from  
(  
    select  
        stu_id  
    from score_info sc1  
    where sc1.course_id='01'  
    and stu_id in (  
          select  
              stu_id  
          from score_info sc2  
          where sc2.course_id='02'  
          )  
)t1  
join student_info s  
on t1.stu_id = s.stu_id;  
  
  
--  æŸ¥è¯¢å­¦è¿‡â€œæä½“éŸ³â€è€å¸ˆæ‰€æ•™çš„æ‰€æœ‰è¯¾çš„åŒå­¦çš„å­¦å·ã€å§“å  
select  
    t1.stu_id,  
    si.stu_name  
from  
(  
    select  
        stu_id  
    from score_info si  
    where course_id in  
    (  
        select  
           course_id  
        from course_info c  
        join teacher_info t  
        on c.tea_id = t.tea_id  
        where tea_name='æä½“éŸ³'      --æä½“éŸ³æ•™çš„æ‰€æœ‰è¯¾ç¨‹  
    )  
    group by stu_id  
    having count(*)=2       --å­¦ä¹ æ‰€æœ‰è¯¾ç¨‹çš„å­¦ç”Ÿ  
)t1  
left join student_info si  
on t1.stu_id=si.stu_id;  
  
  
--  æŸ¥è¯¢å­¦è¿‡â€œæä½“éŸ³â€è€å¸ˆæ‰€è®²æˆçš„ä»»æ„ä¸€é—¨è¯¾ç¨‹çš„å­¦ç”Ÿçš„å­¦å·ã€å§“å  
select  
    t1.stu_id,  
    si.stu_name  
from  
(  
    select  
        stu_id  
    from score_info si  
    where course_id in  
    (  
        select  
           course_id  
        from course_info c  
        join teacher_info t  
        on c.tea_id = t.tea_id  
        where tea_name='æä½“éŸ³'  
    )  
    group by stu_id  
)t1  
left join student_info si  
on t1.stu_id=si.stu_id;  
  
  
--  æŸ¥è¯¢æ²¡å­¦è¿‡"æä½“éŸ³"è€å¸ˆè®²æˆçš„ä»»ä¸€é—¨è¯¾ç¨‹çš„å­¦ç”Ÿå§“å  
select  
    stu_id,  
    stu_name  
from student_info  
where stu_id not in  
(  
    select  
        stu_id  
    from score_info si  
    where course_id in  
    (  
        select  
           course_id  
        from course_info c  
        join teacher_info t  
        on c.tea_id = t.tea_id  
        where tea_name='æä½“éŸ³'  
    )  
    group by stu_id  
);  
  
  
--  æŸ¥è¯¢è‡³å°‘æœ‰ä¸€é—¨è¯¾ä¸å­¦å·ä¸ºâ€œ001â€çš„å­¦ç”Ÿæ‰€å­¦è¯¾ç¨‹ç›¸åŒçš„å­¦ç”Ÿçš„å­¦å·å’Œå§“å  
select  
    si.stu_id,  
    si.stu_name  
from score_info sc  
join student_info si  
on sc.stu_id = si.stu_id  
where sc.course_id in  
(  
    select  
        course_id  
    from score_info  
    where stu_id='001'    --001çš„è¯¾ç¨‹  
) and sc.stu_id &lt;&gt; '001'  --æ’é™¤001å­¦ç”Ÿ  
group by si.stu_id,si.stu_name;  
  
  
--  æŒ‰å¹³å‡æˆç»©ä»é«˜åˆ°ä½æ˜¾ç¤ºæ‰€æœ‰å­¦ç”Ÿçš„æ‰€æœ‰è¯¾ç¨‹çš„æˆç»©ä»¥åŠå¹³å‡æˆç»©  
select  
    si.stu_name,  
    ci.course_name,  
    sc.score,  
    t1.avg_score  
from score_info sc  
join student_info si  
on sc.stu_id=si.stu_id  
join course_info ci  
on sc.course_id=ci.course_id  
join  
(  
    select  
        stu_id,  
        avg(score) avg_score  
    from score_info  
    group by stu_id  
)t1  
on sc.stu_id=t1.stu_id  
order by t1.avg_score desc;
å¤åˆ¶<br>ğŸ˜­
æ‰ä¼šä¸€ç‚¹ç‚¹ å¤ªTMDéš¾äº†
<br><br>&lt;&lt; <a data-href="2024-01-11" href="\æ—¥è®°\2024-01-11.html" class="internal-link" target="_self" rel="noopener">2024-01-11</a> | <a data-href="2024-01-13" href="\2024-01-13" class="internal-link" target="_self" rel="noopener">2024-01-13</a> &gt;&gt;]]></description><link>æ—¥è®°\2024-01-12.html</link><guid isPermaLink="false">æ—¥è®°/2024-01-12.md</guid><pubDate>Fri, 12 Jan 2024 09:41:39 GMT</pubDate></item><item><title><![CDATA[1. åå°„]]></title><description><![CDATA[ 
 <br><br><br>â€‹	ä¸“ä¸šçš„è§£é‡Šï¼ˆäº†è§£ä¸€ä¸‹ï¼‰ï¼š<br>â€‹       æ˜¯åœ¨è¿è¡ŒçŠ¶æ€ä¸­ï¼Œå¯¹äºä»»æ„ä¸€ä¸ªç±»ï¼Œéƒ½èƒ½å¤ŸçŸ¥é“è¿™ä¸ªç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼›<br>â€‹       å¯¹äºä»»æ„ä¸€ä¸ªå¯¹è±¡ï¼Œéƒ½èƒ½å¤Ÿè°ƒç”¨å®ƒçš„ä»»æ„å±æ€§å’Œæ–¹æ³•ï¼›<br>â€‹       è¿™ç§åŠ¨æ€è·å–ä¿¡æ¯ä»¥åŠåŠ¨æ€è°ƒç”¨å¯¹è±¡æ–¹æ³•çš„åŠŸèƒ½ç§°ä¸ºJavaè¯­è¨€çš„åå°„æœºåˆ¶ã€‚<br>â€‹	é€šä¿—çš„ç†è§£ï¼šï¼ˆæŒæ¡ï¼‰<br>
<br>
åˆ©ç”¨åå°„åˆ›å»ºçš„å¯¹è±¡å¯ä»¥æ— è§†ä¿®é¥°ç¬¦è°ƒç”¨ç±»é‡Œé¢çš„å†…å®¹

<br>
å¯ä»¥è·Ÿé…ç½®æ–‡ä»¶ç»“åˆèµ·æ¥ä½¿ç”¨ï¼ŒæŠŠè¦åˆ›å»ºçš„å¯¹è±¡ä¿¡æ¯å’Œæ–¹æ³•å†™åœ¨é…ç½®æ–‡ä»¶ä¸­ã€‚
è¯»å–åˆ°ä»€ä¹ˆç±»ï¼Œå°±åˆ›å»ºä»€ä¹ˆç±»çš„å¯¹è±¡
è¯»å–åˆ°ä»€ä¹ˆæ–¹æ³•ï¼Œå°±è°ƒç”¨ä»€ä¹ˆæ–¹æ³•
æ­¤æ—¶å½“éœ€æ±‚å˜æ›´çš„æ—¶å€™ä¸éœ€è¦ä¿®æ”¹ä»£ç ï¼Œåªè¦ä¿®æ”¹é…ç½®æ–‡ä»¶å³å¯ã€‚

<br><br>åå°„éƒ½æ˜¯ä»classå­—èŠ‚ç æ–‡ä»¶ä¸­è·å–çš„å†…å®¹ã€‚<br>
<br>å¦‚ä½•è·å–classå­—èŠ‚ç æ–‡ä»¶çš„å¯¹è±¡
<br>åˆ©ç”¨åå°„å¦‚ä½•è·å–æ„é€ æ–¹æ³•ï¼ˆåˆ›å»ºå¯¹è±¡ï¼‰
<br>åˆ©ç”¨åå°„å¦‚ä½•è·å–æˆå‘˜å˜é‡ï¼ˆèµ‹å€¼ï¼Œè·å–å€¼ï¼‰
<br>åˆ©ç”¨åå°„å¦‚ä½•è·å–æˆå‘˜æ–¹æ³•ï¼ˆè¿è¡Œï¼‰
<br><br>
<br>Classè¿™ä¸ªç±»é‡Œé¢çš„é™æ€æ–¹æ³•forNameï¼ˆâ€œå…¨ç±»åâ€ï¼‰ï¼ˆæœ€å¸¸ç”¨ï¼‰
<br>é€šè¿‡classå±æ€§è·å–  
<br>é€šè¿‡å¯¹è±¡è·å–å­—èŠ‚ç æ–‡ä»¶å¯¹è±¡
<br>ä»£ç ç¤ºä¾‹ï¼š<br>Java//1.Classè¿™ä¸ªç±»é‡Œé¢çš„é™æ€æ–¹æ³•forName
//Class.forName("ç±»çš„å…¨ç±»å")ï¼š å…¨ç±»å = åŒ…å + ç±»å
Class clazz1 = Class.forName("com.itheima.reflectdemo.Student");
//æºä»£ç é˜¶æ®µè·å– --- å…ˆæŠŠStudentåŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå†è·å–å­—èŠ‚ç æ–‡ä»¶çš„å¯¹è±¡
//clazz å°±è¡¨ç¤ºStudentè¿™ä¸ªç±»çš„å­—èŠ‚ç æ–‡ä»¶å¯¹è±¡ã€‚
//å°±æ˜¯å½“Student.classè¿™ä¸ªæ–‡ä»¶åŠ è½½åˆ°å†…å­˜ä¹‹åï¼Œäº§ç”Ÿçš„å­—èŠ‚ç æ–‡ä»¶å¯¹è±¡


//2.é€šè¿‡classå±æ€§è·å–
//ç±»å.class
Class clazz2 = Student.class;

//å› ä¸ºclassæ–‡ä»¶åœ¨ç¡¬ç›˜ä¸­æ˜¯å”¯ä¸€çš„ï¼Œæ‰€ä»¥ï¼Œå½“è¿™ä¸ªæ–‡ä»¶åŠ è½½åˆ°å†…å­˜ä¹‹åäº§ç”Ÿçš„å¯¹è±¡ä¹Ÿæ˜¯å”¯ä¸€çš„
System.out.println(clazz1 == clazz2);//true


//3.é€šè¿‡Studentå¯¹è±¡è·å–å­—èŠ‚ç æ–‡ä»¶å¯¹è±¡
Student s = new Student();
Class clazz3 = s.getClass();
System.out.println(clazz1 == clazz2);//true
System.out.println(clazz2 == clazz3);//true
å¤åˆ¶<br><br>javaæ–‡ä»¶ï¼šå°±æ˜¯æˆ‘ä»¬è‡ªå·±ç¼–å†™çš„javaä»£ç ã€‚<br>å­—èŠ‚ç æ–‡ä»¶ï¼šå°±æ˜¯é€šè¿‡javaæ–‡ä»¶ç¼–è¯‘ä¹‹åçš„classæ–‡ä»¶ï¼ˆæ˜¯åœ¨ç¡¬ç›˜ä¸ŠçœŸå®å­˜åœ¨çš„ï¼Œç”¨çœ¼ç›èƒ½çœ‹åˆ°çš„ï¼‰<br>å­—èŠ‚ç æ–‡ä»¶å¯¹è±¡ï¼šå½“classæ–‡ä»¶åŠ è½½åˆ°å†…å­˜ä¹‹åï¼Œè™šæ‹Ÿæœºè‡ªåŠ¨åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡ã€‚<br>â€‹				è¿™ä¸ªå¯¹è±¡é‡Œé¢è‡³å°‘åŒ…å«äº†ï¼šæ„é€ æ–¹æ³•ï¼Œæˆå‘˜å˜é‡ï¼Œæˆå‘˜æ–¹æ³•ã€‚<br>è€Œæˆ‘ä»¬çš„åå°„è·å–çš„æ˜¯ä»€ä¹ˆï¼Ÿå­—èŠ‚ç æ–‡ä»¶å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡åœ¨å†…å­˜ä¸­æ˜¯å”¯ä¸€çš„ã€‚<br><br>è§„åˆ™ï¼š<br>â€‹	getè¡¨ç¤ºè·å–<br>â€‹	Declaredè¡¨ç¤ºç§æœ‰<br>â€‹	æœ€åçš„sè¡¨ç¤ºæ‰€æœ‰ï¼Œå¤æ•°å½¢å¼<br>â€‹	å¦‚æœå½“å‰è·å–åˆ°çš„æ˜¯ç§æœ‰çš„ï¼Œå¿…é¡»è¦ä¸´æ—¶ä¿®æ”¹è®¿é—®æƒé™ï¼Œå¦åˆ™æ— æ³•ä½¿ç”¨<br><br>ä»£ç ç¤ºä¾‹ï¼š<br>Javapublic class ReflectDemo2 {
    public static void main(String[] args) throws ClassNotFoundException, NoSuchMethodException {
        //1.è·å¾—æ•´ä½“ï¼ˆclasså­—èŠ‚ç æ–‡ä»¶å¯¹è±¡ï¼‰
        Class clazz = Class.forName("com.itheima.reflectdemo.Student");


        //2.è·å–æ„é€ æ–¹æ³•å¯¹è±¡
        //è·å–æ‰€æœ‰æ„é€ æ–¹æ³•ï¼ˆpublicï¼‰
        Constructor[] constructors1 = clazz.getConstructors();
        for (Constructor constructor : constructors1) {
            System.out.println(constructor);
        }

        System.out.println("=======================");

        //è·å–æ‰€æœ‰æ„é€ ï¼ˆå¸¦ç§æœ‰çš„ï¼‰
        Constructor[] constructors2 = clazz.getDeclaredConstructors();

        for (Constructor constructor : constructors2) {
            System.out.println(constructor);
        }
        System.out.println("=======================");

        //è·å–æŒ‡å®šçš„ç©ºå‚æ„é€ 
        Constructor con1 = clazz.getConstructor();
        System.out.println(con1);

        Constructor con2 = clazz.getConstructor(String.class,int.class);
        System.out.println(con2);

        System.out.println("=======================");
        //è·å–æŒ‡å®šçš„æ„é€ (æ‰€æœ‰æ„é€ éƒ½å¯ä»¥è·å–åˆ°ï¼ŒåŒ…æ‹¬publicåŒ…æ‹¬private)
        Constructor con3 = clazz.getDeclaredConstructor();
        System.out.println(con3);
        //äº†è§£ System.out.println(con3 == con1);
        //æ¯ä¸€æ¬¡è·å–æ„é€ æ–¹æ³•å¯¹è±¡çš„æ—¶å€™ï¼Œéƒ½ä¼šæ–°newä¸€ä¸ªã€‚

        Constructor con4 = clazz.getDeclaredConstructor(String.class);
        System.out.println(con4);
    }
}
å¤åˆ¶<br><br>æ¶‰åŠåˆ°çš„æ–¹æ³•ï¼šnewInstance<br>ä»£ç ç¤ºä¾‹ï¼š<br>Java//é¦–å…ˆè¦æœ‰ä¸€ä¸ªjavabeanç±»
public class Student {
    private String name;

    private int age;


    public Student() {

    }

    public Student(String name) {
        this.name = name;
    }

    private Student(String name, int age) {
        this.name = name;
        this.age = age;
    }


    /**
     * è·å–
     * @return name
     */
    public String getName() {
        return name;
    }

    /**
     * è®¾ç½®
     * @param name
     */
    public void setName(String name) {
        this.name = name;
    }

    /**
     * è·å–
     * @return age
     */
    public int getAge() {
        return age;
    }

    /**
     * è®¾ç½®
     * @param age
     */
    public void setAge(int age) {
        this.age = age;
    }

    public String toString() {
        return "Student{name = " + name + ", age = " + age + "}";
    }
}



//æµ‹è¯•ç±»ä¸­çš„ä»£ç ï¼š
//éœ€æ±‚1ï¼š
//è·å–ç©ºå‚ï¼Œå¹¶åˆ›å»ºå¯¹è±¡

//1.è·å–æ•´ä½“çš„å­—èŠ‚ç æ–‡ä»¶å¯¹è±¡
Class clazz = Class.forName("com.itheima.a02reflectdemo1.Student");
//2.è·å–ç©ºå‚çš„æ„é€ æ–¹æ³•
Constructor con = clazz.getConstructor();
//3.åˆ©ç”¨ç©ºå‚æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡
Student stu = (Student) con.newInstance();
System.out.println(stu);


System.out.println("=============================================");


//æµ‹è¯•ç±»ä¸­çš„ä»£ç ï¼š
//éœ€æ±‚2ï¼š
//è·å–å¸¦å‚æ„é€ ï¼Œå¹¶åˆ›å»ºå¯¹è±¡
//1.è·å–æ•´ä½“çš„å­—èŠ‚ç æ–‡ä»¶å¯¹è±¡
Class clazz = Class.forName("com.itheima.a02reflectdemo1.Student");
//2.è·å–æœ‰å‚æ„é€ æ–¹æ³•
Constructor con = clazz.getDeclaredConstructor(String.class, int.class);
//3.ä¸´æ—¶ä¿®æ”¹æ„é€ æ–¹æ³•çš„è®¿é—®æƒé™ï¼ˆæš´åŠ›åå°„ï¼‰
con.setAccessible(true);
//4.ç›´æ¥åˆ›å»ºå¯¹è±¡
Student stu = (Student) con.newInstance("zhangsan", 23);
System.out.println(stu);
å¤åˆ¶<br><br>è§„åˆ™ï¼š<br>â€‹	getè¡¨ç¤ºè·å–<br>â€‹	Declaredè¡¨ç¤ºç§æœ‰<br>â€‹	æœ€åçš„sè¡¨ç¤ºæ‰€æœ‰ï¼Œå¤æ•°å½¢å¼<br>â€‹	å¦‚æœå½“å‰è·å–åˆ°çš„æ˜¯ç§æœ‰çš„ï¼Œå¿…é¡»è¦ä¸´æ—¶ä¿®æ”¹è®¿é—®æƒé™ï¼Œå¦åˆ™æ— æ³•ä½¿ç”¨<br>æ–¹æ³•åï¼š<br><br>ä»£ç ç¤ºä¾‹ï¼š<br>Javapublic class ReflectDemo4 {
    public static void main(String[] args) throws ClassNotFoundException, NoSuchFieldException {
        //è·å–æˆå‘˜å˜é‡å¯¹è±¡

        //1.è·å–classå¯¹è±¡
        Class clazz = Class.forName("com.itheima.reflectdemo.Student");

        //2.è·å–æˆå‘˜å˜é‡çš„å¯¹è±¡ï¼ˆFieldå¯¹è±¡)åªèƒ½è·å–publicä¿®é¥°çš„
        Field[] fields1 = clazz.getFields();
        for (Field field : fields1) {
            System.out.println(field);
        }

        System.out.println("===============================");

        //è·å–æˆå‘˜å˜é‡çš„å¯¹è±¡ï¼ˆpublic + privateï¼‰
        Field[] fields2 = clazz.getDeclaredFields();
        for (Field field : fields2) {
            System.out.println(field);
        }

        System.out.println("===============================");
        //è·å¾—å•ä¸ªæˆå‘˜å˜é‡å¯¹è±¡
        //å¦‚æœè·å–çš„å±æ€§æ˜¯ä¸å­˜åœ¨çš„ï¼Œé‚£ä¹ˆä¼šæŠ¥å¼‚å¸¸
        //Field field3 = clazz.getField("aaa");
        //System.out.println(field3);//NoSuchFieldException

        Field field4 = clazz.getField("gender");
        System.out.println(field4);

        System.out.println("===============================");
        //è·å–å•ä¸ªæˆå‘˜å˜é‡ï¼ˆç§æœ‰ï¼‰
        Field field5 = clazz.getDeclaredField("name");
        System.out.println(field5);

    }
}



public class Student {
    private String name;

    private int age;

    public String gender;

    public String address;


    public Student() {
    }

    public Student(String name, int age, String address) {
        this.name = name;
        this.age = age;
        this.address = address;
    }


    public Student(String name, int age, String gender, String address) {
        this.name = name;
        this.age = age;
        this.gender = gender;
        this.address = address;
    }

    /**
     * è·å–
     * @return name
     */
    public String getName() {
        return name;
    }

    /**
     * è®¾ç½®
     * @param name
     */
    public void setName(String name) {
        this.name = name;
    }

    /**
     * è·å–
     * @return age
     */
    public int getAge() {
        return age;
    }

    /**
     * è®¾ç½®
     * @param age
     */
    public void setAge(int age) {
        this.age = age;
    }

    /**
     * è·å–
     * @return gender
     */
    public String getGender() {
        return gender;
    }

    /**
     * è®¾ç½®
     * @param gender
     */
    public void setGender(String gender) {
        this.gender = gender;
    }

    /**
     * è·å–
     * @return address
     */
    public String getAddress() {
        return address;
    }

    /**
     * è®¾ç½®
     * @param address
     */
    public void setAddress(String address) {
        this.address = address;
    }

    public String toString() {
        return "Student{name = " + name + ", age = " + age + ", gender = " + gender + ", address = " + address + "}";
    }
}

å¤åˆ¶<br><br><br>ä»£ç ç¤ºä¾‹ï¼š<br>Javapublic class ReflectDemo5 {
    public static void main(String[] args) throws ClassNotFoundException, NoSuchFieldException, IllegalAccessException {
        Student s = new Student("zhangsan",23,"å¹¿å·");
        Student ss = new Student("lisi",24,"åŒ—äº¬");

        //éœ€æ±‚ï¼š
        //åˆ©ç”¨åå°„è·å–æˆå‘˜å˜é‡å¹¶è·å–å€¼å’Œä¿®æ”¹å€¼

        //1.è·å–classå¯¹è±¡
        Class clazz = Class.forName("com.itheima.reflectdemo.Student");

        //2.è·å–nameæˆå‘˜å˜é‡
        //fieldå°±è¡¨ç¤ºnameè¿™ä¸ªå±æ€§çš„å¯¹è±¡
        Field field = clazz.getDeclaredField("name");
        //ä¸´æ—¶ä¿®é¥°ä»–çš„è®¿é—®æƒé™
        field.setAccessible(true);

        //3.è®¾ç½®(ä¿®æ”¹)nameçš„å€¼
        //å‚æ•°ä¸€ï¼šè¡¨ç¤ºè¦ä¿®æ”¹å“ªä¸ªå¯¹è±¡çš„nameï¼Ÿ
        //å‚æ•°äºŒï¼šè¡¨ç¤ºè¦ä¿®æ”¹ä¸ºå¤šå°‘ï¼Ÿ
        field.set(s,"wangwu");

        //3.è·å–nameçš„å€¼
        //è¡¨ç¤ºæˆ‘è¦è·å–è¿™ä¸ªå¯¹è±¡çš„nameçš„å€¼
        String result = (String)field.get(s);

        //4.æ‰“å°ç»“æœ
        System.out.println(result);

        System.out.println(s);
        System.out.println(ss);

    }
}


public class Student {
    private String name;
    private int age;
    public String gender;
    public String address;


    public Student() {
    }

    public Student(String name, int age, String address) {
        this.name = name;
        this.age = age;
        this.address = address;
    }


    public Student(String name, int age, String gender, String address) {
        this.name = name;
        this.age = age;
        this.gender = gender;
        this.address = address;
    }

    /**
     * è·å–
     * @return name
     */
    public String getName() {
        return name;
    }

    /**
     * è®¾ç½®
     * @param name
     */
    public void setName(String name) {
        this.name = name;
    }

    /**
     * è·å–
     * @return age
     */
    public int getAge() {
        return age;
    }

    /**
     * è®¾ç½®
     * @param age
     */
    public void setAge(int age) {
        this.age = age;
    }

    /**
     * è·å–
     * @return gender
     */
    public String getGender() {
        return gender;
    }

    /**
     * è®¾ç½®
     * @param gender
     */
    public void setGender(String gender) {
        this.gender = gender;
    }

    /**
     * è·å–
     * @return address
     */
    public String getAddress() {
        return address;
    }

    /**
     * è®¾ç½®
     * @param address
     */
    public void setAddress(String address) {
        this.address = address;
    }

    public String toString() {
        return "Student{name = " + name + ", age = " + age + ", gender = " + gender + ", address = " + address + "}";
    }
}

å¤åˆ¶<br><br>è§„åˆ™ï¼š<br>â€‹	getè¡¨ç¤ºè·å–<br>â€‹	Declaredè¡¨ç¤ºç§æœ‰<br>â€‹	æœ€åçš„sè¡¨ç¤ºæ‰€æœ‰ï¼Œå¤æ•°å½¢å¼<br>â€‹	å¦‚æœå½“å‰è·å–åˆ°çš„æ˜¯ç§æœ‰çš„ï¼Œå¿…é¡»è¦ä¸´æ—¶ä¿®æ”¹è®¿é—®æƒé™ï¼Œå¦åˆ™æ— æ³•ä½¿ç”¨<br><br>ä»£ç ç¤ºä¾‹ï¼š<br>Javapublic class ReflectDemo6 {
    public static void main(String[] args) throws ClassNotFoundException, NoSuchMethodException {
        //1.è·å–classå¯¹è±¡
        Class&lt;?&gt; clazz = Class.forName("com.itheima.reflectdemo.Student");


        //2.è·å–æ–¹æ³•
        //getMethodså¯ä»¥è·å–çˆ¶ç±»ä¸­publicä¿®é¥°çš„æ–¹æ³•
        Method[] methods1 = clazz.getMethods();
        for (Method method : methods1) {
            System.out.println(method);
        }

        System.out.println("===========================");
        //è·å–æ‰€æœ‰çš„æ–¹æ³•ï¼ˆåŒ…å«ç§æœ‰ï¼‰
        //ä½†æ˜¯åªèƒ½è·å–è‡ªå·±ç±»ä¸­çš„æ–¹æ³•
        Method[] methods2 = clazz.getDeclaredMethods();
        for (Method method : methods2) {
            System.out.println(method);
        }

        System.out.println("===========================");
        //è·å–æŒ‡å®šçš„æ–¹æ³•ï¼ˆç©ºå‚ï¼‰
        Method method3 = clazz.getMethod("sleep");
        System.out.println(method3);

        Method method4 = clazz.getMethod("eat",String.class);
        System.out.println(method4);

        //è·å–æŒ‡å®šçš„ç§æœ‰æ–¹æ³•
        Method method5 = clazz.getDeclaredMethod("playGame");
        System.out.println(method5);
    }
}

å¤åˆ¶<br><br>æ–¹æ³•<br> Object invoke(Object obj, Object... args) ï¼šè¿è¡Œæ–¹æ³•<br>å‚æ•°ä¸€ï¼šç”¨objå¯¹è±¡è°ƒç”¨è¯¥æ–¹æ³•<br>å‚æ•°äºŒï¼šè°ƒç”¨æ–¹æ³•çš„ä¼ é€’çš„å‚æ•°ï¼ˆå¦‚æœæ²¡æœ‰å°±ä¸å†™ï¼‰<br>è¿”å›å€¼ï¼šæ–¹æ³•çš„è¿”å›å€¼ï¼ˆå¦‚æœæ²¡æœ‰å°±ä¸å†™ï¼‰<br>ä»£ç ç¤ºä¾‹ï¼š<br>Javapackage com.itheima.a02reflectdemo1;

import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;

public class ReflectDemo6 {
    public static void main(String[] args) throws ClassNotFoundException, NoSuchMethodException, InvocationTargetException, IllegalAccessException {
        //1.è·å–å­—èŠ‚ç æ–‡ä»¶å¯¹è±¡
        Class clazz = Class.forName("com.itheima.a02reflectdemo1.Student");
		
        //2.è·å–ä¸€ä¸ªå¯¹è±¡
        //éœ€è¦ç”¨è¿™ä¸ªå¯¹è±¡å»è°ƒç”¨æ–¹æ³•
        Student s = new Student();
        
        //3.è·å–ä¸€ä¸ªæŒ‡å®šçš„æ–¹æ³•
        //å‚æ•°ä¸€ï¼šæ–¹æ³•å
        //å‚æ•°äºŒï¼šå‚æ•°åˆ—è¡¨ï¼Œå¦‚æœæ²¡æœ‰å¯ä»¥ä¸å†™
        Method eatMethod = clazz.getMethod("eat",String.class);
        
        //è¿è¡Œ
        //å‚æ•°ä¸€ï¼šè¡¨ç¤ºæ–¹æ³•çš„è°ƒç”¨å¯¹è±¡
        //å‚æ•°äºŒï¼šæ–¹æ³•åœ¨è¿è¡Œæ—¶éœ€è¦çš„å®é™…å‚æ•°
        //æ³¨æ„ç‚¹ï¼šå¦‚æœæ–¹æ³•æœ‰è¿”å›å€¼ï¼Œé‚£ä¹ˆéœ€è¦æ¥æ”¶invokeçš„ç»“æœ
        //å¦‚æœæ–¹æ³•æ²¡æœ‰è¿”å›å€¼ï¼Œåˆ™ä¸éœ€è¦æ¥æ”¶
        String result = (String) eatMethod.invoke(s, "é‡åº†å°é¢");
        System.out.println(result);

    }
}



public class Student {
    private String name;
    private int age;
    public String gender;
    public String address;


    public Student() {

    }

    public Student(String name) {
        this.name = name;
    }

    private Student(String name, int age) {
        this.name = name;
        this.age = age;
    }

    /**
     * è·å–
     * @return name
     */
    public String getName() {
        return name;
    }

    /**
     * è®¾ç½®
     * @param name
     */
    public void setName(String name) {
        this.name = name;
    }

    /**
     * è·å–
     * @return age
     */
    public int getAge() {
        return age;
    }

    /**
     * è®¾ç½®
     * @param age
     */
    public void setAge(int age) {
        this.age = age;
    }

    public String toString() {
        return "Student{name = " + name + ", age = " + age + "}";
    }

    private void study(){
        System.out.println("å­¦ç”Ÿåœ¨å­¦ä¹ ");
    }

    private void sleep(){
        System.out.println("å­¦ç”Ÿåœ¨ç¡è§‰");
    }

    public String eat(String something){
        System.out.println("å­¦ç”Ÿåœ¨åƒ" + something);
        return "å­¦ç”Ÿå·²ç»åƒå®Œäº†ï¼Œéå¸¸happy";
    }
}
å¤åˆ¶<br><br>â€‹	ä½ è§‰å¾—åå°„å¥½ä¸å¥½ï¼Ÿå¥½ï¼Œæœ‰ä¸¤ä¸ªæ–¹å‘<br>â€‹	ç¬¬ä¸€ä¸ªæ–¹å‘ï¼šæ— è§†ä¿®é¥°ç¬¦è®¿é—®ç±»ä¸­çš„å†…å®¹ã€‚ä½†æ˜¯è¿™ç§æ“ä½œåœ¨å¼€å‘ä¸­ä¸€èˆ¬ä¸ç”¨ï¼Œéƒ½æ˜¯æ¡†æ¶åº•å±‚æ¥ç”¨çš„ã€‚<br>â€‹	ç¬¬äºŒä¸ªæ–¹å‘ï¼šåå°„å¯ä»¥è·Ÿé…ç½®æ–‡ä»¶ç»“åˆèµ·æ¥ä½¿ç”¨ï¼ŒåŠ¨æ€çš„åˆ›å»ºå¯¹è±¡ï¼ŒåŠ¨æ€çš„è°ƒç”¨æ–¹æ³•ã€‚<br><br>ç†è§£ï¼šï¼ˆæŒæ¡ï¼‰<br>â€‹	é›†åˆä¸­çš„æ³›å‹åªåœ¨javaæ–‡ä»¶ä¸­å­˜åœ¨ï¼Œå½“ç¼–è¯‘æˆclassæ–‡ä»¶ä¹‹åï¼Œå°±æ²¡æœ‰æ³›å‹äº†ã€‚<br>ä»£ç ç¤ºä¾‹ï¼šï¼ˆäº†è§£ï¼‰<br>Javapackage com.itheima.reflectdemo;

import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;
import java.util.ArrayList;

public class ReflectDemo8 {
    public static void main(String[] args) throws NoSuchMethodException, InvocationTargetException, IllegalAccessException {
        //1.åˆ›å»ºé›†åˆå¯¹è±¡
        ArrayList&lt;Integer&gt; list = new ArrayList&lt;&gt;();
        list.add(123);
//        list.add("aaa");

        //2.åˆ©ç”¨åå°„è¿è¡Œaddæ–¹æ³•å»æ·»åŠ å­—ç¬¦ä¸²
        //å› ä¸ºåå°„ä½¿ç”¨çš„æ˜¯classå­—èŠ‚ç æ–‡ä»¶

        //è·å–classå¯¹è±¡
        Class clazz = list.getClass();

        //è·å–addæ–¹æ³•å¯¹è±¡
        Method method = clazz.getMethod("add", Object.class);

        //è¿è¡Œæ–¹æ³•
        method.invoke(list,"aaa");

        //æ‰“å°é›†åˆ
        System.out.println(list);
    }
}

å¤åˆ¶<br><br>åœ¨è¿™ä¸ªç»ƒä¹ ä¸­ï¼Œæˆ‘éœ€è¦ä½ æŒæ¡çš„æ˜¯å­—ç¬¦ä¸²ä¸èƒ½ä¿®æ”¹çš„çœŸæ­£åŸå› ã€‚<br>å­—ç¬¦ä¸²ï¼Œåœ¨åº•å±‚æ˜¯ä¸€ä¸ªbyteç±»å‹çš„å­—èŠ‚æ•°ç»„ï¼Œåå­—å«åšvalue<br>Javaprivate final byte[] value;
å¤åˆ¶<br>çœŸæ­£ä¸èƒ½è¢«ä¿®æ”¹çš„åŸå› ï¼šfinalå’Œprivate<br>finalä¿®é¥°valueè¡¨ç¤ºvalueè®°å½•çš„åœ°å€å€¼ä¸èƒ½ä¿®æ”¹ã€‚<br>privateä¿®é¥°valueè€Œä¸”æ²¡æœ‰å¯¹å¤–æä¾›getvalueå’Œsetvalueçš„æ–¹æ³•ã€‚æ‰€ä»¥ï¼Œåœ¨å¤–ç•Œä¸èƒ½è·å–æˆ–ä¿®æ”¹valueè®°å½•çš„åœ°å€å€¼ã€‚<br>å¦‚æœè¦å¼ºè¡Œä¿®æ”¹å¯ä»¥ç”¨åå°„ï¼š<br>ä»£ç ç¤ºä¾‹ï¼šï¼ˆäº†è§£ï¼‰<br>JavaString s = "abc";
String ss = "abc";
// private final byte[] value= {97,98,99};
// æ²¡æœ‰å¯¹å¤–æä¾›getvalueå’Œsetvalueçš„æ–¹æ³•ï¼Œä¸èƒ½ä¿®æ”¹valueè®°å½•çš„åœ°å€å€¼
// å¦‚æœæˆ‘ä»¬åˆ©ç”¨åå°„è·å–äº†valueçš„åœ°å€å€¼ã€‚
// ä¹Ÿæ˜¯å¯ä»¥ä¿®æ”¹çš„ï¼Œfinalä¿®é¥°çš„value
// çœŸæ­£ä¸å¯å˜çš„valueæ•°ç»„çš„åœ°å€å€¼ï¼Œé‡Œé¢çš„å†…å®¹åˆ©ç”¨åå°„è¿˜æ˜¯å¯ä»¥ä¿®æ”¹çš„ï¼Œæ¯”è¾ƒå±é™©

//1.è·å–classå¯¹è±¡
Class clazz = s.getClass();

//2.è·å–valueæˆå‘˜å˜é‡ï¼ˆprivateï¼‰
Field field = clazz.getDeclaredField("value");
//ä½†æ˜¯è¿™ç§æ“ä½œéå¸¸å±é™©
//JDKé«˜ç‰ˆæœ¬å·²ç»å±è”½äº†è¿™ç§æ“ä½œï¼Œä½ç‰ˆæœ¬è¿˜æ˜¯å¯ä»¥çš„
//ä¸´æ—¶ä¿®æ”¹æƒé™
field.setAccessible(true);

//3.è·å–valueè®°å½•çš„åœ°å€å€¼
byte[] bytes = (byte[]) field.get(s);
bytes[0] = 100;

System.out.println(s);//dbc
System.out.println(ss);//dbc
å¤åˆ¶<br><br>éœ€æ±‚: åˆ©ç”¨åå°„æ ¹æ®æ–‡ä»¶ä¸­çš„ä¸åŒç±»åå’Œæ–¹æ³•åï¼Œåˆ›å»ºä¸åŒçš„å¯¹è±¡å¹¶è°ƒç”¨æ–¹æ³•ã€‚<br>åˆ†æ:<br>â‘ é€šè¿‡PropertiesåŠ è½½é…ç½®æ–‡ä»¶<br>â‘¡å¾—åˆ°ç±»åå’Œæ–¹æ³•å<br>â‘¢é€šè¿‡ç±»ååå°„å¾—åˆ°Classå¯¹è±¡<br>â‘£é€šè¿‡Classå¯¹è±¡åˆ›å»ºä¸€ä¸ªå¯¹è±¡<br>â‘¤é€šè¿‡Classå¯¹è±¡å¾—åˆ°æ–¹æ³•<br>â‘¥è°ƒç”¨æ–¹æ³•<br>ä»£ç ç¤ºä¾‹ï¼š<br>Javapublic class ReflectDemo9 {
    public static void main(String[] args) throws IOException, ClassNotFoundException, NoSuchMethodException, InvocationTargetException, InstantiationException, IllegalAccessException {
        //1.è¯»å–é…ç½®æ–‡ä»¶çš„ä¿¡æ¯
        Properties prop = new Properties();
        FileInputStream fis = new FileInputStream("day14-code\\prop.properties");
        prop.load(fis);
        fis.close();
        System.out.println(prop);

        String classname = prop.get("classname") + "";
        String methodname = prop.get("methodname") + "";

        //2.è·å–å­—èŠ‚ç æ–‡ä»¶å¯¹è±¡
        Class clazz = Class.forName(classname);

        //3.è¦å…ˆåˆ›å»ºè¿™ä¸ªç±»çš„å¯¹è±¡
        Constructor con = clazz.getDeclaredConstructor();
        con.setAccessible(true);
        Object o = con.newInstance();
        System.out.println(o);

        //4.è·å–æ–¹æ³•çš„å¯¹è±¡
        Method method = clazz.getDeclaredMethod(methodname);
        method.setAccessible(true);

        //5.è¿è¡Œæ–¹æ³•
        method.invoke(o);


    }
}

é…ç½®æ–‡ä»¶ä¸­çš„ä¿¡æ¯ï¼š
classname=com.itheima.a02reflectdemo1.Student
methodname=sleep
å¤åˆ¶<br><br>Javapublic class MyReflectDemo {
    public static void main(String[] args) throws IllegalAccessException, IOException {
    /*
        å¯¹äºä»»æ„ä¸€ä¸ªå¯¹è±¡ï¼Œéƒ½å¯ä»¥æŠŠå¯¹è±¡æ‰€æœ‰çš„å­—æ®µåå’Œå€¼ï¼Œä¿å­˜åˆ°æ–‡ä»¶ä¸­å»
    */
       Student s = new Student("å°A",23,'å¥³',167.5,"ç¡è§‰");
       Teacher t = new Teacher("æ’­å¦",10000);
       saveObject(s);
    }

    //æŠŠå¯¹è±¡é‡Œé¢æ‰€æœ‰çš„æˆå‘˜å˜é‡åå’Œå€¼ä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶ä¸­
    public static void saveObject(Object obj) throws IllegalAccessException, IOException {
        //1.è·å–å­—èŠ‚ç æ–‡ä»¶çš„å¯¹è±¡
        Class clazz = obj.getClass();
        //2. åˆ›å»ºIOæµ
        BufferedWriter bw = new BufferedWriter(new FileWriter("myreflect\\a.txt"));
        //3. è·å–æ‰€æœ‰çš„æˆå‘˜å˜é‡
        Field[] fields = clazz.getDeclaredFields();
        for (Field field : fields) {
            field.setAccessible(true);
            //è·å–æˆå‘˜å˜é‡çš„åå­—
            String name = field.getName();
            //è·å–æˆå‘˜å˜é‡çš„å€¼
            Object value = field.get(obj);
            //å†™å‡ºæ•°æ®
            bw.write(name + "=" + value);
            bw.newLine();
        }

        bw.close();

    }
}
å¤åˆ¶<br>Javapublic class Student {
    private String name;
    private int age;
    private char gender;
    private double height;
    private String hobby;

    public Student() {
    }

    public Student(String name, int age, char gender, double height, String hobby) {
        this.name = name;
        this.age = age;
        this.gender = gender;
        this.height = height;
        this.hobby = hobby;
    }

    /**
     * è·å–
     * @return name
     */
    public String getName() {
        return name;
    }

    /**
     * è®¾ç½®
     * @param name
     */
    public void setName(String name) {
        this.name = name;
    }

    /**
     * è·å–
     * @return age
     */
    public int getAge() {
        return age;
    }

    /**
     * è®¾ç½®
     * @param age
     */
    public void setAge(int age) {
        this.age = age;
    }

    /**
     * è·å–
     * @return gender
     */
    public char getGender() {
        return gender;
    }

    /**
     * è®¾ç½®
     * @param gender
     */
    public void setGender(char gender) {
        this.gender = gender;
    }

    /**
     * è·å–
     * @return height
     */
    public double getHeight() {
        return height;
    }

    /**
     * è®¾ç½®
     * @param height
     */
    public void setHeight(double height) {
        this.height = height;
    }

    /**
     * è·å–
     * @return hobby
     */
    public String getHobby() {
        return hobby;
    }

    /**
     * è®¾ç½®
     * @param hobby
     */
    public void setHobby(String hobby) {
        this.hobby = hobby;
    }

    public String toString() {
        return "Student{name = " + name + ", age = " + age + ", gender = " + gender + ", height = " + height + ", hobby = " + hobby + "}";
    }
}
å¤åˆ¶<br>Javapublic class Teacher {
    private String name;
    private double salary;

    public Teacher() {
    }

    public Teacher(String name, double salary) {
        this.name = name;
        this.salary = salary;
    }

    /**
     * è·å–
     * @return name
     */
    public String getName() {
        return name;
    }

    /**
     * è®¾ç½®
     * @param name
     */
    public void setName(String name) {
        this.name = name;
    }

    /**
     * è·å–
     * @return salary
     */
    public double getSalary() {
        return salary;
    }

    /**
     * è®¾ç½®
     * @param salary
     */
    public void setSalary(double salary) {
        this.salary = salary;
    }

    public String toString() {
        return "Teacher{name = " + name + ", salary = " + salary + "}";
    }
}

å¤åˆ¶<br><br><br>â€‹	æ— ä¾µå…¥å¼çš„ç»™æ–¹æ³•å¢å¼ºåŠŸèƒ½<br><br>1ï¼ŒçœŸæ­£å¹²æ´»çš„å¯¹è±¡<br>2ï¼Œä»£ç†å¯¹è±¡<br>3ï¼Œåˆ©ç”¨ä»£ç†è°ƒç”¨æ–¹æ³•<br>åˆ‡è®°ä¸€ç‚¹ï¼šä»£ç†å¯ä»¥å¢å¼ºæˆ–è€…æ‹¦æˆªçš„æ–¹æ³•éƒ½åœ¨æ¥å£ä¸­ï¼Œæ¥å£éœ€è¦å†™åœ¨newProxyInstanceçš„ç¬¬äºŒä¸ªå‚æ•°é‡Œã€‚<br><br>Javapublic class Test {
    public static void main(String[] args) {
    /*
        éœ€æ±‚ï¼š
            å¤–é¢çš„äººæƒ³è¦å¤§æ˜æ˜Ÿå”±ä¸€é¦–æ­Œ
             1. è·å–ä»£ç†çš„å¯¹è±¡
                ä»£ç†å¯¹è±¡ = ProxyUtil.createProxy(å¤§æ˜æ˜Ÿçš„å¯¹è±¡);
             2. å†è°ƒç”¨ä»£ç†çš„å”±æ­Œæ–¹æ³•
                ä»£ç†å¯¹è±¡.å”±æ­Œçš„æ–¹æ³•("åªå› ä½ å¤ªç¾");
     */
        //1. è·å–ä»£ç†çš„å¯¹è±¡
        BigStar bigStar = new BigStar("é¸¡å“¥");
        Star proxy = ProxyUtil.createProxy(bigStar);

        //2. è°ƒç”¨å”±æ­Œçš„æ–¹æ³•
        String result = proxy.sing("åªå› ä½ å¤ªç¾");
        System.out.println(result);
    }
}
å¤åˆ¶<br>Java/*
*
* ç±»çš„ä½œç”¨ï¼š
*       åˆ›å»ºä¸€ä¸ªä»£ç†
*
* */
public class ProxyUtil {
    /*
    *
    * æ–¹æ³•çš„ä½œç”¨ï¼š
    *       ç»™ä¸€ä¸ªæ˜æ˜Ÿçš„å¯¹è±¡ï¼Œåˆ›å»ºä¸€ä¸ªä»£ç†
    *
    *  å½¢å‚ï¼š
    *       è¢«ä»£ç†çš„æ˜æ˜Ÿå¯¹è±¡
    *
    *  è¿”å›å€¼ï¼š
    *       ç»™æ˜æ˜Ÿåˆ›å»ºçš„ä»£ç†
    *
    *
    *
    * éœ€æ±‚ï¼š
    *   å¤–é¢çš„äººæƒ³è¦å¤§æ˜æ˜Ÿå”±ä¸€é¦–æ­Œ
    *   1. è·å–ä»£ç†çš„å¯¹è±¡
    *      ä»£ç†å¯¹è±¡ = ProxyUtil.createProxy(å¤§æ˜æ˜Ÿçš„å¯¹è±¡);
    *   2. å†è°ƒç”¨ä»£ç†çš„å”±æ­Œæ–¹æ³•
    *      ä»£ç†å¯¹è±¡.å”±æ­Œçš„æ–¹æ³•("åªå› ä½ å¤ªç¾");
    * */
    public static Star createProxy(BigStar bigStar){
       /* java.lang.reflect.Proxyç±»ï¼šæä¾›äº†ä¸ºå¯¹è±¡äº§ç”Ÿä»£ç†å¯¹è±¡çš„æ–¹æ³•ï¼š

        public static Object newProxyInstance(ClassLoader loader, Class&lt;?&gt;[] interfaces, InvocationHandler h)
        å‚æ•°ä¸€ï¼šç”¨äºæŒ‡å®šç”¨å“ªä¸ªç±»åŠ è½½å™¨ï¼Œå»åŠ è½½ç”Ÿæˆçš„ä»£ç†ç±»
        å‚æ•°äºŒï¼šæŒ‡å®šæ¥å£ï¼Œè¿™äº›æ¥å£ç”¨äºæŒ‡å®šç”Ÿæˆçš„ä»£ç†é•¿ä»€ä¹ˆï¼Œä¹Ÿå°±æ˜¯æœ‰å“ªäº›æ–¹æ³•
        å‚æ•°ä¸‰ï¼šç”¨æ¥æŒ‡å®šç”Ÿæˆçš„ä»£ç†å¯¹è±¡è¦å¹²ä»€ä¹ˆäº‹æƒ…*/
        Star star = (Star) Proxy.newProxyInstance(
                ProxyUtil.class.getClassLoader(),//å‚æ•°ä¸€ï¼šç”¨äºæŒ‡å®šç”¨å“ªä¸ªç±»åŠ è½½å™¨ï¼Œå»åŠ è½½ç”Ÿæˆçš„ä»£ç†ç±»
                new Class[]{Star.class},//å‚æ•°äºŒï¼šæŒ‡å®šæ¥å£ï¼Œè¿™äº›æ¥å£ç”¨äºæŒ‡å®šç”Ÿæˆçš„ä»£ç†é•¿ä»€ä¹ˆï¼Œä¹Ÿå°±æ˜¯æœ‰å“ªäº›æ–¹æ³•
                //å‚æ•°ä¸‰ï¼šç”¨æ¥æŒ‡å®šç”Ÿæˆçš„ä»£ç†å¯¹è±¡è¦å¹²ä»€ä¹ˆäº‹æƒ…
                new InvocationHandler() {
                    @Override
                    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
                        /*
                        * å‚æ•°ä¸€ï¼šä»£ç†çš„å¯¹è±¡
                        * å‚æ•°äºŒï¼šè¦è¿è¡Œçš„æ–¹æ³• sing
                        * å‚æ•°ä¸‰ï¼šè°ƒç”¨singæ–¹æ³•æ—¶ï¼Œä¼ é€’çš„å®å‚
                        * */
                        if("sing".equals(method.getName())){
                            System.out.println("å‡†å¤‡è¯ç­’ï¼Œæ”¶é’±");
                        }else if("dance".equals(method.getName())){
                            System.out.println("å‡†å¤‡åœºåœ°ï¼Œæ”¶é’±");
                        }
                        //å»æ‰¾å¤§æ˜æ˜Ÿå¼€å§‹å”±æ­Œæˆ–è€…è·³èˆ
                        //ä»£ç çš„è¡¨ç°å½¢å¼ï¼šè°ƒç”¨å¤§æ˜æ˜Ÿé‡Œé¢å”±æ­Œæˆ–è€…è·³èˆçš„æ–¹æ³•
                        return method.invoke(bigStar,args);
                    }
                }
        );
        return star;
    }
}
å¤åˆ¶<br>Javapublic interface Star {
    //æˆ‘ä»¬å¯ä»¥æŠŠæ‰€æœ‰æƒ³è¦è¢«ä»£ç†çš„æ–¹æ³•å®šä¹‰åœ¨æ¥å£å½“ä¸­
    //å”±æ­Œ
    public abstract String sing(String name);
    //è·³èˆ
    public abstract void dance();
}
å¤åˆ¶<br>Javapublic class BigStar implements Star {
    private String name;


    public BigStar() {
    }

    public BigStar(String name) {
        this.name = name;
    }

    //å”±æ­Œ
    @Override
    public String sing(String name){
        System.out.println(this.name + "æ­£åœ¨å”±" + name);
        return "è°¢è°¢";
    }

    //è·³èˆ
    @Override
    public void dance(){
        System.out.println(this.name + "æ­£åœ¨è·³èˆ");
    }

    /**
     * è·å–
     * @return name
     */
    public String getName() {
        return name;
    }

    /**
     * è®¾ç½®
     * @param name
     */
    public void setName(String name) {
        this.name = name;
    }

    public String toString() {
        return "BigStar{name = " + name + "}";
    }
}

å¤åˆ¶<br><br>åŠ¨æ€ä»£ç†ï¼Œè¿˜å¯ä»¥æ‹¦æˆªæ–¹æ³•<br>æ¯”å¦‚ï¼š<br>â€‹	åœ¨è¿™ä¸ªæ•…äº‹ä¸­ï¼Œç»æµäººä½œä¸ºä»£ç†ï¼Œå¦‚æœåˆ«äººè®©é‚€è¯·å¤§æ˜æ˜Ÿå»å”±æ­Œï¼Œæ‰“ç¯®çƒï¼Œç»çºªäººå°±å¢å¼ºåŠŸèƒ½ã€‚<br>â€‹	ä½†æ˜¯å¦‚æœåˆ«äººè®©å¤§æ˜æ˜Ÿå»æ‰«å•æ‰€ï¼Œç»çºªäººå°±è¦æ‹¦æˆªï¼Œä¸ä¼šå»è°ƒç”¨å¤§æ˜æ˜Ÿçš„æ–¹æ³•ã€‚<br>Java/*
* ç±»çš„ä½œç”¨ï¼š
*       åˆ›å»ºä¸€ä¸ªä»£ç†
* */
public class ProxyUtil {
    public static Star createProxy(BigStar bigStar){
        public static Object newProxyInstance(ClassLoader loader, Class&lt;?&gt;[] interfaces, InvocationHandler h)
        Star star = (Star) Proxy.newProxyInstance(
                ProxyUtil.class.getClassLoader(),
                new Class[]{Star.class},
                new InvocationHandler() {
                    @Override
                    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
                        if("cleanWC".equals(method.getName())){
                            System.out.println("æ‹¦æˆªï¼Œä¸è°ƒç”¨å¤§æ˜æ˜Ÿçš„æ–¹æ³•");
                            return null;
                        }
                        //å¦‚æœæ˜¯å…¶ä»–æ–¹æ³•ï¼Œæ­£å¸¸æ‰§è¡Œ
                        return method.invoke(bigStar,args);
                    }
                }
        );
        return star;
    }
}
å¤åˆ¶<br><br>â€‹	 å¯¹addæ–¹æ³•è¿›è¡Œå¢å¼ºï¼Œå¯¹removeæ–¹æ³•è¿›è¡Œæ‹¦æˆªï¼Œå¯¹å…¶ä»–æ–¹æ³•ä¸æ‹¦æˆªä¹Ÿä¸å¢å¼º<br>Javapublic class MyProxyDemo1 {
    public static void main(String[] args) {
        //åŠ¨æ€ä»£ç å¯ä»¥å¢å¼ºä¹Ÿå¯ä»¥æ‹¦æˆª
        //1.åˆ›å»ºçœŸæ­£å¹²æ´»çš„äºº
        ArrayList&lt;String&gt; list = new ArrayList&lt;&gt;();

        //2.åˆ›å»ºä»£ç†å¯¹è±¡
        //å‚æ•°ä¸€ï¼šç±»åŠ è½½å™¨ã€‚å½“å‰ç±»å.class.getClassLoader()
        //                 æ‰¾åˆ°æ˜¯è°ï¼ŒæŠŠå½“å‰çš„ç±»ï¼ŒåŠ è½½åˆ°å†…å­˜ä¸­äº†ï¼Œæˆ‘å†éº»çƒ¦ä»–å¸®æˆ‘å¹²ä¸€ä»¶äº‹æƒ…ï¼ŒæŠŠåé¢çš„ä»£ç†ç±»ï¼Œä¹ŸåŠ è½½åˆ°å†…å­˜

        //å‚æ•°äºŒï¼šæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œåœ¨æ•°ç»„é‡Œé¢å†™æ¥å£çš„å­—èŠ‚ç æ–‡ä»¶å¯¹è±¡ã€‚
        //                  å¦‚æœå†™äº†Listï¼Œé‚£ä¹ˆè¡¨ç¤ºä»£ç†ï¼Œå¯ä»¥ä»£ç†Listæ¥å£é‡Œé¢æ‰€æœ‰çš„æ–¹æ³•ï¼Œå¯¹è¿™äº›æ–¹æ³•å¯ä»¥å¢å¼ºæˆ–è€…æ‹¦æˆª
        //                  ä½†æ˜¯ï¼Œä¸€å®šè¦å†™ArrayListçœŸå®å®ç°çš„æ¥å£
        //                  å‡è®¾åœ¨ç¬¬äºŒä¸ªå‚æ•°ä¸­ï¼Œå†™äº†MyInteræ¥å£ï¼Œé‚£ä¹ˆæ˜¯é”™è¯¯çš„ã€‚
        //                  å› ä¸ºArrayListå¹¶æ²¡æœ‰å®ç°è¿™ä¸ªæ¥å£ï¼Œé‚£ä¹ˆå°±æ— æ³•å¯¹è¿™ä¸ªæ¥å£é‡Œé¢çš„æ–¹æ³•ï¼Œè¿›è¡Œå¢å¼ºæˆ–æ‹¦æˆª
        //å‚æ•°ä¸‰ï¼šç”¨æ¥åˆ›å»ºä»£ç†å¯¹è±¡çš„åŒ¿åå†…éƒ¨ç±»
        List proxyList = (List) Proxy.newProxyInstance(
                //å‚æ•°ä¸€ï¼šç±»åŠ è½½å™¨
                MyProxyDemo1.class.getClassLoader(),
                //å‚æ•°äºŒï¼šæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè¡¨ç¤ºä»£ç†å¯¹è±¡èƒ½ä»£ç†çš„æ–¹æ³•èŒƒå›´
                new Class[]{List.class},
                //å‚æ•°ä¸‰ï¼šæœ¬è´¨å°±æ˜¯ä»£ç†å¯¹è±¡
                new InvocationHandler() {
                    @Override
                    //invokeæ–¹æ³•å‚æ•°çš„æ„ä¹‰
                    //å‚æ•°ä¸€ï¼šè¡¨ç¤ºä»£ç†å¯¹è±¡ï¼Œä¸€èˆ¬ä¸ç”¨ï¼ˆäº†è§£ï¼‰
                    //å‚æ•°äºŒï¼šå°±æ˜¯æ–¹æ³•åï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æ–¹æ³•åè¿›è¡Œåˆ¤æ–­ï¼Œæ˜¯å¢å¼ºè¿˜æ˜¯æ‹¦æˆª
                    //å‚æ•°ä¸‰ï¼šå°±æ˜¯ä¸‹é¢ç¬¬ä¸‰æ­¥è°ƒç”¨æ–¹æ³•æ—¶ï¼Œä¼ é€’çš„å‚æ•°ã€‚
                    //ä¸¾ä¾‹1ï¼š
                    //list.add("é˜¿ç®å¥½å¸…");
                    //æ­¤æ—¶å‚æ•°äºŒå°±æ˜¯addè¿™ä¸ªæ–¹æ³•å
                    //æ­¤æ—¶å‚æ•°ä¸‰ args[0] å°±æ˜¯ é˜¿ç®å¥½å¸…
                    //ä¸¾ä¾‹2ï¼š
                    //list.set(1, "aaa");
                    //æ­¤æ—¶å‚æ•°äºŒå°±æ˜¯setè¿™ä¸ªæ–¹æ³•å
                    //æ­¤æ—¶å‚æ•°ä¸‰  args[0] å°±æ˜¯ 1  args[1]"aaa"
                    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
                        //å¯¹addæ–¹æ³•åšä¸€ä¸ªå¢å¼ºï¼Œç»Ÿè®¡è€—æ—¶æ—¶é—´
                        if (method.getName().equals("add")) {
                            long start = System.currentTimeMillis();
                            //è°ƒç”¨é›†åˆçš„æ–¹æ³•ï¼ŒçœŸæ­£çš„æ·»åŠ æ•°æ®
                            method.invoke(list, args);
                            long end = System.currentTimeMillis();
                            System.out.println("è€—æ—¶æ—¶é—´ï¼š" + (end - start));
                            //éœ€è¦è¿›è¡Œè¿”å›ï¼Œè¿”å›å€¼è¦è·ŸçœŸæ­£å¢å¼ºæˆ–è€…æ‹¦æˆªçš„æ–¹æ³•ä¿æŒä¸€è‡´
                            return true;
                        }else if(method.getName().equals("remove") &amp;&amp; args[0] instanceof Integer){
                            System.out.println("æ‹¦æˆªäº†æŒ‰ç…§ç´¢å¼•åˆ é™¤çš„æ–¹æ³•");
                            return null;
                        }else if(method.getName().equals("remove")){
                            System.out.println("æ‹¦æˆªäº†æŒ‰ç…§å¯¹è±¡åˆ é™¤çš„æ–¹æ³•");
                            return false;
                        }else{
                            //å¦‚æœå½“å‰è°ƒç”¨çš„æ˜¯å…¶ä»–æ–¹æ³•,æˆ‘ä»¬æ—¢ä¸å¢å¼ºï¼Œä¹Ÿä¸æ‹¦æˆª
                            method.invoke(list,args);
                            return null;
                        }
                    }
                }
        );

        //3.è°ƒç”¨æ–¹æ³•
        //å¦‚æœè°ƒç”¨è€…æ˜¯listï¼Œå°±å¥½æ¯”ç»•è¿‡äº†ç¬¬äºŒæ­¥çš„ä»£ç ï¼Œç›´æ¥æ·»åŠ å…ƒç´ 
        //å¦‚æœè°ƒç”¨è€…æ˜¯ä»£ç†å¯¹è±¡ï¼Œæ­¤æ—¶ä»£ç†æ‰èƒ½å¸®æˆ‘ä»¬å¢å¼ºæˆ–è€…æ‹¦æˆª

        //æ¯æ¬¡è°ƒç”¨æ–¹æ³•çš„æ—¶å€™ï¼Œéƒ½ä¸ä¼šç›´æ¥æ“ä½œé›†åˆ
        //è€Œæ˜¯å…ˆè°ƒç”¨ä»£ç†é‡Œé¢çš„invokeï¼Œåœ¨invokeæ–¹æ³•ä¸­è¿›è¡Œåˆ¤æ–­ï¼Œå¯ä»¥å¢å¼ºæˆ–è€…æ‹¦æˆª
        proxyList.add("aaa");
        proxyList.add("bbb");
        proxyList.add("ccc");
        proxyList.add("ddd");

        proxyList.remove(0);
        proxyList.remove("aaa");


        //æ‰“å°é›†åˆ
        System.out.println(list);
    }
}
å¤åˆ¶]]></description><link>Java\åå°„&amp;åŠ¨æ€ä»£ç†.html</link><guid isPermaLink="false">Java/åå°„&amp;åŠ¨æ€ä»£ç†.md</guid><pubDate>Tue, 19 Mar 2024 12:41:23 GMT</pubDate></item><item><title><![CDATA[ColorfulClock]]></title><description><![CDATA[ 
 <br>Noneconst [date, setDate] = useState(new Date)

useEffect(()=&gt;{
	const timerId = setInterval(()=&gt;{
		setDate(new Date)
	},1000)
	return ()=&gt;{clearInterval(timerId)}
})

//moment.locale('en-us');
moment.locale('zh-cn');
let formatDate = moment().format("dddd-MMMM-D-H-mm-ss-a").split("-")
let secProgress = formatDate[5] / 60
let minProgress = (formatDate[4]) / 60
let hourProgress = (formatDate[3]) / 24
let dayProgress = (formatDate[2]) / 31
//console.log(formatDate[2]/31)

return (
&lt;div id="clock" className="progress-clock"&gt;
	&lt;button className="progress-clock__time-date" data-group="d" type="button"&gt;
		&lt;small data-unit="w"&gt;{formatDate[0]}&lt;/small&gt;&lt;br/&gt;
		&lt;span data-unit="mo"&gt;{formatDate[1]}&lt;/span&gt;
		&lt;span data-unit="d"&gt;{formatDate[2]}&lt;/span&gt;
	&lt;/button&gt;
	&lt;button className="progress-clock__time-digit" data-unit="h" data-group="h" type="button"&gt;{formatDate[3]}&lt;/button&gt;&lt;span className="progress-clock__time-colon"&gt;:&lt;/span&gt;&lt;button className="progress-clock__time-digit" data-unit="m" data-group="m" type="button"&gt;{formatDate[4]}&lt;/button&gt;&lt;span className="progress-clock__time-colon"&gt;:&lt;/span&gt;&lt;button className="progress-clock__time-digit" data-unit="s" data-group="s" type="button"&gt;{formatDate[5]}&lt;/button&gt;
	&lt;span className="progress-clock__time-ampm" data-unit="ap"&gt;{formatDate[6]}&lt;/span&gt;
	&lt;svg className="progress-clock__rings" width="256" height="256" viewBox="0 0 256 256"&gt;
		&lt;defs&gt;
			&lt;linearGradient id="pc-red" x1="1" y1="0.5" x2="0" y2="0.5"&gt;
				&lt;stop offset="0%" stopColor="hsl(343,90%,55%)" /&gt;
				&lt;stop offset="100%" stopColor="hsl(323,90%,55%)" /&gt;
			&lt;/linearGradient&gt;
			&lt;linearGradient id="pc-yellow" x1="1" y1="0.5" x2="0" y2="0.5"&gt;
				&lt;stop offset="0%" stopColor="hsl(43,90%,55%)" /&gt;
				&lt;stop offset="100%" stopColor="hsl(23,90%,55%)" /&gt;
			&lt;/linearGradient&gt;
			&lt;linearGradient id="pc-blue" x1="1" y1="0.5" x2="0" y2="0.5"&gt;
				&lt;stop offset="0%" stopColor="hsl(223,90%,55%)" /&gt;
				&lt;stop offset="100%" stopColor="hsl(203,90%,55%)" /&gt;
			&lt;/linearGradient&gt;
			&lt;linearGradient id="pc-purple" x1="1" y1="0.5" x2="0" y2="0.5"&gt;
				&lt;stop offset="0%" stopColor="hsl(283,90%,55%)" /&gt;
				&lt;stop offset="100%" stopColor="hsl(263,90%,55%)" /&gt;
			&lt;/linearGradient&gt;
		&lt;/defs&gt;
		&lt;g data-units="d"&gt;
			&lt;circle className="progress-clock__ring" cx="128" cy="128" r="74" fill="none" opacity="0.1" stroke="#e13e78" strokeWidth="12" /&gt;
			&lt;circle className="progress-clock__ring-fill" data-ring="mo" cx="128" cy="128" r="74" fill="none" stroke="#e13e78" strokeWidth="12" strokeDasharray="465 465" strokeDashoffset={(1-dayProgress)*465} strokeLinecap="round" transform="rotate(-90,128,128)" /&gt;
		&lt;/g&gt;
		&lt;g data-units="h"&gt;
			&lt;circle className="progress-clock__ring" cx="128" cy="128" r="90" fill="none" opacity="0.1" stroke="#e79742" strokeWidth="12" /&gt;
			&lt;circle className="progress-clock__ring-fill" data-ring="d" cx="128" cy="128" r="90" fill="none" stroke="#e79742" strokeWidth="12" strokeDasharray="565.5 565.5" strokeDashoffset={(1-hourProgress)*565.5} strokeLinecap="round" transform="rotate(-90,128,128)" /&gt;
		&lt;/g&gt;
		&lt;g data-units="m"&gt;
			&lt;circle className="progress-clock__ring" cx="128" cy="128" r="106" fill="none" opacity="0.1" stroke="#4483ec" strokeWidth="12" /&gt;
			&lt;circle className="progress-clock__ring-fill" data-ring="h" cx="128" cy="128" r="106" fill="none" stroke="#4483ec" strokeWidth="12" strokeDasharray="666 666" strokeDashoffset={(1-minProgress)*666} strokeLinecap="round" transform="rotate(-90,128,128)" /&gt;
		&lt;/g&gt;
		&lt;g data-units="s"&gt;
			&lt;circle className="progress-clock__ring" cx="128" cy="128" r="122" fill="none" opacity="0.1" stroke="#8f30eb" strokeWidth="12" /&gt;
			&lt;circle className="progress-clock__ring-fill" data-ring="m" cx="128" cy="128" r="122" fill="none" stroke="#8f30eb" strokeWidth="12" strokeDasharray="766.5 766.5" strokeDashoffset={(1-secProgress)*766.5} strokeLinecap="round" transform="rotate(-90,128,128)" /&gt;
		&lt;/g&gt;
	&lt;/svg&gt;
&lt;/div&gt;

)
å¤åˆ¶<br><br>]]></description><link>Template\ReactJS\ColorfulClock.html</link><guid isPermaLink="false">Template/ReactJS/ColorfulClock.md</guid><pubDate>Tue, 17 Oct 2023 14:14:43 GMT</pubDate></item><item><title><![CDATA[react_music]]></title><description><![CDATA[ 
 <br>Noneconst musicid = props.src.trim(" ");
const musicsrc='https://music.163.com/outchain/player?type=0&amp;id='+musicid+'&amp;auto=0&amp;height=240';
return (
	&lt;&gt;
		&lt;iframe
      title="iframe"
      src={musicsrc}
      style={{ width: '100%', border: 0, height: 240 }}
      sandbox="allow-same-origin allow-scripts allow-popups allow-forms"
      scrolling="no"
    &gt;&lt;/iframe&gt;
	&lt;/&gt;
)
å¤åˆ¶<br>]]></description><link>Template\ReactJS\react_music.html</link><guid isPermaLink="false">Template/ReactJS/react_music.md</guid><pubDate>Tue, 17 Oct 2023 14:02:55 GMT</pubDate></item><item><title><![CDATA[react_weather]]></title><description><![CDATA[ 
 <br>None//First debut by cuman in ğŸ¥‘Blue Topaz example 
//2022-05-18
//const isDarkMode = app.vault.getConfig("theme") === "obsidian";
const city = props.src.trim(" ");
let color='&amp;color=707271';
// if (!isDarkMode) color='&amp;color=707271';
const weathersrc='https://tianqiapi.com/api.php?style=ta&amp;skin=pear&amp;fontsize=13&amp;align=&amp;paddingtop=2&amp;paddingleft=15&amp;city='+city+color;

return (
	&lt;&gt;
		&lt;iframe
      title="iframe"
      src={weathersrc}
      style={{marginLeft:'10%',width: 245, border: 0, height: 20 }}
      sandbox="allow-same-origin allow-scripts allow-popups allow-forms"
      scrolling="no"
    &gt;&lt;/iframe&gt;
	&lt;/&gt;
)
å¤åˆ¶<br>]]></description><link>Template\ReactJS\react_weather.html</link><guid isPermaLink="false">Template/ReactJS/react_weather.md</guid><pubDate>Tue, 17 Oct 2023 14:23:13 GMT</pubDate></item><item><title><![CDATA[åœºæ™¯]]></title><description><![CDATA[ 
 <br><img alt="234343" src="https://w.wallhaven.cc/full/we/wallhaven-we67wr.jpg" referrerpolicy="no-referrer"><br><img alt="12323" src="https://w.wallhaven.cc/full/3l/wallhaven-3lw1l6.jpg" referrerpolicy="no-referrer">
<img alt="1" src="https://w.wallhaven.cc/full/jx/wallhaven-jxkyk5.jpg" referrerpolicy="no-referrer">
<img alt="2" src="https://w.wallhaven.cc/full/d6/wallhaven-d6kjxg.png" referrerpolicy="no-referrer">
<img alt="3" src="https://w.wallhaven.cc/full/6d/wallhaven-6d2577.png" referrerpolicy="no-referrer">
<img alt="4" src="https://w.wallhaven.cc/full/l8/wallhaven-l8k272.png" referrerpolicy="no-referrer">
<img alt="5" src="https://w.wallhaven.cc/full/gp/wallhaven-gpqor7.jpg" referrerpolicy="no-referrer">
<img alt="6" src="https://w.wallhaven.cc/full/x6/wallhaven-x6jd7d.png" referrerpolicy="no-referrer">
<img alt="7" src="https://w.wallhaven.cc/full/qz/wallhaven-qzg3p7.png" referrerpolicy="no-referrer">
<img alt="8" src="https://w.wallhaven.cc/full/zy/wallhaven-zyogjy.png" referrerpolicy="no-referrer">
<img alt="ç²‰è‰²å°‘å¥³" src="https://w.wallhaven.cc/full/l8/wallhaven-l8wl1q.jpg" referrerpolicy="no-referrer">
<img alt="10" src="https://w.wallhaven.cc/full/vq/wallhaven-vqol7p.png" referrerpolicy="no-referrer">
<img alt="11" src="https://w.wallhaven.cc/full/9d/wallhaven-9dzgy1.png" referrerpolicy="no-referrer">
<img alt="12" src="https://w.wallhaven.cc/full/o5/wallhaven-o51r1p.png" referrerpolicy="no-referrer">
<img alt="13" src="https://w.wallhaven.cc/full/l8/wallhaven-l8zek2.png" referrerpolicy="no-referrer">
<img alt="14" src="https://w.wallhaven.cc/full/p9/wallhaven-p9wkwm.jpg" referrerpolicy="no-referrer">
<img alt="15" src="https://w.wallhaven.cc/full/6d/wallhaven-6d5xex.png" referrerpolicy="no-referrer">
<img alt="16" src="https://w.wallhaven.cc/full/x6/wallhaven-x6z5xd.jpg" referrerpolicy="no-referrer"><br><img alt="ç»¿æ€ª" src="https://s1.wallpapermaiden.com/image/2016/11/08/howl-s-moving-castle-hayao-miyazaki-studio-ghibli-landscape-anime-9018-resized.jpg" referrerpolicy="no-referrer">]]></description><link>Typora\ç²¾é€‰å£çº¸\åœºæ™¯.html</link><guid isPermaLink="false">Typora/ç²¾é€‰å£çº¸/åœºæ™¯.md</guid><pubDate>Tue, 30 May 2023 04:42:29 GMT</pubDate><enclosure url="https://w.wallhaven.cc/full/we/wallhaven-we67wr.jpg" length="0" type="image/jpeg"/><content:encoded>&lt;figure&gt;&lt;img src=&quot;https://w.wallhaven.cc/full/we/wallhaven-we67wr.jpg&quot;&gt;&lt;/figure&gt;</content:encoded></item><item><title><![CDATA[åŠ¨æ¼«]]></title><description><![CDATA[ 
 <br><img alt="231" src="https://w.wallhaven.cc/full/6d/wallhaven-6d56k6.jpg" referrerpolicy="no-referrer"><br><img alt="12312" src="https://w.wallhaven.cc/full/x6/wallhaven-x67mkz.png" referrerpolicy="no-referrer"><br><img alt="2" src="https://w.wallhaven.cc/full/ex/wallhaven-exe76l.png" referrerpolicy="no-referrer">
<img alt="3" src="https://w.wallhaven.cc/full/kx/wallhaven-kxk1vm.jpg" referrerpolicy="no-referrer">
<img alt="4" src="https://w.wallhaven.cc/full/qz/wallhaven-qz3ejr.jpg" referrerpolicy="no-referrer">
<img alt="5" src="https://w.wallhaven.cc/full/vq/wallhaven-vqolg5.jpg" referrerpolicy="no-referrer">
<img alt="6" src="https://w.wallhaven.cc/full/o5/wallhaven-o518xm.jpg" referrerpolicy="no-referrer">
<img alt="7" src="https://w.wallhaven.cc/full/gp/wallhaven-gpqrr7.jpg" referrerpolicy="no-referrer"><br><img alt="9" src="https://w.wallhaven.cc/full/x6/wallhaven-x6zzql.jpg" referrerpolicy="no-referrer">
<img alt="10" src="https://w.wallhaven.cc/full/3l/wallhaven-3l353d.jpg" referrerpolicy="no-referrer">
<img alt="è¶…å¯çˆ±" src="https://w.wallhaven.cc/full/x6/wallhaven-x6jj1z.png" referrerpolicy="no-referrer">
12
13<br><img alt="aya.jpg" src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/aya.jpg" referrerpolicy="no-referrer">]]></description><link>Typora\ç²¾é€‰å£çº¸\åŠ¨æ¼«.html</link><guid isPermaLink="false">Typora/ç²¾é€‰å£çº¸/åŠ¨æ¼«.md</guid><pubDate>Mon, 09 Oct 2023 06:40:59 GMT</pubDate><enclosure url="https://w.wallhaven.cc/full/6d/wallhaven-6d56k6.jpg" length="0" type="image/jpeg"/><content:encoded>&lt;figure&gt;&lt;img src=&quot;https://w.wallhaven.cc/full/6d/wallhaven-6d56k6.jpg&quot;&gt;&lt;/figure&gt;</content:encoded></item><item><title><![CDATA[é£æ™¯]]></title><description><![CDATA[ 
 <br><img alt="3142" src="https://w.wallhaven.cc/full/o5/wallhaven-o51q1p.jpg" referrerpolicy="no-referrer"><br><img alt="å°å²›ç™½å¤©" src="https://w.wallhaven.cc/full/yx/wallhaven-yxgmll.png" referrerpolicy="no-referrer">
<img alt="å°å²›å¤œæ™š" src="https://w.wallhaven.cc/full/l8/wallhaven-l8kmop.png" referrerpolicy="no-referrer">
<img alt="1" src="https://w.wallhaven.cc/full/vq/wallhaven-vqy5p8.png" referrerpolicy="no-referrer">
<img alt="2" src="https://w.wallhaven.cc/full/3l/wallhaven-3l53kv.jpg" referrerpolicy="no-referrer">
<img alt="3" src="https://w.wallhaven.cc/full/85/wallhaven-85ddpy.png" referrerpolicy="no-referrer">
<img alt="4" src="https://w.wallhaven.cc/full/yx/wallhaven-yxedxg.jpg" referrerpolicy="no-referrer">
<img alt="5" src="https://w.wallhaven.cc/full/2y/wallhaven-2ydprm.jpg" referrerpolicy="no-referrer">
<img alt="6" src="https://w.wallhaven.cc/full/qz/wallhaven-qz3l7d.jpg" referrerpolicy="no-referrer">
<img alt="7" src="https://w.wallhaven.cc/full/7p/wallhaven-7p9v3o.png" referrerpolicy="no-referrer">
<img alt="8" src="https://w.wallhaven.cc/full/m3/wallhaven-m317k1.jpg" referrerpolicy="no-referrer">
<img alt="9" src="https://w.wallhaven.cc/full/6d/wallhaven-6d57ox.jpg" referrerpolicy="no-referrer">
<img alt="10" src="https://w.wallhaven.cc/full/9d/wallhaven-9dzd21.jpg" referrerpolicy="no-referrer">]]></description><link>Typora\ç²¾é€‰å£çº¸\é£æ™¯.html</link><guid isPermaLink="false">Typora/ç²¾é€‰å£çº¸/é£æ™¯.md</guid><pubDate>Tue, 30 May 2023 07:58:56 GMT</pubDate><enclosure url="https://w.wallhaven.cc/full/o5/wallhaven-o51q1p.jpg" length="0" type="image/jpeg"/><content:encoded>&lt;figure&gt;&lt;img src=&quot;https://w.wallhaven.cc/full/o5/wallhaven-o51q1p.jpg&quot;&gt;&lt;/figure&gt;</content:encoded></item><item><title><![CDATA[æç®€]]></title><description><![CDATA[ 
 <br><img alt="cat" src="https://w.wallhaven.cc/full/vq/wallhaven-vqojj8.jpg" referrerpolicy="no-referrer">
<img alt="2" src="https://w.wallhaven.cc/full/kx/wallhaven-kxk7km.jpg" referrerpolicy="no-referrer">
<img alt="3" src="https://w.wallhaven.cc/full/7p/wallhaven-7pw1we.jpg" referrerpolicy="no-referrer">
<img alt="5" src="https://w.wallhaven.cc/full/ex/wallhaven-ex3ovk.png" referrerpolicy="no-referrer">
<img alt="6" src="https://w.wallhaven.cc/full/qz/wallhaven-qzg2xl.png" referrerpolicy="no-referrer">
<img alt="æ·±è‰²-æç®€ä¸‰æ£±é•œ" src="https://w.wallhaven.cc/full/1p/wallhaven-1pd22w.png" referrerpolicy="no-referrer">
<img alt="9" src="https://w.wallhaven.cc/full/we/wallhaven-we1q2r.png" referrerpolicy="no-referrer">
<img alt="10" src="https://w.wallhaven.cc/full/d6/wallhaven-d63q8o.png" referrerpolicy="no-referrer">
<img alt="8" src="https://w.wallhaven.cc/full/6d/wallhaven-6d53wx.png" referrerpolicy="no-referrer">
<img alt="11" src="http://desktopwallpapers.org.ua/images/201412/desktopwallpapers.org.ua_38240.jpg" referrerpolicy="no-referrer">
<img alt="12" src="https://s1.wallpapermaiden.com/image/2016/10/04/firewatch-landscape-forest-minimalistic-games-6993.jpg" referrerpolicy="no-referrer">
13
14
15
16]]></description><link>Typora\ç²¾é€‰å£çº¸\æç®€.html</link><guid isPermaLink="false">Typora/ç²¾é€‰å£çº¸/æç®€.md</guid><pubDate>Tue, 30 May 2023 04:39:15 GMT</pubDate><enclosure url="https://w.wallhaven.cc/full/vq/wallhaven-vqojj8.jpg" length="0" type="image/jpeg"/><content:encoded>&lt;figure&gt;&lt;img src=&quot;https://w.wallhaven.cc/full/vq/wallhaven-vqojj8.jpg&quot;&gt;&lt;/figure&gt;</content:encoded></item><item><title><![CDATA[ç«¥è¯ç»˜æœ¬é£]]></title><description><![CDATA[ 
 <br><img alt="1" src="https://files.vlad.studio/joy/bird_bird_bird_bird_xmas/preview/1280x800.jpg" referrerpolicy="no-referrer">
<img alt="3" src="https://files.vlad.studio/joy/merry_xmas_moon/preview/1280x800.jpg" referrerpolicy="no-referrer">
<img alt="4" src="https://files.vlad.studio/joy/starry_night/preview/1280x800.jpg" referrerpolicy="no-referrer">
<img alt="5" src="https://files.vlad.studio/joy/library/preview/1280x800.jpg" referrerpolicy="no-referrer">
<img alt="6" src="https://files.vlad.studio/joy/airlines2/preview/1280x800.jpg" referrerpolicy="no-referrer">
<img alt="ä¹¦æˆ¿" src="https://files.vlad.studio/joy/googlelibrary/preview/1280x800.jpg" referrerpolicy="no-referrer">
<img alt="8" src="https://files.vlad.studio/joy/treeofbooks/preview/1280x800.jpg" referrerpolicy="no-referrer">
<img alt="9" src="https://files.vlad.studio/joy/chirp_chirp/preview/1280x800.jpg" referrerpolicy="no-referrer">
<img alt="10" src="https://files.vlad.studio/joy/harvest/preview/1280x800.jpg" referrerpolicy="no-referrer">
<img alt="11" src="https://files.vlad.studio/joy/space_gardener/preview/1280x800.jpg" referrerpolicy="no-referrer"><br><img alt="13" src="https://files.vlad.studio/joy/loneliest_house/preview/1280x800.jpg" referrerpolicy="no-referrer">
<img alt="14" src="https://files.vlad.studio/joy/loneliest_house_night/preview/1280x800.jpg" referrerpolicy="no-referrer">
<img alt="15" src="https://files.vlad.studio/joy/flower/preview/1280x800.jpg" referrerpolicy="no-referrer">
<img alt="16" src="https://files.vlad.studio/joy/umbrella/preview/1280x800.jpg" referrerpolicy="no-referrer"><br><img alt="18" src="https://files.vlad.studio/joy/good_morning_sun/preview/1280x800.jpg" referrerpolicy="no-referrer">
<img alt="19" src="https://files.vlad.studio/joy/jazzband/preview/1280x800.jpg" referrerpolicy="no-referrer">
<img alt="20" src="https://files.vlad.studio/joy/tbilisi_2/preview/1280x800.jpg" referrerpolicy="no-referrer">
<img alt="21" src="https://files.vlad.studio/joy/tbilisi/preview/1280x800.jpg" referrerpolicy="no-referrer">
<img alt="22" src="https://files.vlad.studio/joy/kira/preview/1280x800.jpg" referrerpolicy="no-referrer">
<img alt="23" src="https://files.vlad.studio/joy/blue_and_yellow/preview/1280x800.jpg" referrerpolicy="no-referrer">
<img alt="24" src="https://files.vlad.studio/joy/rainbow_plane/preview/1280x800.jpg" referrerpolicy="no-referrer">
<img alt="25" src="https://files.vlad.studio/joy/magic_of_music_piano/preview/1280x800.jpg" referrerpolicy="no-referrer">
<img alt="26" src="https://files.vlad.studio/joy/magic_of_music_guitar/preview/1280x800.jpg" referrerpolicy="no-referrer">
<img alt="27" src="https://files.vlad.studio/joy/xmas_popup/preview/1280x800.jpg" referrerpolicy="no-referrer"><br><img alt="29" src="https://files.vlad.studio/joy/swipe_swipe_swipe_3/preview/1280x800.jpg" referrerpolicy="no-referrer">
<img alt="30" src="https://files.vlad.studio/joy/halloween_pet/preview/1280x800.jpg" referrerpolicy="no-referrer">
<img alt="31" src="https://files.vlad.studio/joy/papercut/preview/1280x800.jpg" referrerpolicy="no-referrer">
<img alt="32" src="https://files.vlad.studio/joy/celestial_cat_dark/preview/1280x800.jpg" referrerpolicy="no-referrer">
<img alt="33" src="https://files.vlad.studio/joy/space_walk/preview/1280x800.jpg" referrerpolicy="no-referrer">
<img alt="34" src="https://files.vlad.studio/joy/stay_in_touch/preview/1280x800.jpg" referrerpolicy="no-referrer">
<img alt="35" src="https://files.vlad.studio/joy/merry_xmas_moon/preview/1280x800.jpg" referrerpolicy="no-referrer">
<img alt="36" src="https://files.vlad.studio/joy/i_feel_good/preview/1280x800.jpg" referrerpolicy="no-referrer">
<img alt="37" src="https://files.vlad.studio/joy/bookworm/preview/1280x800.jpg" referrerpolicy="no-referrer">
<img alt="38" src="https://files.vlad.studio/joy/hug/preview/1280x800.jpg" referrerpolicy="no-referrer">
<img alt="39" src="https://files.vlad.studio/joy/blank_canvas/preview/1280x800.jpg" referrerpolicy="no-referrer">
<img alt="40" src="https://files.vlad.studio/joy/xmas_windows/preview/1280x800.jpg" referrerpolicy="no-referrer">]]></description><link>Typora\ç²¾é€‰å£çº¸\ç«¥è¯ç»˜æœ¬é£.html</link><guid isPermaLink="false">Typora/ç²¾é€‰å£çº¸/ç«¥è¯ç»˜æœ¬é£.md</guid><pubDate>Tue, 30 May 2023 04:05:13 GMT</pubDate><enclosure url="https://files.vlad.studio/joy/bird_bird_bird_bird_xmas/preview/1280x800.jpg" length="0" type="image/jpeg"/><content:encoded>&lt;figure&gt;&lt;img src=&quot;https://files.vlad.studio/joy/bird_bird_bird_bird_xmas/preview/1280x800.jpg&quot;&gt;&lt;/figure&gt;</content:encoded></item><item><title><![CDATA[å›¾ç‰‡]]></title><description><![CDATA[ 
 <br><img src="https://w.wallhaven.cc/full/p9/wallhaven-p9gvvm.jpg" referrerpolicy="no-referrer">
<img src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/aya.jpg" referrerpolicy="no-referrer">
<img alt="è—è§†.jpg" src="https://typora-yxh.oss-cn-chengdu.aliyuncs.com/%E8%97%90%E8%A7%86.jpg" referrerpolicy="no-referrer">
<img src="https://w.wallhaven.cc/full/d6/wallhaven-d6d7jl.jpg" referrerpolicy="no-referrer">]]></description><link>Typora\ç²¾é€‰å£çº¸\å›¾ç‰‡.html</link><guid isPermaLink="false">Typora/ç²¾é€‰å£çº¸/å›¾ç‰‡.md</guid><pubDate>Fri, 13 Oct 2023 06:42:35 GMT</pubDate><enclosure url="https://w.wallhaven.cc/full/p9/wallhaven-p9gvvm.jpg" length="0" type="image/jpeg"/><content:encoded>&lt;figure&gt;&lt;img src=&quot;https://w.wallhaven.cc/full/p9/wallhaven-p9gvvm.jpg&quot;&gt;&lt;/figure&gt;</content:encoded></item><item><title><![CDATA[æ­£åˆ™]]></title><description><![CDATA[<a class="tag" href="?query=tag:python" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#python</a> 
 <br><br><a href=".?query=tag:python" class="tag" target="_blank" rel="noopener">#python</a> <br><br>
<br>
éœ€æ±‚
åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦æ˜¯æ‰‹æœºå·

<br>
è§£å†³
ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œç»™å‡½æ•°ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¦‚æœæ˜¯æ‰‹æœºå·åˆ™è¿”å›Trueï¼Œå¦åˆ™è¿”å›False

<br>
ä»£ç 
def isPhone(phone):
    # é•¿åº¦ä¸º11
    # å…¨éƒ¨éƒ½æ˜¯æ•°å­—å­—ç¬¦
    # ä»¥1å¼€å¤´
    pass

if isPhone("13812345678"):
    print("æ˜¯æ‰‹æœºå·")
else:
    print("ä¸æ˜¯æ‰‹æœºå·")
å¤åˆ¶

<br>
æ³¨æ„
å¦‚æœä½¿ç”¨æ­£åˆ™ä¼šè®©è¿™ä¸ªé—®é¢˜å˜å¾—ç®€å•

<br><br>æ¦‚è¿°ï¼š æ­£åˆ™è¡¨è¾¾å¼ï¼Œåˆç§°è§„åˆ™è¡¨è¾¾å¼<br>æ­£åˆ™è¡¨è¾¾å¼(regular expression)æè¿°äº†ä¸€ç§å­—ç¬¦ä¸²åŒ¹é…çš„æ¨¡å¼ï¼ˆpatternï¼‰<br>æ­£åˆ™åŒ¹é…æ˜¯ä¸€ä¸ª æ¨¡ç³Šçš„åŒ¹é…(ä¸æ˜¯ç²¾ç¡®åŒ¹é…)<br>reï¼špythonè‡ª1.5ç‰ˆæœ¬å¼€å§‹å¢åŠ äº†reæ¨¡å—ï¼Œè¯¥æ¨¡å—æä¾›äº†perlé£æ ¼çš„æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ï¼Œreæ¨¡å—æ˜¯pythonè¯­è¨€æ‹¥æœ‰äº†æ‰€æœ‰æ­£åˆ™è¡¨è¾¾å¼çš„åŠŸèƒ½<br>
<br>å¦‚ä¸‹å››ä¸ªæ–¹æ³•ç»å¸¸ä½¿ç”¨

<br>match()
<br>search()
<br>findall()
<br>finditer()


<br><br><br><br><br>é”šå­—ç¬¦:ç”¨æ¥åˆ¤å®šæ˜¯å¦æŒ‰ç…§è§„å®šå¼€å§‹æˆ–è€…ç»“å°¾<br><br><br>é™å®šç¬¦ç”¨æ¥æŒ‡å®šæ­£åˆ™è¡¨è¾¾å¼çš„ä¸€ä¸ªç»™å®šç»„ä»¶å¿…é¡»è¦å‡ºç°å¤šå°‘æ¬¡æ‰èƒ½æ»¡è¶³åŒ¹é…ã€‚æœ‰ * æˆ– + æˆ– ? æˆ– {n} æˆ– {n,} æˆ– {n,m} å…±6ç§ã€‚<br><br><br>é€šç”¨flagsï¼ˆä¿®æ­£ç¬¦ï¼‰<br><br>é€šç”¨å‡½æ•°<br>
<br>
è·å–åŒ¹é…ç»“æœ

<br>
ä½¿ç”¨group()æ–¹æ³• è·å–åˆ°åŒ¹é…çš„å€¼

<br>
groups()    è¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰å°ç»„å­—ç¬¦ä¸²çš„å…ƒç»„(ä¹Ÿå°±æ˜¯è‡ªå­˜å‚¨çš„å€¼)ï¼Œä» 1 åˆ° æ‰€å«çš„å°ç»„å·ã€‚



<br><br>
<br>
åŸå‹
def match(pattern, string, flags=0)
å¤åˆ¶

<br>
åŠŸèƒ½
åŒ¹é…æˆåŠŸè¿”å› åŒ¹é…çš„å¯¹è±¡  
åŒ¹é…å¤±è´¥ è¿”å› None

<br>
<br>
è·å–åŒ¹é…ç»“æœ

<br>
ä½¿ç”¨group()æ–¹æ³• è·å–åˆ°åŒ¹é…çš„å€¼

<br>
groups()    è¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰å°ç»„å­—ç¬¦ä¸²çš„å…ƒç»„ï¼Œä» 1 åˆ° æ‰€å«çš„å°ç»„å·ã€‚



<br>
æ³¨æ„ï¼šä»ç¬¬ä¸€ä½å¼€å§‹åŒ¹é…  åªåŒ¹é…ä¸€æ¬¡

<br>
<br>
å‚æ•°


<br>
ä»£ç 
import re

res = re.match('\d{2}','123')
print(res.group())

#ç»™å½“å‰åŒ¹é…åˆ°çš„ç»“æœèµ·åˆ«å
s = '3G4HFD567'
re.match("(?P&lt;value&gt;\d+)",s)
print(x.group(0))
print(x.group('value'))
å¤åˆ¶

<br><br>
<br>
åŸå‹
def search(pattern, string, flags=0)
å¤åˆ¶

<br>
åŠŸèƒ½
æ‰«ææ•´ä¸ªå­—ç¬¦ä¸²stringï¼Œå¹¶è¿”å›ç¬¬ä¸€ä¸ªpatternæ¨¡å¼æˆåŠŸçš„åŒ¹é…
åŒ¹é…å¤±è´¥ è¿”å› None

<br>
å‚æ•°


<br>
æ³¨æ„ï¼š
åªè¦å­—ç¬¦ä¸²åŒ…å«å°±å¯ä»¥
åªåŒ¹é…ä¸€æ¬¡

<br>
ç¤ºä¾‹
import re

res = re.search('[a-z]', '131A3ab889s')
print(res)
print(res.group()
å¤åˆ¶

<br>
<br>
æ³¨æ„
ä¸searchçš„åŒºåˆ«
ç›¸åŒç‚¹ï¼š
éƒ½åªåŒ¹é…ä¸€æ¬¡
ä¸åŒç‚¹ï¼š

<br>searchæ˜¯åœ¨è¦åŒ¹é…çš„å­—ç¬¦ä¸²ä¸­  åŒ…å«æ­£åˆ™è¡¨è¾¾å¼çš„å†…å®¹å°±å¯ä»¥
<br>match å¿…é¡»ç¬¬ä¸€ä½å°±å¼€å§‹åŒ¹é…  å¦åˆ™åŒ¹é…å¤±è´¥


<br><br>
<br>
åŸå‹
def findall(pattern, string, flags=0)
å¤åˆ¶

<br>
åŠŸèƒ½
æ‰«ææ•´ä¸ªå­—ç¬¦ä¸²stringï¼Œå¹¶è¿”å›æ‰€æœ‰åŒ¹é…çš„patternæ¨¡å¼ç»“æœçš„å­—ç¬¦ä¸²åˆ—è¡¨

<br>
å‚æ•°


<br>
ç¤ºä¾‹

myStr = """
&lt;a href="http://www.baidu.com"&gt;ç™¾åº¦&lt;/a&gt;
&lt;A href="http://www.taobao.com"&gt;æ·˜å®&lt;/A&gt;
&lt;a href="http://www.id97.com"&gt;ç”µ
å½±ç½‘ç«™&lt;/a&gt;
&lt;i&gt;æˆ‘æ˜¯å€¾æ–œ1&lt;/i&gt;
&lt;i&gt;æˆ‘æ˜¯å€¾æ–œ2&lt;/i&gt;
&lt;em&gt;æˆ‘æ˜¯å€¾æ–œ2&lt;/em&gt;
"""
# htmlé‡Œæ˜¯ä¸åŒºåˆ†å¤§å°å†™
# ï¼ˆ1ï¼‰ç»™æ­£åˆ™é‡Œé¢åŒ¹é…çš„ åŠ ä¸Šåœ†æ‹¬å· ä¼šå°†æ‹¬å·é‡Œé¢çš„å†…å®¹è¿›è¡Œ å•ç‹¬çš„è¿”å›
res = re.findall("(&lt;a href=\"http://www\.(.*?)\.com\"&gt;(.*?)&lt;/a&gt;)",myStr) #[('&lt;a href="http://www.baidu.com"&gt;ç™¾åº¦&lt;/a&gt;', 'baidu', 'ç™¾åº¦')]

# æ‹¬å·çš„åŒºåˆ«
res = re.findall("&lt;a href=\"http://www\..*?\.com\"&gt;.*?&lt;/a&gt;",myStr) #['&lt;a href="http://www.baidu.com"&gt;ç™¾åº¦&lt;/a&gt;']

#(2) ä¸åŒºåˆ†å¤§å°å†™çš„åŒ¹é…
res = re.findall("&lt;a href=\"http://www\..*?\.com\"&gt;.*?&lt;/a&gt;",myStr,re.I) #['&lt;a href="http://www.baidu.com"&gt;ç™¾åº¦&lt;/a&gt;', '&lt;A href="http://www.taobao.com"&gt;æ·˜å®&lt;/A&gt;']
res = re.findall("&lt;[aA] href=\"http://www\..*?\.com\"&gt;.*?&lt;/[aA]&gt;",myStr) #['&lt;a href="http://www.baidu.com"&gt;ç™¾åº¦&lt;/a&gt;']
# (3) ä½¿.æ”¯æŒæ¢è¡ŒåŒ¹é…
res = re.findall("&lt;a href="http://www..?.com"&gt;.?&lt;/a&gt;",myStr,re.S) #
# (4) æ”¯æŒæ¢è¡Œ æ”¯æŒä¸åŒºåˆ†å¤§å°å†™åŒ¹é…
res = re.findall("&lt;a href="http://www..?.com"&gt;.?&lt;/a&gt;",myStr,re.S|re.I) #
print(res)
å¤åˆ¶

<br><br>
<br>
åŸå‹
def finditer(pattern, string, flags=0)
å¤åˆ¶

<br>
åŠŸèƒ½
ä¸findall()ç±»ä¼¼ï¼Œè¿”å›ä¸€ä¸ªè¿­ä»£å™¨

<br>
å‚æ•°


<br>
ä»£ç 
import re

res = re.finditer('\w', '12hsakda1')
print(res)
print(next(res))

for i in res:
    print(i)
å¤åˆ¶

<br><br>
<br>
ä½œç”¨ï¼šåˆ‡å‰²å­—ç¬¦ä¸²

<br>
åŸå‹ï¼š
def split(patter, string, maxsplit=0, flags=0)
å¤åˆ¶

<br>
å‚æ•°
pattern   æ­£åˆ™è¡¨è¾¾å¼
string      è¦æ‹†åˆ†çš„å­—ç¬¦ä¸²
maxsplit   æœ€å¤§æ‹†åˆ†æ¬¡æ•°  é»˜è®¤æ‹†åˆ†å…¨éƒ¨
flags          ä¿®æ­£ç¬¦

<br>
ç¤ºä¾‹
import re
myStr = "asdas\rd&amp;a\ts12d\n*a3sd@a_1sd"
#é€šè¿‡ç‰¹æ®Šå­—ç¬¦ å¯¹å…¶è¿›è¡Œæ‹†åˆ† æˆåˆ—è¡¨
res = re.split("[^a-z]",myStr)
res = re.split("\W",myStr)
å¤åˆ¶

<br><br>
<br>
ä½œç”¨
å¯¹æ­£åˆ™è¿›è¡Œä¿®æ­£

<br>
ä½¿ç”¨
search/match/findall/finditer ç­‰å‡½æ•° flagså‚æ•°çš„ä½¿ç”¨

<br>
ä¿®æ­£ç¬¦
re.I   ä¸åŒºåˆ†å¤§å°å†™åŒ¹é…
re.S    ä½¿.å¯ä»¥åŒ¹é…æ¢è¡Œç¬¦   åŒ¹é…ä»»æ„å­—ç¬¦

<br>
ä½¿ç”¨
re.I
print(re.findall('[a-z]','AaBb'))
print(re.findall('[a-z]','AaBb', flags=re.I))
å¤åˆ¶
re.S
print(re.findall('&lt;b&gt;.*?&lt;/b&gt;','&lt;b&gt;bæ ‡ç­¾&lt;/b&gt;'))
print(re.findall('&lt;b&gt;.*?&lt;/b&gt;','&lt;b&gt;bæ ‡\nç­¾&lt;/b&gt;', flags=re.S))
å¤åˆ¶

<br><br><br>
<br>
æ¦‚å¿µ
å¤„ç†ç®€å•çš„åˆ¤æ–­æ˜¯å¦åŒ¹é…ä¹‹å¤–ï¼Œæ­£åˆ™è¡¨è¾¾å¼è¿˜æœ‰æå–å­ä¸²çš„åŠŸèƒ½ï¼Œç”¨()è¡¨ç¤ºçš„å°±æ˜¯è¦æå–çš„åˆ†ç»„

<br>
ä»£ç 
#ç»™å½“å‰åŒ¹é…åˆ°çš„ç»“æœèµ·åˆ«å
s = '3G4HFD567'
re.match("(?P&lt;value&gt;\d+)",s)
print(x.group(0))
print(x.group('value'))
å¤åˆ¶

<br>
è¯´æ˜

<br>æ­£åˆ™è¡¨è¾¾å¼ä¸­å®šä¹‰äº†ç»„ï¼Œå°±å¯ä»¥åœ¨Matchå¯¹è±¡ä¸Šç”¨group()æ–¹æ³•æå–å‡ºå­ä¸²æ¥
<br>group(0)æ°¸è¿œæ˜¯åŸå§‹å­—ç¬¦ä¸²ï¼Œgroup(1)ã€group(2)â€¦â€¦è¡¨ç¤ºç¬¬1ã€2ã€â€¦â€¦ä¸ªå­ä¸²


<br><br>
<br>
æ¦‚å¿µ
å½“åœ¨pythonä¸­ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ—¶ï¼Œreæ¨¡å—ä¼šåšä¸¤ä»¶äº‹ï¼Œä¸€ä»¶æ˜¯ç¼–è¯‘æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¦‚æœè¡¨è¾¾å¼çš„å­—ç¬¦ä¸²æœ¬èº«ä¸åˆæ³•ï¼Œä¼šæŠ¥é”™ã€‚å¦ä¸€ä»¶æ˜¯ç”¨ç¼–è¯‘å¥½çš„æ­£åˆ™è¡¨è¾¾å¼æå–åŒ¹é…å­—ç¬¦ä¸²

<br>
ç¼–è¯‘ä¼˜ç‚¹
å¦‚æœä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼è¦ä½¿ç”¨å‡ åƒéï¼Œæ¯ä¸€æ¬¡éƒ½ä¼šç¼–è¯‘ï¼Œå‡ºäºæ•ˆç‡çš„è€ƒè™‘è¿›è¡Œæ­£åˆ™è¡¨è¾¾å¼çš„ç¼–è¯‘ï¼Œå°±ä¸éœ€è¦æ¯æ¬¡éƒ½ç¼–è¯‘äº†ï¼ŒèŠ‚çœäº†ç¼–è¯‘çš„æ—¶é—´ï¼Œä»è€Œæå‡æ•ˆç‡

<br>
compile()å‡½æ•°

<br>
åŸå‹
def compile(pattern, flags=0)
å¤åˆ¶

<br>
ä½œç”¨
å°†patternæ¨¡å¼ç¼–è¯‘æˆæ­£åˆ™å¯¹è±¡

<br>
å‚æ•°


<br>
flags


<br>
è¿”å›å€¼
ç¼–è¯‘å¥½çš„æ­£åˆ™å¯¹è±¡

<br>
ç¤ºä¾‹
import re

re_phone = re.compile(r"(0\d{2,3}-\d{7,8})")
print(re_phone, type(re_phone))
å¤åˆ¶



<br>
ç¼–è¯‘åå…¶ä»–æ–¹æ³•çš„ä½¿ç”¨
åŸå‹
def match(self, string, pos=0, endpos=-1)
def search(self, string, pos=0, endpos=-1)
def findall(self, string, pos=0, endpos=-1)
def finditer(self, string, pos=0, endpos=-1)
å¤åˆ¶
å‚æ•°

ç¤ºä¾‹
s1 = "lucky's phone is 010-88888888"
s2 = "kaige's phone is 010-99999999"
ret1 = re_phone.search(s1)
print(ret1, ret1.group(1))
ret2 = re_phone.search(s2)
print(ret2, ret2.group(1))
å¤åˆ¶

<br><br>
<br>
è´ªå©ªæ¨¡å¼  
è´ªå©ªæ¦‚å¿µï¼šåŒ¹é…å°½å¯èƒ½å¤šçš„å­—ç¬¦

<br>.+  åŒ¹é…æ¢è¡Œç¬¦ä»¥å¤–çš„å­—ç¬¦è‡³å°‘ä¸€æ¬¡
<br>.*  åŒ¹é…æ¢è¡Œç¬¦ä»¥å¤–çš„å­—ç¬¦ä»»æ„æ¬¡

å®ä¾‹
res = re.search('&lt;b&gt;.+&lt;/b&gt;', '&lt;b&gt;&lt;/b&gt;&lt;b&gt;bæ ‡ç­¾&lt;/b&gt;')
res = re.search('&lt;b&gt;.*&lt;/b&gt;', '&lt;b&gt;bæ ‡ç­¾&lt;/b&gt;&lt;b&gt;bæ ‡ç­¾&lt;/b&gt;&lt;b&gt;bæ ‡ç­¾&lt;/b&gt;&lt;b&gt;bæ ‡ç­¾&lt;/b&gt;')
å¤åˆ¶

<br>
éè´ªå©ªæ¨¡å¼
éè´ªå©ªæ¦‚å¿µï¼šå°½å¯èƒ½å°‘çš„åŒ¹é…ç§°ä¸ºéè´ªå©ªåŒ¹é…ï¼Œ*?ã€+?å³å¯

<br>
.+?  åŒ¹é…æ¢è¡Œç¬¦ä»¥å¤–çš„å­—ç¬¦è‡³å°‘ä¸€æ¬¡  æ‹’ç»è´ªå©ª

<br>.*?   åŒ¹é…æ¢è¡Œç¬¦ä»¥å¤–çš„å­—ç¬¦ä»»æ„æ¬¡      æ‹’ç»è´ªå©ª

å®ä¾‹
res = re.search('&lt;b&gt;.+?&lt;/b&gt;', '&lt;b&gt;bæ ‡ç­¾&lt;/b&gt;&lt;b&gt;bæ ‡ç­¾&lt;/b&gt;')
res = re.search('&lt;b&gt;.*?&lt;/b&gt;', '&lt;b&gt;bæ ‡ç­¾&lt;/b&gt;&lt;b&gt;bæ ‡ç­¾&lt;/b&gt;&lt;b&gt;bæ ‡ç­¾&lt;/b&gt;&lt;b&gt;bæ ‡ç­¾&lt;/b&gt;')
å¤åˆ¶

<br>ç»ƒä¹ ï¼š<br>
<br>
ä¸­ä¿¡è¯åˆ¸
# å°†äº§å“åç§°ç®¡ç†äºº  é£é™©è¯„çº§ è®¤è´­é‡‘é¢ èµ·ç‚¹å…¬ç¤º  ä¿¡æ¯  å…¨éƒ¨æŠ“åˆ°
å¤åˆ¶

<br>
ç»ƒä¹ æŠ“å–è‚¡ç¥¨  æ¯ä¸€è¡Œæ•°æ®

<br>
è±†ç“£
æŠ“å–æ ‡é¢˜å’Œå›¾ç‰‡imgæ ‡ç­¾

<br>
<br>
<br>
lucky
<a href="\#fnref-1-84222bcfa849571c" class="footnote-backref footnote-link" target="_self" rel="noopener">â†©ï¸</a>

]]></description><link>Typora\æ­£åˆ™.html</link><guid isPermaLink="false">Typora/æ­£åˆ™.md</guid><pubDate>Tue, 17 Oct 2023 03:25:02 GMT</pubDate></item><item><title><![CDATA[markdownçš„ä½¿ç”¨è¯´æ˜]]></title><description><![CDATA[ 
 <br><br><br>
è¯­æ³•ï¼š# (ä¸€çº§æ ‡é¢˜)  ## (äºŒçº§æ ‡é¢˜)  ### (ä¸‰çº§æ ‡é¢˜) ......
<br>
ä»£ç ï¼š
# è¿™æ˜¯ä¸€çº§æ ‡é¢˜
## è¿™æ˜¯äºŒçº§æ ‡é¢˜
å¤åˆ¶
<br>
æ•ˆæœ:  


<br>
å¿«æ·é”®:

<br>Ctrl+æ•°å­—1~6å¯ä»¥å¿«é€Ÿå°†é€‰ä¸­çš„æ–‡æœ¬è°ƒæˆå¯¹åº”çº§åˆ«çš„æ ‡é¢˜
<br>Ctrl+0å¯ä»¥å¿«é€Ÿå°†é€‰ä¸­çš„æ–‡æœ¬è°ƒæˆæ™®é€šæ–‡æœ¬
<br>Ctrl+åŠ å·/å‡å·å¯¹æ ‡é¢˜çº§åˆ«è¿›è¡ŒåŠ å‡

<br><br><br>
ä»£ç :  
è¿™æ˜¯ä¸€ä¸ªæ®µè½
è¿™æ˜¯ä¸€ä¸ªæ®µè½
å¤åˆ¶
<br>
æ•ˆæœ: 
è¿™æ˜¯ä¸€ä¸ªæ®µè½
è¿™æ˜¯ä¸€ä¸ªæ®µè½
<br><br>
è¯­æ³•:  ---æˆ–è€…***+å›è½¦
<br>
ä»£ç :
---æˆ–è€…***
å¤åˆ¶
<br>
æ•ˆæœ:

<br><br><br>
è¯­æ³•:

<br>ç²—ä½“:  ç”¨ä¸€å¯¹åŒæ˜Ÿå·åŒ…è£¹
<br>åˆ é™¤çº¿:  ç”¨ä¸€å¯¹åŒé£˜å·åŒ…è£¹
<br>ä¸‹åˆ’çº¿:  ç”¨ä¸€å¯¹uæ ‡ç­¾åŒ…è£¹
<br>æ–œä½“:  ç”¨ä¸€å¯¹å•æ˜Ÿå·åŒ…è£¹
<br>é«˜äº®:  ç”¨ä¸€å¯¹åŒç­‰å·åŒ…è£¹

<br>
ä»£ç :
**è¿™æ˜¯ç²—ä½“**
~~è¿™æ˜¯åˆ é™¤çº¿~~
&lt;u&gt;è¿™æ˜¯ä¸‹åˆ’çº¿&lt;/u&gt;
*è¿™æ˜¯æ–œä½“*
==è¿™æ˜¯é«˜äº®==
å¤åˆ¶
<br>
æ•ˆæœ:
è¿™æ˜¯ç²—ä½“
è¿™æ˜¯åˆ é™¤çº¿
è¿™æ˜¯ä¸‹åˆ’çº¿
è¿™æ˜¯æ–œä½“
è¿™æ˜¯é«˜äº®
<br>
å¿«æ·é”®:

<br>åŠ ç²—:  Ctrl+B
<br>åˆ é™¤çº¿:  Shift+Alt+5
<br>ä¸‹åˆ’çº¿:  Ctrl+U
<br>æ–œä½“:  Ctrl+I

<br><br>
ä»£ç :
x^2^
H~2~O
å¤åˆ¶
<br>
æ•ˆæœ:
x^2^
H~2~O
<br><br><br>
ä»£ç :
*/-/+ +ç©ºæ ¼
å¤åˆ¶
<br>
æ•ˆæœ:
1.åªæœ‰åŒä¸€çº§åˆ«:

<br>
è‹¹æœ

<br>
é¦™è•‰

<br>
æ©˜å­
2.å­é›†ç±»:

<br>
ä¸€çº§åˆ†ç±»

<br>äºŒçº§åˆ†ç±» 

<br>ä¸‰çº§åˆ†ç±»





<br>
å¿«æ·é”®:  Ctrl+Shift+]
<br><br>
ä»£ç :
æ•°å­—+.+ç©ºæ ¼
å¤åˆ¶
<br>
æ•ˆæœ:

<br>
ç¬¬ä¸€ä¸ªæ ‡é¢˜

<br>
ç¬¬äºŒä¸ªæ ‡é¢˜

<br>
ç¬¬ä¸‰ä¸ªæ ‡é¢˜

<br>å­å†…å®¹1
<br>å­å†…å®¹2


<br>
ç¬¬å››ä¸ªæ ‡é¢˜


<br>
å¿«æ·é”®:  Ctrl+Shift+[
<br><br>
ä»£ç :
- [ ] åƒæ—©é¤
- [x] èƒŒå•è¯
å¤åˆ¶
<br>
æ•ˆæœ:

<br>åƒæ—©é¤
<br>èƒŒå•è¯

<br><br>
ä»£ç :
&gt;+å›è½¦
å¤åˆ¶
<br>
æ•ˆæœ:

è¿™æ˜¯æœ€å¤–å±‚åŒºå—

è¿™æ˜¯å†…å±‚åŒºå—





è¿™æ˜¯æœ€å†…å±‚åŒºå—



<br><br><br>
ä»£ç :
`int a=0;`ï¼ˆè¯´æ˜ï¼š`ä½äºEscä¸‹é¢ï¼‰
å¤åˆ¶
<br>
æ•ˆæœ:
int a=0;
<br>
å¿«æ·é”®:  Ctrl+Shift+`
<br><br>
ä»£ç :
```js/java/c#/text
å†…å®¹
```
å¤åˆ¶
<br>
å¿«æ·é”®:  Ctrl+Shift+K
<br><br>
ä»£ç :
www.baidu.com
[ç™¾åº¦ä¸€ä¸‹](https://www.baidu.com)
[ç™¾åº¦ä¸€ä¸‹](https://www.baidu.com "https://www.baidu.com")
å¤åˆ¶
<br>
æ•ˆæœ:
<a data-tooltip-position="top" aria-label="http://www.baidu.com" rel="noopener" class="external-link" href="http://www.baidu.com" target="_blank">www.baidu.com</a>
<a data-tooltip-position="top" aria-label="https://www.baidu.com" rel="noopener" class="external-link" href="https://www.baidu.com" target="_blank">ç™¾åº¦ä¸€ä¸‹</a>
<a data-tooltip-position="top" aria-label="https://www.baidu.com" rel="noopener" class="external-link" title="https://www.baidu.com" href="https://www.baidu.com" target="_blank">ç™¾åº¦ä¸€ä¸‹</a>
<br>
å¿«æ·é”®:  Ctrl+K
<br><br>
è¯´æ˜:  å¯¹æ–‡æœ¬è¿›è¡Œè§£é‡Šè¯´æ˜ã€‚
<br>
ä»£ç : 
[^æ–‡æœ¬]
[^æ–‡æœ¬]:è§£é‡Šè¯´æ˜
å¤åˆ¶
<br>
æ•ˆæœ:
è¿™æ˜¯ä¸€ä¸ªæŠ€æœ¯<a href="\#fn-1-84222bcfa849571c" class="footnote-link" target="_self" rel="noopener">[1]</a>
<br><br>
ä»£ç :
![ä¸æ˜¾ç¤ºçš„æ–‡å­—](å›¾ç‰‡è·¯å¾„ "å›¾ç‰‡æ ‡é¢˜")
å¤åˆ¶
<br>
æ•ˆæœ:
![This is a picture](C:\Users\asus\Pictures\Saved Pictures\Snipaste_2020-09-03_13-19-11.png "æ¼«æ­¥å›¾")
(æ³¨ï¼šæ•ˆæœè·¯å¾„ä¸ºC:\Users\asus\Pictures\Saved Pictures\Snipaste_2020-09-03_13-19-11.pngã€‚åœ¨å…¶ä»–ç”µè„‘ä¸Šå¯èƒ½ä¸æ˜¾ç¤ºã€‚)
<br>
å¿«æ·é”®:  Ctrl+Shift+I
<br><br>
ä»£ç :
|  1   |  2   |  3   |
| :--- | :--: | ---: |
|  4   |  5   |  6   |
|  7   |  8   |  9   |
|  10  |  11  |  12  |
å¤åˆ¶
<br>
æ•ˆæœ:

<br>
å¿«æ·é”®:  Ctrl+T
<br><br><br>
ä»£ç :
```mermaid
graph LR
A[æ–¹å½¢]==&gt;B(åœ†è§’)
B==&gt;C{æ¡ä»¶a}
C--&gt;|a=1|D[ç»“æœ1]
C--&gt;|a=2|E[ç»“æœ2]
F[æ¨ªå‘æµç¨‹å›¾]
```
å¤åˆ¶
<br>
æ•ˆæœ:

<br><br>
ä»£ç :
```mermaid
graph TD
A[æ–¹å½¢]==&gt;B(åœ†è§’)
B==&gt;C{æ¡ä»¶a}
C--&gt;|a=1|D[ç»“æœ1]
C--&gt;|a=2|E[ç»“æœ2]
F[ç«–å‘æµç¨‹å›¾]
```
å¤åˆ¶
<br>
æ•ˆæœ:

<br><br>
ä»£ç :
:happy:ã€:cry:ã€:man:
å¤åˆ¶
<br>
æ•ˆæœ:
:happy:ã€ :cry:ã€ :man:
<br><br><br><br>
ä»£ç :
$å…¬å¼$
å¤åˆ¶
<br>
æ•ˆæœ:

<br><br>
ä»£ç :
$$
å…¬å¼
$$
å¤åˆ¶
<br>
æ•ˆæœ:

<br><br>
ä»£ç :
$x^{y^z}=(1+e^x)^{-2xy^w}$
$\sideset{^1_2}{^3_4}{\underset{6}\bigotimes}$
å¤åˆ¶
<br>
æ•ˆæœ:


<br><br>
ä»£ç :
$\langle\quad\rangle\quad\lceil\quad\rceil\quad\lfloor\quad\rfloor\quad\lbrace\quad\rbrace\quad\lVert\quad\rVert$
$f(x,y,z)=3y^2z\left(3+\dfrac{7x+5}{1+y^2}\right)$
$\left.\dfrac{\mathrm{d}u}{\mathrm{d}x}\right|_{x=0}$
å¤åˆ¶
<br>
æ•ˆæœ:



<br><br>
ä»£ç :
$\frac{a}{b}\quad\dfrac{a}{b}\quad {a\over b}$
å¤åˆ¶
<br>
æ•ˆæœ:

<br><br>
ä»£ç :
$\sqrt[æ ¹æŒ‡æ•°,çœç•¥æ—¶ä¸º2]{è¢«å¼€æ–¹æ•°}$
å¤åˆ¶
<br>
æ•ˆæœ:

<br><br>
ä»£ç :
$\cdots\quad\ldots\quad\vdots\quad\ddots$
å¤åˆ¶
<br>
æ•ˆæœ:

<br><br>
ä»£ç :
$\overrightarrow{E(\vec{r})}\quad\overleftarrow{E(\vec{r})}\quad\overleftrightarrow{E(\vec{r})}\quad\underrightarrow{E(\vec{r})}\quad\underleftarrow{E(\vec{r})}\quad\underleftrightarrow{E(\vec{r})}\quad\overline{v}=\bar{v}\quad\underline{v}$
å¤åˆ¶
<br>
æ•ˆæœ:

<br><br>
ä»£ç :
$$
\iint\limits_D\left(\dfrac{\partial Q}{\partial x}-\dfrac{\partial P}{\partial y}\right){\rm d}x{\rm d}y=\oint\limits_LP{\rm d}x+Q{\rm d}y
$$
å¤åˆ¶
<br>
æ•ˆæœ:

<br><br>
ä»£ç :
$\lim\limits_{n\to\infin}(1+\dfrac{1}{n})^n=e$
å¤åˆ¶
<br>
æ•ˆæœ:

<br><br>
$\sum\limits_{i=1}^n\dfrac{1}{n^2}\quad and\quad\prod\limits_{i=1}^n\dfrac{1}{n^2}\quad and\quad\bigcup\limits_{i=1}^n\dfrac{1}{n^2}\quad and\quad\bigcap\limits_{i=1}^n\dfrac{1}{n^2}$
å¤åˆ¶
<br>
æ•ˆæœ:

<br><br><br><br><br>
å¯ä»¥åœ¨å­—ç¬¦å‰ä½¿ç”¨\largeæˆ–\smallä»¥æ˜¾ç¤ºæ›´å¤§æˆ–æ›´å°çš„å­—ç¬¦ã€‚
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
ä»£ç :
${\å­—ä½“{éœ€è¦è½¬æ¢çš„å­—ç¬¦}}$
å¤åˆ¶
<br><br><br>
è¯´æ˜:  ä½¿ç”¨\leftå’Œ\rightæ¥åˆ›å»ºè‡ªåŠ¨åŒ¹é…é«˜åº¦çš„()ã€[]ã€{}ã€.ã€‚åœ¨æ¯ä¸ªå…¬å¼æœ«å°¾ä½¿ç”¨\tag{è¡Œæ ‡}æ¥å®ç°è¡Œæ ‡ã€‚
<br>
ä»£ç :
$$
f\left(
\left[
\dfrac{1+\{x,y\}}{\left(\dfrac{x}{y}+\dfrac{y}{x}\right)(u+1)}+a
\right]
^{\dfrac{3}{2}}
\right)
\tag{è¡Œæ ‡}
$$
å¤åˆ¶
<br>
æ•ˆæœ:

<br>
è¯´æ˜:å¦‚æœä½ æƒ³å°†è¡Œå†…æ˜¾ç¤ºçš„åˆ†éš”ç¬¦ä¹Ÿå˜å¤§,ä¹Ÿå¯ä»¥ä½¿ç”¨\middleå‘½ä»¤
<br>
ä»£ç :
$$
\left\langle q\middle\|\dfrac{\dfrac{x}{y}}{\dfrac{u}{v}}\middle|p\right\rangle
$$
å¤åˆ¶
<br>
æ•ˆæœ:

<br><br><br>
ä»£ç :
$\text{æ–‡å­—}$
å¤åˆ¶
<br>
æ•ˆæœ:

<br><br>

<br>é€‚ç”¨æ–°æ—§æµè§ˆå™¨
ä»£ç :

$\color{é¢œè‰²}{æ–‡å­—}$
å¤åˆ¶
<br><br>

<br>é€‚ç”¨æ–°ç‰ˆæµè§ˆå™¨
ä»£ç :

$\color{#rgb}{æ–‡å­—}$    (æ³¨:å…¶ä¸­rã€gã€bå¯ä»¥è¾“å…¥0~9å’Œa~fæ¥åˆ†åˆ«è¡¨ç¤ºçº¢è‰²ã€ç»¿è‰²å’Œè“è‰²çš„çº¯åº¦)
å¤åˆ¶
<br><br>
è¯´æ˜:  ä½¿ç”¨\require{cancle}å£°æ˜ï¼Œå†ä½¿ç”¨\cancle{å­—ç¬¦}ã€\bcancle{å­—ç¬¦}ã€\xcancle{å­—ç¬¦}ã€\cancleto{å­—ç¬¦}{å­—ç¬¦}æ¥å®ç°å„ç§ç‰‡æ®µåˆ é™¤çº¿æ•ˆæœã€‚
<br>
ä»£ç :
$$
\require{cancel}\begin{array}{r1}
\verb|y+\cancel{x}|&amp;y+\cancel{x}\\
\verb|y+\cancel{y+x}|&amp;y+\cancel{y+x}\\
\verb|y+\bcancel{x}|&amp;y+\bcancel{x}\\
\verb|y+\xcancel{x}|&amp;y+\xcancel{x}\\
\verb|y+\cancelto{0}{x}|&amp;y+\cancelto{0}{x}\\
\verb+\frac{1\cancel9}{\cancel95}=\frac15+&amp;\frac{1\cancel9}{\cancel95}=\frac15\\
\end{array}
$$
å¤åˆ¶
<br>
æ•ˆæœ:

<br>
è¯´æ˜:  ä½¿ç”¨\require{enclose}æ¥å…è®¸æ•´æ®µåˆ é™¤çº¿çš„æ˜¾ç¤ºï¼Œå†ä½¿ç”¨\enclose{åˆ é™¤çº¿æ•ˆæœ}{å­—ç¬¦}æ¥ä½¿ç”¨å„ç§æ•´æ®µåˆ é™¤çº¿æ•ˆæœã€‚å…¶ä¸­ï¼Œåˆ é™¤çº¿æ•ˆæœæœ‰horizontalstrikeã€verticalstrikeã€updiagonalstrikeå’Œdowndiagonalstrike,å¯ä»¥å åŠ ä½¿ç”¨ã€‚
<br>
ä»£ç :
$$
\require{enclose}\begin{array}{r1}
\verb|\enclose{horizontalstrike}{x+y}|&amp;\enclose{horizontalstrike}{x+y}\\
\verb|\enclose{verticalstrike}{\frac xy}|&amp;\enclose{verticalstrike}{\frac xy}\\
\verb|\enclose{updiagonalstrike}{x+y}|&amp;\enclose{updiagonalstrike}{x+y}\\
\verb|\enclose{downdiagonalstrike}{x+y}|&amp;\enclose{downdiagonalstrike}{x+y}\\
\verb|\enclose{horizontalstrike,updiagonalstrike}{x+y}|&amp;\enclose{horizontalstrike,updiagonalstrike}{x+y}\\
\end{array}
$$
å¤åˆ¶
<br>
æ•ˆæœ:

<br><br><br>
ä»£ç :
$$
\begin{matrix}
1&amp;x&amp;x^2\\
1&amp;y&amp;y^2\\
1&amp;z&amp;z^2\\
\end{matrix}
$$
å¤åˆ¶
<br>
æ•ˆæœ:

<br><br>
è¯´æ˜:  åœ¨å¼€å¤´å°†matrixæ›¿æ¢ä¸ºpmatrixã€bmatrixã€Bmatrixã€vmatrixã€Vmatrixã€‚
<br><br><br>
è¯´æ˜:  å¯ä»¥ä½¿ç”¨cc|cæ¥åœ¨ä¸€ä¸ªä¸‰åˆ—çŸ©é˜µä¸­æ’å…¥åˆ†å‰²çº¿ã€‚
<br>
ä»£ç :
$$
\left[
\begin{array}{cc|c}
1&amp;2&amp;3\\
4&amp;5&amp;6
\end{array}
\right]
$$
å¤åˆ¶
<br>
æ•ˆæœ:

<br><br>
ä»£ç :
$\bigl(\begin{smallmatrix}a&amp;b\\c&amp;d\end{smallmatrix}\bigr)$
å¤åˆ¶
<br>
æ•ˆæœ:

<br><br>
è¯´æ˜:  å¯ä»¥ä½¿ç”¨\begin{align}...\end{align}æ¥åˆ›å»ºä¸€åˆ—æ•´é½ä¸”é»˜è®¤å³å¯¹é½çš„æ–¹ç¨‹å¼åºåˆ—ã€‚è¯·æ³¨æ„{align}æ˜¯è‡ªåŠ¨ç¼–å·çš„ï¼Œä½¿ç”¨{align*}æ¥å£°æ˜åœæ­¢è‡ªåŠ¨ç¼–å·ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨\notagæ¥å–æ¶ˆç‰¹å®šè¡Œçš„è‡ªåŠ¨ç¼–å·ã€‚åœ¨éœ€è¦çš„æ—¶å€™ï¼Œä½ å¯ä»¥ä½¿ç”¨\begin{equation}...\end{equation}æ¥å¼ºåˆ¶è¡¨è¾¾å¼è‡ªåŠ¨ç¼–å·ã€‚
<br>
ä»£ç :


$$
\begin{align}
\sqrt{37}=\sqrt{\dfrac{73^2-1}{12^2}}\\
&amp;=\sqrt{\dfrac{73^2}{12^2}\cdot\dfrac{73^2-1}{73^2}}\\
&amp;=\sqrt{\dfrac{73^2}{12^2}}\sqrt{\dfrac{73^2-1}{73^2}}\notag\\
&amp;=\dfrac{73}{12}\sqrt{1-\dfrac{1}{73^2}}\\
\approx\dfrac{73}{12}\left(1-\dfrac{1}{2\cdot73^2}\right)\label{A}
\end{align}
$$
***

$$
\begin{align*}
v+m&amp;=0&amp;\text{Given}\tag1\\
-w&amp;=-w+0&amp;\text{additive identity}\tag2\\
-w+0&amp;=-w+(v+w)&amp;\text{equations $(1)$ and $(2)$}
\end{align*}
$$
å¤åˆ¶
<br>
æ•ˆæœ:



ä½ å¯ä»¥ä½¿ç”¨\label{æ ‡ç­¾}æ¥åˆ›å»ºä¸€ä¸ªæ ‡ç­¾ï¼Œå°±å¦‚ä¸Šé¢çš„æ–¹ç¨‹å¼åºåˆ—ä¸­å±•ç¤ºçš„é‚£æ ·ï¼Œä¹‹åä½¿ç”¨\eqref{æ ‡ç­¾}å¼•ç”¨ä½ æƒ³å¼•ç”¨çš„å…¬å¼ï¼Œæ•ˆæœä¸ºï¼šã€‚å¦‚æœä¸æƒ³è¦æ‹¬å·ï¼Œå¯ä»¥è¾“å…¥\ref{æ ‡ç­¾}ï¼Œæ•ˆæœä¸ºï¼šå…¬å¼ ã€‚
å…¬å¼1å’Œ2çš„ä¸åŒåˆ—ä¹‹é—´å­˜åœ¨é—´éš”ï¼Œå¦‚æœä½ ä¸æƒ³è¦ï¼Œå¯ä»¥é€šè¿‡å°†alignæ›¿æ¢ä¸ºalignat{1}æ¥å»é™¤åˆ—é—´éš”ã€‚
<br><br>
è¯´æ˜:  ä½¿ç”¨\begin{cases}æ¥åˆ›é€ ä¸€ç»„é»˜è®¤å·¦å¯¹é½çš„æ¡ä»¶è¡¨è¾¾å¼,åœ¨æ¯ä¸€è¡Œæ’å…¥&amp;æ¥æŒ‡å®šéœ€è¦å¯¹é½çš„å†…å®¹,å¹¶åœ¨æ¯ä¸€è¡Œç»“å°¾å¤„ä½¿ç”¨\\,ä»¥\end{cases}ç»“å°¾ã€‚
<br>
ä»£ç :
$$
f(n)=
\begin{cases}
n/2,&amp;\text{if $n$ is even}\\
3n+1,&amp;\text{if $n$ is odd}
\end{cases}
$$
å¤åˆ¶
<br>
æ•ˆæœ:

<br><br>
è¯´æ˜:  å¯ä»¥ä½¿ç”¨\\[2ex]è¯­å¥æ›¿ä»£è¯¥è¡Œæœ«å°¾çš„\\æ¥è®©ç¼–è¯‘å™¨é€‚é… , å…¶ä¸­[ex]æŒ‡ä¸€ä¸ª"X-Height" , å³xå­—æ¯é«˜åº¦ , ä¹Ÿå¯ä»¥ä½¿ç”¨[3ex]æˆ–[4ex]ç­‰ã€‚
<br>
ä»£ç :
$$
f(n)=
\begin{cases}
\dfrac n2,&amp;\text{if $n$ is even}\\[2ex]
3n+1,&amp;\text{if $n$ is odd}
\end{cases}\tag{é€‚é…[2ex]}
$$
***

$$
f(n)=
\begin{cases}
\dfrac n2,&amp;\text{if $n$ is even}\\
3n+1,&amp;\text{if $n$ is odd}
\end{cases}\tag{ä¸é€‚é…[2ex]}
$$
å¤åˆ¶
<br>
æ•ˆæœ:



<br><br>
è¯´æ˜:  æ•°ç»„ä¸è¡¨æ ¼å‡ä»¥\begin{array}å¼€å¤´,å¹¶åœ¨å…¶åå®šä¹‰åˆ—æ•°åŠæ¯ä¸€åˆ—çš„æ–‡æœ¬å¯¹é½æ–¹å¼,c l råˆ†åˆ«ä»£è¡¨å±…ä¸­ã€å·¦å¯¹é½åŠå³å¯¹é½ã€‚è‹¥è¦æ’å…¥å‚ç›´åˆ†å‰²çº¿ï¼Œåœ¨å®šä¹‰ä¸­æ’å…¥|ï¼Œè‹¥è¦æ’å…¥æ°´å¹³åˆ†å‰²çº¿ï¼Œåœ¨å®šä¹‰ä¸­åŠ å…¥\hlineã€‚
<br>
ä»£ç :
$$
\begin{array}{c|lcr}
n&amp;\text{å·¦å¯¹é½}&amp;\text{å±…ä¸­å¯¹é½}&amp;\text{å³å¯¹é½}\\
\hline
1&amp;0.24&amp;1&amp;125\\
2&amp;-1&amp;189&amp;-8\\
3&amp;-20&amp;2000&amp;1+10i
\end{array}
$$
å¤åˆ¶
<br>
æ•ˆæœ:

<br><br>
ä»£ç :
$$
% outer vertical array of arrays å¤–å±‚å‚ç›´è¡¨æ ¼
\begin{array}{c}
% inner horizontal array of arrays å†…å±‚æ°´å¹³è¡¨æ ¼
\begin{array}{cc}
% inner array of minimum values å†…å±‚"æœ€å°å€¼"æ•°ç»„
\begin{array}{c|cccc}
\text{min}&amp;0&amp;1&amp;2&amp;3\\
\hline
0&amp;0&amp;0&amp;0&amp;0\\
1&amp;0&amp;1&amp;1&amp;1\\
2&amp;0&amp;1&amp;2&amp;2\\
3&amp;0&amp;1&amp;2&amp;3\\
\end{array}
&amp;
% inner array of maximum values å†…å±‚"æœ€å¤§å€¼"æ•°ç»„
\begin{array}{c|cccc}
\text{max}&amp;0&amp;1&amp;2&amp;3\\
\hline
0&amp;0&amp;1&amp;2&amp;3\\
1&amp;1&amp;1&amp;2&amp;3\\
2&amp;2&amp;2&amp;2&amp;3\\
3&amp;3&amp;3&amp;3&amp;3
\end{array}
\end{array}
% å†…å±‚ç¬¬ä¸€è¡Œè¡¨æ ¼ç»„ç»“æŸ
\\
% inner array of delta values å†…å±‚ç¬¬äºŒè¡ŒDeltaå€¼æ•°ç»„
\begin{array}{c|cccc}
\Delta&amp;0&amp;1&amp;2&amp;3\\
\hline
0&amp;0&amp;1&amp;2&amp;3\\
1&amp;1&amp;0&amp;1&amp;2\\
2&amp;2&amp;1&amp;0&amp;1\\
3&amp;3&amp;2&amp;1&amp;0
\end{array}
% å†…å±‚ç¬¬äºŒè¡Œè¡¨æ ¼ç»„ç»“æŸ
\end{array}
$$
å¤åˆ¶
<br>
æ•ˆæœ:

<br><br>
è¯´æ˜:  ä½¿ç”¨\begin{array}...\end{array}å’Œ\left\{...\right.æ¥åˆ›å»ºä¸€ä¸ªæ–¹ç¨‹ç»„,æˆ–è€…ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨æ¡ä»¶è¡¨è¾¾å¼ç»„\begin{cases}...\end{cases}æ¥å®ç°ç›¸åŒæ•ˆæœã€‚
<br>
ä»£ç :
$$
\left\{
\begin{array}{l}
a_1x+b_1y+c_1z=d_1\\
a_2x+b_2y+c_2z=d_2\\
a_3x+b_3y+c_1z=d_3
\end{array}
\right.
\quad\text{æˆ–è€…}\quad
\begin{cases}
a_1x+b_1y+c_1z=d_1\\
a_2x+b_2y+c_2z=d_2\\
a_3x+b_3y+c_1z=d_3
\end{cases}
$$
å¤åˆ¶
<br>
æ•ˆæœ:

<br><br>
è¯´æ˜:  å°±åƒ\fracä¸€æ ·,ä½¿ç”¨\cfracæˆ–\dfracæ¥åˆ›å»ºä¸€ä¸ªè¿åˆ†å¼,ä¸è¦ä½¿ç”¨æ™®é€šçš„\fracæˆ–\overæ¥åˆ›å»º,å¦åˆ™çœ‹èµ·æ¥ä¼šå¾ˆæ¶å¿ƒã€‚
<br>
ä»£ç :
$$
x=a_0+\cfrac{1^2}{a_1+\cfrac{2^2}{a_2+\cfrac{3^2}{a_3+\cfrac{4^2}{a_4+\cdots}}}}
$$
å¤åˆ¶
<br>
æ•ˆæœ:

<br>
åä¾‹:
x=a_0+\frac{1^2}{a_1+\frac{2^2}{a_2+\frac{3^2}{a_3+\frac{4^2}{a_4+\cdots}}}}
å¤åˆ¶
<br>
æ•ˆæœ:

<br>
è¡¥å……:  å½“ç„¶,ä½ å¯ä»¥ä½¿ç”¨\fracæ¥è¡¨è¾¾è¿åˆ†æ•°çš„ç´§ç¼©è®°æ³•ã€‚
<br>
ä»£ç :
$$
x=a_0+\frac{1^2}{a_1+}\frac{2^2}{a_2+}\frac{3^2}{a_3+}\frac{4^2}{a_4+}\cdots
$$
å¤åˆ¶
<br>
æ•ˆæœ:

<br><br>
è¯´æ˜:  ä½¿ç”¨ä¸€è¡Œ$\require{AMScd}$è¯­å¥æ¥å…è®¸äº¤æ¢å›¾è¡¨çš„æ˜¾ç¤º,å¹¶é€šè¿‡åœ¨å¼€å¤´ä½¿ç”¨\begin{CD},ç»“å°¾ä½¿ç”¨\end{CD}æ¥åˆ›å»ºã€‚
<br>
ä»£ç :
$$
\require{AMScd}
\begin{CD}
A@&gt;a&gt;&gt;B\\
@VbVV\# @VcVV\\
C @&gt;&gt;d&gt; D
\end{CD}
$$
å¤åˆ¶
<br>
æ•ˆæœ:
\require{AMScd}
\begin{CD}
A@&gt;a&gt;&gt;B\\
@V b V V\# @VV c V\\
C @&gt;&gt;d&gt; D
\end{CD}
<br>
è¡¥å……:  å…¶ä¸­,@&gt;&gt;&gt;ä»£è¡¨å³ç®­å¤´ã€@&lt;&lt;&lt;ä»£è¡¨å·¦ç®­å¤´ã€@VVVä»£è¡¨ä¸‹ç®­å¤´ã€@AAAä»£è¡¨ä¸Šç®­å¤´ã€@=ä»£è¡¨æ°´å¹³åŒå®çº¿ã€@|ä»£è¡¨ç«–ç›´åŒå®çº¿ã€@.ä»£è¡¨æ²¡æœ‰ç®­å¤´ã€‚åœ¨@&gt;&gt;&gt;çš„&gt;&gt;&gt;ä¹‹é—´ä»»æ„æ’å…¥æ–‡å­—å³ä»£è¡¨è¯¥ç®­å¤´çš„æ³¨é‡Šæ–‡å­—ã€‚
<br>
ä»£ç :
$$
\begin{CD}
A@&gt;&gt;&gt;B@&gt;{\text{very long label}}&gt;&gt;C\\
@.@AAA@|\\
D@=E@&lt;&lt;&lt;F
\end{CD}
$$
å¤åˆ¶
<br>
æ•ˆæœ:

<br><br>

<br>æœç´¢

<br><br><br>
ä»£ç 
&lt;center&gt;å†…å®¹&lt;/center&gt;
å¤åˆ¶
<br>
æ•ˆæœ
å†…å®¹
<br><br>
ä»£ç :
&lt;kbd&gt;å†…å®¹&lt;/kbd&gt;
å¤åˆ¶
<br>
æ•ˆæœ:
å†…å®¹
<br><br>
ä»£ç :
&lt;b&gt;åŠ ç²—&lt;/b&gt;
å¤åˆ¶
<br>
æ•ˆæœ:
åŠ ç²—
<br><br>
ä»£ç :
&lt;i&gt;å€¾æ–œ&lt;/i&gt;
å¤åˆ¶
<br>
æ•ˆæœ:
å€¾æ–œ
<br><br>
ä»£ç :
å¼€å§‹&lt;sup&gt;123hiä½ å¥½&lt;/sup&gt;
å¼€å§‹&lt;sub&gt;321hiä½ å¥½&lt;/sub&gt;
å¤åˆ¶
<br>
æ•ˆæœ:
å¼€å§‹123hiä½ å¥½
å¼€å§‹321hiä½ å¥½
<br><br>
ä»£ç ï¼š
&amp;#x27A4;
å¤åˆ¶
<br>
æ•ˆæœï¼š
â¤
<br>
<br>
<br>è¿™æ˜¯ä¸€ä¸ªéå¸¸å¥½ç”¨çš„æ¡†æ¶ã€‚<a href="\#fnref-1-84222bcfa849571c" class="footnote-backref footnote-link" target="_self" rel="noopener">â†©ï¸</a>
]]></description><link>Typora\Typora.html</link><guid isPermaLink="false">Typora/Typora.md</guid><pubDate>Sat, 14 Oct 2023 12:16:45 GMT</pubDate></item><item><title><![CDATA[typoreä¸Šä¼ å›¾ç‰‡é…ç½®]]></title><description><![CDATA[ 
 <br>area:oss-cn-chengdu<br>bucket:typora-yxh<br><br>AccessKey Secret: RC0zymL0TYr8Oif5HeI6oNGRQCk3QF<br>TextcustomUrl:http://typora-yxh.oss-cn-chengdu.aliyuncs.com
å¤åˆ¶<br>Text{
    "picBed": {
        "uploader": "aliyun",
        "aliyun": {
        "accessKeyId": "",
        "accessKeySecret": "RC0zymL0TYr8Oif5HeI6oNGRQCk3QF",
        "bucket": "typora-yxh",
        "area": "oss-cn-chengdu", 
        "path": "img/", 
        "customUrl": "http://typora-yxh.oss-cn-chengdu.aliyuncs.com",
        "options": "" 
      }
    },
    "picgoPlugins": {}
  }
å¤åˆ¶]]></description><link>Typora\typoreä¸Šä¼ å›¾ç‰‡é…ç½®.html</link><guid isPermaLink="false">Typora/typoreä¸Šä¼ å›¾ç‰‡é…ç½®.md</guid><pubDate>Tue, 26 Sep 2023 06:27:53 GMT</pubDate></item><item><title><![CDATA[å­¦ä¹ åˆå§‹é¡µé¢]]></title><description><![CDATA[ 
 ]]></description><link>å­¦ä¹ åˆå§‹é¡µé¢.html</link><guid isPermaLink="false">å­¦ä¹ åˆå§‹é¡µé¢.md</guid><pubDate>Wed, 18 Oct 2023 01:41:11 GMT</pubDate></item><item><title><![CDATA[AnuPpuccinMDå…ƒç´ è®¾ç½®å¯¹ç…§]]></title><description><![CDATA[<a class="tag" href="?query=tag:test1" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#test1</a> <a class="tag" href="?query=tag:test2" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#test2</a> 
 <br><br>Note
Here's a callout block.
It supports markdown and <a data-tooltip-position="top" aria-label="Internal link" data-href="Internal link" href="\Internal link" class="internal-link" target="_self" rel="noopener">wikilinks</a>.
<br>Abstract<br>Todo<br>Info<br>Tip<br>Success<br>Question<br>Warning<br>Failure<br>Danger<br>Bug<br>Example<br>Quote<br><br>
<br>Unchecked - [ ]
<br>Checked - [x]
<br>Rescheduled - [&gt;]
<br>Scheduled - [&lt;]
<br>Important - [!]
<br>Cancelled - [-]
<br>In Progress - [/]
<br>Quote- ["]
<br>Question - [?]
<br>Star - [*]
<br>Note - [n]
<br>Location - [l]
<br>Information - [i]
<br>Idea - [I]
<br>Amount - [S]
<br>Pro - [p]
<br>Con - [c]
<br>Bookmark - [b]
<br><br>
<br>è¿™æ˜¯000000
<br>è¿™æ˜¯11111111111111
<br>è¿™æ˜¯2 2222222222222222222
<br>è¿™æ˜¯3 33333333333333333333333333
<br>è¿™æ˜¯4 4444444444444444444444444444444444
<br>è¿™æ˜¯5 55555555555555555555555555555555555555555
<br>è¿™æ˜¯6 666666666666666666666666666666666666666666666666
<br>è¿™æ˜¯7 7777777777777777777777777777777777777777777777777777777
<br>è¿™8888888888888888888888888888888888888888888888888888888888888888888
<br>è¿™æ˜¯9 9999999999999999999999999999999999999999999999999999999999999999999999
<br><br>
Obsidianå®ä½“æ˜¯ç´«è‰²é¸¡è›‹Obsidianå®ä½“æ˜¯ç´«è‰²é¸¡è›‹Obsidianå®ä½“æ˜¯ç´«è‰²é¸¡Obsidianå®ä½“æ˜¯ç´«è‰²é¸¡è›‹Obsidianå®ä½“æ˜¯ç´«è‰²é¸¡è›‹Obsidian,å®ä½“æ˜¯ç´«è‰²é¸¡è›‹Obsidianå®ä½“æ˜¯ç´«è‰²é¸¡è›‹5555
ssss
5555
<br>
çœŸçš„ï¼Œä¸éª—äººã€‚
<br><br>Test
let x = 4;

for (x &lt; 12) {x++}

å¤åˆ¶<br><br><br>
<br>aaa

<br>aaa

<br>4444
<br>aaa

<br>33333

<br>4444

<br>444




<br>4444 


<br>aaa


<br>5555


<br>55555
<br><br>
<br>aaa
<br>aaa

<br>2222

<br>4444

<br>333
<br>5555


<br>55555


<br>2333


<br>2222

<br>222
<br>222
<br>444


<br>aaa

<br>3333
<br>aaa

<br>aaa




<br>ccc
<br>ddd

<br>aaa

<br>22

<br>33
<br>44


<br>44


<br>bbb


<br><br><br><br><br><br><a href=".?query=tag:test1" class="tag" target="_blank" rel="noopener">#test1</a> <a href=".?query=tag:test2" class="tag" target="_blank" rel="noopener">#test2</a><br><br><br><br><br><br><br><br><br><br><br><br><br><br>Bold Test<br><br>Italic Test<br><br>Highlight Test<br>Pythonclass DzxSpider(scrapy.Spider):
    name = "dzx"
    # allowed_domains = ["duanzixing.com"]
    start_urls = ["https://duanzixing.com"]

    def parse(self, response, **kwargs):
        print(response)
        # è·å–å“åº”çš„å†…å®¹
        # print(response.text)
        # å½“å‰å“åº”çš„url
        print('response.url:', response.url)
        # å½“å‰å“åº”å¯¹åº”çš„è¯·æ±‚çš„url
        print('response.request.url:', response.request.url)
        # å“åº”å¤´
        print('response.headers:', response.headers)
        # å“åº”çš„è¯·æ±‚å¤´
        print('response.request.headers:', response.request.headers)
        # å“åº”ä½“
        print('response.body:', response.body)
        # è¿”å›å“åº”çš„å†…å®¹
        print('response.text:', response.text)
        # å“åº”çš„çŠ¶æ€ç 
        print('response.status:', response.status)
        # è·å–å“åº”çš„jsonæ•°æ® å¦‚æœå“åº”çš„å†…å®¹ä¸æ˜¯jsonæ ¼å¼çš„æ•°æ®ï¼Œä¼šæŠ¥é”™
        # print('response.json():', response.json())
        
å¤åˆ¶]]></description><link>AnuPpuccinMDå…ƒç´ è®¾ç½®å¯¹ç…§.html</link><guid isPermaLink="false">AnuPpuccinMDå…ƒç´ è®¾ç½®å¯¹ç…§.md</guid><pubDate>Mon, 18 Mar 2024 15:58:37 GMT</pubDate></item><item><title><![CDATA[HomeğŸ¡]]></title><description><![CDATA[ 
 <br><br>èŠ±æºª æœ€è¿‘ 7 å¤©çš„å¤©æ°”å¦‚ä¸‹ï¼Œå‚è€ƒå¤©æ°”åˆ¶å®šä½ çš„è®¡åˆ’å§ï¼ä»Šå¤©æ˜¯2024å¹´03æœˆ19æ—¥ï¼ŒğŸŒ§é˜µé›¨ï¼Œ5~15â„ƒ
äº‘æœµå……ç›ˆäº†60%çš„å¤©ç©º
é¡ºä¾¿ï¼Œå¦‚æœæœ‰æœºä¼šçœ‹è§æœˆäº®çš„è¯ï¼Œé‚£ä¹ˆå®ƒåº”è¯¥æ˜¯è¿™æ ·çš„ğŸŒ”<br>ä»Šå¤©æ˜¯ 2024å¹´3æœˆ19æ—¥ï¼Œ2024 å¹´å·²ç»è¿‡å»äº† 78 å¤©<br>20242023MonWedFriDecFebMarAprMayJunJulAugSepOctNovDec<br><br>]]></description><link>HomeğŸ¡.html</link><guid isPermaLink="false">HomeğŸ¡.md</guid><pubDate>Mon, 18 Mar 2024 15:58:30 GMT</pubDate></item><item><title><![CDATA[Obsidianæ’ä»¶æ•™ç¨‹]]></title><description><![CDATA[ 
 <br>20242023MonWedFriDecFebMarAprMayJunJulAugSepOctNovDec<br>ä»Šå¤©æ˜¯2024å¹´3æœˆ19æ—¥ï¼Œ2024 å¹´å·²ç»è¿‡å»äº† 78 å¤©<br>Dataview: No results to show for table query.<br>gpté“¾æ¥ <a data-tooltip-position="top" aria-label="https://chat-shared2.zhile.io/?v=2" rel="noopener" class="external-link" href="https://chat-shared2.zhile.io/?v=2" target="_blank">ChatGPT</a><br><br><a href="https://www.bilibili.com" class="rich-link-card" target="_blank" rel="noopener">
	<div class="rich-link-image-container"><div style="background-image: url('https://static.hdslb.com/mobile/img/512.png')" class="rich-link-image"></div></div>
	<div class="rich-link-card-text heading-wrapper"><p class="rich-link-card-description"></p><p class="rich-link-href"></p><div class="heading-children"></div></div>
</a>
		
	
	
		
		
		å“”å“©å“”å“©ï¼ˆbilibili.com)æ˜¯å›½å†…çŸ¥åçš„è§†é¢‘å¼¹å¹•ç½‘ç«™ï¼Œè¿™é‡Œæœ‰åŠæ—¶çš„åŠ¨æ¼«æ–°ç•ªï¼Œæ´»è·ƒçš„ACGæ°›å›´ï¼Œæœ‰åˆ›æ„çš„Upä¸»ã€‚å¤§å®¶å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°è®¸å¤šæ¬¢ä¹ã€‚
		
		
		https://www.bilibili.com
		
	<br>é€‰ä¸­é“¾æ¥ç„¶åç›´æ¥ ALT + I<br><br>ç›´æ¥æ‰“å¼€ç½‘é¡µ<br>*<br><br>CTRL + L å°±è¡Œ
<a data-tooltip-position="top" aria-label="https://stentvessel.shop/index.html" rel="noopener" class="external-link" href="https://stentvessel.shop/index.html" target="_blank">æœ€å¥½ç”¨çš„VPN</a><br><br>å¤§çº²éšä¾¿ç”¨å’¯<br><br><a data-tooltip-position="top" aria-label="https://www.bilibili.com/video/BV18a411r7mt/?spm_id_from=333.788.recommend_more_video.1&amp;vd_source=43e56318cc2b14ddb96ad55ad99d99df" rel="noopener" class="external-link" href="https://www.bilibili.com/video/BV18a411r7mt/?spm_id_from=333.788.recommend_more_video.1&amp;vd_source=43e56318cc2b14ddb96ad55ad99d99df" target="_blank">ä¹Ÿè®¸æ˜¯Bç«™æœ€å¥½çš„Obsidianæ–°æ‰‹æ•™ç¨‹ï¼çˆ†è‚30å¤©ï¼Œä¸€ç«™å¼å…¥é—¨åŒå‘é“¾æ¥ç¬”è®°è½¯ä»¶_å“”å“©å“”å“©_bilibili</a><br><br>f5 ç›´æ¥ç”Ÿæˆå¤§çº²ç›®å½•<br><br><a data-tooltip-position="top" aria-label="https://pan.baidu.com/disk/main#/index?category=all&amp;path=%2F%E5%85%B0%E6%96%B9%E9%BE%99" rel="noopener" class="external-link" href="https://pan.baidu.com/disk/main#/index?category=all&amp;path=%2F%E5%85%B0%E6%96%B9%E9%BE%99" target="_blank">Site Unreachable</a><br><br><br>]]></description><link>Obsidianæ’ä»¶æ•™ç¨‹.html</link><guid isPermaLink="false">Obsidianæ’ä»¶æ•™ç¨‹.md</guid><pubDate>Wed, 18 Oct 2023 01:30:58 GMT</pubDate></item></channel></rss>